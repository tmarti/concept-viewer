var ek=Object.defineProperty;var tk=(n,e,t)=>e in n?ek(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var wp=(n,e,t)=>(tk(n,typeof e!="symbol"?e+"":e,t),t),m_=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var ts=(n,e,t)=>(m_(n,e,"read from private field"),t?t.call(n):e.get(n)),g_=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Sp=(n,e,t,i)=>(m_(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t);var v_=(n,e,t)=>(m_(n,e,"access private method"),t);function nk(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var Ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function u1(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var hP={exports:{}},Zv={},fP={exports:{}},Lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ad=Symbol.for("react.element"),ik=Symbol.for("react.portal"),rk=Symbol.for("react.fragment"),sk=Symbol.for("react.strict_mode"),ok=Symbol.for("react.profiler"),ak=Symbol.for("react.provider"),lk=Symbol.for("react.context"),uk=Symbol.for("react.forward_ref"),ck=Symbol.for("react.suspense"),hk=Symbol.for("react.memo"),fk=Symbol.for("react.lazy"),tT=Symbol.iterator;function dk(n){return n===null||typeof n!="object"?null:(n=tT&&n[tT]||n["@@iterator"],typeof n=="function"?n:null)}var dP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pP=Object.assign,mP={};function Cc(n,e,t){this.props=n,this.context=e,this.refs=mP,this.updater=t||dP}Cc.prototype.isReactComponent={};Cc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Cc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function gP(){}gP.prototype=Cc.prototype;function c1(n,e,t){this.props=n,this.context=e,this.refs=mP,this.updater=t||dP}var h1=c1.prototype=new gP;h1.constructor=c1;pP(h1,Cc.prototype);h1.isPureReactComponent=!0;var nT=Array.isArray,vP=Object.prototype.hasOwnProperty,f1={current:null},yP={key:!0,ref:!0,__self:!0,__source:!0};function _P(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)vP.call(e,i)&&!yP.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:ad,type:n,key:s,ref:o,props:r,_owner:f1.current}}function pk(n,e){return{$$typeof:ad,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function d1(n){return typeof n=="object"&&n!==null&&n.$$typeof===ad}function mk(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var iT=/\/+/g;function y_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?mk(""+n.key):e.toString(36)}function Ym(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case ad:case ik:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+y_(o,0):i,nT(r)?(t="",n!=null&&(t=n.replace(iT,"$&/")+"/"),Ym(r,e,t,"",function(u){return u})):r!=null&&(d1(r)&&(r=pk(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(iT,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",nT(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+y_(s,a);o+=Ym(s,e,t,l,r)}else if(l=dk(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+y_(s,a++),o+=Ym(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mp(n,e,t){if(n==null)return n;var i=[],r=0;return Ym(n,i,"","",function(s){return e.call(t,s,r++)}),i}function gk(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Hi={current:null},Zm={transition:null},vk={ReactCurrentDispatcher:Hi,ReactCurrentBatchConfig:Zm,ReactCurrentOwner:f1};function xP(){throw Error("act(...) is not supported in production builds of React.")}Lt.Children={map:Mp,forEach:function(n,e,t){Mp(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Mp(n,function(){e++}),e},toArray:function(n){return Mp(n,function(e){return e})||[]},only:function(n){if(!d1(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Lt.Component=Cc;Lt.Fragment=rk;Lt.Profiler=ok;Lt.PureComponent=c1;Lt.StrictMode=sk;Lt.Suspense=ck;Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;Lt.act=xP;Lt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=pP({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=f1.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)vP.call(e,l)&&!yP.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:ad,type:n.type,key:r,ref:s,props:i,_owner:o}};Lt.createContext=function(n){return n={$$typeof:lk,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:ak,_context:n},n.Consumer=n};Lt.createElement=_P;Lt.createFactory=function(n){var e=_P.bind(null,n);return e.type=n,e};Lt.createRef=function(){return{current:null}};Lt.forwardRef=function(n){return{$$typeof:uk,render:n}};Lt.isValidElement=d1;Lt.lazy=function(n){return{$$typeof:fk,_payload:{_status:-1,_result:n},_init:gk}};Lt.memo=function(n,e){return{$$typeof:hk,type:n,compare:e===void 0?null:e}};Lt.startTransition=function(n){var e=Zm.transition;Zm.transition={};try{n()}finally{Zm.transition=e}};Lt.unstable_act=xP;Lt.useCallback=function(n,e){return Hi.current.useCallback(n,e)};Lt.useContext=function(n){return Hi.current.useContext(n)};Lt.useDebugValue=function(){};Lt.useDeferredValue=function(n){return Hi.current.useDeferredValue(n)};Lt.useEffect=function(n,e){return Hi.current.useEffect(n,e)};Lt.useId=function(){return Hi.current.useId()};Lt.useImperativeHandle=function(n,e,t){return Hi.current.useImperativeHandle(n,e,t)};Lt.useInsertionEffect=function(n,e){return Hi.current.useInsertionEffect(n,e)};Lt.useLayoutEffect=function(n,e){return Hi.current.useLayoutEffect(n,e)};Lt.useMemo=function(n,e){return Hi.current.useMemo(n,e)};Lt.useReducer=function(n,e,t){return Hi.current.useReducer(n,e,t)};Lt.useRef=function(n){return Hi.current.useRef(n)};Lt.useState=function(n){return Hi.current.useState(n)};Lt.useSyncExternalStore=function(n,e,t){return Hi.current.useSyncExternalStore(n,e,t)};Lt.useTransition=function(){return Hi.current.useTransition()};Lt.version="18.3.1";fP.exports=Lt;var Y=fP.exports;const wP=l1(Y),rT=nk({__proto__:null,default:wP},[Y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yk=Y,_k=Symbol.for("react.element"),xk=Symbol.for("react.fragment"),wk=Object.prototype.hasOwnProperty,Sk=yk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mk={key:!0,ref:!0,__self:!0,__source:!0};function SP(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)wk.call(e,i)&&!Mk.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:_k,type:n,key:s,ref:o,props:r,_owner:Sk.current}}Zv.Fragment=xk;Zv.jsx=SP;Zv.jsxs=SP;hP.exports=Zv;var We=hP.exports,Kx={},MP={exports:{}},Ar={},EP={exports:{}},bP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(k,W){var G=k.length;k.push(W);e:for(;0<G;){var ne=G-1>>>1,me=k[ne];if(0<r(me,W))k[ne]=W,k[G]=me,G=ne;else break e}}function t(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var W=k[0],G=k.pop();if(G!==W){k[0]=G;e:for(var ne=0,me=k.length,_e=me>>>1;ne<_e;){var J=2*(ne+1)-1,pe=k[J],Me=J+1,de=k[Me];if(0>r(pe,G))Me<me&&0>r(de,pe)?(k[ne]=de,k[Me]=G,ne=Me):(k[ne]=pe,k[J]=G,ne=J);else if(Me<me&&0>r(de,G))k[ne]=de,k[Me]=G,ne=Me;else break e}}return W}function r(k,W){var G=k.sortIndex-W.sortIndex;return G!==0?G:k.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,d=null,p=3,g=!1,v=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(k){for(var W=t(u);W!==null;){if(W.callback===null)i(u);else if(W.startTime<=k)i(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(u)}}function b(k){if(x=!1,S(k),!v)if(t(l)!==null)v=!0,Q(R);else{var W=t(u);W!==null&&oe(b,W.startTime-k)}}function R(k,W){v=!1,x&&(x=!1,m(L),L=-1),g=!0;var G=p;try{for(S(W),d=t(l);d!==null&&(!(d.expirationTime>W)||k&&!N());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,p=d.priorityLevel;var me=ne(d.expirationTime<=W);W=n.unstable_now(),typeof me=="function"?d.callback=me:d===t(l)&&i(l),S(W)}else i(l);d=t(l)}if(d!==null)var _e=!0;else{var J=t(u);J!==null&&oe(b,J.startTime-W),_e=!1}return _e}finally{d=null,p=G,g=!1}}var A=!1,C=null,L=-1,I=5,E=-1;function N(){return!(n.unstable_now()-E<I)}function z(){if(C!==null){var k=n.unstable_now();E=k;var W=!0;try{W=C(!0,k)}finally{W?O():(A=!1,C=null)}}else A=!1}var O;if(typeof w=="function")O=function(){w(z)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,j=q.port2;q.port1.onmessage=z,O=function(){j.postMessage(null)}}else O=function(){_(z,0)};function Q(k){C=k,A||(A=!0,O())}function oe(k,W){L=_(function(){k(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){v||g||(v=!0,Q(R))},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(k){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var G=p;p=W;try{return k()}finally{p=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,W){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var G=p;p=k;try{return W()}finally{p=G}},n.unstable_scheduleCallback=function(k,W,G){var ne=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ne+G:ne):G=ne,k){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=G+me,k={id:f++,callback:W,priorityLevel:k,startTime:G,expirationTime:me,sortIndex:-1},G>ne?(k.sortIndex=G,e(u,k),t(l)===null&&k===t(u)&&(x?(m(L),L=-1):x=!0,oe(b,G-ne))):(k.sortIndex=me,e(l,k),v||g||(v=!0,Q(R))),k},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(k){var W=p;return function(){var G=p;p=W;try{return k.apply(this,arguments)}finally{p=G}}}})(bP);EP.exports=bP;var Ek=EP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bk=Y,Mr=Ek;function Te(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TP=new Set,df={};function Ll(n,e){dc(n,e),dc(n+"Capture",e)}function dc(n,e){for(df[n]=e,n=0;n<e.length;n++)TP.add(e[n])}var Eo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jx=Object.prototype.hasOwnProperty,Tk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sT={},oT={};function Ak(n){return Jx.call(oT,n)?!0:Jx.call(sT,n)?!1:Tk.test(n)?oT[n]=!0:(sT[n]=!0,!1)}function Ck(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Rk(n,e,t,i){if(e===null||typeof e>"u"||Ck(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gi(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ui={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ui[n]=new Gi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ui[e]=new Gi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ui[n]=new Gi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ui[n]=new Gi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ui[n]=new Gi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ui[n]=new Gi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ui[n]=new Gi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ui[n]=new Gi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ui[n]=new Gi(n,5,!1,n.toLowerCase(),null,!1,!1)});var p1=/[\-:]([a-z])/g;function m1(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(p1,m1);ui[e]=new Gi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(p1,m1);ui[e]=new Gi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(p1,m1);ui[e]=new Gi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ui[n]=new Gi(n,1,!1,n.toLowerCase(),null,!1,!1)});ui.xlinkHref=new Gi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ui[n]=new Gi(n,1,!1,n.toLowerCase(),null,!0,!0)});function g1(n,e,t,i){var r=ui.hasOwnProperty(e)?ui[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Rk(e,t,r,i)&&(t=null),i||r===null?Ak(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Lo=bk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ep=Symbol.for("react.element"),ku=Symbol.for("react.portal"),Fu=Symbol.for("react.fragment"),v1=Symbol.for("react.strict_mode"),Qx=Symbol.for("react.profiler"),AP=Symbol.for("react.provider"),CP=Symbol.for("react.context"),y1=Symbol.for("react.forward_ref"),ew=Symbol.for("react.suspense"),tw=Symbol.for("react.suspense_list"),_1=Symbol.for("react.memo"),ia=Symbol.for("react.lazy"),RP=Symbol.for("react.offscreen"),aT=Symbol.iterator;function lh(n){return n===null||typeof n!="object"?null:(n=aT&&n[aT]||n["@@iterator"],typeof n=="function"?n:null)}var xn=Object.assign,__;function Nh(n){if(__===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);__=e&&e[1]||""}return`
`+__+n}var x_=!1;function w_(n,e){if(!n||x_)return"";x_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{x_=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Nh(n):""}function Pk(n){switch(n.tag){case 5:return Nh(n.type);case 16:return Nh("Lazy");case 13:return Nh("Suspense");case 19:return Nh("SuspenseList");case 0:case 2:case 15:return n=w_(n.type,!1),n;case 11:return n=w_(n.type.render,!1),n;case 1:return n=w_(n.type,!0),n;default:return""}}function nw(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Fu:return"Fragment";case ku:return"Portal";case Qx:return"Profiler";case v1:return"StrictMode";case ew:return"Suspense";case tw:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case CP:return(n.displayName||"Context")+".Consumer";case AP:return(n._context.displayName||"Context")+".Provider";case y1:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case _1:return e=n.displayName||null,e!==null?e:nw(n.type)||"Memo";case ia:e=n._payload,n=n._init;try{return nw(n(e))}catch{}}return null}function Ik(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nw(e);case 8:return e===v1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _a(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function PP(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Lk(n){var e=PP(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function bp(n){n._valueTracker||(n._valueTracker=Lk(n))}function IP(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=PP(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Og(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function iw(n,e){var t=e.checked;return xn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function lT(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=_a(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function LP(n,e){e=e.checked,e!=null&&g1(n,"checked",e,!1)}function rw(n,e){LP(n,e);var t=_a(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?sw(n,e.type,t):e.hasOwnProperty("defaultValue")&&sw(n,e.type,_a(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function uT(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function sw(n,e,t){(e!=="number"||Og(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Dh=Array.isArray;function tc(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+_a(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function ow(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Te(91));return xn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function cT(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Te(92));if(Dh(t)){if(1<t.length)throw Error(Te(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:_a(t)}}function NP(n,e){var t=_a(e.value),i=_a(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function hT(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function DP(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function aw(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?DP(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Tp,OP=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Tp=Tp||document.createElement("div"),Tp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function pf(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Zh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nk=["Webkit","ms","Moz","O"];Object.keys(Zh).forEach(function(n){Nk.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Zh[e]=Zh[n]})});function kP(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Zh.hasOwnProperty(n)&&Zh[n]?(""+e).trim():e+"px"}function FP(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=kP(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var Dk=xn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lw(n,e){if(e){if(Dk[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Te(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Te(62))}}function uw(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cw=null;function x1(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var hw=null,nc=null,ic=null;function fT(n){if(n=cd(n)){if(typeof hw!="function")throw Error(Te(280));var e=n.stateNode;e&&(e=t0(e),hw(n.stateNode,n.type,e))}}function UP(n){nc?ic?ic.push(n):ic=[n]:nc=n}function zP(){if(nc){var n=nc,e=ic;if(ic=nc=null,fT(n),e)for(n=0;n<e.length;n++)fT(e[n])}}function BP(n,e){return n(e)}function VP(){}var S_=!1;function HP(n,e,t){if(S_)return n(e,t);S_=!0;try{return BP(n,e,t)}finally{S_=!1,(nc!==null||ic!==null)&&(VP(),zP())}}function mf(n,e){var t=n.stateNode;if(t===null)return null;var i=t0(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Te(231,e,typeof t));return t}var fw=!1;if(Eo)try{var uh={};Object.defineProperty(uh,"passive",{get:function(){fw=!0}}),window.addEventListener("test",uh,uh),window.removeEventListener("test",uh,uh)}catch{fw=!1}function Ok(n,e,t,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(f){this.onError(f)}}var Kh=!1,kg=null,Fg=!1,dw=null,kk={onError:function(n){Kh=!0,kg=n}};function Fk(n,e,t,i,r,s,o,a,l){Kh=!1,kg=null,Ok.apply(kk,arguments)}function Uk(n,e,t,i,r,s,o,a,l){if(Fk.apply(this,arguments),Kh){if(Kh){var u=kg;Kh=!1,kg=null}else throw Error(Te(198));Fg||(Fg=!0,dw=u)}}function Nl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function GP(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function dT(n){if(Nl(n)!==n)throw Error(Te(188))}function zk(n){var e=n.alternate;if(!e){if(e=Nl(n),e===null)throw Error(Te(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return dT(r),n;if(s===i)return dT(r),e;s=s.sibling}throw Error(Te(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Te(189))}}if(t.alternate!==i)throw Error(Te(190))}if(t.tag!==3)throw Error(Te(188));return t.stateNode.current===t?n:e}function WP(n){return n=zk(n),n!==null?jP(n):null}function jP(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=jP(n);if(e!==null)return e;n=n.sibling}return null}var XP=Mr.unstable_scheduleCallback,pT=Mr.unstable_cancelCallback,Bk=Mr.unstable_shouldYield,Vk=Mr.unstable_requestPaint,Ln=Mr.unstable_now,Hk=Mr.unstable_getCurrentPriorityLevel,w1=Mr.unstable_ImmediatePriority,$P=Mr.unstable_UserBlockingPriority,Ug=Mr.unstable_NormalPriority,Gk=Mr.unstable_LowPriority,qP=Mr.unstable_IdlePriority,Kv=null,Vs=null;function Wk(n){if(Vs&&typeof Vs.onCommitFiberRoot=="function")try{Vs.onCommitFiberRoot(Kv,n,void 0,(n.current.flags&128)===128)}catch{}}var gs=Math.clz32?Math.clz32:$k,jk=Math.log,Xk=Math.LN2;function $k(n){return n>>>=0,n===0?32:31-(jk(n)/Xk|0)|0}var Ap=64,Cp=4194304;function Oh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function zg(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Oh(a):(s&=o,s!==0&&(i=Oh(s)))}else o=t&~r,o!==0?i=Oh(o):s!==0&&(i=Oh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-gs(e),r=1<<t,i|=n[t],e&=~r;return i}function qk(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yk(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-gs(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=qk(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function pw(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function YP(){var n=Ap;return Ap<<=1,!(Ap&4194240)&&(Ap=64),n}function M_(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function ld(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-gs(e),n[e]=t}function Zk(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-gs(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function S1(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-gs(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Zt=0;function ZP(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var KP,M1,JP,QP,e2,mw=!1,Rp=[],ca=null,ha=null,fa=null,gf=new Map,vf=new Map,sa=[],Kk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mT(n,e){switch(n){case"focusin":case"focusout":ca=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":gf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vf.delete(e.pointerId)}}function ch(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=cd(e),e!==null&&M1(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function Jk(n,e,t,i,r){switch(e){case"focusin":return ca=ch(ca,n,e,t,i,r),!0;case"dragenter":return ha=ch(ha,n,e,t,i,r),!0;case"mouseover":return fa=ch(fa,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return gf.set(s,ch(gf.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,vf.set(s,ch(vf.get(s)||null,n,e,t,i,r)),!0}return!1}function t2(n){var e=ol(n.target);if(e!==null){var t=Nl(e);if(t!==null){if(e=t.tag,e===13){if(e=GP(t),e!==null){n.blockedOn=e,e2(n.priority,function(){JP(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Km(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=gw(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);cw=i,t.target.dispatchEvent(i),cw=null}else return e=cd(t),e!==null&&M1(e),n.blockedOn=t,!1;e.shift()}return!0}function gT(n,e,t){Km(n)&&t.delete(e)}function Qk(){mw=!1,ca!==null&&Km(ca)&&(ca=null),ha!==null&&Km(ha)&&(ha=null),fa!==null&&Km(fa)&&(fa=null),gf.forEach(gT),vf.forEach(gT)}function hh(n,e){n.blockedOn===e&&(n.blockedOn=null,mw||(mw=!0,Mr.unstable_scheduleCallback(Mr.unstable_NormalPriority,Qk)))}function yf(n){function e(r){return hh(r,n)}if(0<Rp.length){hh(Rp[0],n);for(var t=1;t<Rp.length;t++){var i=Rp[t];i.blockedOn===n&&(i.blockedOn=null)}}for(ca!==null&&hh(ca,n),ha!==null&&hh(ha,n),fa!==null&&hh(fa,n),gf.forEach(e),vf.forEach(e),t=0;t<sa.length;t++)i=sa[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<sa.length&&(t=sa[0],t.blockedOn===null);)t2(t),t.blockedOn===null&&sa.shift()}var rc=Lo.ReactCurrentBatchConfig,Bg=!0;function eF(n,e,t,i){var r=Zt,s=rc.transition;rc.transition=null;try{Zt=1,E1(n,e,t,i)}finally{Zt=r,rc.transition=s}}function tF(n,e,t,i){var r=Zt,s=rc.transition;rc.transition=null;try{Zt=4,E1(n,e,t,i)}finally{Zt=r,rc.transition=s}}function E1(n,e,t,i){if(Bg){var r=gw(n,e,t,i);if(r===null)N_(n,e,i,Vg,t),mT(n,i);else if(Jk(r,n,e,t,i))i.stopPropagation();else if(mT(n,i),e&4&&-1<Kk.indexOf(n)){for(;r!==null;){var s=cd(r);if(s!==null&&KP(s),s=gw(n,e,t,i),s===null&&N_(n,e,i,Vg,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else N_(n,e,i,null,t)}}var Vg=null;function gw(n,e,t,i){if(Vg=null,n=x1(i),n=ol(n),n!==null)if(e=Nl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=GP(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Vg=n,null}function n2(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hk()){case w1:return 1;case $P:return 4;case Ug:case Gk:return 16;case qP:return 536870912;default:return 16}default:return 16}}var la=null,b1=null,Jm=null;function i2(){if(Jm)return Jm;var n,e=b1,t=e.length,i,r="value"in la?la.value:la.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Jm=r.slice(n,1<i?1-i:void 0)}function Qm(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Pp(){return!0}function vT(){return!1}function Cr(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Pp:vT,this.isPropagationStopped=vT,this}return xn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Pp)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Pp)},persist:function(){},isPersistent:Pp}),e}var Rc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},T1=Cr(Rc),ud=xn({},Rc,{view:0,detail:0}),nF=Cr(ud),E_,b_,fh,Jv=xn({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:A1,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==fh&&(fh&&n.type==="mousemove"?(E_=n.screenX-fh.screenX,b_=n.screenY-fh.screenY):b_=E_=0,fh=n),E_)},movementY:function(n){return"movementY"in n?n.movementY:b_}}),yT=Cr(Jv),iF=xn({},Jv,{dataTransfer:0}),rF=Cr(iF),sF=xn({},ud,{relatedTarget:0}),T_=Cr(sF),oF=xn({},Rc,{animationName:0,elapsedTime:0,pseudoElement:0}),aF=Cr(oF),lF=xn({},Rc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),uF=Cr(lF),cF=xn({},Rc,{data:0}),_T=Cr(cF),hF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pF(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=dF[n])?!!e[n]:!1}function A1(){return pF}var mF=xn({},ud,{key:function(n){if(n.key){var e=hF[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Qm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?fF[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:A1,charCode:function(n){return n.type==="keypress"?Qm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Qm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),gF=Cr(mF),vF=xn({},Jv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xT=Cr(vF),yF=xn({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:A1}),_F=Cr(yF),xF=xn({},Rc,{propertyName:0,elapsedTime:0,pseudoElement:0}),wF=Cr(xF),SF=xn({},Jv,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),MF=Cr(SF),EF=[9,13,27,32],C1=Eo&&"CompositionEvent"in window,Jh=null;Eo&&"documentMode"in document&&(Jh=document.documentMode);var bF=Eo&&"TextEvent"in window&&!Jh,r2=Eo&&(!C1||Jh&&8<Jh&&11>=Jh),wT=" ",ST=!1;function s2(n,e){switch(n){case"keyup":return EF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function o2(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Uu=!1;function TF(n,e){switch(n){case"compositionend":return o2(e);case"keypress":return e.which!==32?null:(ST=!0,wT);case"textInput":return n=e.data,n===wT&&ST?null:n;default:return null}}function AF(n,e){if(Uu)return n==="compositionend"||!C1&&s2(n,e)?(n=i2(),Jm=b1=la=null,Uu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return r2&&e.locale!=="ko"?null:e.data;default:return null}}var CF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function MT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!CF[n.type]:e==="textarea"}function a2(n,e,t,i){UP(i),e=Hg(e,"onChange"),0<e.length&&(t=new T1("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Qh=null,_f=null;function RF(n){y2(n,0)}function Qv(n){var e=Vu(n);if(IP(e))return n}function PF(n,e){if(n==="change")return e}var l2=!1;if(Eo){var A_;if(Eo){var C_="oninput"in document;if(!C_){var ET=document.createElement("div");ET.setAttribute("oninput","return;"),C_=typeof ET.oninput=="function"}A_=C_}else A_=!1;l2=A_&&(!document.documentMode||9<document.documentMode)}function bT(){Qh&&(Qh.detachEvent("onpropertychange",u2),_f=Qh=null)}function u2(n){if(n.propertyName==="value"&&Qv(_f)){var e=[];a2(e,_f,n,x1(n)),HP(RF,e)}}function IF(n,e,t){n==="focusin"?(bT(),Qh=e,_f=t,Qh.attachEvent("onpropertychange",u2)):n==="focusout"&&bT()}function LF(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Qv(_f)}function NF(n,e){if(n==="click")return Qv(e)}function DF(n,e){if(n==="input"||n==="change")return Qv(e)}function OF(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ys=typeof Object.is=="function"?Object.is:OF;function xf(n,e){if(ys(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!Jx.call(e,r)||!ys(n[r],e[r]))return!1}return!0}function TT(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function AT(n,e){var t=TT(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=TT(t)}}function c2(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?c2(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function h2(){for(var n=window,e=Og();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Og(n.document)}return e}function R1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function kF(n){var e=h2(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&c2(t.ownerDocument.documentElement,t)){if(i!==null&&R1(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=AT(t,s);var o=AT(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var FF=Eo&&"documentMode"in document&&11>=document.documentMode,zu=null,vw=null,ef=null,yw=!1;function CT(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;yw||zu==null||zu!==Og(i)||(i=zu,"selectionStart"in i&&R1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ef&&xf(ef,i)||(ef=i,i=Hg(vw,"onSelect"),0<i.length&&(e=new T1("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=zu)))}function Ip(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Bu={animationend:Ip("Animation","AnimationEnd"),animationiteration:Ip("Animation","AnimationIteration"),animationstart:Ip("Animation","AnimationStart"),transitionend:Ip("Transition","TransitionEnd")},R_={},f2={};Eo&&(f2=document.createElement("div").style,"AnimationEvent"in window||(delete Bu.animationend.animation,delete Bu.animationiteration.animation,delete Bu.animationstart.animation),"TransitionEvent"in window||delete Bu.transitionend.transition);function e0(n){if(R_[n])return R_[n];if(!Bu[n])return n;var e=Bu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in f2)return R_[n]=e[t];return n}var d2=e0("animationend"),p2=e0("animationiteration"),m2=e0("animationstart"),g2=e0("transitionend"),v2=new Map,RT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ma(n,e){v2.set(n,e),Ll(e,[n])}for(var P_=0;P_<RT.length;P_++){var I_=RT[P_],UF=I_.toLowerCase(),zF=I_[0].toUpperCase()+I_.slice(1);Ma(UF,"on"+zF)}Ma(d2,"onAnimationEnd");Ma(p2,"onAnimationIteration");Ma(m2,"onAnimationStart");Ma("dblclick","onDoubleClick");Ma("focusin","onFocus");Ma("focusout","onBlur");Ma(g2,"onTransitionEnd");dc("onMouseEnter",["mouseout","mouseover"]);dc("onMouseLeave",["mouseout","mouseover"]);dc("onPointerEnter",["pointerout","pointerover"]);dc("onPointerLeave",["pointerout","pointerover"]);Ll("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ll("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ll("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ll("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ll("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ll("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BF=new Set("cancel close invalid load scroll toggle".split(" ").concat(kh));function PT(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,Uk(i,e,void 0,n),n.currentTarget=null}function y2(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;PT(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;PT(r,a,u),s=l}}}if(Fg)throw n=dw,Fg=!1,dw=null,n}function sn(n,e){var t=e[Mw];t===void 0&&(t=e[Mw]=new Set);var i=n+"__bubble";t.has(i)||(_2(e,n,2,!1),t.add(i))}function L_(n,e,t){var i=0;e&&(i|=4),_2(t,n,i,e)}var Lp="_reactListening"+Math.random().toString(36).slice(2);function wf(n){if(!n[Lp]){n[Lp]=!0,TP.forEach(function(t){t!=="selectionchange"&&(BF.has(t)||L_(t,!1,n),L_(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Lp]||(e[Lp]=!0,L_("selectionchange",!1,e))}}function _2(n,e,t,i){switch(n2(e)){case 1:var r=eF;break;case 4:r=tF;break;default:r=E1}t=r.bind(null,e,t,n),r=void 0,!fw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function N_(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ol(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}HP(function(){var u=s,f=x1(t),d=[];e:{var p=v2.get(n);if(p!==void 0){var g=T1,v=n;switch(n){case"keypress":if(Qm(t)===0)break e;case"keydown":case"keyup":g=gF;break;case"focusin":v="focus",g=T_;break;case"focusout":v="blur",g=T_;break;case"beforeblur":case"afterblur":g=T_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=yT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=rF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=_F;break;case d2:case p2:case m2:g=aF;break;case g2:g=wF;break;case"scroll":g=nF;break;case"wheel":g=MF;break;case"copy":case"cut":case"paste":g=uF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=xT}var x=(e&4)!==0,_=!x&&n==="scroll",m=x?p!==null?p+"Capture":null:p;x=[];for(var w=u,S;w!==null;){S=w;var b=S.stateNode;if(S.tag===5&&b!==null&&(S=b,m!==null&&(b=mf(w,m),b!=null&&x.push(Sf(w,b,S)))),_)break;w=w.return}0<x.length&&(p=new g(p,v,null,t,f),d.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",p&&t!==cw&&(v=t.relatedTarget||t.fromElement)&&(ol(v)||v[bo]))break e;if((g||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=t.relatedTarget||t.toElement,g=u,v=v?ol(v):null,v!==null&&(_=Nl(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(x=yT,b="onMouseLeave",m="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(x=xT,b="onPointerLeave",m="onPointerEnter",w="pointer"),_=g==null?p:Vu(g),S=v==null?p:Vu(v),p=new x(b,w+"leave",g,t,f),p.target=_,p.relatedTarget=S,b=null,ol(f)===u&&(x=new x(m,w+"enter",v,t,f),x.target=S,x.relatedTarget=_,b=x),_=b,g&&v)t:{for(x=g,m=v,w=0,S=x;S;S=nu(S))w++;for(S=0,b=m;b;b=nu(b))S++;for(;0<w-S;)x=nu(x),w--;for(;0<S-w;)m=nu(m),S--;for(;w--;){if(x===m||m!==null&&x===m.alternate)break t;x=nu(x),m=nu(m)}x=null}else x=null;g!==null&&IT(d,p,g,x,!1),v!==null&&_!==null&&IT(d,_,v,x,!0)}}e:{if(p=u?Vu(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var R=PF;else if(MT(p))if(l2)R=DF;else{R=LF;var A=IF}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=NF);if(R&&(R=R(n,u))){a2(d,R,t,f);break e}A&&A(n,p,u),n==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&sw(p,"number",p.value)}switch(A=u?Vu(u):window,n){case"focusin":(MT(A)||A.contentEditable==="true")&&(zu=A,vw=u,ef=null);break;case"focusout":ef=vw=zu=null;break;case"mousedown":yw=!0;break;case"contextmenu":case"mouseup":case"dragend":yw=!1,CT(d,t,f);break;case"selectionchange":if(FF)break;case"keydown":case"keyup":CT(d,t,f)}var C;if(C1)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Uu?s2(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(r2&&t.locale!=="ko"&&(Uu||L!=="onCompositionStart"?L==="onCompositionEnd"&&Uu&&(C=i2()):(la=f,b1="value"in la?la.value:la.textContent,Uu=!0)),A=Hg(u,L),0<A.length&&(L=new _T(L,n,null,t,f),d.push({event:L,listeners:A}),C?L.data=C:(C=o2(t),C!==null&&(L.data=C)))),(C=bF?TF(n,t):AF(n,t))&&(u=Hg(u,"onBeforeInput"),0<u.length&&(f=new _T("onBeforeInput","beforeinput",null,t,f),d.push({event:f,listeners:u}),f.data=C))}y2(d,e)})}function Sf(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Hg(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=mf(n,t),s!=null&&i.unshift(Sf(n,s,r)),s=mf(n,e),s!=null&&i.push(Sf(n,s,r))),n=n.return}return i}function nu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function IT(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=mf(t,s),l!=null&&o.unshift(Sf(t,l,a))):r||(l=mf(t,s),l!=null&&o.push(Sf(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var VF=/\r\n?/g,HF=/\u0000|\uFFFD/g;function LT(n){return(typeof n=="string"?n:""+n).replace(VF,`
`).replace(HF,"")}function Np(n,e,t){if(e=LT(e),LT(n)!==e&&t)throw Error(Te(425))}function Gg(){}var _w=null,xw=null;function ww(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sw=typeof setTimeout=="function"?setTimeout:void 0,GF=typeof clearTimeout=="function"?clearTimeout:void 0,NT=typeof Promise=="function"?Promise:void 0,WF=typeof queueMicrotask=="function"?queueMicrotask:typeof NT<"u"?function(n){return NT.resolve(null).then(n).catch(jF)}:Sw;function jF(n){setTimeout(function(){throw n})}function D_(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),yf(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);yf(e)}function da(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function DT(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Pc=Math.random().toString(36).slice(2),ks="__reactFiber$"+Pc,Mf="__reactProps$"+Pc,bo="__reactContainer$"+Pc,Mw="__reactEvents$"+Pc,XF="__reactListeners$"+Pc,$F="__reactHandles$"+Pc;function ol(n){var e=n[ks];if(e)return e;for(var t=n.parentNode;t;){if(e=t[bo]||t[ks]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=DT(n);n!==null;){if(t=n[ks])return t;n=DT(n)}return e}n=t,t=n.parentNode}return null}function cd(n){return n=n[ks]||n[bo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Vu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Te(33))}function t0(n){return n[Mf]||null}var Ew=[],Hu=-1;function Ea(n){return{current:n}}function on(n){0>Hu||(n.current=Ew[Hu],Ew[Hu]=null,Hu--)}function rn(n,e){Hu++,Ew[Hu]=n.current,n.current=e}var xa={},Pi=Ea(xa),Qi=Ea(!1),Sl=xa;function pc(n,e){var t=n.type.contextTypes;if(!t)return xa;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function er(n){return n=n.childContextTypes,n!=null}function Wg(){on(Qi),on(Pi)}function OT(n,e,t){if(Pi.current!==xa)throw Error(Te(168));rn(Pi,e),rn(Qi,t)}function x2(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Te(108,Ik(n)||"Unknown",r));return xn({},t,i)}function jg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||xa,Sl=Pi.current,rn(Pi,n),rn(Qi,Qi.current),!0}function kT(n,e,t){var i=n.stateNode;if(!i)throw Error(Te(169));t?(n=x2(n,e,Sl),i.__reactInternalMemoizedMergedChildContext=n,on(Qi),on(Pi),rn(Pi,n)):on(Qi),rn(Qi,t)}var fo=null,n0=!1,O_=!1;function w2(n){fo===null?fo=[n]:fo.push(n)}function qF(n){n0=!0,w2(n)}function ba(){if(!O_&&fo!==null){O_=!0;var n=0,e=Zt;try{var t=fo;for(Zt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}fo=null,n0=!1}catch(r){throw fo!==null&&(fo=fo.slice(n+1)),XP(w1,ba),r}finally{Zt=e,O_=!1}}return null}var Gu=[],Wu=0,Xg=null,$g=0,Hr=[],Gr=0,Ml=null,vo=1,yo="";function Ja(n,e){Gu[Wu++]=$g,Gu[Wu++]=Xg,Xg=n,$g=e}function S2(n,e,t){Hr[Gr++]=vo,Hr[Gr++]=yo,Hr[Gr++]=Ml,Ml=n;var i=vo;n=yo;var r=32-gs(i)-1;i&=~(1<<r),t+=1;var s=32-gs(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,vo=1<<32-gs(e)+r|t<<r|i,yo=s+n}else vo=1<<s|t<<r|i,yo=n}function P1(n){n.return!==null&&(Ja(n,1),S2(n,1,0))}function I1(n){for(;n===Xg;)Xg=Gu[--Wu],Gu[Wu]=null,$g=Gu[--Wu],Gu[Wu]=null;for(;n===Ml;)Ml=Hr[--Gr],Hr[Gr]=null,yo=Hr[--Gr],Hr[Gr]=null,vo=Hr[--Gr],Hr[Gr]=null}var xr=null,vr=null,hn=!1,ds=null;function M2(n,e){var t=Wr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function FT(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,xr=n,vr=da(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,xr=n,vr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ml!==null?{id:vo,overflow:yo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Wr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,xr=n,vr=null,!0):!1;default:return!1}}function bw(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Tw(n){if(hn){var e=vr;if(e){var t=e;if(!FT(n,e)){if(bw(n))throw Error(Te(418));e=da(t.nextSibling);var i=xr;e&&FT(n,e)?M2(i,t):(n.flags=n.flags&-4097|2,hn=!1,xr=n)}}else{if(bw(n))throw Error(Te(418));n.flags=n.flags&-4097|2,hn=!1,xr=n}}}function UT(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;xr=n}function Dp(n){if(n!==xr)return!1;if(!hn)return UT(n),hn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!ww(n.type,n.memoizedProps)),e&&(e=vr)){if(bw(n))throw E2(),Error(Te(418));for(;e;)M2(n,e),e=da(e.nextSibling)}if(UT(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Te(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){vr=da(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}vr=null}}else vr=xr?da(n.stateNode.nextSibling):null;return!0}function E2(){for(var n=vr;n;)n=da(n.nextSibling)}function mc(){vr=xr=null,hn=!1}function L1(n){ds===null?ds=[n]:ds.push(n)}var YF=Lo.ReactCurrentBatchConfig;function dh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Te(309));var i=t.stateNode}if(!i)throw Error(Te(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Te(284));if(!t._owner)throw Error(Te(290,n))}return n}function Op(n,e){throw n=Object.prototype.toString.call(e),Error(Te(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function zT(n){var e=n._init;return e(n._payload)}function b2(n){function e(m,w){if(n){var S=m.deletions;S===null?(m.deletions=[w],m.flags|=16):S.push(w)}}function t(m,w){if(!n)return null;for(;w!==null;)e(m,w),w=w.sibling;return null}function i(m,w){for(m=new Map;w!==null;)w.key!==null?m.set(w.key,w):m.set(w.index,w),w=w.sibling;return m}function r(m,w){return m=va(m,w),m.index=0,m.sibling=null,m}function s(m,w,S){return m.index=S,n?(S=m.alternate,S!==null?(S=S.index,S<w?(m.flags|=2,w):S):(m.flags|=2,w)):(m.flags|=1048576,w)}function o(m){return n&&m.alternate===null&&(m.flags|=2),m}function a(m,w,S,b){return w===null||w.tag!==6?(w=H_(S,m.mode,b),w.return=m,w):(w=r(w,S),w.return=m,w)}function l(m,w,S,b){var R=S.type;return R===Fu?f(m,w,S.props.children,b,S.key):w!==null&&(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===ia&&zT(R)===w.type)?(b=r(w,S.props),b.ref=dh(m,w,S),b.return=m,b):(b=og(S.type,S.key,S.props,null,m.mode,b),b.ref=dh(m,w,S),b.return=m,b)}function u(m,w,S,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=G_(S,m.mode,b),w.return=m,w):(w=r(w,S.children||[]),w.return=m,w)}function f(m,w,S,b,R){return w===null||w.tag!==7?(w=ml(S,m.mode,b,R),w.return=m,w):(w=r(w,S),w.return=m,w)}function d(m,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=H_(""+w,m.mode,S),w.return=m,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ep:return S=og(w.type,w.key,w.props,null,m.mode,S),S.ref=dh(m,null,w),S.return=m,S;case ku:return w=G_(w,m.mode,S),w.return=m,w;case ia:var b=w._init;return d(m,b(w._payload),S)}if(Dh(w)||lh(w))return w=ml(w,m.mode,S,null),w.return=m,w;Op(m,w)}return null}function p(m,w,S,b){var R=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:a(m,w,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ep:return S.key===R?l(m,w,S,b):null;case ku:return S.key===R?u(m,w,S,b):null;case ia:return R=S._init,p(m,w,R(S._payload),b)}if(Dh(S)||lh(S))return R!==null?null:f(m,w,S,b,null);Op(m,S)}return null}function g(m,w,S,b,R){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(S)||null,a(w,m,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ep:return m=m.get(b.key===null?S:b.key)||null,l(w,m,b,R);case ku:return m=m.get(b.key===null?S:b.key)||null,u(w,m,b,R);case ia:var A=b._init;return g(m,w,S,A(b._payload),R)}if(Dh(b)||lh(b))return m=m.get(S)||null,f(w,m,b,R,null);Op(w,b)}return null}function v(m,w,S,b){for(var R=null,A=null,C=w,L=w=0,I=null;C!==null&&L<S.length;L++){C.index>L?(I=C,C=null):I=C.sibling;var E=p(m,C,S[L],b);if(E===null){C===null&&(C=I);break}n&&C&&E.alternate===null&&e(m,C),w=s(E,w,L),A===null?R=E:A.sibling=E,A=E,C=I}if(L===S.length)return t(m,C),hn&&Ja(m,L),R;if(C===null){for(;L<S.length;L++)C=d(m,S[L],b),C!==null&&(w=s(C,w,L),A===null?R=C:A.sibling=C,A=C);return hn&&Ja(m,L),R}for(C=i(m,C);L<S.length;L++)I=g(C,m,L,S[L],b),I!==null&&(n&&I.alternate!==null&&C.delete(I.key===null?L:I.key),w=s(I,w,L),A===null?R=I:A.sibling=I,A=I);return n&&C.forEach(function(N){return e(m,N)}),hn&&Ja(m,L),R}function x(m,w,S,b){var R=lh(S);if(typeof R!="function")throw Error(Te(150));if(S=R.call(S),S==null)throw Error(Te(151));for(var A=R=null,C=w,L=w=0,I=null,E=S.next();C!==null&&!E.done;L++,E=S.next()){C.index>L?(I=C,C=null):I=C.sibling;var N=p(m,C,E.value,b);if(N===null){C===null&&(C=I);break}n&&C&&N.alternate===null&&e(m,C),w=s(N,w,L),A===null?R=N:A.sibling=N,A=N,C=I}if(E.done)return t(m,C),hn&&Ja(m,L),R;if(C===null){for(;!E.done;L++,E=S.next())E=d(m,E.value,b),E!==null&&(w=s(E,w,L),A===null?R=E:A.sibling=E,A=E);return hn&&Ja(m,L),R}for(C=i(m,C);!E.done;L++,E=S.next())E=g(C,m,L,E.value,b),E!==null&&(n&&E.alternate!==null&&C.delete(E.key===null?L:E.key),w=s(E,w,L),A===null?R=E:A.sibling=E,A=E);return n&&C.forEach(function(z){return e(m,z)}),hn&&Ja(m,L),R}function _(m,w,S,b){if(typeof S=="object"&&S!==null&&S.type===Fu&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ep:e:{for(var R=S.key,A=w;A!==null;){if(A.key===R){if(R=S.type,R===Fu){if(A.tag===7){t(m,A.sibling),w=r(A,S.props.children),w.return=m,m=w;break e}}else if(A.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===ia&&zT(R)===A.type){t(m,A.sibling),w=r(A,S.props),w.ref=dh(m,A,S),w.return=m,m=w;break e}t(m,A);break}else e(m,A);A=A.sibling}S.type===Fu?(w=ml(S.props.children,m.mode,b,S.key),w.return=m,m=w):(b=og(S.type,S.key,S.props,null,m.mode,b),b.ref=dh(m,w,S),b.return=m,m=b)}return o(m);case ku:e:{for(A=S.key;w!==null;){if(w.key===A)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){t(m,w.sibling),w=r(w,S.children||[]),w.return=m,m=w;break e}else{t(m,w);break}else e(m,w);w=w.sibling}w=G_(S,m.mode,b),w.return=m,m=w}return o(m);case ia:return A=S._init,_(m,w,A(S._payload),b)}if(Dh(S))return v(m,w,S,b);if(lh(S))return x(m,w,S,b);Op(m,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(t(m,w.sibling),w=r(w,S),w.return=m,m=w):(t(m,w),w=H_(S,m.mode,b),w.return=m,m=w),o(m)):t(m,w)}return _}var gc=b2(!0),T2=b2(!1),qg=Ea(null),Yg=null,ju=null,N1=null;function D1(){N1=ju=Yg=null}function O1(n){var e=qg.current;on(qg),n._currentValue=e}function Aw(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function sc(n,e){Yg=n,N1=ju=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ki=!0),n.firstContext=null)}function $r(n){var e=n._currentValue;if(N1!==n)if(n={context:n,memoizedValue:e,next:null},ju===null){if(Yg===null)throw Error(Te(308));ju=n,Yg.dependencies={lanes:0,firstContext:n}}else ju=ju.next=n;return e}var al=null;function k1(n){al===null?al=[n]:al.push(n)}function A2(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,k1(e)):(t.next=r.next,r.next=t),e.interleaved=t,To(n,i)}function To(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ra=!1;function F1(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C2(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function wo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function pa(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,zt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,To(n,t)}return r=i.interleaved,r===null?(e.next=e,k1(i)):(e.next=r.next,r.next=e),i.interleaved=e,To(n,t)}function eg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,S1(n,t)}}function BT(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Zg(n,e,t,i){var r=n.updateQueue;ra=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var f=n.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,f=u=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((i&p)===p){f!==null&&(f=f.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,x=a;switch(p=e,g=t,x.tag){case 1:if(v=x.payload,typeof v=="function"){d=v.call(g,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,p=typeof v=="function"?v.call(g,d,p):v,p==null)break e;d=xn({},d,p);break e;case 2:ra=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(u=f=g,l=d):f=f.next=g,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(f===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);bl|=o,n.lanes=o,n.memoizedState=d}}function VT(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Te(191,r));r.call(i)}}}var hd={},Hs=Ea(hd),Ef=Ea(hd),bf=Ea(hd);function ll(n){if(n===hd)throw Error(Te(174));return n}function U1(n,e){switch(rn(bf,e),rn(Ef,n),rn(Hs,hd),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:aw(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=aw(e,n)}on(Hs),rn(Hs,e)}function vc(){on(Hs),on(Ef),on(bf)}function R2(n){ll(bf.current);var e=ll(Hs.current),t=aw(e,n.type);e!==t&&(rn(Ef,n),rn(Hs,t))}function z1(n){Ef.current===n&&(on(Hs),on(Ef))}var gn=Ea(0);function Kg(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var k_=[];function B1(){for(var n=0;n<k_.length;n++)k_[n]._workInProgressVersionPrimary=null;k_.length=0}var tg=Lo.ReactCurrentDispatcher,F_=Lo.ReactCurrentBatchConfig,El=0,yn=null,Xn=null,ei=null,Jg=!1,tf=!1,Tf=0,ZF=0;function vi(){throw Error(Te(321))}function V1(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ys(n[t],e[t]))return!1;return!0}function H1(n,e,t,i,r,s){if(El=s,yn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tg.current=n===null||n.memoizedState===null?eU:tU,n=t(i,r),tf){s=0;do{if(tf=!1,Tf=0,25<=s)throw Error(Te(301));s+=1,ei=Xn=null,e.updateQueue=null,tg.current=nU,n=t(i,r)}while(tf)}if(tg.current=Qg,e=Xn!==null&&Xn.next!==null,El=0,ei=Xn=yn=null,Jg=!1,e)throw Error(Te(300));return n}function G1(){var n=Tf!==0;return Tf=0,n}function Is(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ei===null?yn.memoizedState=ei=n:ei=ei.next=n,ei}function qr(){if(Xn===null){var n=yn.alternate;n=n!==null?n.memoizedState:null}else n=Xn.next;var e=ei===null?yn.memoizedState:ei.next;if(e!==null)ei=e,Xn=n;else{if(n===null)throw Error(Te(310));Xn=n,n={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},ei===null?yn.memoizedState=ei=n:ei=ei.next=n}return ei}function Af(n,e){return typeof e=="function"?e(n):e}function U_(n){var e=qr(),t=e.queue;if(t===null)throw Error(Te(311));t.lastRenderedReducer=n;var i=Xn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var f=u.lane;if((El&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,yn.lanes|=f,bl|=f}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,ys(i,e.memoizedState)||(Ki=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,yn.lanes|=s,bl|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function z_(n){var e=qr(),t=e.queue;if(t===null)throw Error(Te(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);ys(s,e.memoizedState)||(Ki=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function P2(){}function I2(n,e){var t=yn,i=qr(),r=e(),s=!ys(i.memoizedState,r);if(s&&(i.memoizedState=r,Ki=!0),i=i.queue,W1(D2.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||ei!==null&&ei.memoizedState.tag&1){if(t.flags|=2048,Cf(9,N2.bind(null,t,i,r,e),void 0,null),ni===null)throw Error(Te(349));El&30||L2(t,e,r)}return r}function L2(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=yn.updateQueue,e===null?(e={lastEffect:null,stores:null},yn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function N2(n,e,t,i){e.value=t,e.getSnapshot=i,O2(e)&&k2(n)}function D2(n,e,t){return t(function(){O2(e)&&k2(n)})}function O2(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ys(n,t)}catch{return!0}}function k2(n){var e=To(n,1);e!==null&&vs(e,n,1,-1)}function HT(n){var e=Is();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Af,lastRenderedState:n},e.queue=n,n=n.dispatch=QF.bind(null,yn,n),[e.memoizedState,n]}function Cf(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=yn.updateQueue,e===null?(e={lastEffect:null,stores:null},yn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function F2(){return qr().memoizedState}function ng(n,e,t,i){var r=Is();yn.flags|=n,r.memoizedState=Cf(1|e,t,void 0,i===void 0?null:i)}function i0(n,e,t,i){var r=qr();i=i===void 0?null:i;var s=void 0;if(Xn!==null){var o=Xn.memoizedState;if(s=o.destroy,i!==null&&V1(i,o.deps)){r.memoizedState=Cf(e,t,s,i);return}}yn.flags|=n,r.memoizedState=Cf(1|e,t,s,i)}function GT(n,e){return ng(8390656,8,n,e)}function W1(n,e){return i0(2048,8,n,e)}function U2(n,e){return i0(4,2,n,e)}function z2(n,e){return i0(4,4,n,e)}function B2(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function V2(n,e,t){return t=t!=null?t.concat([n]):null,i0(4,4,B2.bind(null,e,n),t)}function j1(){}function H2(n,e){var t=qr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&V1(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function G2(n,e){var t=qr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&V1(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function W2(n,e,t){return El&21?(ys(t,e)||(t=YP(),yn.lanes|=t,bl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ki=!0),n.memoizedState=t)}function KF(n,e){var t=Zt;Zt=t!==0&&4>t?t:4,n(!0);var i=F_.transition;F_.transition={};try{n(!1),e()}finally{Zt=t,F_.transition=i}}function j2(){return qr().memoizedState}function JF(n,e,t){var i=ga(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},X2(n))$2(e,t);else if(t=A2(n,e,t,i),t!==null){var r=Bi();vs(t,n,i,r),q2(t,e,i)}}function QF(n,e,t){var i=ga(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(X2(n))$2(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,ys(a,o)){var l=e.interleaved;l===null?(r.next=r,k1(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=A2(n,e,r,i),t!==null&&(r=Bi(),vs(t,n,i,r),q2(t,e,i))}}function X2(n){var e=n.alternate;return n===yn||e!==null&&e===yn}function $2(n,e){tf=Jg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function q2(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,S1(n,t)}}var Qg={readContext:$r,useCallback:vi,useContext:vi,useEffect:vi,useImperativeHandle:vi,useInsertionEffect:vi,useLayoutEffect:vi,useMemo:vi,useReducer:vi,useRef:vi,useState:vi,useDebugValue:vi,useDeferredValue:vi,useTransition:vi,useMutableSource:vi,useSyncExternalStore:vi,useId:vi,unstable_isNewReconciler:!1},eU={readContext:$r,useCallback:function(n,e){return Is().memoizedState=[n,e===void 0?null:e],n},useContext:$r,useEffect:GT,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ng(4194308,4,B2.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ng(4194308,4,n,e)},useInsertionEffect:function(n,e){return ng(4,2,n,e)},useMemo:function(n,e){var t=Is();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Is();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=JF.bind(null,yn,n),[i.memoizedState,n]},useRef:function(n){var e=Is();return n={current:n},e.memoizedState=n},useState:HT,useDebugValue:j1,useDeferredValue:function(n){return Is().memoizedState=n},useTransition:function(){var n=HT(!1),e=n[0];return n=KF.bind(null,n[1]),Is().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=yn,r=Is();if(hn){if(t===void 0)throw Error(Te(407));t=t()}else{if(t=e(),ni===null)throw Error(Te(349));El&30||L2(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,GT(D2.bind(null,i,s,n),[n]),i.flags|=2048,Cf(9,N2.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Is(),e=ni.identifierPrefix;if(hn){var t=yo,i=vo;t=(i&~(1<<32-gs(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Tf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=ZF++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},tU={readContext:$r,useCallback:H2,useContext:$r,useEffect:W1,useImperativeHandle:V2,useInsertionEffect:U2,useLayoutEffect:z2,useMemo:G2,useReducer:U_,useRef:F2,useState:function(){return U_(Af)},useDebugValue:j1,useDeferredValue:function(n){var e=qr();return W2(e,Xn.memoizedState,n)},useTransition:function(){var n=U_(Af)[0],e=qr().memoizedState;return[n,e]},useMutableSource:P2,useSyncExternalStore:I2,useId:j2,unstable_isNewReconciler:!1},nU={readContext:$r,useCallback:H2,useContext:$r,useEffect:W1,useImperativeHandle:V2,useInsertionEffect:U2,useLayoutEffect:z2,useMemo:G2,useReducer:z_,useRef:F2,useState:function(){return z_(Af)},useDebugValue:j1,useDeferredValue:function(n){var e=qr();return Xn===null?e.memoizedState=n:W2(e,Xn.memoizedState,n)},useTransition:function(){var n=z_(Af)[0],e=qr().memoizedState;return[n,e]},useMutableSource:P2,useSyncExternalStore:I2,useId:j2,unstable_isNewReconciler:!1};function us(n,e){if(n&&n.defaultProps){e=xn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Cw(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:xn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var r0={isMounted:function(n){return(n=n._reactInternals)?Nl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Bi(),r=ga(n),s=wo(i,r);s.payload=e,t!=null&&(s.callback=t),e=pa(n,s,r),e!==null&&(vs(e,n,r,i),eg(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Bi(),r=ga(n),s=wo(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=pa(n,s,r),e!==null&&(vs(e,n,r,i),eg(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Bi(),i=ga(n),r=wo(t,i);r.tag=2,e!=null&&(r.callback=e),e=pa(n,r,i),e!==null&&(vs(e,n,i,t),eg(e,n,i))}};function WT(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!xf(t,i)||!xf(r,s):!0}function Y2(n,e,t){var i=!1,r=xa,s=e.contextType;return typeof s=="object"&&s!==null?s=$r(s):(r=er(e)?Sl:Pi.current,i=e.contextTypes,s=(i=i!=null)?pc(n,r):xa),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=r0,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function jT(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&r0.enqueueReplaceState(e,e.state,null)}function Rw(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},F1(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=$r(s):(s=er(e)?Sl:Pi.current,r.context=pc(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Cw(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&r0.enqueueReplaceState(r,r.state,null),Zg(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function yc(n,e){try{var t="",i=e;do t+=Pk(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function B_(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Pw(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var iU=typeof WeakMap=="function"?WeakMap:Map;function Z2(n,e,t){t=wo(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){tv||(tv=!0,Bw=i),Pw(n,e)},t}function K2(n,e,t){t=wo(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){Pw(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Pw(n,e),typeof i!="function"&&(ma===null?ma=new Set([this]):ma.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function XT(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new iU;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=vU.bind(null,n,e,t),e.then(n,n))}function $T(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function qT(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=wo(-1,1),e.tag=2,pa(t,e,1))),t.lanes|=1),n)}var rU=Lo.ReactCurrentOwner,Ki=!1;function Ui(n,e,t,i){e.child=n===null?T2(e,null,t,i):gc(e,n.child,t,i)}function YT(n,e,t,i,r){t=t.render;var s=e.ref;return sc(e,r),i=H1(n,e,t,i,s,r),t=G1(),n!==null&&!Ki?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ao(n,e,r)):(hn&&t&&P1(e),e.flags|=1,Ui(n,e,i,r),e.child)}function ZT(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!Q1(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,J2(n,e,s,i,r)):(n=og(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:xf,t(o,i)&&n.ref===e.ref)return Ao(n,e,r)}return e.flags|=1,n=va(s,i),n.ref=e.ref,n.return=e,e.child=n}function J2(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(xf(s,i)&&n.ref===e.ref)if(Ki=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Ki=!0);else return e.lanes=n.lanes,Ao(n,e,r)}return Iw(n,e,t,i,r)}function Q2(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn($u,pr),pr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,rn($u,pr),pr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,rn($u,pr),pr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,rn($u,pr),pr|=i;return Ui(n,e,r,t),e.child}function eI(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Iw(n,e,t,i,r){var s=er(t)?Sl:Pi.current;return s=pc(e,s),sc(e,r),t=H1(n,e,t,i,s,r),i=G1(),n!==null&&!Ki?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ao(n,e,r)):(hn&&i&&P1(e),e.flags|=1,Ui(n,e,t,r),e.child)}function KT(n,e,t,i,r){if(er(t)){var s=!0;jg(e)}else s=!1;if(sc(e,r),e.stateNode===null)ig(n,e),Y2(e,t,i),Rw(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=$r(u):(u=er(t)?Sl:Pi.current,u=pc(e,u));var f=t.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&jT(e,o,i,u),ra=!1;var p=e.memoizedState;o.state=p,Zg(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Qi.current||ra?(typeof f=="function"&&(Cw(e,t,f,i),l=e.memoizedState),(a=ra||WT(e,t,a,i,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,C2(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:us(e.type,a),o.props=u,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=$r(l):(l=er(t)?Sl:Pi.current,l=pc(e,l));var g=t.getDerivedStateFromProps;(f=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&jT(e,o,i,l),ra=!1,p=e.memoizedState,o.state=p,Zg(e,i,o,r);var v=e.memoizedState;a!==d||p!==v||Qi.current||ra?(typeof g=="function"&&(Cw(e,t,g,i),v=e.memoizedState),(u=ra||WT(e,t,u,i,p,v,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return Lw(n,e,t,i,s,r)}function Lw(n,e,t,i,r,s){eI(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&kT(e,t,!1),Ao(n,e,s);i=e.stateNode,rU.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=gc(e,n.child,null,s),e.child=gc(e,null,a,s)):Ui(n,e,a,s),e.memoizedState=i.state,r&&kT(e,t,!0),e.child}function tI(n){var e=n.stateNode;e.pendingContext?OT(n,e.pendingContext,e.pendingContext!==e.context):e.context&&OT(n,e.context,!1),U1(n,e.containerInfo)}function JT(n,e,t,i,r){return mc(),L1(r),e.flags|=256,Ui(n,e,t,i),e.child}var Nw={dehydrated:null,treeContext:null,retryLane:0};function Dw(n){return{baseLanes:n,cachePool:null,transitions:null}}function nI(n,e,t){var i=e.pendingProps,r=gn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),rn(gn,r&1),n===null)return Tw(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=a0(o,i,0,null),n=ml(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Dw(t),e.memoizedState=Nw,n):X1(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return sU(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=va(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=va(a,s):(s=ml(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?Dw(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Nw,i}return s=n.child,n=s.sibling,i=va(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function X1(n,e){return e=a0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function kp(n,e,t,i){return i!==null&&L1(i),gc(e,n.child,null,t),n=X1(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function sU(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=B_(Error(Te(422))),kp(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=a0({mode:"visible",children:i.children},r,0,null),s=ml(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&gc(e,n.child,null,o),e.child.memoizedState=Dw(o),e.memoizedState=Nw,s);if(!(e.mode&1))return kp(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Te(419)),i=B_(s,i,void 0),kp(n,e,o,i)}if(a=(o&n.childLanes)!==0,Ki||a){if(i=ni,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,To(n,r),vs(i,n,r,-1))}return J1(),i=B_(Error(Te(421))),kp(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=yU.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,vr=da(r.nextSibling),xr=e,hn=!0,ds=null,n!==null&&(Hr[Gr++]=vo,Hr[Gr++]=yo,Hr[Gr++]=Ml,vo=n.id,yo=n.overflow,Ml=e),e=X1(e,i.children),e.flags|=4096,e)}function QT(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Aw(n.return,e,t)}function V_(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function iI(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ui(n,e,i.children,t),i=gn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&QT(n,t,e);else if(n.tag===19)QT(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(rn(gn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Kg(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),V_(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Kg(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}V_(e,!0,t,null,s);break;case"together":V_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ig(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ao(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),bl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Te(153));if(e.child!==null){for(n=e.child,t=va(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=va(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function oU(n,e,t){switch(e.tag){case 3:tI(e),mc();break;case 5:R2(e);break;case 1:er(e.type)&&jg(e);break;case 4:U1(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;rn(qg,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(rn(gn,gn.current&1),e.flags|=128,null):t&e.child.childLanes?nI(n,e,t):(rn(gn,gn.current&1),n=Ao(n,e,t),n!==null?n.sibling:null);rn(gn,gn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return iI(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),rn(gn,gn.current),i)break;return null;case 22:case 23:return e.lanes=0,Q2(n,e,t)}return Ao(n,e,t)}var rI,Ow,sI,oI;rI=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Ow=function(){};sI=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,ll(Hs.current);var s=null;switch(t){case"input":r=iw(n,r),i=iw(n,i),s=[];break;case"select":r=xn({},r,{value:void 0}),i=xn({},i,{value:void 0}),s=[];break;case"textarea":r=ow(n,r),i=ow(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Gg)}lw(t,i);var o;t=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(df.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(df.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&sn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};oI=function(n,e,t,i){t!==i&&(e.flags|=4)};function ph(n,e){if(!hn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function yi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function aU(n,e,t){var i=e.pendingProps;switch(I1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(e),null;case 1:return er(e.type)&&Wg(),yi(e),null;case 3:return i=e.stateNode,vc(),on(Qi),on(Pi),B1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Dp(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ds!==null&&(Gw(ds),ds=null))),Ow(n,e),yi(e),null;case 5:z1(e);var r=ll(bf.current);if(t=e.type,n!==null&&e.stateNode!=null)sI(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Te(166));return yi(e),null}if(n=ll(Hs.current),Dp(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[ks]=e,i[Mf]=s,n=(e.mode&1)!==0,t){case"dialog":sn("cancel",i),sn("close",i);break;case"iframe":case"object":case"embed":sn("load",i);break;case"video":case"audio":for(r=0;r<kh.length;r++)sn(kh[r],i);break;case"source":sn("error",i);break;case"img":case"image":case"link":sn("error",i),sn("load",i);break;case"details":sn("toggle",i);break;case"input":lT(i,s),sn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},sn("invalid",i);break;case"textarea":cT(i,s),sn("invalid",i)}lw(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Np(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Np(i.textContent,a,n),r=["children",""+a]):df.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&sn("scroll",i)}switch(t){case"input":bp(i),uT(i,s,!0);break;case"textarea":bp(i),hT(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Gg)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=DP(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[ks]=e,n[Mf]=i,rI(n,e,!1,!1),e.stateNode=n;e:{switch(o=uw(t,i),t){case"dialog":sn("cancel",n),sn("close",n),r=i;break;case"iframe":case"object":case"embed":sn("load",n),r=i;break;case"video":case"audio":for(r=0;r<kh.length;r++)sn(kh[r],n);r=i;break;case"source":sn("error",n),r=i;break;case"img":case"image":case"link":sn("error",n),sn("load",n),r=i;break;case"details":sn("toggle",n),r=i;break;case"input":lT(n,i),r=iw(n,i),sn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=xn({},i,{value:void 0}),sn("invalid",n);break;case"textarea":cT(n,i),r=ow(n,i),sn("invalid",n);break;default:r=i}lw(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?FP(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&OP(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&pf(n,l):typeof l=="number"&&pf(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(df.hasOwnProperty(s)?l!=null&&s==="onScroll"&&sn("scroll",n):l!=null&&g1(n,s,l,o))}switch(t){case"input":bp(n),uT(n,i,!1);break;case"textarea":bp(n),hT(n);break;case"option":i.value!=null&&n.setAttribute("value",""+_a(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?tc(n,!!i.multiple,s,!1):i.defaultValue!=null&&tc(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Gg)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yi(e),null;case 6:if(n&&e.stateNode!=null)oI(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Te(166));if(t=ll(bf.current),ll(Hs.current),Dp(e)){if(i=e.stateNode,t=e.memoizedProps,i[ks]=e,(s=i.nodeValue!==t)&&(n=xr,n!==null))switch(n.tag){case 3:Np(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Np(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[ks]=e,e.stateNode=i}return yi(e),null;case 13:if(on(gn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(hn&&vr!==null&&e.mode&1&&!(e.flags&128))E2(),mc(),e.flags|=98560,s=!1;else if(s=Dp(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Te(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Te(317));s[ks]=e}else mc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yi(e),s=!1}else ds!==null&&(Gw(ds),ds=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||gn.current&1?$n===0&&($n=3):J1())),e.updateQueue!==null&&(e.flags|=4),yi(e),null);case 4:return vc(),Ow(n,e),n===null&&wf(e.stateNode.containerInfo),yi(e),null;case 10:return O1(e.type._context),yi(e),null;case 17:return er(e.type)&&Wg(),yi(e),null;case 19:if(on(gn),s=e.memoizedState,s===null)return yi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)ph(s,!1);else{if($n!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Kg(n),o!==null){for(e.flags|=128,ph(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return rn(gn,gn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Ln()>_c&&(e.flags|=128,i=!0,ph(s,!1),e.lanes=4194304)}else{if(!i)if(n=Kg(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ph(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!hn)return yi(e),null}else 2*Ln()-s.renderingStartTime>_c&&t!==1073741824&&(e.flags|=128,i=!0,ph(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ln(),e.sibling=null,t=gn.current,rn(gn,i?t&1|2:t&1),e):(yi(e),null);case 22:case 23:return K1(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?pr&1073741824&&(yi(e),e.subtreeFlags&6&&(e.flags|=8192)):yi(e),null;case 24:return null;case 25:return null}throw Error(Te(156,e.tag))}function lU(n,e){switch(I1(e),e.tag){case 1:return er(e.type)&&Wg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return vc(),on(Qi),on(Pi),B1(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return z1(e),null;case 13:if(on(gn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Te(340));mc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return on(gn),null;case 4:return vc(),null;case 10:return O1(e.type._context),null;case 22:case 23:return K1(),null;case 24:return null;default:return null}}var Fp=!1,Ti=!1,uU=typeof WeakSet=="function"?WeakSet:Set,He=null;function Xu(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){En(n,e,i)}else t.current=null}function kw(n,e,t){try{t()}catch(i){En(n,e,i)}}var eA=!1;function cU(n,e){if(_w=Bg,n=h2(),R1(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,f=0,d=n,p=null;t:for(;;){for(var g;d!==t||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===n)break t;if(p===t&&++u===r&&(a=o),p===s&&++f===i&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(xw={focusedElem:n,selectionRange:t},Bg=!1,He=e;He!==null;)if(e=He,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,He=n;else for(;He!==null;){e=He;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,_=v.memoizedState,m=e.stateNode,w=m.getSnapshotBeforeUpdate(e.elementType===e.type?x:us(e.type,x),_);m.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Te(163))}}catch(b){En(e,e.return,b)}if(n=e.sibling,n!==null){n.return=e.return,He=n;break}He=e.return}return v=eA,eA=!1,v}function nf(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&kw(e,t,s)}r=r.next}while(r!==i)}}function s0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Fw(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function aI(n){var e=n.alternate;e!==null&&(n.alternate=null,aI(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ks],delete e[Mf],delete e[Mw],delete e[XF],delete e[$F])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function lI(n){return n.tag===5||n.tag===3||n.tag===4}function tA(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lI(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Uw(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Gg));else if(i!==4&&(n=n.child,n!==null))for(Uw(n,e,t),n=n.sibling;n!==null;)Uw(n,e,t),n=n.sibling}function zw(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(zw(n,e,t),n=n.sibling;n!==null;)zw(n,e,t),n=n.sibling}var si=null,fs=!1;function $o(n,e,t){for(t=t.child;t!==null;)uI(n,e,t),t=t.sibling}function uI(n,e,t){if(Vs&&typeof Vs.onCommitFiberUnmount=="function")try{Vs.onCommitFiberUnmount(Kv,t)}catch{}switch(t.tag){case 5:Ti||Xu(t,e);case 6:var i=si,r=fs;si=null,$o(n,e,t),si=i,fs=r,si!==null&&(fs?(n=si,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):si.removeChild(t.stateNode));break;case 18:si!==null&&(fs?(n=si,t=t.stateNode,n.nodeType===8?D_(n.parentNode,t):n.nodeType===1&&D_(n,t),yf(n)):D_(si,t.stateNode));break;case 4:i=si,r=fs,si=t.stateNode.containerInfo,fs=!0,$o(n,e,t),si=i,fs=r;break;case 0:case 11:case 14:case 15:if(!Ti&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&kw(t,e,o),r=r.next}while(r!==i)}$o(n,e,t);break;case 1:if(!Ti&&(Xu(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){En(t,e,a)}$o(n,e,t);break;case 21:$o(n,e,t);break;case 22:t.mode&1?(Ti=(i=Ti)||t.memoizedState!==null,$o(n,e,t),Ti=i):$o(n,e,t);break;default:$o(n,e,t)}}function nA(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new uU),e.forEach(function(i){var r=_U.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function ns(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:si=a.stateNode,fs=!1;break e;case 3:si=a.stateNode.containerInfo,fs=!0;break e;case 4:si=a.stateNode.containerInfo,fs=!0;break e}a=a.return}if(si===null)throw Error(Te(160));uI(s,o,r),si=null,fs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){En(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cI(e,n),e=e.sibling}function cI(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ns(e,n),Rs(n),i&4){try{nf(3,n,n.return),s0(3,n)}catch(x){En(n,n.return,x)}try{nf(5,n,n.return)}catch(x){En(n,n.return,x)}}break;case 1:ns(e,n),Rs(n),i&512&&t!==null&&Xu(t,t.return);break;case 5:if(ns(e,n),Rs(n),i&512&&t!==null&&Xu(t,t.return),n.flags&32){var r=n.stateNode;try{pf(r,"")}catch(x){En(n,n.return,x)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&LP(r,s),uw(a,o);var u=uw(a,s);for(o=0;o<l.length;o+=2){var f=l[o],d=l[o+1];f==="style"?FP(r,d):f==="dangerouslySetInnerHTML"?OP(r,d):f==="children"?pf(r,d):g1(r,f,d,u)}switch(a){case"input":rw(r,s);break;case"textarea":NP(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?tc(r,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?tc(r,!!s.multiple,s.defaultValue,!0):tc(r,!!s.multiple,s.multiple?[]:"",!1))}r[Mf]=s}catch(x){En(n,n.return,x)}}break;case 6:if(ns(e,n),Rs(n),i&4){if(n.stateNode===null)throw Error(Te(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(x){En(n,n.return,x)}}break;case 3:if(ns(e,n),Rs(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{yf(e.containerInfo)}catch(x){En(n,n.return,x)}break;case 4:ns(e,n),Rs(n);break;case 13:ns(e,n),Rs(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Y1=Ln())),i&4&&nA(n);break;case 22:if(f=t!==null&&t.memoizedState!==null,n.mode&1?(Ti=(u=Ti)||f,ns(e,n),Ti=u):ns(e,n),Rs(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!f&&n.mode&1)for(He=n,f=n.child;f!==null;){for(d=He=f;He!==null;){switch(p=He,g=p.child,p.tag){case 0:case 11:case 14:case 15:nf(4,p,p.return);break;case 1:Xu(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){En(i,t,x)}}break;case 5:Xu(p,p.return);break;case 22:if(p.memoizedState!==null){rA(d);continue}}g!==null?(g.return=p,He=g):rA(d)}f=f.sibling}e:for(f=null,d=n;;){if(d.tag===5){if(f===null){f=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kP("display",o))}catch(x){En(n,n.return,x)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(x){En(n,n.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ns(e,n),Rs(n),i&4&&nA(n);break;case 21:break;default:ns(e,n),Rs(n)}}function Rs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(lI(t)){var i=t;break e}t=t.return}throw Error(Te(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(pf(r,""),i.flags&=-33);var s=tA(n);zw(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=tA(n);Uw(n,a,o);break;default:throw Error(Te(161))}}catch(l){En(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function hU(n,e,t){He=n,hI(n)}function hI(n,e,t){for(var i=(n.mode&1)!==0;He!==null;){var r=He,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Fp;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Ti;a=Fp;var u=Ti;if(Fp=o,(Ti=l)&&!u)for(He=r;He!==null;)o=He,l=o.child,o.tag===22&&o.memoizedState!==null?sA(r):l!==null?(l.return=o,He=l):sA(r);for(;s!==null;)He=s,hI(s),s=s.sibling;He=r,Fp=a,Ti=u}iA(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,He=s):iA(n)}}function iA(n){for(;He!==null;){var e=He;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ti||s0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ti)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:us(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&VT(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}VT(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&yf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Te(163))}Ti||e.flags&512&&Fw(e)}catch(p){En(e,e.return,p)}}if(e===n){He=null;break}if(t=e.sibling,t!==null){t.return=e.return,He=t;break}He=e.return}}function rA(n){for(;He!==null;){var e=He;if(e===n){He=null;break}var t=e.sibling;if(t!==null){t.return=e.return,He=t;break}He=e.return}}function sA(n){for(;He!==null;){var e=He;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{s0(4,e)}catch(l){En(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){En(e,r,l)}}var s=e.return;try{Fw(e)}catch(l){En(e,s,l)}break;case 5:var o=e.return;try{Fw(e)}catch(l){En(e,o,l)}}}catch(l){En(e,e.return,l)}if(e===n){He=null;break}var a=e.sibling;if(a!==null){a.return=e.return,He=a;break}He=e.return}}var fU=Math.ceil,ev=Lo.ReactCurrentDispatcher,$1=Lo.ReactCurrentOwner,Xr=Lo.ReactCurrentBatchConfig,zt=0,ni=null,Bn=null,li=0,pr=0,$u=Ea(0),$n=0,Rf=null,bl=0,o0=0,q1=0,rf=null,Yi=null,Y1=0,_c=1/0,ho=null,tv=!1,Bw=null,ma=null,Up=!1,ua=null,nv=0,sf=0,Vw=null,rg=-1,sg=0;function Bi(){return zt&6?Ln():rg!==-1?rg:rg=Ln()}function ga(n){return n.mode&1?zt&2&&li!==0?li&-li:YF.transition!==null?(sg===0&&(sg=YP()),sg):(n=Zt,n!==0||(n=window.event,n=n===void 0?16:n2(n.type)),n):1}function vs(n,e,t,i){if(50<sf)throw sf=0,Vw=null,Error(Te(185));ld(n,t,i),(!(zt&2)||n!==ni)&&(n===ni&&(!(zt&2)&&(o0|=t),$n===4&&oa(n,li)),tr(n,i),t===1&&zt===0&&!(e.mode&1)&&(_c=Ln()+500,n0&&ba()))}function tr(n,e){var t=n.callbackNode;Yk(n,e);var i=zg(n,n===ni?li:0);if(i===0)t!==null&&pT(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&pT(t),e===1)n.tag===0?qF(oA.bind(null,n)):w2(oA.bind(null,n)),WF(function(){!(zt&6)&&ba()}),t=null;else{switch(ZP(i)){case 1:t=w1;break;case 4:t=$P;break;case 16:t=Ug;break;case 536870912:t=qP;break;default:t=Ug}t=_I(t,fI.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function fI(n,e){if(rg=-1,sg=0,zt&6)throw Error(Te(327));var t=n.callbackNode;if(oc()&&n.callbackNode!==t)return null;var i=zg(n,n===ni?li:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=iv(n,i);else{e=i;var r=zt;zt|=2;var s=pI();(ni!==n||li!==e)&&(ho=null,_c=Ln()+500,pl(n,e));do try{mU();break}catch(a){dI(n,a)}while(!0);D1(),ev.current=s,zt=r,Bn!==null?e=0:(ni=null,li=0,e=$n)}if(e!==0){if(e===2&&(r=pw(n),r!==0&&(i=r,e=Hw(n,r))),e===1)throw t=Rf,pl(n,0),oa(n,i),tr(n,Ln()),t;if(e===6)oa(n,i);else{if(r=n.current.alternate,!(i&30)&&!dU(r)&&(e=iv(n,i),e===2&&(s=pw(n),s!==0&&(i=s,e=Hw(n,s))),e===1))throw t=Rf,pl(n,0),oa(n,i),tr(n,Ln()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Te(345));case 2:Qa(n,Yi,ho);break;case 3:if(oa(n,i),(i&130023424)===i&&(e=Y1+500-Ln(),10<e)){if(zg(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Bi(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=Sw(Qa.bind(null,n,Yi,ho),e);break}Qa(n,Yi,ho);break;case 4:if(oa(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-gs(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ln()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*fU(i/1960))-i,10<i){n.timeoutHandle=Sw(Qa.bind(null,n,Yi,ho),i);break}Qa(n,Yi,ho);break;case 5:Qa(n,Yi,ho);break;default:throw Error(Te(329))}}}return tr(n,Ln()),n.callbackNode===t?fI.bind(null,n):null}function Hw(n,e){var t=rf;return n.current.memoizedState.isDehydrated&&(pl(n,e).flags|=256),n=iv(n,e),n!==2&&(e=Yi,Yi=t,e!==null&&Gw(e)),n}function Gw(n){Yi===null?Yi=n:Yi.push.apply(Yi,n)}function dU(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!ys(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function oa(n,e){for(e&=~q1,e&=~o0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-gs(e),i=1<<t;n[t]=-1,e&=~i}}function oA(n){if(zt&6)throw Error(Te(327));oc();var e=zg(n,0);if(!(e&1))return tr(n,Ln()),null;var t=iv(n,e);if(n.tag!==0&&t===2){var i=pw(n);i!==0&&(e=i,t=Hw(n,i))}if(t===1)throw t=Rf,pl(n,0),oa(n,e),tr(n,Ln()),t;if(t===6)throw Error(Te(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Qa(n,Yi,ho),tr(n,Ln()),null}function Z1(n,e){var t=zt;zt|=1;try{return n(e)}finally{zt=t,zt===0&&(_c=Ln()+500,n0&&ba())}}function Tl(n){ua!==null&&ua.tag===0&&!(zt&6)&&oc();var e=zt;zt|=1;var t=Xr.transition,i=Zt;try{if(Xr.transition=null,Zt=1,n)return n()}finally{Zt=i,Xr.transition=t,zt=e,!(zt&6)&&ba()}}function K1(){pr=$u.current,on($u)}function pl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,GF(t)),Bn!==null)for(t=Bn.return;t!==null;){var i=t;switch(I1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Wg();break;case 3:vc(),on(Qi),on(Pi),B1();break;case 5:z1(i);break;case 4:vc();break;case 13:on(gn);break;case 19:on(gn);break;case 10:O1(i.type._context);break;case 22:case 23:K1()}t=t.return}if(ni=n,Bn=n=va(n.current,null),li=pr=e,$n=0,Rf=null,q1=o0=bl=0,Yi=rf=null,al!==null){for(e=0;e<al.length;e++)if(t=al[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}al=null}return n}function dI(n,e){do{var t=Bn;try{if(D1(),tg.current=Qg,Jg){for(var i=yn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Jg=!1}if(El=0,ei=Xn=yn=null,tf=!1,Tf=0,$1.current=null,t===null||t.return===null){$n=1,Rf=e,Bn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=li,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=$T(o);if(g!==null){g.flags&=-257,qT(g,o,a,s,e),g.mode&1&&XT(s,u,e),e=g,l=u;var v=e.updateQueue;if(v===null){var x=new Set;x.add(l),e.updateQueue=x}else v.add(l);break e}else{if(!(e&1)){XT(s,u,e),J1();break e}l=Error(Te(426))}}else if(hn&&a.mode&1){var _=$T(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),qT(_,o,a,s,e),L1(yc(l,a));break e}}s=l=yc(l,a),$n!==4&&($n=2),rf===null?rf=[s]:rf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=Z2(s,l,e);BT(s,m);break e;case 1:a=l;var w=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ma===null||!ma.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=K2(s,a,e);BT(s,b);break e}}s=s.return}while(s!==null)}gI(t)}catch(R){e=R,Bn===t&&t!==null&&(Bn=t=t.return);continue}break}while(!0)}function pI(){var n=ev.current;return ev.current=Qg,n===null?Qg:n}function J1(){($n===0||$n===3||$n===2)&&($n=4),ni===null||!(bl&268435455)&&!(o0&268435455)||oa(ni,li)}function iv(n,e){var t=zt;zt|=2;var i=pI();(ni!==n||li!==e)&&(ho=null,pl(n,e));do try{pU();break}catch(r){dI(n,r)}while(!0);if(D1(),zt=t,ev.current=i,Bn!==null)throw Error(Te(261));return ni=null,li=0,$n}function pU(){for(;Bn!==null;)mI(Bn)}function mU(){for(;Bn!==null&&!Bk();)mI(Bn)}function mI(n){var e=yI(n.alternate,n,pr);n.memoizedProps=n.pendingProps,e===null?gI(n):Bn=e,$1.current=null}function gI(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=lU(t,e),t!==null){t.flags&=32767,Bn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{$n=6,Bn=null;return}}else if(t=aU(t,e,pr),t!==null){Bn=t;return}if(e=e.sibling,e!==null){Bn=e;return}Bn=e=n}while(e!==null);$n===0&&($n=5)}function Qa(n,e,t){var i=Zt,r=Xr.transition;try{Xr.transition=null,Zt=1,gU(n,e,t,i)}finally{Xr.transition=r,Zt=i}return null}function gU(n,e,t,i){do oc();while(ua!==null);if(zt&6)throw Error(Te(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Te(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Zk(n,s),n===ni&&(Bn=ni=null,li=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Up||(Up=!0,_I(Ug,function(){return oc(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Xr.transition,Xr.transition=null;var o=Zt;Zt=1;var a=zt;zt|=4,$1.current=null,cU(n,t),cI(t,n),kF(xw),Bg=!!_w,xw=_w=null,n.current=t,hU(t),Vk(),zt=a,Zt=o,Xr.transition=s}else n.current=t;if(Up&&(Up=!1,ua=n,nv=r),s=n.pendingLanes,s===0&&(ma=null),Wk(t.stateNode),tr(n,Ln()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(tv)throw tv=!1,n=Bw,Bw=null,n;return nv&1&&n.tag!==0&&oc(),s=n.pendingLanes,s&1?n===Vw?sf++:(sf=0,Vw=n):sf=0,ba(),null}function oc(){if(ua!==null){var n=ZP(nv),e=Xr.transition,t=Zt;try{if(Xr.transition=null,Zt=16>n?16:n,ua===null)var i=!1;else{if(n=ua,ua=null,nv=0,zt&6)throw Error(Te(331));var r=zt;for(zt|=4,He=n.current;He!==null;){var s=He,o=s.child;if(He.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(He=u;He!==null;){var f=He;switch(f.tag){case 0:case 11:case 15:nf(8,f,s)}var d=f.child;if(d!==null)d.return=f,He=d;else for(;He!==null;){f=He;var p=f.sibling,g=f.return;if(aI(f),f===u){He=null;break}if(p!==null){p.return=g,He=p;break}He=g}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}He=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,He=o;else e:for(;He!==null;){if(s=He,s.flags&2048)switch(s.tag){case 0:case 11:case 15:nf(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,He=m;break e}He=s.return}}var w=n.current;for(He=w;He!==null;){o=He;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,He=S;else e:for(o=w;He!==null;){if(a=He,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:s0(9,a)}}catch(R){En(a,a.return,R)}if(a===o){He=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,He=b;break e}He=a.return}}if(zt=r,ba(),Vs&&typeof Vs.onPostCommitFiberRoot=="function")try{Vs.onPostCommitFiberRoot(Kv,n)}catch{}i=!0}return i}finally{Zt=t,Xr.transition=e}}return!1}function aA(n,e,t){e=yc(t,e),e=Z2(n,e,1),n=pa(n,e,1),e=Bi(),n!==null&&(ld(n,1,e),tr(n,e))}function En(n,e,t){if(n.tag===3)aA(n,n,t);else for(;e!==null;){if(e.tag===3){aA(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ma===null||!ma.has(i))){n=yc(t,n),n=K2(e,n,1),e=pa(e,n,1),n=Bi(),e!==null&&(ld(e,1,n),tr(e,n));break}}e=e.return}}function vU(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Bi(),n.pingedLanes|=n.suspendedLanes&t,ni===n&&(li&t)===t&&($n===4||$n===3&&(li&130023424)===li&&500>Ln()-Y1?pl(n,0):q1|=t),tr(n,e)}function vI(n,e){e===0&&(n.mode&1?(e=Cp,Cp<<=1,!(Cp&130023424)&&(Cp=4194304)):e=1);var t=Bi();n=To(n,e),n!==null&&(ld(n,e,t),tr(n,t))}function yU(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),vI(n,t)}function _U(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Te(314))}i!==null&&i.delete(e),vI(n,t)}var yI;yI=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Qi.current)Ki=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ki=!1,oU(n,e,t);Ki=!!(n.flags&131072)}else Ki=!1,hn&&e.flags&1048576&&S2(e,$g,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ig(n,e),n=e.pendingProps;var r=pc(e,Pi.current);sc(e,t),r=H1(null,e,i,n,r,t);var s=G1();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,er(i)?(s=!0,jg(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,F1(e),r.updater=r0,e.stateNode=r,r._reactInternals=e,Rw(e,i,n,t),e=Lw(null,e,i,!0,s,t)):(e.tag=0,hn&&s&&P1(e),Ui(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(ig(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=wU(i),n=us(i,n),r){case 0:e=Iw(null,e,i,n,t);break e;case 1:e=KT(null,e,i,n,t);break e;case 11:e=YT(null,e,i,n,t);break e;case 14:e=ZT(null,e,i,us(i.type,n),t);break e}throw Error(Te(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:us(i,r),Iw(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:us(i,r),KT(n,e,i,r,t);case 3:e:{if(tI(e),n===null)throw Error(Te(387));i=e.pendingProps,s=e.memoizedState,r=s.element,C2(n,e),Zg(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=yc(Error(Te(423)),e),e=JT(n,e,i,t,r);break e}else if(i!==r){r=yc(Error(Te(424)),e),e=JT(n,e,i,t,r);break e}else for(vr=da(e.stateNode.containerInfo.firstChild),xr=e,hn=!0,ds=null,t=T2(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(mc(),i===r){e=Ao(n,e,t);break e}Ui(n,e,i,t)}e=e.child}return e;case 5:return R2(e),n===null&&Tw(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,ww(i,r)?o=null:s!==null&&ww(i,s)&&(e.flags|=32),eI(n,e),Ui(n,e,o,t),e.child;case 6:return n===null&&Tw(e),null;case 13:return nI(n,e,t);case 4:return U1(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=gc(e,null,i,t):Ui(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:us(i,r),YT(n,e,i,r,t);case 7:return Ui(n,e,e.pendingProps,t),e.child;case 8:return Ui(n,e,e.pendingProps.children,t),e.child;case 12:return Ui(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,rn(qg,i._currentValue),i._currentValue=o,s!==null)if(ys(s.value,o)){if(s.children===r.children&&!Qi.current){e=Ao(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=wo(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Aw(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Te(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Aw(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ui(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,sc(e,t),r=$r(r),i=i(r),e.flags|=1,Ui(n,e,i,t),e.child;case 14:return i=e.type,r=us(i,e.pendingProps),r=us(i.type,r),ZT(n,e,i,r,t);case 15:return J2(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:us(i,r),ig(n,e),e.tag=1,er(i)?(n=!0,jg(e)):n=!1,sc(e,t),Y2(e,i,r),Rw(e,i,r,t),Lw(null,e,i,!0,n,t);case 19:return iI(n,e,t);case 22:return Q2(n,e,t)}throw Error(Te(156,e.tag))};function _I(n,e){return XP(n,e)}function xU(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(n,e,t,i){return new xU(n,e,t,i)}function Q1(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wU(n){if(typeof n=="function")return Q1(n)?1:0;if(n!=null){if(n=n.$$typeof,n===y1)return 11;if(n===_1)return 14}return 2}function va(n,e){var t=n.alternate;return t===null?(t=Wr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function og(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")Q1(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Fu:return ml(t.children,r,s,e);case v1:o=8,r|=8;break;case Qx:return n=Wr(12,t,e,r|2),n.elementType=Qx,n.lanes=s,n;case ew:return n=Wr(13,t,e,r),n.elementType=ew,n.lanes=s,n;case tw:return n=Wr(19,t,e,r),n.elementType=tw,n.lanes=s,n;case RP:return a0(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case AP:o=10;break e;case CP:o=9;break e;case y1:o=11;break e;case _1:o=14;break e;case ia:o=16,i=null;break e}throw Error(Te(130,n==null?n:typeof n,""))}return e=Wr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function ml(n,e,t,i){return n=Wr(7,n,i,e),n.lanes=t,n}function a0(n,e,t,i){return n=Wr(22,n,i,e),n.elementType=RP,n.lanes=t,n.stateNode={isHidden:!1},n}function H_(n,e,t){return n=Wr(6,n,null,e),n.lanes=t,n}function G_(n,e,t){return e=Wr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function SU(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=M_(0),this.expirationTimes=M_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=M_(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function eM(n,e,t,i,r,s,o,a,l){return n=new SU(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Wr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},F1(s),n}function MU(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ku,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function xI(n){if(!n)return xa;n=n._reactInternals;e:{if(Nl(n)!==n||n.tag!==1)throw Error(Te(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(er(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Te(171))}if(n.tag===1){var t=n.type;if(er(t))return x2(n,t,e)}return e}function wI(n,e,t,i,r,s,o,a,l){return n=eM(t,i,!0,n,r,s,o,a,l),n.context=xI(null),t=n.current,i=Bi(),r=ga(t),s=wo(i,r),s.callback=e??null,pa(t,s,r),n.current.lanes=r,ld(n,r,i),tr(n,i),n}function l0(n,e,t,i){var r=e.current,s=Bi(),o=ga(r);return t=xI(t),e.context===null?e.context=t:e.pendingContext=t,e=wo(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=pa(r,e,o),n!==null&&(vs(n,r,o,s),eg(n,r,o)),o}function rv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function lA(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function tM(n,e){lA(n,e),(n=n.alternate)&&lA(n,e)}function EU(){return null}var SI=typeof reportError=="function"?reportError:function(n){console.error(n)};function nM(n){this._internalRoot=n}u0.prototype.render=nM.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Te(409));l0(n,e,null,null)};u0.prototype.unmount=nM.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Tl(function(){l0(null,n,null,null)}),e[bo]=null}};function u0(n){this._internalRoot=n}u0.prototype.unstable_scheduleHydration=function(n){if(n){var e=QP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<sa.length&&e!==0&&e<sa[t].priority;t++);sa.splice(t,0,n),t===0&&t2(n)}};function iM(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function uA(){}function bU(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=rv(o);s.call(u)}}var o=wI(e,i,n,0,null,!1,!1,"",uA);return n._reactRootContainer=o,n[bo]=o.current,wf(n.nodeType===8?n.parentNode:n),Tl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=rv(l);a.call(u)}}var l=eM(n,0,!1,null,null,!1,!1,"",uA);return n._reactRootContainer=l,n[bo]=l.current,wf(n.nodeType===8?n.parentNode:n),Tl(function(){l0(e,l,t,i)}),l}function h0(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=rv(o);a.call(l)}}l0(e,o,n,r)}else o=bU(t,e,n,r,i);return rv(o)}KP=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Oh(e.pendingLanes);t!==0&&(S1(e,t|1),tr(e,Ln()),!(zt&6)&&(_c=Ln()+500,ba()))}break;case 13:Tl(function(){var i=To(n,1);if(i!==null){var r=Bi();vs(i,n,1,r)}}),tM(n,1)}};M1=function(n){if(n.tag===13){var e=To(n,134217728);if(e!==null){var t=Bi();vs(e,n,134217728,t)}tM(n,134217728)}};JP=function(n){if(n.tag===13){var e=ga(n),t=To(n,e);if(t!==null){var i=Bi();vs(t,n,e,i)}tM(n,e)}};QP=function(){return Zt};e2=function(n,e){var t=Zt;try{return Zt=n,e()}finally{Zt=t}};hw=function(n,e,t){switch(e){case"input":if(rw(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=t0(i);if(!r)throw Error(Te(90));IP(i),rw(i,r)}}}break;case"textarea":NP(n,t);break;case"select":e=t.value,e!=null&&tc(n,!!t.multiple,e,!1)}};BP=Z1;VP=Tl;var TU={usingClientEntryPoint:!1,Events:[cd,Vu,t0,UP,zP,Z1]},mh={findFiberByHostInstance:ol,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AU={bundleType:mh.bundleType,version:mh.version,rendererPackageName:mh.rendererPackageName,rendererConfig:mh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=WP(n),n===null?null:n.stateNode},findFiberByHostInstance:mh.findFiberByHostInstance||EU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zp.isDisabled&&zp.supportsFiber)try{Kv=zp.inject(AU),Vs=zp}catch{}}Ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TU;Ar.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iM(e))throw Error(Te(200));return MU(n,e,null,t)};Ar.createRoot=function(n,e){if(!iM(n))throw Error(Te(299));var t=!1,i="",r=SI;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=eM(n,1,!1,null,null,t,!1,i,r),n[bo]=e.current,wf(n.nodeType===8?n.parentNode:n),new nM(e)};Ar.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Te(188)):(n=Object.keys(n).join(","),Error(Te(268,n)));return n=WP(e),n=n===null?null:n.stateNode,n};Ar.flushSync=function(n){return Tl(n)};Ar.hydrate=function(n,e,t){if(!c0(e))throw Error(Te(200));return h0(null,n,e,!0,t)};Ar.hydrateRoot=function(n,e,t){if(!iM(n))throw Error(Te(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=SI;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=wI(e,null,n,1,t??null,r,!1,s,o),n[bo]=e.current,wf(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new u0(e)};Ar.render=function(n,e,t){if(!c0(e))throw Error(Te(200));return h0(null,n,e,!1,t)};Ar.unmountComponentAtNode=function(n){if(!c0(n))throw Error(Te(40));return n._reactRootContainer?(Tl(function(){h0(null,null,n,!1,function(){n._reactRootContainer=null,n[bo]=null})}),!0):!1};Ar.unstable_batchedUpdates=Z1;Ar.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!c0(t))throw Error(Te(200));if(n==null||n._reactInternals===void 0)throw Error(Te(38));return h0(n,e,t,!1,i)};Ar.version="18.3.1-next-f1338f8080-20240426";function MI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MI)}catch(n){console.error(n)}}MI(),MP.exports=Ar;var EI=MP.exports,cA=EI;Kx.createRoot=cA.createRoot,Kx.hydrateRoot=cA.hydrateRoot;function xc(){return xc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},xc.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const fd="164",el={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},tl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},bI=0,Ww=1,TI=2,CU=3,AI=0,f0=1,of=2,cs=3,Co=0,Ai=1,Fs=2,So=0,gl=1,jw=2,Xw=3,$w=4,CI=5,aa=100,RI=101,PI=102,II=103,LI=104,NI=200,DI=201,OI=202,kI=203,sv=204,ov=205,FI=206,UI=207,zI=208,BI=209,VI=210,HI=211,GI=212,WI=213,jI=214,XI=0,$I=1,qI=2,Pf=3,YI=4,ZI=5,KI=6,JI=7,dd=0,QI=1,eL=2,Gs=0,tL=1,nL=2,iL=3,rM=4,rL=5,sL=6,oL=7,qw="attached",aL="detached",d0=300,Ro=301,wa=302,If=303,Lf=304,Ic=306,Nf=1e3,jr=1001,Df=1002,ti=1003,sM=1004,RU=1004,qu=1005,PU=1005,An=1006,af=1007,IU=1007,Us=1008,LU=1008,Xs=1009,lL=1010,uL=1011,oM=1012,aM=1013,Al=1014,yr=1015,Lc=1016,lM=1017,uM=1018,Nc=1020,cL=35902,hL=1021,fL=1022,Ji=1023,dL=1024,pL=1025,vl=1026,wc=1027,cM=1028,hM=1029,mL=1030,fM=1031,dM=1033,ag=33776,lg=33777,ug=33778,cg=33779,Yw=35840,Zw=35841,Kw=35842,Jw=35843,Qw=36196,eS=37492,tS=37496,nS=37808,iS=37809,rS=37810,sS=37811,oS=37812,aS=37813,lS=37814,uS=37815,cS=37816,hS=37817,fS=37818,dS=37819,pS=37820,mS=37821,hg=36492,gS=36494,vS=36495,gL=36283,yS=36284,_S=36285,xS=36286,vL=2200,yL=2201,_L=2202,Of=2300,kf=2301,fg=2302,ul=2400,cl=2401,Ff=2402,p0=2500,pM=2501,NU=0,DU=1,OU=2,xL=3200,wL=3201,Ta=0,SL=1,mo="",Vr="srgb",No="srgb-linear",m0="display-p3",pd="display-p3-linear",Uf="linear",nn="srgb",zf="rec709",Bf="p3",kU=0,nl=7680,FU=7681,UU=7682,zU=7683,BU=34055,VU=34056,HU=5386,GU=512,WU=513,jU=514,XU=515,$U=516,qU=517,YU=518,wS=519,ML=512,EL=513,bL=514,mM=515,TL=516,AL=517,CL=518,RL=519,Vf=35044,ZU=35048,KU=35040,JU=35045,QU=35049,ez=35041,tz=35046,nz=35050,iz=35042,rz="100",SS="300 es",zs=2e3,Hf=2001;class $s{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const _i=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let hA=1234567;const yl=Math.PI/180,Sc=180/Math.PI;function wr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(_i[n&255]+_i[n>>8&255]+_i[n>>16&255]+_i[n>>24&255]+"-"+_i[e&255]+_i[e>>8&255]+"-"+_i[e>>16&15|64]+_i[e>>24&255]+"-"+_i[t&63|128]+_i[t>>8&255]+"-"+_i[t>>16&255]+_i[t>>24&255]+_i[i&255]+_i[i>>8&255]+_i[i>>16&255]+_i[i>>24&255]).toLowerCase()}function bn(n,e,t){return Math.max(e,Math.min(t,n))}function gM(n,e){return(n%e+e)%e}function sz(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function oz(n,e,t){return n!==e?(t-n)/(e-n):0}function lf(n,e,t){return(1-t)*n+t*e}function az(n,e,t,i){return lf(n,e,1-Math.exp(-t*i))}function lz(n,e=1){return e-Math.abs(gM(n,e*2)-e)}function uz(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function cz(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function hz(n,e){return n+Math.floor(Math.random()*(e-n+1))}function fz(n,e){return n+Math.random()*(e-n)}function dz(n){return n*(.5-Math.random())}function pz(n){n!==void 0&&(hA=n);let e=hA+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function mz(n){return n*yl}function gz(n){return n*Sc}function vz(n){return(n&n-1)===0&&n!==0}function yz(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function _z(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function xz(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+i)/2),f=o((e+i)/2),d=s((e-i)/2),p=o((e-i)/2),g=s((i-e)/2),v=o((i-e)/2);switch(r){case"XYX":n.set(a*f,l*d,l*p,a*u);break;case"YZY":n.set(l*p,a*f,l*d,a*u);break;case"ZXZ":n.set(l*d,l*p,a*f,a*u);break;case"XZX":n.set(a*f,l*v,l*g,a*u);break;case"YXY":n.set(l*g,a*f,l*v,a*u);break;case"ZYZ":n.set(l*v,l*g,a*f,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function zi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function St(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const PL={DEG2RAD:yl,RAD2DEG:Sc,generateUUID:wr,clamp:bn,euclideanModulo:gM,mapLinear:sz,inverseLerp:oz,lerp:lf,damp:az,pingpong:lz,smoothstep:uz,smootherstep:cz,randInt:hz,randFloat:fz,randFloatSpread:dz,seededRandom:pz,degToRad:mz,radToDeg:gz,isPowerOfTwo:vz,ceilPowerOfTwo:yz,floorPowerOfTwo:_z,setQuaternionFromProperEuler:xz,normalize:St,denormalize:zi};class ve{constructor(e=0,t=0){ve.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(bn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wt{constructor(e,t,i,r,s,o,a,l,u){wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u)}set(e,t,i,r,s,o,a,l,u){const f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=s,f[5]=l,f[6]=i,f[7]=o,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],u=i[1],f=i[4],d=i[7],p=i[2],g=i[5],v=i[8],x=r[0],_=r[3],m=r[6],w=r[1],S=r[4],b=r[7],R=r[2],A=r[5],C=r[8];return s[0]=o*x+a*w+l*R,s[3]=o*_+a*S+l*A,s[6]=o*m+a*b+l*C,s[1]=u*x+f*w+d*R,s[4]=u*_+f*S+d*A,s[7]=u*m+f*b+d*C,s[2]=p*x+g*w+v*R,s[5]=p*_+g*S+v*A,s[8]=p*m+g*b+v*C,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8];return t*o*f-t*a*u-i*s*f+i*a*l+r*s*u-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8],d=f*o-a*u,p=a*l-f*s,g=u*s-o*l,v=t*d+i*p+r*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/v;return e[0]=d*x,e[1]=(r*u-f*i)*x,e[2]=(a*i-r*o)*x,e[3]=p*x,e[4]=(f*t-r*l)*x,e[5]=(r*s-a*t)*x,e[6]=g*x,e[7]=(i*l-u*t)*x,e[8]=(o*t-i*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(W_.makeScale(e,t)),this}rotate(e){return this.premultiply(W_.makeRotation(-e)),this}translate(e,t){return this.premultiply(W_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const W_=new wt;function IL(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const wz={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Yu(n,e){return new wz[n](e)}function Gf(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function LL(){const n=Gf("canvas");return n.style.display="block",n}const fA={};function NL(n){n in fA||(fA[n]=!0,console.warn(n))}const dA=new wt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),pA=new wt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Bp={[No]:{transfer:Uf,primaries:zf,toReference:n=>n,fromReference:n=>n},[Vr]:{transfer:nn,primaries:zf,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[pd]:{transfer:Uf,primaries:Bf,toReference:n=>n.applyMatrix3(pA),fromReference:n=>n.applyMatrix3(dA)},[m0]:{transfer:nn,primaries:Bf,toReference:n=>n.convertSRGBToLinear().applyMatrix3(pA),fromReference:n=>n.applyMatrix3(dA).convertLinearToSRGB()}},Sz=new Set([No,pd]),qt={enabled:!0,_workingColorSpace:No,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!Sz.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Bp[e].toReference,r=Bp[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Bp[n].primaries},getTransfer:function(n){return n===mo?Uf:Bp[n].transfer}};function ac(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function j_(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let iu;class DL{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{iu===void 0&&(iu=Gf("canvas")),iu.width=e.width,iu.height=e.height;const i=iu.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=iu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Gf("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=ac(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(ac(t[i]/255)*255):t[i]=ac(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Mz=0;class hl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Mz++}),this.uuid=wr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(X_(r[o].image)):s.push(X_(r[o]))}else s=X_(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function X_(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?DL.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Ez=0;class _n extends $s{constructor(e=_n.DEFAULT_IMAGE,t=_n.DEFAULT_MAPPING,i=jr,r=jr,s=An,o=Us,a=Ji,l=Xs,u=_n.DEFAULT_ANISOTROPY,f=mo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ez++}),this.uuid=wr(),this.name="",this.source=new hl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ve(0,0),this.repeat=new ve(1,1),this.center=new ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==d0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Nf:e.x=e.x-Math.floor(e.x);break;case jr:e.x=e.x<0?0:1;break;case Df:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Nf:e.y=e.y-Math.floor(e.y);break;case jr:e.y=e.y<0?0:1;break;case Df:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}_n.DEFAULT_IMAGE=null;_n.DEFAULT_MAPPING=d0;_n.DEFAULT_ANISOTROPY=1;class Yt{constructor(e=0,t=0,i=0,r=1){Yt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],f=l[4],d=l[8],p=l[1],g=l[5],v=l[9],x=l[2],_=l[6],m=l[10];if(Math.abs(f-p)<.01&&Math.abs(d-x)<.01&&Math.abs(v-_)<.01){if(Math.abs(f+p)<.1&&Math.abs(d+x)<.1&&Math.abs(v+_)<.1&&Math.abs(u+g+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(u+1)/2,b=(g+1)/2,R=(m+1)/2,A=(f+p)/4,C=(d+x)/4,L=(v+_)/4;return S>b&&S>R?S<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(S),r=A/i,s=C/i):b>R?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=A/r,s=L/r):R<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(R),i=C/s,r=L/s),this.set(i,r,s,t),this}let w=Math.sqrt((_-v)*(_-v)+(d-x)*(d-x)+(p-f)*(p-f));return Math.abs(w)<.001&&(w=1),this.x=(_-v)/w,this.y=(d-x)/w,this.z=(p-f)/w,this.w=Math.acos((u+g+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class OL extends $s{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Yt(0,0,e,t),this.scissorTest=!1,this.viewport=new Yt(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:An,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new _n(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new hl(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Yr extends OL{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class g0 extends _n{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ti,this.minFilter=ti,this.wrapR=jr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class bz extends Yr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new g0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class vM extends _n{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ti,this.minFilter=ti,this.wrapR=jr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Tz extends Yr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new vM(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Ci{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],u=i[r+1],f=i[r+2],d=i[r+3];const p=s[o+0],g=s[o+1],v=s[o+2],x=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=f,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=g,e[t+2]=v,e[t+3]=x;return}if(d!==x||l!==p||u!==g||f!==v){let _=1-a;const m=l*p+u*g+f*v+d*x,w=m>=0?1:-1,S=1-m*m;if(S>Number.EPSILON){const R=Math.sqrt(S),A=Math.atan2(R,m*w);_=Math.sin(_*A)/R,a=Math.sin(a*A)/R}const b=a*w;if(l=l*_+p*b,u=u*_+g*b,f=f*_+v*b,d=d*_+x*b,_===1-a){const R=1/Math.sqrt(l*l+u*u+f*f+d*d);l*=R,u*=R,f*=R,d*=R}}e[t]=l,e[t+1]=u,e[t+2]=f,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],u=i[r+2],f=i[r+3],d=s[o],p=s[o+1],g=s[o+2],v=s[o+3];return e[t]=a*v+f*d+l*g-u*p,e[t+1]=l*v+f*p+u*d-a*g,e[t+2]=u*v+f*g+a*p-l*d,e[t+3]=f*v-a*d-l*p-u*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(i/2),f=a(r/2),d=a(s/2),p=l(i/2),g=l(r/2),v=l(s/2);switch(o){case"XYZ":this._x=p*f*d+u*g*v,this._y=u*g*d-p*f*v,this._z=u*f*v+p*g*d,this._w=u*f*d-p*g*v;break;case"YXZ":this._x=p*f*d+u*g*v,this._y=u*g*d-p*f*v,this._z=u*f*v-p*g*d,this._w=u*f*d+p*g*v;break;case"ZXY":this._x=p*f*d-u*g*v,this._y=u*g*d+p*f*v,this._z=u*f*v+p*g*d,this._w=u*f*d-p*g*v;break;case"ZYX":this._x=p*f*d-u*g*v,this._y=u*g*d+p*f*v,this._z=u*f*v-p*g*d,this._w=u*f*d+p*g*v;break;case"YZX":this._x=p*f*d+u*g*v,this._y=u*g*d+p*f*v,this._z=u*f*v-p*g*d,this._w=u*f*d-p*g*v;break;case"XZY":this._x=p*f*d-u*g*v,this._y=u*g*d-p*f*v,this._z=u*f*v+p*g*d,this._w=u*f*d+p*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],f=t[6],d=t[10],p=i+a+d;if(p>0){const g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(f-l)*g,this._y=(s-u)*g,this._z=(o-r)*g}else if(i>a&&i>d){const g=2*Math.sqrt(1+i-a-d);this._w=(f-l)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+u)/g}else if(a>d){const g=2*Math.sqrt(1+a-i-d);this._w=(s-u)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(l+f)/g}else{const g=2*Math.sqrt(1+d-i-a);this._w=(o-r)/g,this._x=(s+u)/g,this._y=(l+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(bn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,f=t._w;return this._x=i*f+o*a+r*u-s*l,this._y=r*f+o*l+s*a-i*u,this._z=s*f+o*u+i*l-r*a,this._w=o*f-i*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),f=Math.atan2(u,a),d=Math.sin((1-t)*f)/u,p=Math.sin(t*f)/u;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=r*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class U{constructor(e=0,t=0,i=0){U.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(mA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(mA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*r-a*i),f=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+l*u+o*d-a*f,this.y=i+l*f+a*u-s*d,this.z=r+l*d+s*f-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return $_.copy(this).projectOnVector(e),this.sub($_)}reflect(e){return this.sub($_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(bn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const $_=new U,mA=new Ci;class Vi{constructor(e=new U(1/0,1/0,1/0),t=new U(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(is.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(is.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=is.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,is):is.fromBufferAttribute(s,o),is.applyMatrix4(e.matrixWorld),this.expandByPoint(is);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Vp.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Vp.copy(i.boundingBox)),Vp.applyMatrix4(e.matrixWorld),this.union(Vp)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,is),is.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(gh),Hp.subVectors(this.max,gh),ru.subVectors(e.a,gh),su.subVectors(e.b,gh),ou.subVectors(e.c,gh),qo.subVectors(su,ru),Yo.subVectors(ou,su),Ba.subVectors(ru,ou);let t=[0,-qo.z,qo.y,0,-Yo.z,Yo.y,0,-Ba.z,Ba.y,qo.z,0,-qo.x,Yo.z,0,-Yo.x,Ba.z,0,-Ba.x,-qo.y,qo.x,0,-Yo.y,Yo.x,0,-Ba.y,Ba.x,0];return!q_(t,ru,su,ou,Hp)||(t=[1,0,0,0,1,0,0,0,1],!q_(t,ru,su,ou,Hp))?!1:(Gp.crossVectors(qo,Yo),t=[Gp.x,Gp.y,Gp.z],q_(t,ru,su,ou,Hp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,is).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(is).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(io[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),io[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),io[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),io[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),io[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),io[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),io[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),io[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(io),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const io=[new U,new U,new U,new U,new U,new U,new U,new U],is=new U,Vp=new Vi,ru=new U,su=new U,ou=new U,qo=new U,Yo=new U,Ba=new U,gh=new U,Hp=new U,Gp=new U,Va=new U;function q_(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Va.fromArray(n,s);const a=r.x*Math.abs(Va.x)+r.y*Math.abs(Va.y)+r.z*Math.abs(Va.z),l=e.dot(Va),u=t.dot(Va),f=i.dot(Va);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>a)return!1}return!0}const Az=new Vi,vh=new U,Y_=new U;let Ri=class{constructor(e=new U,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Az.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;vh.subVectors(e,this.center);const t=vh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(vh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Y_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(vh.copy(e.center).add(Y_)),this.expandByPoint(vh.copy(e.center).sub(Y_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const ro=new U,Z_=new U,Wp=new U,Zo=new U,K_=new U,jp=new U,J_=new U;class Dl{constructor(e=new U,t=new U(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ro)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ro.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ro.copy(this.origin).addScaledVector(this.direction,t),ro.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Z_.copy(e).add(t).multiplyScalar(.5),Wp.copy(t).sub(e).normalize(),Zo.copy(this.origin).sub(Z_);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Wp),a=Zo.dot(this.direction),l=-Zo.dot(Wp),u=Zo.lengthSq(),f=Math.abs(1-o*o);let d,p,g,v;if(f>0)if(d=o*l-a,p=o*a-l,v=s*f,d>=0)if(p>=-v)if(p<=v){const x=1/f;d*=x,p*=x,g=d*(d+o*p+2*a)+p*(o*d+p+2*l)+u}else p=s,d=Math.max(0,-(o*p+a)),g=-d*d+p*(p+2*l)+u;else p=-s,d=Math.max(0,-(o*p+a)),g=-d*d+p*(p+2*l)+u;else p<=-v?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),g=-d*d+p*(p+2*l)+u):p<=v?(d=0,p=Math.min(Math.max(-s,-l),s),g=p*(p+2*l)+u):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),g=-d*d+p*(p+2*l)+u);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),g=-d*d+p*(p+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(Z_).addScaledVector(Wp,p),g}intersectSphere(e,t){ro.subVectors(e.center,this.origin);const i=ro.dot(this.direction),r=ro.dot(ro)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const u=1/this.direction.x,f=1/this.direction.y,d=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),f>=0?(s=(e.min.y-p.y)*f,o=(e.max.y-p.y)*f):(s=(e.max.y-p.y)*f,o=(e.min.y-p.y)*f),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ro)!==null}intersectTriangle(e,t,i,r,s){K_.subVectors(t,e),jp.subVectors(i,e),J_.crossVectors(K_,jp);let o=this.direction.dot(J_),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Zo.subVectors(this.origin,e);const l=a*this.direction.dot(jp.crossVectors(Zo,jp));if(l<0)return null;const u=a*this.direction.dot(K_.cross(Zo));if(u<0||l+u>o)return null;const f=-a*Zo.dot(J_);return f<0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ht{constructor(e,t,i,r,s,o,a,l,u,f,d,p,g,v,x,_){ht.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u,f,d,p,g,v,x,_)}set(e,t,i,r,s,o,a,l,u,f,d,p,g,v,x,_){const m=this.elements;return m[0]=e,m[4]=t,m[8]=i,m[12]=r,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=u,m[6]=f,m[10]=d,m[14]=p,m[3]=g,m[7]=v,m[11]=x,m[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ht().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/au.setFromMatrixColumn(e,0).length(),s=1/au.setFromMatrixColumn(e,1).length(),o=1/au.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),f=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*f,g=o*d,v=a*f,x=a*d;t[0]=l*f,t[4]=-l*d,t[8]=u,t[1]=g+v*u,t[5]=p-x*u,t[9]=-a*l,t[2]=x-p*u,t[6]=v+g*u,t[10]=o*l}else if(e.order==="YXZ"){const p=l*f,g=l*d,v=u*f,x=u*d;t[0]=p+x*a,t[4]=v*a-g,t[8]=o*u,t[1]=o*d,t[5]=o*f,t[9]=-a,t[2]=g*a-v,t[6]=x+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*f,g=l*d,v=u*f,x=u*d;t[0]=p-x*a,t[4]=-o*d,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*f,t[9]=x-p*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*f,g=o*d,v=a*f,x=a*d;t[0]=l*f,t[4]=v*u-g,t[8]=p*u+x,t[1]=l*d,t[5]=x*u+p,t[9]=g*u-v,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,g=o*u,v=a*l,x=a*u;t[0]=l*f,t[4]=x-p*d,t[8]=v*d+g,t[1]=d,t[5]=o*f,t[9]=-a*f,t[2]=-u*f,t[6]=g*d+v,t[10]=p-x*d}else if(e.order==="XZY"){const p=o*l,g=o*u,v=a*l,x=a*u;t[0]=l*f,t[4]=-d,t[8]=u*f,t[1]=p*d+x,t[5]=o*f,t[9]=g*d-v,t[2]=v*d-g,t[6]=a*f,t[10]=x*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Cz,e,Rz)}lookAt(e,t,i){const r=this.elements;return cr.subVectors(e,t),cr.lengthSq()===0&&(cr.z=1),cr.normalize(),Ko.crossVectors(i,cr),Ko.lengthSq()===0&&(Math.abs(i.z)===1?cr.x+=1e-4:cr.z+=1e-4,cr.normalize(),Ko.crossVectors(i,cr)),Ko.normalize(),Xp.crossVectors(cr,Ko),r[0]=Ko.x,r[4]=Xp.x,r[8]=cr.x,r[1]=Ko.y,r[5]=Xp.y,r[9]=cr.y,r[2]=Ko.z,r[6]=Xp.z,r[10]=cr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],u=i[12],f=i[1],d=i[5],p=i[9],g=i[13],v=i[2],x=i[6],_=i[10],m=i[14],w=i[3],S=i[7],b=i[11],R=i[15],A=r[0],C=r[4],L=r[8],I=r[12],E=r[1],N=r[5],z=r[9],O=r[13],q=r[2],j=r[6],Q=r[10],oe=r[14],k=r[3],W=r[7],G=r[11],ne=r[15];return s[0]=o*A+a*E+l*q+u*k,s[4]=o*C+a*N+l*j+u*W,s[8]=o*L+a*z+l*Q+u*G,s[12]=o*I+a*O+l*oe+u*ne,s[1]=f*A+d*E+p*q+g*k,s[5]=f*C+d*N+p*j+g*W,s[9]=f*L+d*z+p*Q+g*G,s[13]=f*I+d*O+p*oe+g*ne,s[2]=v*A+x*E+_*q+m*k,s[6]=v*C+x*N+_*j+m*W,s[10]=v*L+x*z+_*Q+m*G,s[14]=v*I+x*O+_*oe+m*ne,s[3]=w*A+S*E+b*q+R*k,s[7]=w*C+S*N+b*j+R*W,s[11]=w*L+S*z+b*Q+R*G,s[15]=w*I+S*O+b*oe+R*ne,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],f=e[2],d=e[6],p=e[10],g=e[14],v=e[3],x=e[7],_=e[11],m=e[15];return v*(+s*l*d-r*u*d-s*a*p+i*u*p+r*a*g-i*l*g)+x*(+t*l*g-t*u*p+s*o*p-r*o*g+r*u*f-s*l*f)+_*(+t*u*d-t*a*g-s*o*d+i*o*g+s*a*f-i*u*f)+m*(-r*a*f-t*l*d+t*a*p+r*o*d-i*o*p+i*l*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8],d=e[9],p=e[10],g=e[11],v=e[12],x=e[13],_=e[14],m=e[15],w=d*_*u-x*p*u+x*l*g-a*_*g-d*l*m+a*p*m,S=v*p*u-f*_*u-v*l*g+o*_*g+f*l*m-o*p*m,b=f*x*u-v*d*u+v*a*g-o*x*g-f*a*m+o*d*m,R=v*d*l-f*x*l-v*a*p+o*x*p+f*a*_-o*d*_,A=t*w+i*S+r*b+s*R;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/A;return e[0]=w*C,e[1]=(x*p*s-d*_*s-x*r*g+i*_*g+d*r*m-i*p*m)*C,e[2]=(a*_*s-x*l*s+x*r*u-i*_*u-a*r*m+i*l*m)*C,e[3]=(d*l*s-a*p*s-d*r*u+i*p*u+a*r*g-i*l*g)*C,e[4]=S*C,e[5]=(f*_*s-v*p*s+v*r*g-t*_*g-f*r*m+t*p*m)*C,e[6]=(v*l*s-o*_*s-v*r*u+t*_*u+o*r*m-t*l*m)*C,e[7]=(o*p*s-f*l*s+f*r*u-t*p*u-o*r*g+t*l*g)*C,e[8]=b*C,e[9]=(v*d*s-f*x*s-v*i*g+t*x*g+f*i*m-t*d*m)*C,e[10]=(o*x*s-v*a*s+v*i*u-t*x*u-o*i*m+t*a*m)*C,e[11]=(f*a*s-o*d*s-f*i*u+t*d*u+o*i*g-t*a*g)*C,e[12]=R*C,e[13]=(f*x*r-v*d*r+v*i*p-t*x*p-f*i*_+t*d*_)*C,e[14]=(v*a*r-o*x*r-v*i*l+t*x*l+o*i*_-t*a*_)*C,e[15]=(o*d*r-f*a*r+f*i*l-t*d*l-o*i*p+t*a*p)*C,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,u=s*o,f=s*a;return this.set(u*o+i,u*a-r*l,u*l+r*a,0,u*a+r*l,f*a+i,f*l-r*o,0,u*l-r*a,f*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,f=o+o,d=a+a,p=s*u,g=s*f,v=s*d,x=o*f,_=o*d,m=a*d,w=l*u,S=l*f,b=l*d,R=i.x,A=i.y,C=i.z;return r[0]=(1-(x+m))*R,r[1]=(g+b)*R,r[2]=(v-S)*R,r[3]=0,r[4]=(g-b)*A,r[5]=(1-(p+m))*A,r[6]=(_+w)*A,r[7]=0,r[8]=(v+S)*C,r[9]=(_-w)*C,r[10]=(1-(p+x))*C,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=au.set(r[0],r[1],r[2]).length();const o=au.set(r[4],r[5],r[6]).length(),a=au.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],rs.copy(this);const u=1/s,f=1/o,d=1/a;return rs.elements[0]*=u,rs.elements[1]*=u,rs.elements[2]*=u,rs.elements[4]*=f,rs.elements[5]*=f,rs.elements[6]*=f,rs.elements[8]*=d,rs.elements[9]*=d,rs.elements[10]*=d,t.setFromRotationMatrix(rs),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=zs){const l=this.elements,u=2*s/(t-e),f=2*s/(i-r),d=(t+e)/(t-e),p=(i+r)/(i-r);let g,v;if(a===zs)g=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===Hf)g=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=f,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=zs){const l=this.elements,u=1/(t-e),f=1/(i-r),d=1/(o-s),p=(t+e)*u,g=(i+r)*f;let v,x;if(a===zs)v=(o+s)*d,x=-2*d;else if(a===Hf)v=s*d,x=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=x,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const au=new U,rs=new ht,Cz=new U(0,0,0),Rz=new U(1,1,1),Ko=new U,Xp=new U,cr=new U,gA=new ht,vA=new Ci;class Er{constructor(e=0,t=0,i=0,r=Er.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],f=r[9],d=r[2],p=r[6],g=r[10];switch(t){case"XYZ":this._y=Math.asin(bn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-bn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,g),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(bn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,g),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-bn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,g),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(bn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,g));break;case"XZY":this._z=Math.asin(-bn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-f,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return gA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gA,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return vA.setFromEuler(this),this.setFromQuaternion(vA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Er.DEFAULT_ORDER="XYZ";class _l{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Pz=0;const yA=new U,lu=new Ci,so=new ht,$p=new U,yh=new U,Iz=new U,Lz=new Ci,_A=new U(1,0,0),xA=new U(0,1,0),wA=new U(0,0,1),SA={type:"added"},Nz={type:"removed"},uu={type:"childadded",child:null},Q_={type:"childremoved",child:null};class Gt extends $s{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Pz++}),this.uuid=wr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gt.DEFAULT_UP.clone();const e=new U,t=new Er,i=new Ci,r=new U(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ht},normalMatrix:{value:new wt}}),this.matrix=new ht,this.matrixWorld=new ht,this.matrixAutoUpdate=Gt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Gt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new _l,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return lu.setFromAxisAngle(e,t),this.quaternion.multiply(lu),this}rotateOnWorldAxis(e,t){return lu.setFromAxisAngle(e,t),this.quaternion.premultiply(lu),this}rotateX(e){return this.rotateOnAxis(_A,e)}rotateY(e){return this.rotateOnAxis(xA,e)}rotateZ(e){return this.rotateOnAxis(wA,e)}translateOnAxis(e,t){return yA.copy(e).applyQuaternion(this.quaternion),this.position.add(yA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_A,e)}translateY(e){return this.translateOnAxis(xA,e)}translateZ(e){return this.translateOnAxis(wA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(so.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?$p.copy(e):$p.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),yh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?so.lookAt(yh,$p,this.up):so.lookAt($p,yh,this.up),this.quaternion.setFromRotationMatrix(so),r&&(so.extractRotation(r.matrixWorld),lu.setFromRotationMatrix(so),this.quaternion.premultiply(lu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(SA),uu.child=e,this.dispatchEvent(uu),uu.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Nz),Q_.child=e,this.dispatchEvent(Q_),Q_.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),so.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),so.multiply(e.parent.matrixWorld)),e.applyMatrix4(so),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(SA),uu.child=e,this.dispatchEvent(uu),uu.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yh,e,Iz),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yh,Lz,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++){const d=l[u];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),f=o(e.images),d=o(e.shapes),p=o(e.skeletons),g=o(e.animations),v=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),f.length>0&&(i.images=f),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),g.length>0&&(i.animations=g),v.length>0&&(i.nodes=v)}return i.object=r,i;function o(a){const l=[];for(const u in a){const f=a[u];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Gt.DEFAULT_UP=new U(0,1,0);Gt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Gt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ss=new U,oo=new U,ex=new U,ao=new U,cu=new U,hu=new U,MA=new U,tx=new U,nx=new U,ix=new U;class gr{constructor(e=new U,t=new U,i=new U){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ss.subVectors(e,t),r.cross(ss);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ss.subVectors(r,t),oo.subVectors(i,t),ex.subVectors(e,t);const o=ss.dot(ss),a=ss.dot(oo),l=ss.dot(ex),u=oo.dot(oo),f=oo.dot(ex),d=o*u-a*a;if(d===0)return s.set(0,0,0),null;const p=1/d,g=(u*l-a*f)*p,v=(o*f-a*l)*p;return s.set(1-g-v,v,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ao)===null?!1:ao.x>=0&&ao.y>=0&&ao.x+ao.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,ao)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ao.x),l.addScaledVector(o,ao.y),l.addScaledVector(a,ao.z),l)}static isFrontFacing(e,t,i,r){return ss.subVectors(i,t),oo.subVectors(e,t),ss.cross(oo).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ss.subVectors(this.c,this.b),oo.subVectors(this.a,this.b),ss.cross(oo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return gr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return gr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return gr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return gr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return gr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;cu.subVectors(r,i),hu.subVectors(s,i),tx.subVectors(e,i);const l=cu.dot(tx),u=hu.dot(tx);if(l<=0&&u<=0)return t.copy(i);nx.subVectors(e,r);const f=cu.dot(nx),d=hu.dot(nx);if(f>=0&&d<=f)return t.copy(r);const p=l*d-f*u;if(p<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(i).addScaledVector(cu,o);ix.subVectors(e,s);const g=cu.dot(ix),v=hu.dot(ix);if(v>=0&&g<=v)return t.copy(s);const x=g*u-l*v;if(x<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(i).addScaledVector(hu,a);const _=f*v-g*d;if(_<=0&&d-f>=0&&g-v>=0)return MA.subVectors(s,r),a=(d-f)/(d-f+(g-v)),t.copy(r).addScaledVector(MA,a);const m=1/(_+x+p);return o=x*m,a=p*m,t.copy(i).addScaledVector(cu,o).addScaledVector(hu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const kL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Jo={h:0,s:0,l:0},qp={h:0,s:0,l:0};function rx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class ze{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Vr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,qt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=qt.workingColorSpace){return this.r=e,this.g=t,this.b=i,qt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=qt.workingColorSpace){if(e=gM(e,1),t=bn(t,0,1),i=bn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=rx(o,s,e+1/3),this.g=rx(o,s,e),this.b=rx(o,s,e-1/3)}return qt.toWorkingColorSpace(this,r),this}setStyle(e,t=Vr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Vr){const i=kL[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ac(e.r),this.g=ac(e.g),this.b=ac(e.b),this}copyLinearToSRGB(e){return this.r=j_(e.r),this.g=j_(e.g),this.b=j_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Vr){return qt.fromWorkingColorSpace(xi.copy(this),e),Math.round(bn(xi.r*255,0,255))*65536+Math.round(bn(xi.g*255,0,255))*256+Math.round(bn(xi.b*255,0,255))}getHexString(e=Vr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=qt.workingColorSpace){qt.fromWorkingColorSpace(xi.copy(this),t);const i=xi.r,r=xi.g,s=xi.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,u;const f=(a+o)/2;if(a===o)l=0,u=0;else{const d=o-a;switch(u=f<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=f,e}getRGB(e,t=qt.workingColorSpace){return qt.fromWorkingColorSpace(xi.copy(this),t),e.r=xi.r,e.g=xi.g,e.b=xi.b,e}getStyle(e=Vr){qt.fromWorkingColorSpace(xi.copy(this),e);const t=xi.r,i=xi.g,r=xi.b;return e!==Vr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Jo),this.setHSL(Jo.h+e,Jo.s+t,Jo.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Jo),e.getHSL(qp);const i=lf(Jo.h,qp.h,t),r=lf(Jo.s,qp.s,t),s=lf(Jo.l,qp.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const xi=new ze;ze.NAMES=kL;let Dz=0;class hi extends $s{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Dz++}),this.uuid=wr(),this.name="",this.type="Material",this.blending=gl,this.side=Co,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=sv,this.blendDst=ov,this.blendEquation=aa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ze(0,0,0),this.blendAlpha=0,this.depthFunc=Pf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=wS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=nl,this.stencilZFail=nl,this.stencilZPass=nl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==gl&&(i.blending=this.blending),this.side!==Co&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==sv&&(i.blendSrc=this.blendSrc),this.blendDst!==ov&&(i.blendDst=this.blendDst),this.blendEquation!==aa&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Pf&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==wS&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==nl&&(i.stencilFail=this.stencilFail),this.stencilZFail!==nl&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==nl&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Aa extends hi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.combine=dd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const go=Oz();function Oz(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,f=0;for(;!(u&8388608);)u<<=1,f-=8388608;u&=-8388609,f+=947912704,s[l]=u|f}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function qi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=bn(n,-65504,65504),go.floatView[0]=n;const e=go.uint32View[0],t=e>>23&511;return go.baseTable[t]+((e&8388607)>>go.shiftTable[t])}function Fh(n){const e=n>>10;return go.uint32View[0]=go.mantissaTable[go.offsetTable[e]+(n&1023)]+go.exponentTable[e],go.floatView[0]}const kz={toHalfFloat:qi,fromHalfFloat:Fh},Un=new U,Yp=new ve;class Kt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Vf,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=yr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return NL("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Yp.fromBufferAttribute(this,t),Yp.applyMatrix3(e),this.setXY(t,Yp.x,Yp.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Un.fromBufferAttribute(this,t),Un.applyMatrix3(e),this.setXYZ(t,Un.x,Un.y,Un.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Un.fromBufferAttribute(this,t),Un.applyMatrix4(e),this.setXYZ(t,Un.x,Un.y,Un.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Un.fromBufferAttribute(this,t),Un.applyNormalMatrix(e),this.setXYZ(t,Un.x,Un.y,Un.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Un.fromBufferAttribute(this,t),Un.transformDirection(e),this.setXYZ(t,Un.x,Un.y,Un.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=zi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=St(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=zi(t,this.array)),t}setX(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=zi(t,this.array)),t}setY(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=zi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=zi(t,this.array)),t}setW(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array),s=St(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Vf&&(e.usage=this.usage),e}}class Fz extends Kt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Uz extends Kt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class zz extends Kt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class Bz extends Kt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class yM extends Kt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Vz extends Kt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class _M extends Kt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Hz extends Kt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Fh(this.array[e*this.itemSize]);return this.normalized&&(t=zi(t,this.array)),t}setX(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize]=qi(t),this}getY(e){let t=Fh(this.array[e*this.itemSize+1]);return this.normalized&&(t=zi(t,this.array)),t}setY(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+1]=qi(t),this}getZ(e){let t=Fh(this.array[e*this.itemSize+2]);return this.normalized&&(t=zi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+2]=qi(t),this}getW(e){let t=Fh(this.array[e*this.itemSize+3]);return this.normalized&&(t=zi(t,this.array)),t}setW(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+3]=qi(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array)),this.array[e+0]=qi(t),this.array[e+1]=qi(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array)),this.array[e+0]=qi(t),this.array[e+1]=qi(i),this.array[e+2]=qi(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array),s=St(s,this.array)),this.array[e+0]=qi(t),this.array[e+1]=qi(i),this.array[e+2]=qi(r),this.array[e+3]=qi(s),this}}class je extends Kt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Gz=0;const Ur=new ht,sx=new Gt,fu=new U,hr=new Vi,_h=new Vi,Qn=new U;class Tt extends $s{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Gz++}),this.uuid=wr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(IL(e)?_M:yM)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new wt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ur.makeRotationFromQuaternion(e),this.applyMatrix4(Ur),this}rotateX(e){return Ur.makeRotationX(e),this.applyMatrix4(Ur),this}rotateY(e){return Ur.makeRotationY(e),this.applyMatrix4(Ur),this}rotateZ(e){return Ur.makeRotationZ(e),this.applyMatrix4(Ur),this}translate(e,t,i){return Ur.makeTranslation(e,t,i),this.applyMatrix4(Ur),this}scale(e,t,i){return Ur.makeScale(e,t,i),this.applyMatrix4(Ur),this}lookAt(e){return sx.lookAt(e),sx.updateMatrix(),this.applyMatrix4(sx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(fu).negate(),this.translate(fu.x,fu.y,fu.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new je(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new U(-1/0,-1/0,-1/0),new U(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];hr.setFromBufferAttribute(s),this.morphTargetsRelative?(Qn.addVectors(this.boundingBox.min,hr.min),this.boundingBox.expandByPoint(Qn),Qn.addVectors(this.boundingBox.max,hr.max),this.boundingBox.expandByPoint(Qn)):(this.boundingBox.expandByPoint(hr.min),this.boundingBox.expandByPoint(hr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ri);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new U,1/0);return}if(e){const i=this.boundingSphere.center;if(hr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];_h.setFromBufferAttribute(a),this.morphTargetsRelative?(Qn.addVectors(hr.min,_h.min),hr.expandByPoint(Qn),Qn.addVectors(hr.max,_h.max),hr.expandByPoint(Qn)):(hr.expandByPoint(_h.min),hr.expandByPoint(_h.max))}hr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Qn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Qn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,f=a.count;u<f;u++)Qn.fromBufferAttribute(a,u),l&&(fu.fromBufferAttribute(e,u),Qn.add(fu)),r=Math.max(r,i.distanceToSquared(Qn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Kt(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let L=0;L<i.count;L++)a[L]=new U,l[L]=new U;const u=new U,f=new U,d=new U,p=new ve,g=new ve,v=new ve,x=new U,_=new U;function m(L,I,E){u.fromBufferAttribute(i,L),f.fromBufferAttribute(i,I),d.fromBufferAttribute(i,E),p.fromBufferAttribute(s,L),g.fromBufferAttribute(s,I),v.fromBufferAttribute(s,E),f.sub(u),d.sub(u),g.sub(p),v.sub(p);const N=1/(g.x*v.y-v.x*g.y);isFinite(N)&&(x.copy(f).multiplyScalar(v.y).addScaledVector(d,-g.y).multiplyScalar(N),_.copy(d).multiplyScalar(g.x).addScaledVector(f,-v.x).multiplyScalar(N),a[L].add(x),a[I].add(x),a[E].add(x),l[L].add(_),l[I].add(_),l[E].add(_))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let L=0,I=w.length;L<I;++L){const E=w[L],N=E.start,z=E.count;for(let O=N,q=N+z;O<q;O+=3)m(e.getX(O+0),e.getX(O+1),e.getX(O+2))}const S=new U,b=new U,R=new U,A=new U;function C(L){R.fromBufferAttribute(r,L),A.copy(R);const I=a[L];S.copy(I),S.sub(R.multiplyScalar(R.dot(I))).normalize(),b.crossVectors(A,I);const N=b.dot(l[L])<0?-1:1;o.setXYZW(L,S.x,S.y,S.z,N)}for(let L=0,I=w.length;L<I;++L){const E=w[L],N=E.start,z=E.count;for(let O=N,q=N+z;O<q;O+=3)C(e.getX(O+0)),C(e.getX(O+1)),C(e.getX(O+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Kt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,g=i.count;p<g;p++)i.setXYZ(p,0,0,0);const r=new U,s=new U,o=new U,a=new U,l=new U,u=new U,f=new U,d=new U;if(e)for(let p=0,g=e.count;p<g;p+=3){const v=e.getX(p+0),x=e.getX(p+1),_=e.getX(p+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,_),f.subVectors(o,s),d.subVectors(r,s),f.cross(d),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,x),u.fromBufferAttribute(i,_),a.add(f),l.add(f),u.add(f),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(_,u.x,u.y,u.z)}else for(let p=0,g=t.count;p<g;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),f.subVectors(o,s),d.subVectors(r,s),f.cross(d),i.setXYZ(p+0,f.x,f.y,f.z),i.setXYZ(p+1,f.x,f.y,f.z),i.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Qn.fromBufferAttribute(e,t),Qn.normalize(),e.setXYZ(t,Qn.x,Qn.y,Qn.z)}toNonIndexed(){function e(a,l){const u=a.array,f=a.itemSize,d=a.normalized,p=new u.constructor(l.length*f);let g=0,v=0;for(let x=0,_=l.length;x<_;x++){a.isInterleavedBufferAttribute?g=l[x]*a.data.stride+a.offset:g=l[x]*f;for(let m=0;m<f;m++)p[v++]=u[g++]}return new Kt(p,f,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Tt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,i);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let f=0,d=u.length;f<d;f++){const p=u[f],g=e(p,i);l.push(g)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],f=[];for(let d=0,p=u.length;d<p;d++){const g=u[d];f.push(g.toJSON(e.data))}f.length>0&&(r[l]=f,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const u in r){const f=r[u];this.setAttribute(u,f.clone(t))}const s=e.morphAttributes;for(const u in s){const f=[],d=s[u];for(let p=0,g=d.length;p<g;p++)f.push(d[p].clone(t));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,f=o.length;u<f;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const EA=new ht,Ha=new Dl,Zp=new Ri,bA=new U,du=new U,pu=new U,mu=new U,ox=new U,Kp=new U,Jp=new ve,Qp=new ve,em=new ve,TA=new U,AA=new U,CA=new U,tm=new U,nm=new U;class Vn extends Gt{constructor(e=new Tt,t=new Aa){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Kp.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const f=a[l],d=s[l];f!==0&&(ox.fromBufferAttribute(d,e),o?Kp.addScaledVector(ox,f):Kp.addScaledVector(ox.sub(t),f))}t.add(Kp)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Zp.copy(i.boundingSphere),Zp.applyMatrix4(s),Ha.copy(e.ray).recast(e.near),!(Zp.containsPoint(Ha.origin)===!1&&(Ha.intersectSphere(Zp,bA)===null||Ha.origin.distanceToSquared(bA)>(e.far-e.near)**2))&&(EA.copy(s).invert(),Ha.copy(e.ray).applyMatrix4(EA),!(i.boundingBox!==null&&Ha.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Ha)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,f=s.attributes.uv1,d=s.attributes.normal,p=s.groups,g=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,x=p.length;v<x;v++){const _=p[v],m=o[_.materialIndex],w=Math.max(_.start,g.start),S=Math.min(a.count,Math.min(_.start+_.count,g.start+g.count));for(let b=w,R=S;b<R;b+=3){const A=a.getX(b),C=a.getX(b+1),L=a.getX(b+2);r=im(this,m,e,i,u,f,d,A,C,L),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const v=Math.max(0,g.start),x=Math.min(a.count,g.start+g.count);for(let _=v,m=x;_<m;_+=3){const w=a.getX(_),S=a.getX(_+1),b=a.getX(_+2);r=im(this,o,e,i,u,f,d,w,S,b),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,x=p.length;v<x;v++){const _=p[v],m=o[_.materialIndex],w=Math.max(_.start,g.start),S=Math.min(l.count,Math.min(_.start+_.count,g.start+g.count));for(let b=w,R=S;b<R;b+=3){const A=b,C=b+1,L=b+2;r=im(this,m,e,i,u,f,d,A,C,L),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const v=Math.max(0,g.start),x=Math.min(l.count,g.start+g.count);for(let _=v,m=x;_<m;_+=3){const w=_,S=_+1,b=_+2;r=im(this,o,e,i,u,f,d,w,S,b),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}}}function Wz(n,e,t,i,r,s,o,a){let l;if(e.side===Ai?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Co,a),l===null)return null;nm.copy(a),nm.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(nm);return u<t.near||u>t.far?null:{distance:u,point:nm.clone(),object:n}}function im(n,e,t,i,r,s,o,a,l,u){n.getVertexPosition(a,du),n.getVertexPosition(l,pu),n.getVertexPosition(u,mu);const f=Wz(n,e,t,i,du,pu,mu,tm);if(f){r&&(Jp.fromBufferAttribute(r,a),Qp.fromBufferAttribute(r,l),em.fromBufferAttribute(r,u),f.uv=gr.getInterpolation(tm,du,pu,mu,Jp,Qp,em,new ve)),s&&(Jp.fromBufferAttribute(s,a),Qp.fromBufferAttribute(s,l),em.fromBufferAttribute(s,u),f.uv1=gr.getInterpolation(tm,du,pu,mu,Jp,Qp,em,new ve)),o&&(TA.fromBufferAttribute(o,a),AA.fromBufferAttribute(o,l),CA.fromBufferAttribute(o,u),f.normal=gr.getInterpolation(tm,du,pu,mu,TA,AA,CA,new U),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));const d={a,b:l,c:u,normal:new U,materialIndex:0};gr.getNormal(du,pu,mu,d.normal),f.face=d}return f}class Ol extends Tt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],f=[],d=[];let p=0,g=0;v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new je(u,3)),this.setAttribute("normal",new je(f,3)),this.setAttribute("uv",new je(d,2));function v(x,_,m,w,S,b,R,A,C,L,I){const E=b/C,N=R/L,z=b/2,O=R/2,q=A/2,j=C+1,Q=L+1;let oe=0,k=0;const W=new U;for(let G=0;G<Q;G++){const ne=G*N-O;for(let me=0;me<j;me++){const _e=me*E-z;W[x]=_e*w,W[_]=ne*S,W[m]=q,u.push(W.x,W.y,W.z),W[x]=0,W[_]=0,W[m]=A>0?1:-1,f.push(W.x,W.y,W.z),d.push(me/C),d.push(1-G/L),oe+=1}}for(let G=0;G<L;G++)for(let ne=0;ne<C;ne++){const me=p+ne+j*G,_e=p+ne+j*(G+1),J=p+(ne+1)+j*(G+1),pe=p+(ne+1)+j*G;l.push(me,_e,pe),l.push(_e,J,pe),k+=6}a.addGroup(g,k,I),g+=k,p+=oe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ol(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Mc(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function ki(n){const e={};for(let t=0;t<n.length;t++){const i=Mc(n[t]);for(const r in i)e[r]=i[r]}return e}function jz(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function FL(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:qt.workingColorSpace}const xM={clone:Mc,merge:ki};var Xz=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,$z=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Zr extends hi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Xz,this.fragmentShader=$z,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Mc(e.uniforms),this.uniformsGroups=jz(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class md extends Gt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ht,this.projectionMatrix=new ht,this.projectionMatrixInverse=new ht,this.coordinateSystem=zs}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Qo=new U,RA=new ve,PA=new ve;let Tn=class extends md{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Sc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(yl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Sc*2*Math.atan(Math.tan(yl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Qo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Qo.x,Qo.y).multiplyScalar(-e/Qo.z),Qo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Qo.x,Qo.y).multiplyScalar(-e/Qo.z)}getViewSize(e,t){return this.getViewBounds(e,RA,PA),t.subVectors(PA,RA)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(yl*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/u,r*=o.width/l,i*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const gu=-90,vu=1;class UL extends Gt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Tn(gu,vu,e,t);r.layers=this.layers,this.add(r);const s=new Tn(gu,vu,e,t);s.layers=this.layers,this.add(s);const o=new Tn(gu,vu,e,t);o.layers=this.layers,this.add(o);const a=new Tn(gu,vu,e,t);a.layers=this.layers,this.add(a);const l=new Tn(gu,vu,e,t);l.layers=this.layers,this.add(l);const u=new Tn(gu,vu,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===zs)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Hf)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,f]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=x,e.setRenderTarget(i,5,r),e.render(t,f),e.setRenderTarget(d,p,g),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class gd extends _n{constructor(e,t,i,r,s,o,a,l,u,f){e=e!==void 0?e:[],t=t!==void 0?t:Ro,super(e,t,i,r,s,o,a,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class zL extends Yr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new gd(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:An}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Ol(5,5,5),s=new Zr({name:"CubemapFromEquirect",uniforms:Mc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ai,blending:So});s.uniforms.tEquirect.value=t;const o=new Vn(r,s),a=t.minFilter;return t.minFilter===Us&&(t.minFilter=An),new UL(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const ax=new U,qz=new U,Yz=new wt;class Ns{constructor(e=new U(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=ax.subVectors(i,t).cross(qz.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(ax),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Yz.getNormalMatrix(e),r=this.coplanarPoint(ax).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ga=new Ri,rm=new U;class vd{constructor(e=new Ns,t=new Ns,i=new Ns,r=new Ns,s=new Ns,o=new Ns){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=zs){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],u=r[4],f=r[5],d=r[6],p=r[7],g=r[8],v=r[9],x=r[10],_=r[11],m=r[12],w=r[13],S=r[14],b=r[15];if(i[0].setComponents(l-s,p-u,_-g,b-m).normalize(),i[1].setComponents(l+s,p+u,_+g,b+m).normalize(),i[2].setComponents(l+o,p+f,_+v,b+w).normalize(),i[3].setComponents(l-o,p-f,_-v,b-w).normalize(),i[4].setComponents(l-a,p-d,_-x,b-S).normalize(),t===zs)i[5].setComponents(l+a,p+d,_+x,b+S).normalize();else if(t===Hf)i[5].setComponents(a,d,x,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ga.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ga.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ga)}intersectsSprite(e){return Ga.center.set(0,0,0),Ga.radius=.7071067811865476,Ga.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ga)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(rm.x=r.normal.x>0?e.max.x:e.min.x,rm.y=r.normal.y>0?e.max.y:e.min.y,rm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(rm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function BL(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Zz(n){const e=new WeakMap;function t(a,l){const u=a.array,f=a.usage,d=u.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,u,f),a.onUploadCallback();let g;if(u instanceof Float32Array)g=n.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)g=n.SHORT;else if(u instanceof Uint32Array)g=n.UNSIGNED_INT;else if(u instanceof Int32Array)g=n.INT;else if(u instanceof Int8Array)g=n.BYTE;else if(u instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:g,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,l,u){const f=l.array,d=l._updateRange,p=l.updateRanges;if(n.bindBuffer(u,a),d.count===-1&&p.length===0&&n.bufferSubData(u,0,f),p.length!==0){for(let g=0,v=p.length;g<v;g++){const x=p[g];n.bufferSubData(u,x.start*f.BYTES_PER_ELEMENT,f,x.start,x.count)}l.clearUpdateRanges()}d.count!==-1&&(n.bufferSubData(u,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count),d.count=-1),l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isGLBufferAttribute){const f=e.get(a);(!f||f.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);const u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,a,l),u.version=a.version}}return{get:r,remove:s,update:o}}class Dc extends Tt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),u=a+1,f=l+1,d=e/a,p=t/l,g=[],v=[],x=[],_=[];for(let m=0;m<f;m++){const w=m*p-o;for(let S=0;S<u;S++){const b=S*d-s;v.push(b,-w,0),x.push(0,0,1),_.push(S/a),_.push(1-m/l)}}for(let m=0;m<l;m++)for(let w=0;w<a;w++){const S=w+u*m,b=w+u*(m+1),R=w+1+u*(m+1),A=w+1+u*m;g.push(S,b,A),g.push(b,R,A)}this.setIndex(g),this.setAttribute("position",new je(v,3)),this.setAttribute("normal",new je(x,3)),this.setAttribute("uv",new je(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dc(e.width,e.height,e.widthSegments,e.heightSegments)}}var Kz=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Jz=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Qz=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,eB=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tB=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,nB=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,iB=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,rB=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,sB=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,oB=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,aB=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,lB=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,uB=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,cB=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,hB=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,fB=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,dB=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,pB=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,mB=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,gB=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,vB=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,yB=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,_B=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,xB=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,wB=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,SB=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,MB=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,EB=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,bB=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,TB=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,AB="gl_FragColor = linearToOutputTexel( gl_FragColor );",CB=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,RB=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,PB=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,IB=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,LB=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,NB=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,DB=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,OB=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,kB=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,FB=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,UB=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,zB=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,BB=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,VB=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,HB=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,GB=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,WB=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,jB=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,XB=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,$B=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,qB=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,YB=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,ZB=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,KB=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,JB=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,QB=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,e4=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,t4=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,n4=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,i4=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,r4=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,s4=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,o4=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,a4=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,l4=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,u4=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,c4=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,h4=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,f4=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,d4=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,p4=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,m4=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,g4=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,v4=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,y4=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,_4=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,x4=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,w4=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,S4=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,M4=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,E4=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,b4=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,T4=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,A4=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,C4=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,R4=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,P4=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,I4=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,L4=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,N4=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,D4=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,O4=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,k4=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,F4=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,U4=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,z4=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,B4=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,V4=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,H4=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,G4=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,W4=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,j4=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,X4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,$4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,q4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Y4=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Z4=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,K4=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,J4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Q4=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,eV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tV=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nV=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,iV=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,rV=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,sV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,oV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,aV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,cV=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,hV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fV=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pV=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,mV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,vV=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,yV=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_V=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,wV=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SV=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,MV=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EV=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,bV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,TV=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AV=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,CV=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,RV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bt={alphahash_fragment:Kz,alphahash_pars_fragment:Jz,alphamap_fragment:Qz,alphamap_pars_fragment:eB,alphatest_fragment:tB,alphatest_pars_fragment:nB,aomap_fragment:iB,aomap_pars_fragment:rB,batching_pars_vertex:sB,batching_vertex:oB,begin_vertex:aB,beginnormal_vertex:lB,bsdfs:uB,iridescence_fragment:cB,bumpmap_pars_fragment:hB,clipping_planes_fragment:fB,clipping_planes_pars_fragment:dB,clipping_planes_pars_vertex:pB,clipping_planes_vertex:mB,color_fragment:gB,color_pars_fragment:vB,color_pars_vertex:yB,color_vertex:_B,common:xB,cube_uv_reflection_fragment:wB,defaultnormal_vertex:SB,displacementmap_pars_vertex:MB,displacementmap_vertex:EB,emissivemap_fragment:bB,emissivemap_pars_fragment:TB,colorspace_fragment:AB,colorspace_pars_fragment:CB,envmap_fragment:RB,envmap_common_pars_fragment:PB,envmap_pars_fragment:IB,envmap_pars_vertex:LB,envmap_physical_pars_fragment:GB,envmap_vertex:NB,fog_vertex:DB,fog_pars_vertex:OB,fog_fragment:kB,fog_pars_fragment:FB,gradientmap_pars_fragment:UB,lightmap_pars_fragment:zB,lights_lambert_fragment:BB,lights_lambert_pars_fragment:VB,lights_pars_begin:HB,lights_toon_fragment:WB,lights_toon_pars_fragment:jB,lights_phong_fragment:XB,lights_phong_pars_fragment:$B,lights_physical_fragment:qB,lights_physical_pars_fragment:YB,lights_fragment_begin:ZB,lights_fragment_maps:KB,lights_fragment_end:JB,logdepthbuf_fragment:QB,logdepthbuf_pars_fragment:e4,logdepthbuf_pars_vertex:t4,logdepthbuf_vertex:n4,map_fragment:i4,map_pars_fragment:r4,map_particle_fragment:s4,map_particle_pars_fragment:o4,metalnessmap_fragment:a4,metalnessmap_pars_fragment:l4,morphinstance_vertex:u4,morphcolor_vertex:c4,morphnormal_vertex:h4,morphtarget_pars_vertex:f4,morphtarget_vertex:d4,normal_fragment_begin:p4,normal_fragment_maps:m4,normal_pars_fragment:g4,normal_pars_vertex:v4,normal_vertex:y4,normalmap_pars_fragment:_4,clearcoat_normal_fragment_begin:x4,clearcoat_normal_fragment_maps:w4,clearcoat_pars_fragment:S4,iridescence_pars_fragment:M4,opaque_fragment:E4,packing:b4,premultiplied_alpha_fragment:T4,project_vertex:A4,dithering_fragment:C4,dithering_pars_fragment:R4,roughnessmap_fragment:P4,roughnessmap_pars_fragment:I4,shadowmap_pars_fragment:L4,shadowmap_pars_vertex:N4,shadowmap_vertex:D4,shadowmask_pars_fragment:O4,skinbase_vertex:k4,skinning_pars_vertex:F4,skinning_vertex:U4,skinnormal_vertex:z4,specularmap_fragment:B4,specularmap_pars_fragment:V4,tonemapping_fragment:H4,tonemapping_pars_fragment:G4,transmission_fragment:W4,transmission_pars_fragment:j4,uv_pars_fragment:X4,uv_pars_vertex:$4,uv_vertex:q4,worldpos_vertex:Y4,background_vert:Z4,background_frag:K4,backgroundCube_vert:J4,backgroundCube_frag:Q4,cube_vert:eV,cube_frag:tV,depth_vert:nV,depth_frag:iV,distanceRGBA_vert:rV,distanceRGBA_frag:sV,equirect_vert:oV,equirect_frag:aV,linedashed_vert:lV,linedashed_frag:uV,meshbasic_vert:cV,meshbasic_frag:hV,meshlambert_vert:fV,meshlambert_frag:dV,meshmatcap_vert:pV,meshmatcap_frag:mV,meshnormal_vert:gV,meshnormal_frag:vV,meshphong_vert:yV,meshphong_frag:_V,meshphysical_vert:xV,meshphysical_frag:wV,meshtoon_vert:SV,meshtoon_frag:MV,points_vert:EV,points_frag:bV,shadow_vert:TV,shadow_frag:AV,sprite_vert:CV,sprite_frag:RV},De={common:{diffuse:{value:new ze(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new wt}},envmap:{envMap:{value:null},envMapRotation:{value:new wt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new wt},normalScale:{value:new ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ze(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ze(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0},uvTransform:{value:new wt}},sprite:{diffuse:{value:new ze(16777215)},opacity:{value:1},center:{value:new ve(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}}},ps={basic:{uniforms:ki([De.common,De.specularmap,De.envmap,De.aomap,De.lightmap,De.fog]),vertexShader:bt.meshbasic_vert,fragmentShader:bt.meshbasic_frag},lambert:{uniforms:ki([De.common,De.specularmap,De.envmap,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.fog,De.lights,{emissive:{value:new ze(0)}}]),vertexShader:bt.meshlambert_vert,fragmentShader:bt.meshlambert_frag},phong:{uniforms:ki([De.common,De.specularmap,De.envmap,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.fog,De.lights,{emissive:{value:new ze(0)},specular:{value:new ze(1118481)},shininess:{value:30}}]),vertexShader:bt.meshphong_vert,fragmentShader:bt.meshphong_frag},standard:{uniforms:ki([De.common,De.envmap,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.roughnessmap,De.metalnessmap,De.fog,De.lights,{emissive:{value:new ze(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag},toon:{uniforms:ki([De.common,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.gradientmap,De.fog,De.lights,{emissive:{value:new ze(0)}}]),vertexShader:bt.meshtoon_vert,fragmentShader:bt.meshtoon_frag},matcap:{uniforms:ki([De.common,De.bumpmap,De.normalmap,De.displacementmap,De.fog,{matcap:{value:null}}]),vertexShader:bt.meshmatcap_vert,fragmentShader:bt.meshmatcap_frag},points:{uniforms:ki([De.points,De.fog]),vertexShader:bt.points_vert,fragmentShader:bt.points_frag},dashed:{uniforms:ki([De.common,De.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bt.linedashed_vert,fragmentShader:bt.linedashed_frag},depth:{uniforms:ki([De.common,De.displacementmap]),vertexShader:bt.depth_vert,fragmentShader:bt.depth_frag},normal:{uniforms:ki([De.common,De.bumpmap,De.normalmap,De.displacementmap,{opacity:{value:1}}]),vertexShader:bt.meshnormal_vert,fragmentShader:bt.meshnormal_frag},sprite:{uniforms:ki([De.sprite,De.fog]),vertexShader:bt.sprite_vert,fragmentShader:bt.sprite_frag},background:{uniforms:{uvTransform:{value:new wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:bt.background_vert,fragmentShader:bt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new wt}},vertexShader:bt.backgroundCube_vert,fragmentShader:bt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bt.cube_vert,fragmentShader:bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bt.equirect_vert,fragmentShader:bt.equirect_frag},distanceRGBA:{uniforms:ki([De.common,De.displacementmap,{referencePosition:{value:new U},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bt.distanceRGBA_vert,fragmentShader:bt.distanceRGBA_frag},shadow:{uniforms:ki([De.lights,De.fog,{color:{value:new ze(0)},opacity:{value:1}}]),vertexShader:bt.shadow_vert,fragmentShader:bt.shadow_frag}};ps.physical={uniforms:ki([ps.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new wt},clearcoatNormalScale:{value:new ve(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new wt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new wt},sheen:{value:0},sheenColor:{value:new ze(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new wt},transmissionSamplerSize:{value:new ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new wt},attenuationDistance:{value:0},attenuationColor:{value:new ze(0)},specularColor:{value:new ze(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new wt},anisotropyVector:{value:new ve},anisotropyMap:{value:null},anisotropyMapTransform:{value:new wt}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag};const sm={r:0,b:0,g:0},Wa=new Er,PV=new ht;function IV(n,e,t,i,r,s,o){const a=new ze(0);let l=s===!0?0:1,u,f,d=null,p=0,g=null;function v(w){let S=w.isScene===!0?w.background:null;return S&&S.isTexture&&(S=(w.backgroundBlurriness>0?t:e).get(S)),S}function x(w){let S=!1;const b=v(w);b===null?m(a,l):b&&b.isColor&&(m(b,1),S=!0);const R=n.xr.getEnvironmentBlendMode();R==="additive"?i.buffers.color.setClear(0,0,0,1,o):R==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||S)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil)}function _(w,S){const b=v(S);b&&(b.isCubeTexture||b.mapping===Ic)?(f===void 0&&(f=new Vn(new Ol(1,1,1),new Zr({name:"BackgroundCubeMaterial",uniforms:Mc(ps.backgroundCube.uniforms),vertexShader:ps.backgroundCube.vertexShader,fragmentShader:ps.backgroundCube.fragmentShader,side:Ai,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(R,A,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),Wa.copy(S.backgroundRotation),Wa.x*=-1,Wa.y*=-1,Wa.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(Wa.y*=-1,Wa.z*=-1),f.material.uniforms.envMap.value=b,f.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(PV.makeRotationFromEuler(Wa)),f.material.toneMapped=qt.getTransfer(b.colorSpace)!==nn,(d!==b||p!==b.version||g!==n.toneMapping)&&(f.material.needsUpdate=!0,d=b,p=b.version,g=n.toneMapping),f.layers.enableAll(),w.unshift(f,f.geometry,f.material,0,0,null)):b&&b.isTexture&&(u===void 0&&(u=new Vn(new Dc(2,2),new Zr({name:"BackgroundMaterial",uniforms:Mc(ps.background.uniforms),vertexShader:ps.background.vertexShader,fragmentShader:ps.background.fragmentShader,side:Co,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=b,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.toneMapped=qt.getTransfer(b.colorSpace)!==nn,b.matrixAutoUpdate===!0&&b.updateMatrix(),u.material.uniforms.uvTransform.value.copy(b.matrix),(d!==b||p!==b.version||g!==n.toneMapping)&&(u.material.needsUpdate=!0,d=b,p=b.version,g=n.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null))}function m(w,S){w.getRGB(sm,FL(n)),i.buffers.color.setClear(sm.r,sm.g,sm.b,S,o)}return{getClearColor:function(){return a},setClearColor:function(w,S=1){a.set(w),l=S,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,m(a,l)},render:x,addToRenderList:_}}function LV(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null);let s=r,o=!1;function a(E,N,z,O,q){let j=!1;const Q=d(O,z,N);s!==Q&&(s=Q,u(s.object)),j=g(E,O,z,q),j&&v(E,O,z,q),q!==null&&e.update(q,n.ELEMENT_ARRAY_BUFFER),(j||o)&&(o=!1,b(E,N,z,O),q!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(q).buffer))}function l(){return n.createVertexArray()}function u(E){return n.bindVertexArray(E)}function f(E){return n.deleteVertexArray(E)}function d(E,N,z){const O=z.wireframe===!0;let q=i[E.id];q===void 0&&(q={},i[E.id]=q);let j=q[N.id];j===void 0&&(j={},q[N.id]=j);let Q=j[O];return Q===void 0&&(Q=p(l()),j[O]=Q),Q}function p(E){const N=[],z=[],O=[];for(let q=0;q<t;q++)N[q]=0,z[q]=0,O[q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:N,enabledAttributes:z,attributeDivisors:O,object:E,attributes:{},index:null}}function g(E,N,z,O){const q=s.attributes,j=N.attributes;let Q=0;const oe=z.getAttributes();for(const k in oe)if(oe[k].location>=0){const G=q[k];let ne=j[k];if(ne===void 0&&(k==="instanceMatrix"&&E.instanceMatrix&&(ne=E.instanceMatrix),k==="instanceColor"&&E.instanceColor&&(ne=E.instanceColor)),G===void 0||G.attribute!==ne||ne&&G.data!==ne.data)return!0;Q++}return s.attributesNum!==Q||s.index!==O}function v(E,N,z,O){const q={},j=N.attributes;let Q=0;const oe=z.getAttributes();for(const k in oe)if(oe[k].location>=0){let G=j[k];G===void 0&&(k==="instanceMatrix"&&E.instanceMatrix&&(G=E.instanceMatrix),k==="instanceColor"&&E.instanceColor&&(G=E.instanceColor));const ne={};ne.attribute=G,G&&G.data&&(ne.data=G.data),q[k]=ne,Q++}s.attributes=q,s.attributesNum=Q,s.index=O}function x(){const E=s.newAttributes;for(let N=0,z=E.length;N<z;N++)E[N]=0}function _(E){m(E,0)}function m(E,N){const z=s.newAttributes,O=s.enabledAttributes,q=s.attributeDivisors;z[E]=1,O[E]===0&&(n.enableVertexAttribArray(E),O[E]=1),q[E]!==N&&(n.vertexAttribDivisor(E,N),q[E]=N)}function w(){const E=s.newAttributes,N=s.enabledAttributes;for(let z=0,O=N.length;z<O;z++)N[z]!==E[z]&&(n.disableVertexAttribArray(z),N[z]=0)}function S(E,N,z,O,q,j,Q){Q===!0?n.vertexAttribIPointer(E,N,z,q,j):n.vertexAttribPointer(E,N,z,O,q,j)}function b(E,N,z,O){x();const q=O.attributes,j=z.getAttributes(),Q=N.defaultAttributeValues;for(const oe in j){const k=j[oe];if(k.location>=0){let W=q[oe];if(W===void 0&&(oe==="instanceMatrix"&&E.instanceMatrix&&(W=E.instanceMatrix),oe==="instanceColor"&&E.instanceColor&&(W=E.instanceColor)),W!==void 0){const G=W.normalized,ne=W.itemSize,me=e.get(W);if(me===void 0)continue;const _e=me.buffer,J=me.type,pe=me.bytesPerElement,Me=J===n.INT||J===n.UNSIGNED_INT||W.gpuType===aM;if(W.isInterleavedBufferAttribute){const de=W.data,Qe=de.stride,lt=W.offset;if(de.isInstancedInterleavedBuffer){for(let K=0;K<k.locationSize;K++)m(k.location+K,de.meshPerAttribute);E.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let K=0;K<k.locationSize;K++)_(k.location+K);n.bindBuffer(n.ARRAY_BUFFER,_e);for(let K=0;K<k.locationSize;K++)S(k.location+K,ne/k.locationSize,J,G,Qe*pe,(lt+ne/k.locationSize*K)*pe,Me)}else{if(W.isInstancedBufferAttribute){for(let de=0;de<k.locationSize;de++)m(k.location+de,W.meshPerAttribute);E.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let de=0;de<k.locationSize;de++)_(k.location+de);n.bindBuffer(n.ARRAY_BUFFER,_e);for(let de=0;de<k.locationSize;de++)S(k.location+de,ne/k.locationSize,J,G,ne*pe,ne/k.locationSize*de*pe,Me)}}else if(Q!==void 0){const G=Q[oe];if(G!==void 0)switch(G.length){case 2:n.vertexAttrib2fv(k.location,G);break;case 3:n.vertexAttrib3fv(k.location,G);break;case 4:n.vertexAttrib4fv(k.location,G);break;default:n.vertexAttrib1fv(k.location,G)}}}}w()}function R(){L();for(const E in i){const N=i[E];for(const z in N){const O=N[z];for(const q in O)f(O[q].object),delete O[q];delete N[z]}delete i[E]}}function A(E){if(i[E.id]===void 0)return;const N=i[E.id];for(const z in N){const O=N[z];for(const q in O)f(O[q].object),delete O[q];delete N[z]}delete i[E.id]}function C(E){for(const N in i){const z=i[N];if(z[E.id]===void 0)continue;const O=z[E.id];for(const q in O)f(O[q].object),delete O[q];delete z[E.id]}}function L(){I(),o=!0,s!==r&&(s=r,u(s.object))}function I(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:L,resetDefaultState:I,dispose:R,releaseStatesOfGeometry:A,releaseStatesOfProgram:C,initAttributes:x,enableAttribute:_,disableUnusedAttributes:w}}function NV(n,e,t){let i;function r(u){i=u}function s(u,f){n.drawArrays(i,u,f),t.update(f,i,1)}function o(u,f,d){d!==0&&(n.drawArraysInstanced(i,u,f,d),t.update(f,i,d))}function a(u,f,d){if(d===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<d;g++)this.render(u[g],f[g]);else{p.multiDrawArraysWEBGL(i,u,0,f,0,d);let g=0;for(let v=0;v<d;v++)g+=f[v];t.update(g,i,1)}}function l(u,f,d,p){if(d===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<u.length;v++)o(u[v],f[v],p[v]);else{g.multiDrawArraysInstancedWEBGL(i,u,0,f,0,p,0,d);let v=0;for(let x=0;x<d;x++)v+=f[x];for(let x=0;x<p.length;x++)t.update(v,i,p[x])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function DV(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const A=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(A){return!(A!==Ji&&i.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(A){const C=A===Lc&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(A!==Xs&&i.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&A!==yr&&!C)}function l(A){if(A==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";A="mediump"}return A==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const f=l(u);f!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",f,"instead."),u=f);const d=t.logarithmicDepthBuffer===!0,p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),x=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),m=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),w=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),b=g>0,R=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:d,maxTextures:p,maxVertexTextures:g,maxTextureSize:v,maxCubemapSize:x,maxAttributes:_,maxVertexUniforms:m,maxVaryings:w,maxFragmentUniforms:S,vertexTextures:b,maxSamples:R}}function OV(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Ns,a=new wt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const g=d.length!==0||p||i!==0||r;return r=p,i=d.length,g},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=f(d,p,0)},this.setState=function(d,p,g){const v=d.clippingPlanes,x=d.clipIntersection,_=d.clipShadows,m=n.get(d);if(!r||v===null||v.length===0||s&&!_)s?f(null):u();else{const w=s?0:i,S=w*4;let b=m.clippingState||null;l.value=b,b=f(v,p,S,g);for(let R=0;R!==S;++R)b[R]=t[R];m.clippingState=b,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=w}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(d,p,g,v){const x=d!==null?d.length:0;let _=null;if(x!==0){if(_=l.value,v!==!0||_===null){const m=g+x*4,w=p.matrixWorldInverse;a.getNormalMatrix(w),(_===null||_.length<m)&&(_=new Float32Array(m));for(let S=0,b=g;S!==x;++S,b+=4)o.copy(d[S]).applyMatrix4(w,a),o.normal.toArray(_,b),_[b+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,_}}function kV(n){let e=new WeakMap;function t(o,a){return a===If?o.mapping=Ro:a===Lf&&(o.mapping=wa),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===If||a===Lf)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new zL(l.height);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class _o extends md{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Zu=4,IA=[.125,.215,.35,.446,.526,.582],rl=20,lx=new _o,LA=new ze;let ux=null,cx=0,hx=0,fx=!1;const il=(1+Math.sqrt(5))/2,yu=1/il,NA=[new U(-il,yu,0),new U(il,yu,0),new U(-yu,0,il),new U(yu,0,il),new U(0,il,-yu),new U(0,il,yu),new U(-1,1,-1),new U(1,1,-1),new U(-1,1,1),new U(1,1,1)];class MS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){ux=this._renderer.getRenderTarget(),cx=this._renderer.getActiveCubeFace(),hx=this._renderer.getActiveMipmapLevel(),fx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=kA(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=OA(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ux,cx,hx),this._renderer.xr.enabled=fx,e.scissorTest=!1,om(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ro||e.mapping===wa?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ux=this._renderer.getRenderTarget(),cx=this._renderer.getActiveCubeFace(),hx=this._renderer.getActiveMipmapLevel(),fx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:An,minFilter:An,generateMipmaps:!1,type:Lc,format:Ji,colorSpace:No,depthBuffer:!1},r=DA(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=DA(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=FV(s)),this._blurMaterial=UV(s,e,t)}return r}_compileMaterial(e){const t=new Vn(this._lodPlanes[0],e);this._renderer.compile(t,lx)}_sceneToCubeUV(e,t,i,r){const a=new Tn(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,d=f.autoClear,p=f.toneMapping;f.getClearColor(LA),f.toneMapping=Gs,f.autoClear=!1;const g=new Aa({name:"PMREM.Background",side:Ai,depthWrite:!1,depthTest:!1}),v=new Vn(new Ol,g);let x=!1;const _=e.background;_?_.isColor&&(g.color.copy(_),e.background=null,x=!0):(g.color.copy(LA),x=!0);for(let m=0;m<6;m++){const w=m%3;w===0?(a.up.set(0,l[m],0),a.lookAt(u[m],0,0)):w===1?(a.up.set(0,0,l[m]),a.lookAt(0,u[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,u[m]));const S=this._cubeSize;om(r,w*S,m>2?S:0,S,S),f.setRenderTarget(r),x&&f.render(v,a),f.render(e,a)}v.geometry.dispose(),v.material.dispose(),f.toneMapping=p,f.autoClear=d,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Ro||e.mapping===wa;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=kA()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=OA());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Vn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;om(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,lx)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=NA[(r-s-1)%NA.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,d=new Vn(this._lodPlanes[r],u),p=u.uniforms,g=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*rl-1),x=s/v,_=isFinite(s)?1+Math.floor(f*x):rl;_>rl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${rl}`);const m=[];let w=0;for(let C=0;C<rl;++C){const L=C/x,I=Math.exp(-L*L/2);m.push(I),C===0?w+=I:C<_&&(w+=2*I)}for(let C=0;C<m.length;C++)m[C]=m[C]/w;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=m,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=v,p.mipInt.value=S-i;const b=this._sizeLods[r],R=3*b*(r>S-Zu?r-S+Zu:0),A=4*(this._cubeSize-b);om(t,R,A,3*b,2*b),l.setRenderTarget(t),l.render(d,lx)}}function FV(n){const e=[],t=[],i=[];let r=n;const s=n-Zu+1+IA.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-Zu?l=IA[o-n+Zu-1]:o===0&&(l=0),i.push(l);const u=1/(a-2),f=-u,d=1+u,p=[f,f,d,f,d,d,f,f,d,d,f,d],g=6,v=6,x=3,_=2,m=1,w=new Float32Array(x*v*g),S=new Float32Array(_*v*g),b=new Float32Array(m*v*g);for(let A=0;A<g;A++){const C=A%3*2/3-1,L=A>2?0:-1,I=[C,L,0,C+2/3,L,0,C+2/3,L+1,0,C,L,0,C+2/3,L+1,0,C,L+1,0];w.set(I,x*v*A),S.set(p,_*v*A);const E=[A,A,A,A,A,A];b.set(E,m*v*A)}const R=new Tt;R.setAttribute("position",new Kt(w,x)),R.setAttribute("uv",new Kt(S,_)),R.setAttribute("faceIndex",new Kt(b,m)),e.push(R),r>Zu&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function DA(n,e,t){const i=new Yr(n,e,t);return i.texture.mapping=Ic,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function om(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function UV(n,e,t){const i=new Float32Array(rl),r=new U(0,1,0);return new Zr({name:"SphericalGaussianBlur",defines:{n:rl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:wM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:So,depthTest:!1,depthWrite:!1})}function OA(){return new Zr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:wM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:So,depthTest:!1,depthWrite:!1})}function kA(){return new Zr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:wM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:So,depthTest:!1,depthWrite:!1})}function wM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function zV(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===If||l===Lf,f=l===Ro||l===wa;if(u||f){let d=e.get(a);const p=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new MS(n)),d=u?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const g=a.image;return u&&g&&g.height>0||f&&g&&r(g)?(t===null&&(t=new MS(n)),d=u?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function r(a){let l=0;const u=6;for(let f=0;f<u;f++)a[f]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function BV(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function VV(n,e,t,i){const r={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const x=p.morphAttributes[v];for(let _=0,m=x.length;_<m;_++)e.remove(x[_])}p.removeEventListener("dispose",o),delete r[p.id];const g=s.get(p);g&&(e.remove(g),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const g=d.morphAttributes;for(const v in g){const x=g[v];for(let _=0,m=x.length;_<m;_++)e.update(x[_],n.ARRAY_BUFFER)}}function u(d){const p=[],g=d.index,v=d.attributes.position;let x=0;if(g!==null){const w=g.array;x=g.version;for(let S=0,b=w.length;S<b;S+=3){const R=w[S+0],A=w[S+1],C=w[S+2];p.push(R,A,A,C,C,R)}}else if(v!==void 0){const w=v.array;x=v.version;for(let S=0,b=w.length/3-1;S<b;S+=3){const R=S+0,A=S+1,C=S+2;p.push(R,A,A,C,C,R)}}else return;const _=new(IL(p)?_M:yM)(p,1);_.version=x;const m=s.get(d);m&&e.remove(m),s.set(d,_)}function f(d){const p=s.get(d);if(p){const g=d.index;g!==null&&p.version<g.version&&u(d)}else u(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:f}}function HV(n,e,t){let i;function r(p){i=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,g){n.drawElements(i,g,s,p*o),t.update(g,i,1)}function u(p,g,v){v!==0&&(n.drawElementsInstanced(i,g,s,p*o,v),t.update(g,i,v))}function f(p,g,v){if(v===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let _=0;_<v;_++)this.render(p[_]/o,g[_]);else{x.multiDrawElementsWEBGL(i,g,0,s,p,0,v);let _=0;for(let m=0;m<v;m++)_+=g[m];t.update(_,i,1)}}function d(p,g,v,x){if(v===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let m=0;m<p.length;m++)u(p[m]/o,g[m],x[m]);else{_.multiDrawElementsInstancedWEBGL(i,g,0,s,p,0,x,0,v);let m=0;for(let w=0;w<v;w++)m+=g[w];for(let w=0;w<x.length;w++)t.update(m,i,x[w])}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=d}function GV(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function WV(n,e,t){const i=new WeakMap,r=new Yt;function s(o,a,l){const u=o.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=f!==void 0?f.length:0;let p=i.get(a);if(p===void 0||p.count!==d){let E=function(){L.dispose(),i.delete(a),a.removeEventListener("dispose",E)};var g=E;p!==void 0&&p.texture.dispose();const v=a.morphAttributes.position!==void 0,x=a.morphAttributes.normal!==void 0,_=a.morphAttributes.color!==void 0,m=a.morphAttributes.position||[],w=a.morphAttributes.normal||[],S=a.morphAttributes.color||[];let b=0;v===!0&&(b=1),x===!0&&(b=2),_===!0&&(b=3);let R=a.attributes.position.count*b,A=1;R>e.maxTextureSize&&(A=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const C=new Float32Array(R*A*4*d),L=new g0(C,R,A,d);L.type=yr,L.needsUpdate=!0;const I=b*4;for(let N=0;N<d;N++){const z=m[N],O=w[N],q=S[N],j=R*A*4*N;for(let Q=0;Q<z.count;Q++){const oe=Q*I;v===!0&&(r.fromBufferAttribute(z,Q),C[j+oe+0]=r.x,C[j+oe+1]=r.y,C[j+oe+2]=r.z,C[j+oe+3]=0),x===!0&&(r.fromBufferAttribute(O,Q),C[j+oe+4]=r.x,C[j+oe+5]=r.y,C[j+oe+6]=r.z,C[j+oe+7]=0),_===!0&&(r.fromBufferAttribute(q,Q),C[j+oe+8]=r.x,C[j+oe+9]=r.y,C[j+oe+10]=r.z,C[j+oe+11]=q.itemSize===4?r.w:1)}}p={count:d,texture:L,size:new ve(R,A)},i.set(a,p),a.addEventListener("dispose",E)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let v=0;for(let _=0;_<u.length;_++)v+=u[_];const x=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(n,"morphTargetBaseInfluence",x),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function jV(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,f=l.geometry,d=e.get(l,f);if(r.get(d)!==u&&(e.update(d),r.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==u&&(p.update(),r.set(p,u))}return d}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}class v0 extends _n{constructor(e,t,i,r,s,o,a,l,u,f){if(f=f!==void 0?f:vl,f!==vl&&f!==wc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===vl&&(i=Al),i===void 0&&f===wc&&(i=Nc),super(null,r,s,o,a,l,f,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ti,this.minFilter=l!==void 0?l:ti,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const VL=new _n,HL=new v0(1,1);HL.compareFunction=mM;const GL=new g0,WL=new vM,jL=new gd,FA=[],UA=[],zA=new Float32Array(16),BA=new Float32Array(9),VA=new Float32Array(4);function Oc(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=FA[r];if(s===void 0&&(s=new Float32Array(r),FA[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function qn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Yn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function y0(n,e){let t=UA[e];t===void 0&&(t=new Int32Array(e),UA[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function XV(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function $V(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qn(t,e))return;n.uniform2fv(this.addr,e),Yn(t,e)}}function qV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(qn(t,e))return;n.uniform3fv(this.addr,e),Yn(t,e)}}function YV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qn(t,e))return;n.uniform4fv(this.addr,e),Yn(t,e)}}function ZV(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(qn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Yn(t,e)}else{if(qn(t,i))return;VA.set(i),n.uniformMatrix2fv(this.addr,!1,VA),Yn(t,i)}}function KV(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(qn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Yn(t,e)}else{if(qn(t,i))return;BA.set(i),n.uniformMatrix3fv(this.addr,!1,BA),Yn(t,i)}}function JV(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(qn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Yn(t,e)}else{if(qn(t,i))return;zA.set(i),n.uniformMatrix4fv(this.addr,!1,zA),Yn(t,i)}}function QV(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function e5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qn(t,e))return;n.uniform2iv(this.addr,e),Yn(t,e)}}function t5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(qn(t,e))return;n.uniform3iv(this.addr,e),Yn(t,e)}}function n5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qn(t,e))return;n.uniform4iv(this.addr,e),Yn(t,e)}}function i5(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function r5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qn(t,e))return;n.uniform2uiv(this.addr,e),Yn(t,e)}}function s5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(qn(t,e))return;n.uniform3uiv(this.addr,e),Yn(t,e)}}function o5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qn(t,e))return;n.uniform4uiv(this.addr,e),Yn(t,e)}}function a5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?HL:VL;t.setTexture2D(e||s,r)}function l5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||WL,r)}function u5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||jL,r)}function c5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||GL,r)}function h5(n){switch(n){case 5126:return XV;case 35664:return $V;case 35665:return qV;case 35666:return YV;case 35674:return ZV;case 35675:return KV;case 35676:return JV;case 5124:case 35670:return QV;case 35667:case 35671:return e5;case 35668:case 35672:return t5;case 35669:case 35673:return n5;case 5125:return i5;case 36294:return r5;case 36295:return s5;case 36296:return o5;case 35678:case 36198:case 36298:case 36306:case 35682:return a5;case 35679:case 36299:case 36307:return l5;case 35680:case 36300:case 36308:case 36293:return u5;case 36289:case 36303:case 36311:case 36292:return c5}}function f5(n,e){n.uniform1fv(this.addr,e)}function d5(n,e){const t=Oc(e,this.size,2);n.uniform2fv(this.addr,t)}function p5(n,e){const t=Oc(e,this.size,3);n.uniform3fv(this.addr,t)}function m5(n,e){const t=Oc(e,this.size,4);n.uniform4fv(this.addr,t)}function g5(n,e){const t=Oc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function v5(n,e){const t=Oc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function y5(n,e){const t=Oc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function _5(n,e){n.uniform1iv(this.addr,e)}function x5(n,e){n.uniform2iv(this.addr,e)}function w5(n,e){n.uniform3iv(this.addr,e)}function S5(n,e){n.uniform4iv(this.addr,e)}function M5(n,e){n.uniform1uiv(this.addr,e)}function E5(n,e){n.uniform2uiv(this.addr,e)}function b5(n,e){n.uniform3uiv(this.addr,e)}function T5(n,e){n.uniform4uiv(this.addr,e)}function A5(n,e,t){const i=this.cache,r=e.length,s=y0(t,r);qn(i,s)||(n.uniform1iv(this.addr,s),Yn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||VL,s[o])}function C5(n,e,t){const i=this.cache,r=e.length,s=y0(t,r);qn(i,s)||(n.uniform1iv(this.addr,s),Yn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||WL,s[o])}function R5(n,e,t){const i=this.cache,r=e.length,s=y0(t,r);qn(i,s)||(n.uniform1iv(this.addr,s),Yn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||jL,s[o])}function P5(n,e,t){const i=this.cache,r=e.length,s=y0(t,r);qn(i,s)||(n.uniform1iv(this.addr,s),Yn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||GL,s[o])}function I5(n){switch(n){case 5126:return f5;case 35664:return d5;case 35665:return p5;case 35666:return m5;case 35674:return g5;case 35675:return v5;case 35676:return y5;case 5124:case 35670:return _5;case 35667:case 35671:return x5;case 35668:case 35672:return w5;case 35669:case 35673:return S5;case 5125:return M5;case 36294:return E5;case 36295:return b5;case 36296:return T5;case 35678:case 36198:case 36298:case 36306:case 35682:return A5;case 35679:case 36299:case 36307:return C5;case 35680:case 36300:case 36308:case 36293:return R5;case 36289:case 36303:case 36311:case 36292:return P5}}class L5{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=h5(t.type)}}class N5{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=I5(t.type)}}class D5{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const dx=/(\w+)(\])?(\[|\.)?/g;function HA(n,e){n.seq.push(e),n.map[e.id]=e}function O5(n,e,t){const i=n.name,r=i.length;for(dx.lastIndex=0;;){const s=dx.exec(i),o=dx.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){HA(t,u===void 0?new L5(a,n,e):new N5(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new D5(a),HA(t,d)),t=d}}}class dg{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);O5(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function GA(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const k5=37297;let F5=0;function U5(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function z5(n){const e=qt.getPrimaries(qt.workingColorSpace),t=qt.getPrimaries(n);let i;switch(e===t?i="":e===Bf&&t===zf?i="LinearDisplayP3ToLinearSRGB":e===zf&&t===Bf&&(i="LinearSRGBToLinearDisplayP3"),n){case No:case pd:return[i,"LinearTransferOETF"];case Vr:case m0:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function WA(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+U5(n.getShaderSource(e),o)}else return r}function B5(n,e){const t=z5(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function V5(n,e){let t;switch(e){case tL:t="Linear";break;case nL:t="Reinhard";break;case iL:t="OptimizedCineon";break;case rM:t="ACESFilmic";break;case sL:t="AgX";break;case oL:t="Neutral";break;case rL:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function H5(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Uh).join(`
`)}function G5(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function W5(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Uh(n){return n!==""}function jA(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function XA(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const j5=/^[ \t]*#include +<([\w\d./]+)>/gm;function ES(n){return n.replace(j5,$5)}const X5=new Map;function $5(n,e){let t=bt[e];if(t===void 0){const i=X5.get(e);if(i!==void 0)t=bt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return ES(t)}const q5=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function $A(n){return n.replace(q5,Y5)}function Y5(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function qA(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Z5(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===f0?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===of?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===cs&&(e="SHADOWMAP_TYPE_VSM"),e}function K5(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ro:case wa:e="ENVMAP_TYPE_CUBE";break;case Ic:e="ENVMAP_TYPE_CUBE_UV";break}return e}function J5(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case wa:e="ENVMAP_MODE_REFRACTION";break}return e}function Q5(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case dd:e="ENVMAP_BLENDING_MULTIPLY";break;case QI:e="ENVMAP_BLENDING_MIX";break;case eL:e="ENVMAP_BLENDING_ADD";break}return e}function eH(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function tH(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Z5(t),u=K5(t),f=J5(t),d=Q5(t),p=eH(t),g=H5(t),v=G5(s),x=r.createProgram();let _,m,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Uh).join(`
`),_.length>0&&(_+=`
`),m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Uh).join(`
`),m.length>0&&(m+=`
`)):(_=[qA(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Uh).join(`
`),m=[qA(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Gs?"#define TONE_MAPPING":"",t.toneMapping!==Gs?bt.tonemapping_pars_fragment:"",t.toneMapping!==Gs?V5("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",bt.colorspace_pars_fragment,B5("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Uh).join(`
`)),o=ES(o),o=jA(o,t),o=XA(o,t),a=ES(a),a=jA(a,t),a=XA(a,t),o=$A(o),a=$A(a),t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,_=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,m=["#define varying in",t.glslVersion===SS?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===SS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const S=w+_+o,b=w+m+a,R=GA(r,r.VERTEX_SHADER,S),A=GA(r,r.FRAGMENT_SHADER,b);r.attachShader(x,R),r.attachShader(x,A),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);function C(N){if(n.debug.checkShaderErrors){const z=r.getProgramInfoLog(x).trim(),O=r.getShaderInfoLog(R).trim(),q=r.getShaderInfoLog(A).trim();let j=!0,Q=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(j=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,R,A);else{const oe=WA(r,R,"vertex"),k=WA(r,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+N.name+`
Material Type: `+N.type+`

Program Info Log: `+z+`
`+oe+`
`+k)}else z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",z):(O===""||q==="")&&(Q=!1);Q&&(N.diagnostics={runnable:j,programLog:z,vertexShader:{log:O,prefix:_},fragmentShader:{log:q,prefix:m}})}r.deleteShader(R),r.deleteShader(A),L=new dg(r,x),I=W5(r,x)}let L;this.getUniforms=function(){return L===void 0&&C(this),L};let I;this.getAttributes=function(){return I===void 0&&C(this),I};let E=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return E===!1&&(E=r.getProgramParameter(x,k5)),E},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=F5++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=R,this.fragmentShader=A,this}let nH=0;class iH{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new rH(e),t.set(e,i)),i}}class rH{constructor(e){this.id=nH++,this.code=e,this.usedTimes=0}}function sH(n,e,t,i,r,s,o){const a=new _l,l=new iH,u=new Set,f=[],d=r.logarithmicDepthBuffer,p=r.vertexTextures;let g=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(I){return u.add(I),I===0?"uv":`uv${I}`}function _(I,E,N,z,O){const q=z.fog,j=O.geometry,Q=I.isMeshStandardMaterial?z.environment:null,oe=(I.isMeshStandardMaterial?t:e).get(I.envMap||Q),k=oe&&oe.mapping===Ic?oe.image.height:null,W=v[I.type];I.precision!==null&&(g=r.getMaxPrecision(I.precision),g!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",g,"instead."));const G=j.morphAttributes.position||j.morphAttributes.normal||j.morphAttributes.color,ne=G!==void 0?G.length:0;let me=0;j.morphAttributes.position!==void 0&&(me=1),j.morphAttributes.normal!==void 0&&(me=2),j.morphAttributes.color!==void 0&&(me=3);let _e,J,pe,Me;if(W){const Rt=ps[W];_e=Rt.vertexShader,J=Rt.fragmentShader}else _e=I.vertexShader,J=I.fragmentShader,l.update(I),pe=l.getVertexShaderID(I),Me=l.getFragmentShaderID(I);const de=n.getRenderTarget(),Qe=O.isInstancedMesh===!0,lt=O.isBatchedMesh===!0,K=!!I.map,tt=!!I.matcap,he=!!oe,we=!!I.aoMap,ye=!!I.lightMap,Ce=!!I.bumpMap,be=!!I.normalMap,Be=!!I.displacementMap,Ke=!!I.emissiveMap,V=!!I.metalnessMap,D=!!I.roughnessMap,te=I.anisotropy>0,xe=I.clearcoat>0,Ee=I.dispersion>0,Se=I.iridescence>0,qe=I.sheen>0,Le=I.transmission>0,Ie=te&&!!I.anisotropyMap,ft=xe&&!!I.clearcoatMap,Re=xe&&!!I.clearcoatNormalMap,$e=xe&&!!I.clearcoatRoughnessMap,Mt=Se&&!!I.iridescenceMap,it=Se&&!!I.iridescenceThicknessMap,Ve=qe&&!!I.sheenColorMap,pt=qe&&!!I.sheenRoughnessMap,Et=!!I.specularMap,X=!!I.specularColorMap,ge=!!I.specularIntensityMap,H=Le&&!!I.transmissionMap,ue=Le&&!!I.thicknessMap,ce=!!I.gradientMap,Pe=!!I.alphaMap,Ne=I.alphaTest>0,Dt=!!I.alphaHash,Wt=!!I.extensions;let Ot=Gs;I.toneMapped&&(de===null||de.isXRRenderTarget===!0)&&(Ot=n.toneMapping);const Qt={shaderID:W,shaderType:I.type,shaderName:I.name,vertexShader:_e,fragmentShader:J,defines:I.defines,customVertexShaderID:pe,customFragmentShaderID:Me,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:g,batching:lt,instancing:Qe,instancingColor:Qe&&O.instanceColor!==null,instancingMorph:Qe&&O.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:de===null?n.outputColorSpace:de.isXRRenderTarget===!0?de.texture.colorSpace:No,alphaToCoverage:!!I.alphaToCoverage,map:K,matcap:tt,envMap:he,envMapMode:he&&oe.mapping,envMapCubeUVHeight:k,aoMap:we,lightMap:ye,bumpMap:Ce,normalMap:be,displacementMap:p&&Be,emissiveMap:Ke,normalMapObjectSpace:be&&I.normalMapType===SL,normalMapTangentSpace:be&&I.normalMapType===Ta,metalnessMap:V,roughnessMap:D,anisotropy:te,anisotropyMap:Ie,clearcoat:xe,clearcoatMap:ft,clearcoatNormalMap:Re,clearcoatRoughnessMap:$e,dispersion:Ee,iridescence:Se,iridescenceMap:Mt,iridescenceThicknessMap:it,sheen:qe,sheenColorMap:Ve,sheenRoughnessMap:pt,specularMap:Et,specularColorMap:X,specularIntensityMap:ge,transmission:Le,transmissionMap:H,thicknessMap:ue,gradientMap:ce,opaque:I.transparent===!1&&I.blending===gl&&I.alphaToCoverage===!1,alphaMap:Pe,alphaTest:Ne,alphaHash:Dt,combine:I.combine,mapUv:K&&x(I.map.channel),aoMapUv:we&&x(I.aoMap.channel),lightMapUv:ye&&x(I.lightMap.channel),bumpMapUv:Ce&&x(I.bumpMap.channel),normalMapUv:be&&x(I.normalMap.channel),displacementMapUv:Be&&x(I.displacementMap.channel),emissiveMapUv:Ke&&x(I.emissiveMap.channel),metalnessMapUv:V&&x(I.metalnessMap.channel),roughnessMapUv:D&&x(I.roughnessMap.channel),anisotropyMapUv:Ie&&x(I.anisotropyMap.channel),clearcoatMapUv:ft&&x(I.clearcoatMap.channel),clearcoatNormalMapUv:Re&&x(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:$e&&x(I.clearcoatRoughnessMap.channel),iridescenceMapUv:Mt&&x(I.iridescenceMap.channel),iridescenceThicknessMapUv:it&&x(I.iridescenceThicknessMap.channel),sheenColorMapUv:Ve&&x(I.sheenColorMap.channel),sheenRoughnessMapUv:pt&&x(I.sheenRoughnessMap.channel),specularMapUv:Et&&x(I.specularMap.channel),specularColorMapUv:X&&x(I.specularColorMap.channel),specularIntensityMapUv:ge&&x(I.specularIntensityMap.channel),transmissionMapUv:H&&x(I.transmissionMap.channel),thicknessMapUv:ue&&x(I.thicknessMap.channel),alphaMapUv:Pe&&x(I.alphaMap.channel),vertexTangents:!!j.attributes.tangent&&(be||te),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!j.attributes.color&&j.attributes.color.itemSize===4,pointsUvs:O.isPoints===!0&&!!j.attributes.uv&&(K||Pe),fog:!!q,useFog:I.fog===!0,fogExp2:!!q&&q.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:O.isSkinnedMesh===!0,morphTargets:j.morphAttributes.position!==void 0,morphNormals:j.morphAttributes.normal!==void 0,morphColors:j.morphAttributes.color!==void 0,morphTargetsCount:ne,morphTextureStride:me,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ot,useLegacyLights:n._useLegacyLights,decodeVideoTexture:K&&I.map.isVideoTexture===!0&&qt.getTransfer(I.map.colorSpace)===nn,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Fs,flipSided:I.side===Ai,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:Wt&&I.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Wt&&I.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return Qt.vertexUv1s=u.has(1),Qt.vertexUv2s=u.has(2),Qt.vertexUv3s=u.has(3),u.clear(),Qt}function m(I){const E=[];if(I.shaderID?E.push(I.shaderID):(E.push(I.customVertexShaderID),E.push(I.customFragmentShaderID)),I.defines!==void 0)for(const N in I.defines)E.push(N),E.push(I.defines[N]);return I.isRawShaderMaterial===!1&&(w(E,I),S(E,I),E.push(n.outputColorSpace)),E.push(I.customProgramCacheKey),E.join()}function w(I,E){I.push(E.precision),I.push(E.outputColorSpace),I.push(E.envMapMode),I.push(E.envMapCubeUVHeight),I.push(E.mapUv),I.push(E.alphaMapUv),I.push(E.lightMapUv),I.push(E.aoMapUv),I.push(E.bumpMapUv),I.push(E.normalMapUv),I.push(E.displacementMapUv),I.push(E.emissiveMapUv),I.push(E.metalnessMapUv),I.push(E.roughnessMapUv),I.push(E.anisotropyMapUv),I.push(E.clearcoatMapUv),I.push(E.clearcoatNormalMapUv),I.push(E.clearcoatRoughnessMapUv),I.push(E.iridescenceMapUv),I.push(E.iridescenceThicknessMapUv),I.push(E.sheenColorMapUv),I.push(E.sheenRoughnessMapUv),I.push(E.specularMapUv),I.push(E.specularColorMapUv),I.push(E.specularIntensityMapUv),I.push(E.transmissionMapUv),I.push(E.thicknessMapUv),I.push(E.combine),I.push(E.fogExp2),I.push(E.sizeAttenuation),I.push(E.morphTargetsCount),I.push(E.morphAttributeCount),I.push(E.numDirLights),I.push(E.numPointLights),I.push(E.numSpotLights),I.push(E.numSpotLightMaps),I.push(E.numHemiLights),I.push(E.numRectAreaLights),I.push(E.numDirLightShadows),I.push(E.numPointLightShadows),I.push(E.numSpotLightShadows),I.push(E.numSpotLightShadowsWithMaps),I.push(E.numLightProbes),I.push(E.shadowMapType),I.push(E.toneMapping),I.push(E.numClippingPlanes),I.push(E.numClipIntersection),I.push(E.depthPacking)}function S(I,E){a.disableAll(),E.supportsVertexTextures&&a.enable(0),E.instancing&&a.enable(1),E.instancingColor&&a.enable(2),E.instancingMorph&&a.enable(3),E.matcap&&a.enable(4),E.envMap&&a.enable(5),E.normalMapObjectSpace&&a.enable(6),E.normalMapTangentSpace&&a.enable(7),E.clearcoat&&a.enable(8),E.iridescence&&a.enable(9),E.alphaTest&&a.enable(10),E.vertexColors&&a.enable(11),E.vertexAlphas&&a.enable(12),E.vertexUv1s&&a.enable(13),E.vertexUv2s&&a.enable(14),E.vertexUv3s&&a.enable(15),E.vertexTangents&&a.enable(16),E.anisotropy&&a.enable(17),E.alphaHash&&a.enable(18),E.batching&&a.enable(19),E.dispersion&&a.enable(20),I.push(a.mask),a.disableAll(),E.fog&&a.enable(0),E.useFog&&a.enable(1),E.flatShading&&a.enable(2),E.logarithmicDepthBuffer&&a.enable(3),E.skinning&&a.enable(4),E.morphTargets&&a.enable(5),E.morphNormals&&a.enable(6),E.morphColors&&a.enable(7),E.premultipliedAlpha&&a.enable(8),E.shadowMapEnabled&&a.enable(9),E.useLegacyLights&&a.enable(10),E.doubleSided&&a.enable(11),E.flipSided&&a.enable(12),E.useDepthPacking&&a.enable(13),E.dithering&&a.enable(14),E.transmission&&a.enable(15),E.sheen&&a.enable(16),E.opaque&&a.enable(17),E.pointsUvs&&a.enable(18),E.decodeVideoTexture&&a.enable(19),E.alphaToCoverage&&a.enable(20),I.push(a.mask)}function b(I){const E=v[I.type];let N;if(E){const z=ps[E];N=xM.clone(z.uniforms)}else N=I.uniforms;return N}function R(I,E){let N;for(let z=0,O=f.length;z<O;z++){const q=f[z];if(q.cacheKey===E){N=q,++N.usedTimes;break}}return N===void 0&&(N=new tH(n,E,I,s),f.push(N)),N}function A(I){if(--I.usedTimes===0){const E=f.indexOf(I);f[E]=f[f.length-1],f.pop(),I.destroy()}}function C(I){l.remove(I)}function L(){l.dispose()}return{getParameters:_,getProgramCacheKey:m,getUniforms:b,acquireProgram:R,releaseProgram:A,releaseShaderCache:C,programs:f,dispose:L}}function oH(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function aH(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function YA(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function ZA(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,p,g,v,x,_){let m=n[e];return m===void 0?(m={id:d.id,object:d,geometry:p,material:g,groupOrder:v,renderOrder:d.renderOrder,z:x,group:_},n[e]=m):(m.id=d.id,m.object=d,m.geometry=p,m.material=g,m.groupOrder=v,m.renderOrder=d.renderOrder,m.z=x,m.group=_),e++,m}function a(d,p,g,v,x,_){const m=o(d,p,g,v,x,_);g.transmission>0?i.push(m):g.transparent===!0?r.push(m):t.push(m)}function l(d,p,g,v,x,_){const m=o(d,p,g,v,x,_);g.transmission>0?i.unshift(m):g.transparent===!0?r.unshift(m):t.unshift(m)}function u(d,p){t.length>1&&t.sort(d||aH),i.length>1&&i.sort(p||YA),r.length>1&&r.sort(p||YA)}function f(){for(let d=e,p=n.length;d<p;d++){const g=n[d];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:f,sort:u}}function lH(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new ZA,n.set(i,[o])):r>=s.length?(o=new ZA,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function uH(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new U,color:new ze};break;case"SpotLight":t={position:new U,direction:new U,color:new ze,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new U,color:new ze,distance:0,decay:0};break;case"HemisphereLight":t={direction:new U,skyColor:new ze,groundColor:new ze};break;case"RectAreaLight":t={color:new ze,position:new U,halfWidth:new U,halfHeight:new U};break}return n[e.id]=t,t}}}function cH(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let hH=0;function fH(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function dH(n){const e=new uH,t=cH(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new U);const r=new U,s=new ht,o=new ht;function a(u,f){let d=0,p=0,g=0;for(let N=0;N<9;N++)i.probe[N].set(0,0,0);let v=0,x=0,_=0,m=0,w=0,S=0,b=0,R=0,A=0,C=0,L=0;u.sort(fH);const I=f===!0?Math.PI:1;for(let N=0,z=u.length;N<z;N++){const O=u[N],q=O.color,j=O.intensity,Q=O.distance,oe=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)d+=q.r*j*I,p+=q.g*j*I,g+=q.b*j*I;else if(O.isLightProbe){for(let k=0;k<9;k++)i.probe[k].addScaledVector(O.sh.coefficients[k],j);L++}else if(O.isDirectionalLight){const k=e.get(O);if(k.color.copy(O.color).multiplyScalar(O.intensity*I),O.castShadow){const W=O.shadow,G=t.get(O);G.shadowBias=W.bias,G.shadowNormalBias=W.normalBias,G.shadowRadius=W.radius,G.shadowMapSize=W.mapSize,i.directionalShadow[v]=G,i.directionalShadowMap[v]=oe,i.directionalShadowMatrix[v]=O.shadow.matrix,S++}i.directional[v]=k,v++}else if(O.isSpotLight){const k=e.get(O);k.position.setFromMatrixPosition(O.matrixWorld),k.color.copy(q).multiplyScalar(j*I),k.distance=Q,k.coneCos=Math.cos(O.angle),k.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),k.decay=O.decay,i.spot[_]=k;const W=O.shadow;if(O.map&&(i.spotLightMap[A]=O.map,A++,W.updateMatrices(O),O.castShadow&&C++),i.spotLightMatrix[_]=W.matrix,O.castShadow){const G=t.get(O);G.shadowBias=W.bias,G.shadowNormalBias=W.normalBias,G.shadowRadius=W.radius,G.shadowMapSize=W.mapSize,i.spotShadow[_]=G,i.spotShadowMap[_]=oe,R++}_++}else if(O.isRectAreaLight){const k=e.get(O);k.color.copy(q).multiplyScalar(j),k.halfWidth.set(O.width*.5,0,0),k.halfHeight.set(0,O.height*.5,0),i.rectArea[m]=k,m++}else if(O.isPointLight){const k=e.get(O);if(k.color.copy(O.color).multiplyScalar(O.intensity*I),k.distance=O.distance,k.decay=O.decay,O.castShadow){const W=O.shadow,G=t.get(O);G.shadowBias=W.bias,G.shadowNormalBias=W.normalBias,G.shadowRadius=W.radius,G.shadowMapSize=W.mapSize,G.shadowCameraNear=W.camera.near,G.shadowCameraFar=W.camera.far,i.pointShadow[x]=G,i.pointShadowMap[x]=oe,i.pointShadowMatrix[x]=O.shadow.matrix,b++}i.point[x]=k,x++}else if(O.isHemisphereLight){const k=e.get(O);k.skyColor.copy(O.color).multiplyScalar(j*I),k.groundColor.copy(O.groundColor).multiplyScalar(j*I),i.hemi[w]=k,w++}}m>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=De.LTC_FLOAT_1,i.rectAreaLTC2=De.LTC_FLOAT_2):(i.rectAreaLTC1=De.LTC_HALF_1,i.rectAreaLTC2=De.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=p,i.ambient[2]=g;const E=i.hash;(E.directionalLength!==v||E.pointLength!==x||E.spotLength!==_||E.rectAreaLength!==m||E.hemiLength!==w||E.numDirectionalShadows!==S||E.numPointShadows!==b||E.numSpotShadows!==R||E.numSpotMaps!==A||E.numLightProbes!==L)&&(i.directional.length=v,i.spot.length=_,i.rectArea.length=m,i.point.length=x,i.hemi.length=w,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=R,i.spotShadowMap.length=R,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=b,i.spotLightMatrix.length=R+A-C,i.spotLightMap.length=A,i.numSpotLightShadowsWithMaps=C,i.numLightProbes=L,E.directionalLength=v,E.pointLength=x,E.spotLength=_,E.rectAreaLength=m,E.hemiLength=w,E.numDirectionalShadows=S,E.numPointShadows=b,E.numSpotShadows=R,E.numSpotMaps=A,E.numLightProbes=L,i.version=hH++)}function l(u,f){let d=0,p=0,g=0,v=0,x=0;const _=f.matrixWorldInverse;for(let m=0,w=u.length;m<w;m++){const S=u[m];if(S.isDirectionalLight){const b=i.directional[d];b.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),b.direction.sub(r),b.direction.transformDirection(_),d++}else if(S.isSpotLight){const b=i.spot[g];b.position.setFromMatrixPosition(S.matrixWorld),b.position.applyMatrix4(_),b.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),b.direction.sub(r),b.direction.transformDirection(_),g++}else if(S.isRectAreaLight){const b=i.rectArea[v];b.position.setFromMatrixPosition(S.matrixWorld),b.position.applyMatrix4(_),o.identity(),s.copy(S.matrixWorld),s.premultiply(_),o.extractRotation(s),b.halfWidth.set(S.width*.5,0,0),b.halfHeight.set(0,S.height*.5,0),b.halfWidth.applyMatrix4(o),b.halfHeight.applyMatrix4(o),v++}else if(S.isPointLight){const b=i.point[p];b.position.setFromMatrixPosition(S.matrixWorld),b.position.applyMatrix4(_),p++}else if(S.isHemisphereLight){const b=i.hemi[x];b.direction.setFromMatrixPosition(S.matrixWorld),b.direction.transformDirection(_),x++}}}return{setup:a,setupView:l,state:i}}function KA(n){const e=new dH(n),t=[],i=[];function r(f){u.camera=f,t.length=0,i.length=0}function s(f){t.push(f)}function o(f){i.push(f)}function a(f){e.setup(t,f)}function l(f){e.setupView(t,f)}const u={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function pH(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new KA(n),e.set(r,[a])):s>=o.length?(a=new KA(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}class SM extends hi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=xL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class MM extends hi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const mH=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,gH=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function vH(n,e,t){let i=new vd;const r=new ve,s=new ve,o=new Yt,a=new SM({depthPacking:wL}),l=new MM,u={},f=t.maxTextureSize,d={[Co]:Ai,[Ai]:Co,[Fs]:Fs},p=new Zr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ve},radius:{value:4}},vertexShader:mH,fragmentShader:gH}),g=p.clone();g.defines.HORIZONTAL_PASS=1;const v=new Tt;v.setAttribute("position",new Kt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Vn(v,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=f0;let m=this.type;this.render=function(A,C,L){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||A.length===0)return;const I=n.getRenderTarget(),E=n.getActiveCubeFace(),N=n.getActiveMipmapLevel(),z=n.state;z.setBlending(So),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const O=m!==cs&&this.type===cs,q=m===cs&&this.type!==cs;for(let j=0,Q=A.length;j<Q;j++){const oe=A[j],k=oe.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",oe,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;r.copy(k.mapSize);const W=k.getFrameExtents();if(r.multiply(W),s.copy(k.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(s.x=Math.floor(f/W.x),r.x=s.x*W.x,k.mapSize.x=s.x),r.y>f&&(s.y=Math.floor(f/W.y),r.y=s.y*W.y,k.mapSize.y=s.y)),k.map===null||O===!0||q===!0){const ne=this.type!==cs?{minFilter:ti,magFilter:ti}:{};k.map!==null&&k.map.dispose(),k.map=new Yr(r.x,r.y,ne),k.map.texture.name=oe.name+".shadowMap",k.camera.updateProjectionMatrix()}n.setRenderTarget(k.map),n.clear();const G=k.getViewportCount();for(let ne=0;ne<G;ne++){const me=k.getViewport(ne);o.set(s.x*me.x,s.y*me.y,s.x*me.z,s.y*me.w),z.viewport(o),k.updateMatrices(oe,ne),i=k.getFrustum(),b(C,L,k.camera,oe,this.type)}k.isPointLightShadow!==!0&&this.type===cs&&w(k,L),k.needsUpdate=!1}m=this.type,_.needsUpdate=!1,n.setRenderTarget(I,E,N)};function w(A,C){const L=e.update(x);p.defines.VSM_SAMPLES!==A.blurSamples&&(p.defines.VSM_SAMPLES=A.blurSamples,g.defines.VSM_SAMPLES=A.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new Yr(r.x,r.y)),p.uniforms.shadow_pass.value=A.map.texture,p.uniforms.resolution.value=A.mapSize,p.uniforms.radius.value=A.radius,n.setRenderTarget(A.mapPass),n.clear(),n.renderBufferDirect(C,null,L,p,x,null),g.uniforms.shadow_pass.value=A.mapPass.texture,g.uniforms.resolution.value=A.mapSize,g.uniforms.radius.value=A.radius,n.setRenderTarget(A.map),n.clear(),n.renderBufferDirect(C,null,L,g,x,null)}function S(A,C,L,I){let E=null;const N=L.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(N!==void 0)E=N;else if(E=L.isPointLight===!0?l:a,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const z=E.uuid,O=C.uuid;let q=u[z];q===void 0&&(q={},u[z]=q);let j=q[O];j===void 0&&(j=E.clone(),q[O]=j,C.addEventListener("dispose",R)),E=j}if(E.visible=C.visible,E.wireframe=C.wireframe,I===cs?E.side=C.shadowSide!==null?C.shadowSide:C.side:E.side=C.shadowSide!==null?C.shadowSide:d[C.side],E.alphaMap=C.alphaMap,E.alphaTest=C.alphaTest,E.map=C.map,E.clipShadows=C.clipShadows,E.clippingPlanes=C.clippingPlanes,E.clipIntersection=C.clipIntersection,E.displacementMap=C.displacementMap,E.displacementScale=C.displacementScale,E.displacementBias=C.displacementBias,E.wireframeLinewidth=C.wireframeLinewidth,E.linewidth=C.linewidth,L.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const z=n.properties.get(E);z.light=L}return E}function b(A,C,L,I,E){if(A.visible===!1)return;if(A.layers.test(C.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&E===cs)&&(!A.frustumCulled||i.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,A.matrixWorld);const O=e.update(A),q=A.material;if(Array.isArray(q)){const j=O.groups;for(let Q=0,oe=j.length;Q<oe;Q++){const k=j[Q],W=q[k.materialIndex];if(W&&W.visible){const G=S(A,W,I,E);A.onBeforeShadow(n,A,C,L,O,G,k),n.renderBufferDirect(L,null,O,G,A,k),A.onAfterShadow(n,A,C,L,O,G,k)}}}else if(q.visible){const j=S(A,q,I,E);A.onBeforeShadow(n,A,C,L,O,j,null),n.renderBufferDirect(L,null,O,j,A,null),A.onAfterShadow(n,A,C,L,O,j,null)}}const z=A.children;for(let O=0,q=z.length;O<q;O++)b(z[O],C,L,I,E)}function R(A){A.target.removeEventListener("dispose",R);for(const L in u){const I=u[L],E=A.target.uuid;E in I&&(I[E].dispose(),delete I[E])}}}function yH(n){function e(){let H=!1;const ue=new Yt;let ce=null;const Pe=new Yt(0,0,0,0);return{setMask:function(Ne){ce!==Ne&&!H&&(n.colorMask(Ne,Ne,Ne,Ne),ce=Ne)},setLocked:function(Ne){H=Ne},setClear:function(Ne,Dt,Wt,Ot,Qt){Qt===!0&&(Ne*=Ot,Dt*=Ot,Wt*=Ot),ue.set(Ne,Dt,Wt,Ot),Pe.equals(ue)===!1&&(n.clearColor(Ne,Dt,Wt,Ot),Pe.copy(ue))},reset:function(){H=!1,ce=null,Pe.set(-1,0,0,0)}}}function t(){let H=!1,ue=null,ce=null,Pe=null;return{setTest:function(Ne){Ne?Me(n.DEPTH_TEST):de(n.DEPTH_TEST)},setMask:function(Ne){ue!==Ne&&!H&&(n.depthMask(Ne),ue=Ne)},setFunc:function(Ne){if(ce!==Ne){switch(Ne){case XI:n.depthFunc(n.NEVER);break;case $I:n.depthFunc(n.ALWAYS);break;case qI:n.depthFunc(n.LESS);break;case Pf:n.depthFunc(n.LEQUAL);break;case YI:n.depthFunc(n.EQUAL);break;case ZI:n.depthFunc(n.GEQUAL);break;case KI:n.depthFunc(n.GREATER);break;case JI:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ce=Ne}},setLocked:function(Ne){H=Ne},setClear:function(Ne){Pe!==Ne&&(n.clearDepth(Ne),Pe=Ne)},reset:function(){H=!1,ue=null,ce=null,Pe=null}}}function i(){let H=!1,ue=null,ce=null,Pe=null,Ne=null,Dt=null,Wt=null,Ot=null,Qt=null;return{setTest:function(Rt){H||(Rt?Me(n.STENCIL_TEST):de(n.STENCIL_TEST))},setMask:function(Rt){ue!==Rt&&!H&&(n.stencilMask(Rt),ue=Rt)},setFunc:function(Rt,Gn,an){(ce!==Rt||Pe!==Gn||Ne!==an)&&(n.stencilFunc(Rt,Gn,an),ce=Rt,Pe=Gn,Ne=an)},setOp:function(Rt,Gn,an){(Dt!==Rt||Wt!==Gn||Ot!==an)&&(n.stencilOp(Rt,Gn,an),Dt=Rt,Wt=Gn,Ot=an)},setLocked:function(Rt){H=Rt},setClear:function(Rt){Qt!==Rt&&(n.clearStencil(Rt),Qt=Rt)},reset:function(){H=!1,ue=null,ce=null,Pe=null,Ne=null,Dt=null,Wt=null,Ot=null,Qt=null}}}const r=new e,s=new t,o=new i,a=new WeakMap,l=new WeakMap;let u={},f={},d=new WeakMap,p=[],g=null,v=!1,x=null,_=null,m=null,w=null,S=null,b=null,R=null,A=new ze(0,0,0),C=0,L=!1,I=null,E=null,N=null,z=null,O=null;const q=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let j=!1,Q=0;const oe=n.getParameter(n.VERSION);oe.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(oe)[1]),j=Q>=1):oe.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(oe)[1]),j=Q>=2);let k=null,W={};const G=n.getParameter(n.SCISSOR_BOX),ne=n.getParameter(n.VIEWPORT),me=new Yt().fromArray(G),_e=new Yt().fromArray(ne);function J(H,ue,ce,Pe){const Ne=new Uint8Array(4),Dt=n.createTexture();n.bindTexture(H,Dt),n.texParameteri(H,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(H,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Wt=0;Wt<ce;Wt++)H===n.TEXTURE_3D||H===n.TEXTURE_2D_ARRAY?n.texImage3D(ue,0,n.RGBA,1,1,Pe,0,n.RGBA,n.UNSIGNED_BYTE,Ne):n.texImage2D(ue+Wt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ne);return Dt}const pe={};pe[n.TEXTURE_2D]=J(n.TEXTURE_2D,n.TEXTURE_2D,1),pe[n.TEXTURE_CUBE_MAP]=J(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),pe[n.TEXTURE_2D_ARRAY]=J(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),pe[n.TEXTURE_3D]=J(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Me(n.DEPTH_TEST),s.setFunc(Pf),Ce(!1),be(Ww),Me(n.CULL_FACE),we(So);function Me(H){u[H]!==!0&&(n.enable(H),u[H]=!0)}function de(H){u[H]!==!1&&(n.disable(H),u[H]=!1)}function Qe(H,ue){return f[H]!==ue?(n.bindFramebuffer(H,ue),f[H]=ue,H===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=ue),H===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=ue),!0):!1}function lt(H,ue){let ce=p,Pe=!1;if(H){ce=d.get(ue),ce===void 0&&(ce=[],d.set(ue,ce));const Ne=H.textures;if(ce.length!==Ne.length||ce[0]!==n.COLOR_ATTACHMENT0){for(let Dt=0,Wt=Ne.length;Dt<Wt;Dt++)ce[Dt]=n.COLOR_ATTACHMENT0+Dt;ce.length=Ne.length,Pe=!0}}else ce[0]!==n.BACK&&(ce[0]=n.BACK,Pe=!0);Pe&&n.drawBuffers(ce)}function K(H){return g!==H?(n.useProgram(H),g=H,!0):!1}const tt={[aa]:n.FUNC_ADD,[RI]:n.FUNC_SUBTRACT,[PI]:n.FUNC_REVERSE_SUBTRACT};tt[II]=n.MIN,tt[LI]=n.MAX;const he={[NI]:n.ZERO,[DI]:n.ONE,[OI]:n.SRC_COLOR,[sv]:n.SRC_ALPHA,[VI]:n.SRC_ALPHA_SATURATE,[zI]:n.DST_COLOR,[FI]:n.DST_ALPHA,[kI]:n.ONE_MINUS_SRC_COLOR,[ov]:n.ONE_MINUS_SRC_ALPHA,[BI]:n.ONE_MINUS_DST_COLOR,[UI]:n.ONE_MINUS_DST_ALPHA,[HI]:n.CONSTANT_COLOR,[GI]:n.ONE_MINUS_CONSTANT_COLOR,[WI]:n.CONSTANT_ALPHA,[jI]:n.ONE_MINUS_CONSTANT_ALPHA};function we(H,ue,ce,Pe,Ne,Dt,Wt,Ot,Qt,Rt){if(H===So){v===!0&&(de(n.BLEND),v=!1);return}if(v===!1&&(Me(n.BLEND),v=!0),H!==CI){if(H!==x||Rt!==L){if((_!==aa||S!==aa)&&(n.blendEquation(n.FUNC_ADD),_=aa,S=aa),Rt)switch(H){case gl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case jw:n.blendFunc(n.ONE,n.ONE);break;case Xw:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case $w:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}else switch(H){case gl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case jw:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Xw:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case $w:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}m=null,w=null,b=null,R=null,A.set(0,0,0),C=0,x=H,L=Rt}return}Ne=Ne||ue,Dt=Dt||ce,Wt=Wt||Pe,(ue!==_||Ne!==S)&&(n.blendEquationSeparate(tt[ue],tt[Ne]),_=ue,S=Ne),(ce!==m||Pe!==w||Dt!==b||Wt!==R)&&(n.blendFuncSeparate(he[ce],he[Pe],he[Dt],he[Wt]),m=ce,w=Pe,b=Dt,R=Wt),(Ot.equals(A)===!1||Qt!==C)&&(n.blendColor(Ot.r,Ot.g,Ot.b,Qt),A.copy(Ot),C=Qt),x=H,L=!1}function ye(H,ue){H.side===Fs?de(n.CULL_FACE):Me(n.CULL_FACE);let ce=H.side===Ai;ue&&(ce=!ce),Ce(ce),H.blending===gl&&H.transparent===!1?we(So):we(H.blending,H.blendEquation,H.blendSrc,H.blendDst,H.blendEquationAlpha,H.blendSrcAlpha,H.blendDstAlpha,H.blendColor,H.blendAlpha,H.premultipliedAlpha),s.setFunc(H.depthFunc),s.setTest(H.depthTest),s.setMask(H.depthWrite),r.setMask(H.colorWrite);const Pe=H.stencilWrite;o.setTest(Pe),Pe&&(o.setMask(H.stencilWriteMask),o.setFunc(H.stencilFunc,H.stencilRef,H.stencilFuncMask),o.setOp(H.stencilFail,H.stencilZFail,H.stencilZPass)),Ke(H.polygonOffset,H.polygonOffsetFactor,H.polygonOffsetUnits),H.alphaToCoverage===!0?Me(n.SAMPLE_ALPHA_TO_COVERAGE):de(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ce(H){I!==H&&(H?n.frontFace(n.CW):n.frontFace(n.CCW),I=H)}function be(H){H!==bI?(Me(n.CULL_FACE),H!==E&&(H===Ww?n.cullFace(n.BACK):H===TI?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):de(n.CULL_FACE),E=H}function Be(H){H!==N&&(j&&n.lineWidth(H),N=H)}function Ke(H,ue,ce){H?(Me(n.POLYGON_OFFSET_FILL),(z!==ue||O!==ce)&&(n.polygonOffset(ue,ce),z=ue,O=ce)):de(n.POLYGON_OFFSET_FILL)}function V(H){H?Me(n.SCISSOR_TEST):de(n.SCISSOR_TEST)}function D(H){H===void 0&&(H=n.TEXTURE0+q-1),k!==H&&(n.activeTexture(H),k=H)}function te(H,ue,ce){ce===void 0&&(k===null?ce=n.TEXTURE0+q-1:ce=k);let Pe=W[ce];Pe===void 0&&(Pe={type:void 0,texture:void 0},W[ce]=Pe),(Pe.type!==H||Pe.texture!==ue)&&(k!==ce&&(n.activeTexture(ce),k=ce),n.bindTexture(H,ue||pe[H]),Pe.type=H,Pe.texture=ue)}function xe(){const H=W[k];H!==void 0&&H.type!==void 0&&(n.bindTexture(H.type,null),H.type=void 0,H.texture=void 0)}function Ee(){try{n.compressedTexImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Se(){try{n.compressedTexImage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function qe(){try{n.texSubImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Le(){try{n.texSubImage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ie(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function ft(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Re(){try{n.texStorage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function $e(){try{n.texStorage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Mt(){try{n.texImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function it(){try{n.texImage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ve(H){me.equals(H)===!1&&(n.scissor(H.x,H.y,H.z,H.w),me.copy(H))}function pt(H){_e.equals(H)===!1&&(n.viewport(H.x,H.y,H.z,H.w),_e.copy(H))}function Et(H,ue){let ce=l.get(ue);ce===void 0&&(ce=new WeakMap,l.set(ue,ce));let Pe=ce.get(H);Pe===void 0&&(Pe=n.getUniformBlockIndex(ue,H.name),ce.set(H,Pe))}function X(H,ue){const Pe=l.get(ue).get(H);a.get(ue)!==Pe&&(n.uniformBlockBinding(ue,Pe,H.__bindingPointIndex),a.set(ue,Pe))}function ge(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},k=null,W={},f={},d=new WeakMap,p=[],g=null,v=!1,x=null,_=null,m=null,w=null,S=null,b=null,R=null,A=new ze(0,0,0),C=0,L=!1,I=null,E=null,N=null,z=null,O=null,me.set(0,0,n.canvas.width,n.canvas.height),_e.set(0,0,n.canvas.width,n.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:Me,disable:de,bindFramebuffer:Qe,drawBuffers:lt,useProgram:K,setBlending:we,setMaterial:ye,setFlipSided:Ce,setCullFace:be,setLineWidth:Be,setPolygonOffset:Ke,setScissorTest:V,activeTexture:D,bindTexture:te,unbindTexture:xe,compressedTexImage2D:Ee,compressedTexImage3D:Se,texImage2D:Mt,texImage3D:it,updateUBOMapping:Et,uniformBlockBinding:X,texStorage2D:Re,texStorage3D:$e,texSubImage2D:qe,texSubImage3D:Le,compressedTexSubImage2D:Ie,compressedTexSubImage3D:ft,scissor:Ve,viewport:pt,reset:ge}}function _H(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new ve,f=new WeakMap;let d;const p=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(V,D){return g?new OffscreenCanvas(V,D):Gf("canvas")}function x(V,D,te){let xe=1;const Ee=Ke(V);if((Ee.width>te||Ee.height>te)&&(xe=te/Math.max(Ee.width,Ee.height)),xe<1)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap||typeof VideoFrame<"u"&&V instanceof VideoFrame){const Se=Math.floor(xe*Ee.width),qe=Math.floor(xe*Ee.height);d===void 0&&(d=v(Se,qe));const Le=D?v(Se,qe):d;return Le.width=Se,Le.height=qe,Le.getContext("2d").drawImage(V,0,0,Se,qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ee.width+"x"+Ee.height+") to ("+Se+"x"+qe+")."),Le}else return"data"in V&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ee.width+"x"+Ee.height+")."),V;return V}function _(V){return V.generateMipmaps&&V.minFilter!==ti&&V.minFilter!==An}function m(V){n.generateMipmap(V)}function w(V,D,te,xe,Ee=!1){if(V!==null){if(n[V]!==void 0)return n[V];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let Se=D;if(D===n.RED&&(te===n.FLOAT&&(Se=n.R32F),te===n.HALF_FLOAT&&(Se=n.R16F),te===n.UNSIGNED_BYTE&&(Se=n.R8)),D===n.RED_INTEGER&&(te===n.UNSIGNED_BYTE&&(Se=n.R8UI),te===n.UNSIGNED_SHORT&&(Se=n.R16UI),te===n.UNSIGNED_INT&&(Se=n.R32UI),te===n.BYTE&&(Se=n.R8I),te===n.SHORT&&(Se=n.R16I),te===n.INT&&(Se=n.R32I)),D===n.RG&&(te===n.FLOAT&&(Se=n.RG32F),te===n.HALF_FLOAT&&(Se=n.RG16F),te===n.UNSIGNED_BYTE&&(Se=n.RG8)),D===n.RG_INTEGER&&(te===n.UNSIGNED_BYTE&&(Se=n.RG8UI),te===n.UNSIGNED_SHORT&&(Se=n.RG16UI),te===n.UNSIGNED_INT&&(Se=n.RG32UI),te===n.BYTE&&(Se=n.RG8I),te===n.SHORT&&(Se=n.RG16I),te===n.INT&&(Se=n.RG32I)),D===n.RGB&&te===n.UNSIGNED_INT_5_9_9_9_REV&&(Se=n.RGB9_E5),D===n.RGBA){const qe=Ee?Uf:qt.getTransfer(xe);te===n.FLOAT&&(Se=n.RGBA32F),te===n.HALF_FLOAT&&(Se=n.RGBA16F),te===n.UNSIGNED_BYTE&&(Se=qe===nn?n.SRGB8_ALPHA8:n.RGBA8),te===n.UNSIGNED_SHORT_4_4_4_4&&(Se=n.RGBA4),te===n.UNSIGNED_SHORT_5_5_5_1&&(Se=n.RGB5_A1)}return(Se===n.R16F||Se===n.R32F||Se===n.RG16F||Se===n.RG32F||Se===n.RGBA16F||Se===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Se}function S(V,D){return _(V)===!0||V.isFramebufferTexture&&V.minFilter!==ti&&V.minFilter!==An?Math.log2(Math.max(D.width,D.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?D.mipmaps.length:1}function b(V){const D=V.target;D.removeEventListener("dispose",b),A(D),D.isVideoTexture&&f.delete(D)}function R(V){const D=V.target;D.removeEventListener("dispose",R),L(D)}function A(V){const D=i.get(V);if(D.__webglInit===void 0)return;const te=V.source,xe=p.get(te);if(xe){const Ee=xe[D.__cacheKey];Ee.usedTimes--,Ee.usedTimes===0&&C(V),Object.keys(xe).length===0&&p.delete(te)}i.remove(V)}function C(V){const D=i.get(V);n.deleteTexture(D.__webglTexture);const te=V.source,xe=p.get(te);delete xe[D.__cacheKey],o.memory.textures--}function L(V){const D=i.get(V);if(V.depthTexture&&V.depthTexture.dispose(),V.isWebGLCubeRenderTarget)for(let xe=0;xe<6;xe++){if(Array.isArray(D.__webglFramebuffer[xe]))for(let Ee=0;Ee<D.__webglFramebuffer[xe].length;Ee++)n.deleteFramebuffer(D.__webglFramebuffer[xe][Ee]);else n.deleteFramebuffer(D.__webglFramebuffer[xe]);D.__webglDepthbuffer&&n.deleteRenderbuffer(D.__webglDepthbuffer[xe])}else{if(Array.isArray(D.__webglFramebuffer))for(let xe=0;xe<D.__webglFramebuffer.length;xe++)n.deleteFramebuffer(D.__webglFramebuffer[xe]);else n.deleteFramebuffer(D.__webglFramebuffer);if(D.__webglDepthbuffer&&n.deleteRenderbuffer(D.__webglDepthbuffer),D.__webglMultisampledFramebuffer&&n.deleteFramebuffer(D.__webglMultisampledFramebuffer),D.__webglColorRenderbuffer)for(let xe=0;xe<D.__webglColorRenderbuffer.length;xe++)D.__webglColorRenderbuffer[xe]&&n.deleteRenderbuffer(D.__webglColorRenderbuffer[xe]);D.__webglDepthRenderbuffer&&n.deleteRenderbuffer(D.__webglDepthRenderbuffer)}const te=V.textures;for(let xe=0,Ee=te.length;xe<Ee;xe++){const Se=i.get(te[xe]);Se.__webglTexture&&(n.deleteTexture(Se.__webglTexture),o.memory.textures--),i.remove(te[xe])}i.remove(V)}let I=0;function E(){I=0}function N(){const V=I;return V>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+r.maxTextures),I+=1,V}function z(V){const D=[];return D.push(V.wrapS),D.push(V.wrapT),D.push(V.wrapR||0),D.push(V.magFilter),D.push(V.minFilter),D.push(V.anisotropy),D.push(V.internalFormat),D.push(V.format),D.push(V.type),D.push(V.generateMipmaps),D.push(V.premultiplyAlpha),D.push(V.flipY),D.push(V.unpackAlignment),D.push(V.colorSpace),D.join()}function O(V,D){const te=i.get(V);if(V.isVideoTexture&&be(V),V.isRenderTargetTexture===!1&&V.version>0&&te.__version!==V.version){const xe=V.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{me(te,V,D);return}}t.bindTexture(n.TEXTURE_2D,te.__webglTexture,n.TEXTURE0+D)}function q(V,D){const te=i.get(V);if(V.version>0&&te.__version!==V.version){me(te,V,D);return}t.bindTexture(n.TEXTURE_2D_ARRAY,te.__webglTexture,n.TEXTURE0+D)}function j(V,D){const te=i.get(V);if(V.version>0&&te.__version!==V.version){me(te,V,D);return}t.bindTexture(n.TEXTURE_3D,te.__webglTexture,n.TEXTURE0+D)}function Q(V,D){const te=i.get(V);if(V.version>0&&te.__version!==V.version){_e(te,V,D);return}t.bindTexture(n.TEXTURE_CUBE_MAP,te.__webglTexture,n.TEXTURE0+D)}const oe={[Nf]:n.REPEAT,[jr]:n.CLAMP_TO_EDGE,[Df]:n.MIRRORED_REPEAT},k={[ti]:n.NEAREST,[sM]:n.NEAREST_MIPMAP_NEAREST,[qu]:n.NEAREST_MIPMAP_LINEAR,[An]:n.LINEAR,[af]:n.LINEAR_MIPMAP_NEAREST,[Us]:n.LINEAR_MIPMAP_LINEAR},W={[ML]:n.NEVER,[RL]:n.ALWAYS,[EL]:n.LESS,[mM]:n.LEQUAL,[bL]:n.EQUAL,[CL]:n.GEQUAL,[TL]:n.GREATER,[AL]:n.NOTEQUAL};function G(V,D){if(D.type===yr&&e.has("OES_texture_float_linear")===!1&&(D.magFilter===An||D.magFilter===af||D.magFilter===qu||D.magFilter===Us||D.minFilter===An||D.minFilter===af||D.minFilter===qu||D.minFilter===Us)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(V,n.TEXTURE_WRAP_S,oe[D.wrapS]),n.texParameteri(V,n.TEXTURE_WRAP_T,oe[D.wrapT]),(V===n.TEXTURE_3D||V===n.TEXTURE_2D_ARRAY)&&n.texParameteri(V,n.TEXTURE_WRAP_R,oe[D.wrapR]),n.texParameteri(V,n.TEXTURE_MAG_FILTER,k[D.magFilter]),n.texParameteri(V,n.TEXTURE_MIN_FILTER,k[D.minFilter]),D.compareFunction&&(n.texParameteri(V,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(V,n.TEXTURE_COMPARE_FUNC,W[D.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(D.magFilter===ti||D.minFilter!==qu&&D.minFilter!==Us||D.type===yr&&e.has("OES_texture_float_linear")===!1)return;if(D.anisotropy>1||i.get(D).__currentAnisotropy){const te=e.get("EXT_texture_filter_anisotropic");n.texParameterf(V,te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,r.getMaxAnisotropy())),i.get(D).__currentAnisotropy=D.anisotropy}}}function ne(V,D){let te=!1;V.__webglInit===void 0&&(V.__webglInit=!0,D.addEventListener("dispose",b));const xe=D.source;let Ee=p.get(xe);Ee===void 0&&(Ee={},p.set(xe,Ee));const Se=z(D);if(Se!==V.__cacheKey){Ee[Se]===void 0&&(Ee[Se]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,te=!0),Ee[Se].usedTimes++;const qe=Ee[V.__cacheKey];qe!==void 0&&(Ee[V.__cacheKey].usedTimes--,qe.usedTimes===0&&C(D)),V.__cacheKey=Se,V.__webglTexture=Ee[Se].texture}return te}function me(V,D,te){let xe=n.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(xe=n.TEXTURE_2D_ARRAY),D.isData3DTexture&&(xe=n.TEXTURE_3D);const Ee=ne(V,D),Se=D.source;t.bindTexture(xe,V.__webglTexture,n.TEXTURE0+te);const qe=i.get(Se);if(Se.version!==qe.__version||Ee===!0){t.activeTexture(n.TEXTURE0+te);const Le=qt.getPrimaries(qt.workingColorSpace),Ie=D.colorSpace===mo?null:qt.getPrimaries(D.colorSpace),ft=D.colorSpace===mo||Le===Ie?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ft);let Re=x(D.image,!1,r.maxTextureSize);Re=Be(D,Re);const $e=s.convert(D.format,D.colorSpace),Mt=s.convert(D.type);let it=w(D.internalFormat,$e,Mt,D.colorSpace,D.isVideoTexture);G(xe,D);let Ve;const pt=D.mipmaps,Et=D.isVideoTexture!==!0,X=qe.__version===void 0||Ee===!0,ge=Se.dataReady,H=S(D,Re);if(D.isDepthTexture)it=n.DEPTH_COMPONENT16,D.type===yr?it=n.DEPTH_COMPONENT32F:D.type===Al?it=n.DEPTH_COMPONENT24:D.type===Nc&&(it=n.DEPTH24_STENCIL8),X&&(Et?t.texStorage2D(n.TEXTURE_2D,1,it,Re.width,Re.height):t.texImage2D(n.TEXTURE_2D,0,it,Re.width,Re.height,0,$e,Mt,null));else if(D.isDataTexture)if(pt.length>0){Et&&X&&t.texStorage2D(n.TEXTURE_2D,H,it,pt[0].width,pt[0].height);for(let ue=0,ce=pt.length;ue<ce;ue++)Ve=pt[ue],Et?ge&&t.texSubImage2D(n.TEXTURE_2D,ue,0,0,Ve.width,Ve.height,$e,Mt,Ve.data):t.texImage2D(n.TEXTURE_2D,ue,it,Ve.width,Ve.height,0,$e,Mt,Ve.data);D.generateMipmaps=!1}else Et?(X&&t.texStorage2D(n.TEXTURE_2D,H,it,Re.width,Re.height),ge&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Re.width,Re.height,$e,Mt,Re.data)):t.texImage2D(n.TEXTURE_2D,0,it,Re.width,Re.height,0,$e,Mt,Re.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){Et&&X&&t.texStorage3D(n.TEXTURE_2D_ARRAY,H,it,pt[0].width,pt[0].height,Re.depth);for(let ue=0,ce=pt.length;ue<ce;ue++)Ve=pt[ue],D.format!==Ji?$e!==null?Et?ge&&t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ue,0,0,0,Ve.width,Ve.height,Re.depth,$e,Ve.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ue,it,Ve.width,Ve.height,Re.depth,0,Ve.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Et?ge&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ue,0,0,0,Ve.width,Ve.height,Re.depth,$e,Mt,Ve.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ue,it,Ve.width,Ve.height,Re.depth,0,$e,Mt,Ve.data)}else{Et&&X&&t.texStorage2D(n.TEXTURE_2D,H,it,pt[0].width,pt[0].height);for(let ue=0,ce=pt.length;ue<ce;ue++)Ve=pt[ue],D.format!==Ji?$e!==null?Et?ge&&t.compressedTexSubImage2D(n.TEXTURE_2D,ue,0,0,Ve.width,Ve.height,$e,Ve.data):t.compressedTexImage2D(n.TEXTURE_2D,ue,it,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Et?ge&&t.texSubImage2D(n.TEXTURE_2D,ue,0,0,Ve.width,Ve.height,$e,Mt,Ve.data):t.texImage2D(n.TEXTURE_2D,ue,it,Ve.width,Ve.height,0,$e,Mt,Ve.data)}else if(D.isDataArrayTexture)Et?(X&&t.texStorage3D(n.TEXTURE_2D_ARRAY,H,it,Re.width,Re.height,Re.depth),ge&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Re.width,Re.height,Re.depth,$e,Mt,Re.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,it,Re.width,Re.height,Re.depth,0,$e,Mt,Re.data);else if(D.isData3DTexture)Et?(X&&t.texStorage3D(n.TEXTURE_3D,H,it,Re.width,Re.height,Re.depth),ge&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Re.width,Re.height,Re.depth,$e,Mt,Re.data)):t.texImage3D(n.TEXTURE_3D,0,it,Re.width,Re.height,Re.depth,0,$e,Mt,Re.data);else if(D.isFramebufferTexture){if(X)if(Et)t.texStorage2D(n.TEXTURE_2D,H,it,Re.width,Re.height);else{let ue=Re.width,ce=Re.height;for(let Pe=0;Pe<H;Pe++)t.texImage2D(n.TEXTURE_2D,Pe,it,ue,ce,0,$e,Mt,null),ue>>=1,ce>>=1}}else if(pt.length>0){if(Et&&X){const ue=Ke(pt[0]);t.texStorage2D(n.TEXTURE_2D,H,it,ue.width,ue.height)}for(let ue=0,ce=pt.length;ue<ce;ue++)Ve=pt[ue],Et?ge&&t.texSubImage2D(n.TEXTURE_2D,ue,0,0,$e,Mt,Ve):t.texImage2D(n.TEXTURE_2D,ue,it,$e,Mt,Ve);D.generateMipmaps=!1}else if(Et){if(X){const ue=Ke(Re);t.texStorage2D(n.TEXTURE_2D,H,it,ue.width,ue.height)}ge&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,$e,Mt,Re)}else t.texImage2D(n.TEXTURE_2D,0,it,$e,Mt,Re);_(D)&&m(xe),qe.__version=Se.version,D.onUpdate&&D.onUpdate(D)}V.__version=D.version}function _e(V,D,te){if(D.image.length!==6)return;const xe=ne(V,D),Ee=D.source;t.bindTexture(n.TEXTURE_CUBE_MAP,V.__webglTexture,n.TEXTURE0+te);const Se=i.get(Ee);if(Ee.version!==Se.__version||xe===!0){t.activeTexture(n.TEXTURE0+te);const qe=qt.getPrimaries(qt.workingColorSpace),Le=D.colorSpace===mo?null:qt.getPrimaries(D.colorSpace),Ie=D.colorSpace===mo||qe===Le?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ie);const ft=D.isCompressedTexture||D.image[0].isCompressedTexture,Re=D.image[0]&&D.image[0].isDataTexture,$e=[];for(let ce=0;ce<6;ce++)!ft&&!Re?$e[ce]=x(D.image[ce],!0,r.maxCubemapSize):$e[ce]=Re?D.image[ce].image:D.image[ce],$e[ce]=Be(D,$e[ce]);const Mt=$e[0],it=s.convert(D.format,D.colorSpace),Ve=s.convert(D.type),pt=w(D.internalFormat,it,Ve,D.colorSpace),Et=D.isVideoTexture!==!0,X=Se.__version===void 0||xe===!0,ge=Ee.dataReady;let H=S(D,Mt);G(n.TEXTURE_CUBE_MAP,D);let ue;if(ft){Et&&X&&t.texStorage2D(n.TEXTURE_CUBE_MAP,H,pt,Mt.width,Mt.height);for(let ce=0;ce<6;ce++){ue=$e[ce].mipmaps;for(let Pe=0;Pe<ue.length;Pe++){const Ne=ue[Pe];D.format!==Ji?it!==null?Et?ge&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Pe,0,0,Ne.width,Ne.height,it,Ne.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Pe,pt,Ne.width,Ne.height,0,Ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Et?ge&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Pe,0,0,Ne.width,Ne.height,it,Ve,Ne.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Pe,pt,Ne.width,Ne.height,0,it,Ve,Ne.data)}}}else{if(ue=D.mipmaps,Et&&X){ue.length>0&&H++;const ce=Ke($e[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,H,pt,ce.width,ce.height)}for(let ce=0;ce<6;ce++)if(Re){Et?ge&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,0,0,$e[ce].width,$e[ce].height,it,Ve,$e[ce].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,pt,$e[ce].width,$e[ce].height,0,it,Ve,$e[ce].data);for(let Pe=0;Pe<ue.length;Pe++){const Dt=ue[Pe].image[ce].image;Et?ge&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Pe+1,0,0,Dt.width,Dt.height,it,Ve,Dt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Pe+1,pt,Dt.width,Dt.height,0,it,Ve,Dt.data)}}else{Et?ge&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,0,0,it,Ve,$e[ce]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,pt,it,Ve,$e[ce]);for(let Pe=0;Pe<ue.length;Pe++){const Ne=ue[Pe];Et?ge&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Pe+1,0,0,it,Ve,Ne.image[ce]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,Pe+1,pt,it,Ve,Ne.image[ce])}}}_(D)&&m(n.TEXTURE_CUBE_MAP),Se.__version=Ee.version,D.onUpdate&&D.onUpdate(D)}V.__version=D.version}function J(V,D,te,xe,Ee,Se){const qe=s.convert(te.format,te.colorSpace),Le=s.convert(te.type),Ie=w(te.internalFormat,qe,Le,te.colorSpace);if(!i.get(D).__hasExternalTextures){const Re=Math.max(1,D.width>>Se),$e=Math.max(1,D.height>>Se);Ee===n.TEXTURE_3D||Ee===n.TEXTURE_2D_ARRAY?t.texImage3D(Ee,Se,Ie,Re,$e,D.depth,0,qe,Le,null):t.texImage2D(Ee,Se,Ie,Re,$e,0,qe,Le,null)}t.bindFramebuffer(n.FRAMEBUFFER,V),Ce(D)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,xe,Ee,i.get(te).__webglTexture,0,ye(D)):(Ee===n.TEXTURE_2D||Ee>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ee<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,xe,Ee,i.get(te).__webglTexture,Se),t.bindFramebuffer(n.FRAMEBUFFER,null)}function pe(V,D,te){if(n.bindRenderbuffer(n.RENDERBUFFER,V),D.depthBuffer&&!D.stencilBuffer){let xe=n.DEPTH_COMPONENT24;if(te||Ce(D)){const Ee=D.depthTexture;Ee&&Ee.isDepthTexture&&(Ee.type===yr?xe=n.DEPTH_COMPONENT32F:Ee.type===Al&&(xe=n.DEPTH_COMPONENT24));const Se=ye(D);Ce(D)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Se,xe,D.width,D.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Se,xe,D.width,D.height)}else n.renderbufferStorage(n.RENDERBUFFER,xe,D.width,D.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,V)}else if(D.depthBuffer&&D.stencilBuffer){const xe=ye(D);te&&Ce(D)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,xe,n.DEPTH24_STENCIL8,D.width,D.height):Ce(D)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,xe,n.DEPTH24_STENCIL8,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,D.width,D.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,V)}else{const xe=D.textures;for(let Ee=0;Ee<xe.length;Ee++){const Se=xe[Ee],qe=s.convert(Se.format,Se.colorSpace),Le=s.convert(Se.type),Ie=w(Se.internalFormat,qe,Le,Se.colorSpace),ft=ye(D);te&&Ce(D)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ft,Ie,D.width,D.height):Ce(D)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ft,Ie,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,Ie,D.width,D.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Me(V,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,V),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),O(D.depthTexture,0);const xe=i.get(D.depthTexture).__webglTexture,Ee=ye(D);if(D.depthTexture.format===vl)Ce(D)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,xe,0,Ee):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,xe,0);else if(D.depthTexture.format===wc)Ce(D)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,xe,0,Ee):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,xe,0);else throw new Error("Unknown depthTexture format")}function de(V){const D=i.get(V),te=V.isWebGLCubeRenderTarget===!0;if(V.depthTexture&&!D.__autoAllocateDepthBuffer){if(te)throw new Error("target.depthTexture not supported in Cube render targets");Me(D.__webglFramebuffer,V)}else if(te){D.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)t.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer[xe]),D.__webglDepthbuffer[xe]=n.createRenderbuffer(),pe(D.__webglDepthbuffer[xe],V,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer),D.__webglDepthbuffer=n.createRenderbuffer(),pe(D.__webglDepthbuffer,V,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Qe(V,D,te){const xe=i.get(V);D!==void 0&&J(xe.__webglFramebuffer,V,V.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),te!==void 0&&de(V)}function lt(V){const D=V.texture,te=i.get(V),xe=i.get(D);V.addEventListener("dispose",R);const Ee=V.textures,Se=V.isWebGLCubeRenderTarget===!0,qe=Ee.length>1;if(qe||(xe.__webglTexture===void 0&&(xe.__webglTexture=n.createTexture()),xe.__version=D.version,o.memory.textures++),Se){te.__webglFramebuffer=[];for(let Le=0;Le<6;Le++)if(D.mipmaps&&D.mipmaps.length>0){te.__webglFramebuffer[Le]=[];for(let Ie=0;Ie<D.mipmaps.length;Ie++)te.__webglFramebuffer[Le][Ie]=n.createFramebuffer()}else te.__webglFramebuffer[Le]=n.createFramebuffer()}else{if(D.mipmaps&&D.mipmaps.length>0){te.__webglFramebuffer=[];for(let Le=0;Le<D.mipmaps.length;Le++)te.__webglFramebuffer[Le]=n.createFramebuffer()}else te.__webglFramebuffer=n.createFramebuffer();if(qe)for(let Le=0,Ie=Ee.length;Le<Ie;Le++){const ft=i.get(Ee[Le]);ft.__webglTexture===void 0&&(ft.__webglTexture=n.createTexture(),o.memory.textures++)}if(V.samples>0&&Ce(V)===!1){te.__webglMultisampledFramebuffer=n.createFramebuffer(),te.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,te.__webglMultisampledFramebuffer);for(let Le=0;Le<Ee.length;Le++){const Ie=Ee[Le];te.__webglColorRenderbuffer[Le]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,te.__webglColorRenderbuffer[Le]);const ft=s.convert(Ie.format,Ie.colorSpace),Re=s.convert(Ie.type),$e=w(Ie.internalFormat,ft,Re,Ie.colorSpace,V.isXRRenderTarget===!0),Mt=ye(V);n.renderbufferStorageMultisample(n.RENDERBUFFER,Mt,$e,V.width,V.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.RENDERBUFFER,te.__webglColorRenderbuffer[Le])}n.bindRenderbuffer(n.RENDERBUFFER,null),V.depthBuffer&&(te.__webglDepthRenderbuffer=n.createRenderbuffer(),pe(te.__webglDepthRenderbuffer,V,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Se){t.bindTexture(n.TEXTURE_CUBE_MAP,xe.__webglTexture),G(n.TEXTURE_CUBE_MAP,D);for(let Le=0;Le<6;Le++)if(D.mipmaps&&D.mipmaps.length>0)for(let Ie=0;Ie<D.mipmaps.length;Ie++)J(te.__webglFramebuffer[Le][Ie],V,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ie);else J(te.__webglFramebuffer[Le],V,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0);_(D)&&m(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(qe){for(let Le=0,Ie=Ee.length;Le<Ie;Le++){const ft=Ee[Le],Re=i.get(ft);t.bindTexture(n.TEXTURE_2D,Re.__webglTexture),G(n.TEXTURE_2D,ft),J(te.__webglFramebuffer,V,ft,n.COLOR_ATTACHMENT0+Le,n.TEXTURE_2D,0),_(ft)&&m(n.TEXTURE_2D)}t.unbindTexture()}else{let Le=n.TEXTURE_2D;if((V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(Le=V.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Le,xe.__webglTexture),G(Le,D),D.mipmaps&&D.mipmaps.length>0)for(let Ie=0;Ie<D.mipmaps.length;Ie++)J(te.__webglFramebuffer[Ie],V,D,n.COLOR_ATTACHMENT0,Le,Ie);else J(te.__webglFramebuffer,V,D,n.COLOR_ATTACHMENT0,Le,0);_(D)&&m(Le),t.unbindTexture()}V.depthBuffer&&de(V)}function K(V){const D=V.textures;for(let te=0,xe=D.length;te<xe;te++){const Ee=D[te];if(_(Ee)){const Se=V.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,qe=i.get(Ee).__webglTexture;t.bindTexture(Se,qe),m(Se),t.unbindTexture()}}}const tt=[],he=[];function we(V){if(V.samples>0){if(Ce(V)===!1){const D=V.textures,te=V.width,xe=V.height;let Ee=n.COLOR_BUFFER_BIT;const Se=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,qe=i.get(V),Le=D.length>1;if(Le)for(let Ie=0;Ie<D.length;Ie++)t.bindFramebuffer(n.FRAMEBUFFER,qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ie,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,qe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ie,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,qe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,qe.__webglFramebuffer);for(let Ie=0;Ie<D.length;Ie++){if(V.resolveDepthBuffer&&(V.depthBuffer&&(Ee|=n.DEPTH_BUFFER_BIT),V.stencilBuffer&&V.resolveStencilBuffer&&(Ee|=n.STENCIL_BUFFER_BIT)),Le){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,qe.__webglColorRenderbuffer[Ie]);const ft=i.get(D[Ie]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ft,0)}n.blitFramebuffer(0,0,te,xe,0,0,te,xe,Ee,n.NEAREST),l===!0&&(tt.length=0,he.length=0,tt.push(n.COLOR_ATTACHMENT0+Ie),V.depthBuffer&&V.resolveDepthBuffer===!1&&(tt.push(Se),he.push(Se),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,he)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,tt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Le)for(let Ie=0;Ie<D.length;Ie++){t.bindFramebuffer(n.FRAMEBUFFER,qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ie,n.RENDERBUFFER,qe.__webglColorRenderbuffer[Ie]);const ft=i.get(D[Ie]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,qe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ie,n.TEXTURE_2D,ft,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,qe.__webglMultisampledFramebuffer)}else if(V.depthBuffer&&V.resolveDepthBuffer===!1&&l){const D=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[D])}}}function ye(V){return Math.min(r.maxSamples,V.samples)}function Ce(V){const D=i.get(V);return V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function be(V){const D=o.render.frame;f.get(V)!==D&&(f.set(V,D),V.update())}function Be(V,D){const te=V.colorSpace,xe=V.format,Ee=V.type;return V.isCompressedTexture===!0||V.isVideoTexture===!0||te!==No&&te!==mo&&(qt.getTransfer(te)===nn?(xe!==Ji||Ee!==Xs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",te)),D}function Ke(V){return typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement?(u.width=V.naturalWidth||V.width,u.height=V.naturalHeight||V.height):typeof VideoFrame<"u"&&V instanceof VideoFrame?(u.width=V.displayWidth,u.height=V.displayHeight):(u.width=V.width,u.height=V.height),u}this.allocateTextureUnit=N,this.resetTextureUnits=E,this.setTexture2D=O,this.setTexture2DArray=q,this.setTexture3D=j,this.setTextureCube=Q,this.rebindTextures=Qe,this.setupRenderTarget=lt,this.updateRenderTargetMipmap=K,this.updateMultisampleRenderTarget=we,this.setupDepthRenderbuffer=de,this.setupFrameBufferTexture=J,this.useMultisampledRTT=Ce}function XL(n,e){function t(i,r=mo){let s;const o=qt.getTransfer(r);if(i===Xs)return n.UNSIGNED_BYTE;if(i===lM)return n.UNSIGNED_SHORT_4_4_4_4;if(i===uM)return n.UNSIGNED_SHORT_5_5_5_1;if(i===cL)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===lL)return n.BYTE;if(i===uL)return n.SHORT;if(i===oM)return n.UNSIGNED_SHORT;if(i===aM)return n.INT;if(i===Al)return n.UNSIGNED_INT;if(i===yr)return n.FLOAT;if(i===Lc)return n.HALF_FLOAT;if(i===hL)return n.ALPHA;if(i===fL)return n.RGB;if(i===Ji)return n.RGBA;if(i===dL)return n.LUMINANCE;if(i===pL)return n.LUMINANCE_ALPHA;if(i===vl)return n.DEPTH_COMPONENT;if(i===wc)return n.DEPTH_STENCIL;if(i===cM)return n.RED;if(i===hM)return n.RED_INTEGER;if(i===mL)return n.RG;if(i===fM)return n.RG_INTEGER;if(i===dM)return n.RGBA_INTEGER;if(i===ag||i===lg||i===ug||i===cg)if(o===nn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===ag)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===lg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===ug)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===cg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===ag)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===lg)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===ug)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===cg)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Yw||i===Zw||i===Kw||i===Jw)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Yw)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Zw)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Kw)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Jw)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Qw||i===eS||i===tS)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Qw||i===eS)return o===nn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===tS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===nS||i===iS||i===rS||i===sS||i===oS||i===aS||i===lS||i===uS||i===cS||i===hS||i===fS||i===dS||i===pS||i===mS)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===nS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===iS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===rS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===sS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===oS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===aS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===lS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===uS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===cS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===hS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===fS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===dS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===pS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===mS)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===hg||i===gS||i===vS)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===hg)return o===nn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===gS)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===vS)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===gL||i===yS||i===_S||i===xS)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===hg)return s.COMPRESSED_RED_RGTC1_EXT;if(i===yS)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===_S)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===xS)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Nc?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class $L extends Tn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let Ku=class extends Gt{constructor(){super(),this.isGroup=!0,this.type="Group"}};const xH={type:"move"};class px{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ku,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ku,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new U,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new U),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ku,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new U,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new U),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const x of e.hand.values()){const _=t.getJointPose(x,i),m=this._getHandJoint(u,x);_!==null&&(m.matrix.fromArray(_.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=_.radius),m.visible=_!==null}const f=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],p=f.position.distanceTo(d.position),g=.02,v=.005;u.inputState.pinching&&p>g+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=g-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(xH)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Ku;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const wH=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,SH=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class MH{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new _n,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}render(e,t){if(this.texture!==null){if(this.mesh===null){const i=t.cameras[0].viewport,r=new Zr({vertexShader:wH,fragmentShader:SH,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new Vn(new Dc(20,20),r)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class EH extends $s{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,f=null,d=null,p=null,g=null,v=null;const x=new MH,_=t.getContextAttributes();let m=null,w=null;const S=[],b=[],R=new ve;let A=null;const C=new Tn;C.layers.enable(1),C.viewport=new Yt;const L=new Tn;L.layers.enable(2),L.viewport=new Yt;const I=[C,L],E=new $L;E.layers.enable(1),E.layers.enable(2);let N=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(J){let pe=S[J];return pe===void 0&&(pe=new px,S[J]=pe),pe.getTargetRaySpace()},this.getControllerGrip=function(J){let pe=S[J];return pe===void 0&&(pe=new px,S[J]=pe),pe.getGripSpace()},this.getHand=function(J){let pe=S[J];return pe===void 0&&(pe=new px,S[J]=pe),pe.getHandSpace()};function O(J){const pe=b.indexOf(J.inputSource);if(pe===-1)return;const Me=S[pe];Me!==void 0&&(Me.update(J.inputSource,J.frame,u||o),Me.dispatchEvent({type:J.type,data:J.inputSource}))}function q(){r.removeEventListener("select",O),r.removeEventListener("selectstart",O),r.removeEventListener("selectend",O),r.removeEventListener("squeeze",O),r.removeEventListener("squeezestart",O),r.removeEventListener("squeezeend",O),r.removeEventListener("end",q),r.removeEventListener("inputsourceschange",j);for(let J=0;J<S.length;J++){const pe=b[J];pe!==null&&(b[J]=null,S[J].disconnect(pe))}N=null,z=null,x.reset(),e.setRenderTarget(m),g=null,p=null,d=null,r=null,w=null,_e.stop(),i.isPresenting=!1,e.setPixelRatio(A),e.setSize(R.width,R.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(J){s=J,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(J){a=J,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(J){u=J},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return d},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(J){if(r=J,r!==null){if(m=e.getRenderTarget(),r.addEventListener("select",O),r.addEventListener("selectstart",O),r.addEventListener("selectend",O),r.addEventListener("squeeze",O),r.addEventListener("squeezestart",O),r.addEventListener("squeezeend",O),r.addEventListener("end",q),r.addEventListener("inputsourceschange",j),_.xrCompatible!==!0&&await t.makeXRCompatible(),A=e.getPixelRatio(),e.getSize(R),r.renderState.layers===void 0){const pe={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(r,t,pe),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),w=new Yr(g.framebufferWidth,g.framebufferHeight,{format:Ji,type:Xs,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}else{let pe=null,Me=null,de=null;_.depth&&(de=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,pe=_.stencil?wc:vl,Me=_.stencil?Nc:Al);const Qe={colorFormat:t.RGBA8,depthFormat:de,scaleFactor:s};d=new XRWebGLBinding(r,t),p=d.createProjectionLayer(Qe),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),w=new Yr(p.textureWidth,p.textureHeight,{format:Ji,type:Xs,depthTexture:new v0(p.textureWidth,p.textureHeight,Me,void 0,void 0,void 0,void 0,void 0,void 0,pe),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),_e.setContext(r),_e.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function j(J){for(let pe=0;pe<J.removed.length;pe++){const Me=J.removed[pe],de=b.indexOf(Me);de>=0&&(b[de]=null,S[de].disconnect(Me))}for(let pe=0;pe<J.added.length;pe++){const Me=J.added[pe];let de=b.indexOf(Me);if(de===-1){for(let lt=0;lt<S.length;lt++)if(lt>=b.length){b.push(Me),de=lt;break}else if(b[lt]===null){b[lt]=Me,de=lt;break}if(de===-1)break}const Qe=S[de];Qe&&Qe.connect(Me)}}const Q=new U,oe=new U;function k(J,pe,Me){Q.setFromMatrixPosition(pe.matrixWorld),oe.setFromMatrixPosition(Me.matrixWorld);const de=Q.distanceTo(oe),Qe=pe.projectionMatrix.elements,lt=Me.projectionMatrix.elements,K=Qe[14]/(Qe[10]-1),tt=Qe[14]/(Qe[10]+1),he=(Qe[9]+1)/Qe[5],we=(Qe[9]-1)/Qe[5],ye=(Qe[8]-1)/Qe[0],Ce=(lt[8]+1)/lt[0],be=K*ye,Be=K*Ce,Ke=de/(-ye+Ce),V=Ke*-ye;pe.matrixWorld.decompose(J.position,J.quaternion,J.scale),J.translateX(V),J.translateZ(Ke),J.matrixWorld.compose(J.position,J.quaternion,J.scale),J.matrixWorldInverse.copy(J.matrixWorld).invert();const D=K+Ke,te=tt+Ke,xe=be-V,Ee=Be+(de-V),Se=he*tt/te*D,qe=we*tt/te*D;J.projectionMatrix.makePerspective(xe,Ee,Se,qe,D,te),J.projectionMatrixInverse.copy(J.projectionMatrix).invert()}function W(J,pe){pe===null?J.matrixWorld.copy(J.matrix):J.matrixWorld.multiplyMatrices(pe.matrixWorld,J.matrix),J.matrixWorldInverse.copy(J.matrixWorld).invert()}this.updateCamera=function(J){if(r===null)return;x.texture!==null&&(J.near=x.depthNear,J.far=x.depthFar),E.near=L.near=C.near=J.near,E.far=L.far=C.far=J.far,(N!==E.near||z!==E.far)&&(r.updateRenderState({depthNear:E.near,depthFar:E.far}),N=E.near,z=E.far,C.near=N,C.far=z,L.near=N,L.far=z,C.updateProjectionMatrix(),L.updateProjectionMatrix(),J.updateProjectionMatrix());const pe=J.parent,Me=E.cameras;W(E,pe);for(let de=0;de<Me.length;de++)W(Me[de],pe);Me.length===2?k(E,C,L):E.projectionMatrix.copy(C.projectionMatrix),G(J,E,pe)};function G(J,pe,Me){Me===null?J.matrix.copy(pe.matrixWorld):(J.matrix.copy(Me.matrixWorld),J.matrix.invert(),J.matrix.multiply(pe.matrixWorld)),J.matrix.decompose(J.position,J.quaternion,J.scale),J.updateMatrixWorld(!0),J.projectionMatrix.copy(pe.projectionMatrix),J.projectionMatrixInverse.copy(pe.projectionMatrixInverse),J.isPerspectiveCamera&&(J.fov=Sc*2*Math.atan(1/J.projectionMatrix.elements[5]),J.zoom=1)}this.getCamera=function(){return E},this.getFoveation=function(){if(!(p===null&&g===null))return l},this.setFoveation=function(J){l=J,p!==null&&(p.fixedFoveation=J),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=J)},this.hasDepthSensing=function(){return x.texture!==null};let ne=null;function me(J,pe){if(f=pe.getViewerPose(u||o),v=pe,f!==null){const Me=f.views;g!==null&&(e.setRenderTargetFramebuffer(w,g.framebuffer),e.setRenderTarget(w));let de=!1;Me.length!==E.cameras.length&&(E.cameras.length=0,de=!0);for(let lt=0;lt<Me.length;lt++){const K=Me[lt];let tt=null;if(g!==null)tt=g.getViewport(K);else{const we=d.getViewSubImage(p,K);tt=we.viewport,lt===0&&(e.setRenderTargetTextures(w,we.colorTexture,p.ignoreDepthValues?void 0:we.depthStencilTexture),e.setRenderTarget(w))}let he=I[lt];he===void 0&&(he=new Tn,he.layers.enable(lt),he.viewport=new Yt,I[lt]=he),he.matrix.fromArray(K.transform.matrix),he.matrix.decompose(he.position,he.quaternion,he.scale),he.projectionMatrix.fromArray(K.projectionMatrix),he.projectionMatrixInverse.copy(he.projectionMatrix).invert(),he.viewport.set(tt.x,tt.y,tt.width,tt.height),lt===0&&(E.matrix.copy(he.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),de===!0&&E.cameras.push(he)}const Qe=r.enabledFeatures;if(Qe&&Qe.includes("depth-sensing")){const lt=d.getDepthInformation(Me[0]);lt&&lt.isValid&&lt.texture&&x.init(e,lt,r.renderState)}}for(let Me=0;Me<S.length;Me++){const de=b[Me],Qe=S[Me];de!==null&&Qe!==void 0&&Qe.update(de,pe,u||o)}x.render(e,E),ne&&ne(J,pe),pe.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:pe}),v=null}const _e=new BL;_e.setAnimationLoop(me),this.setAnimationLoop=function(J){ne=J},this.dispose=function(){}}}const ja=new Er,bH=new ht;function TH(n,e){function t(_,m){_.matrixAutoUpdate===!0&&_.updateMatrix(),m.value.copy(_.matrix)}function i(_,m){m.color.getRGB(_.fogColor.value,FL(n)),m.isFog?(_.fogNear.value=m.near,_.fogFar.value=m.far):m.isFogExp2&&(_.fogDensity.value=m.density)}function r(_,m,w,S,b){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(_,m):m.isMeshToonMaterial?(s(_,m),d(_,m)):m.isMeshPhongMaterial?(s(_,m),f(_,m)):m.isMeshStandardMaterial?(s(_,m),p(_,m),m.isMeshPhysicalMaterial&&g(_,m,b)):m.isMeshMatcapMaterial?(s(_,m),v(_,m)):m.isMeshDepthMaterial?s(_,m):m.isMeshDistanceMaterial?(s(_,m),x(_,m)):m.isMeshNormalMaterial?s(_,m):m.isLineBasicMaterial?(o(_,m),m.isLineDashedMaterial&&a(_,m)):m.isPointsMaterial?l(_,m,w,S):m.isSpriteMaterial?u(_,m):m.isShadowMaterial?(_.color.value.copy(m.color),_.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(_,m){_.opacity.value=m.opacity,m.color&&_.diffuse.value.copy(m.color),m.emissive&&_.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(_.map.value=m.map,t(m.map,_.mapTransform)),m.alphaMap&&(_.alphaMap.value=m.alphaMap,t(m.alphaMap,_.alphaMapTransform)),m.bumpMap&&(_.bumpMap.value=m.bumpMap,t(m.bumpMap,_.bumpMapTransform),_.bumpScale.value=m.bumpScale,m.side===Ai&&(_.bumpScale.value*=-1)),m.normalMap&&(_.normalMap.value=m.normalMap,t(m.normalMap,_.normalMapTransform),_.normalScale.value.copy(m.normalScale),m.side===Ai&&_.normalScale.value.negate()),m.displacementMap&&(_.displacementMap.value=m.displacementMap,t(m.displacementMap,_.displacementMapTransform),_.displacementScale.value=m.displacementScale,_.displacementBias.value=m.displacementBias),m.emissiveMap&&(_.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,_.emissiveMapTransform)),m.specularMap&&(_.specularMap.value=m.specularMap,t(m.specularMap,_.specularMapTransform)),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest);const w=e.get(m),S=w.envMap,b=w.envMapRotation;if(S&&(_.envMap.value=S,ja.copy(b),ja.x*=-1,ja.y*=-1,ja.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(ja.y*=-1,ja.z*=-1),_.envMapRotation.value.setFromMatrix4(bH.makeRotationFromEuler(ja)),_.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=m.reflectivity,_.ior.value=m.ior,_.refractionRatio.value=m.refractionRatio),m.lightMap){_.lightMap.value=m.lightMap;const R=n._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=m.lightMapIntensity*R,t(m.lightMap,_.lightMapTransform)}m.aoMap&&(_.aoMap.value=m.aoMap,_.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,_.aoMapTransform))}function o(_,m){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,m.map&&(_.map.value=m.map,t(m.map,_.mapTransform))}function a(_,m){_.dashSize.value=m.dashSize,_.totalSize.value=m.dashSize+m.gapSize,_.scale.value=m.scale}function l(_,m,w,S){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,_.size.value=m.size*w,_.scale.value=S*.5,m.map&&(_.map.value=m.map,t(m.map,_.uvTransform)),m.alphaMap&&(_.alphaMap.value=m.alphaMap,t(m.alphaMap,_.alphaMapTransform)),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest)}function u(_,m){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,_.rotation.value=m.rotation,m.map&&(_.map.value=m.map,t(m.map,_.mapTransform)),m.alphaMap&&(_.alphaMap.value=m.alphaMap,t(m.alphaMap,_.alphaMapTransform)),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest)}function f(_,m){_.specular.value.copy(m.specular),_.shininess.value=Math.max(m.shininess,1e-4)}function d(_,m){m.gradientMap&&(_.gradientMap.value=m.gradientMap)}function p(_,m){_.metalness.value=m.metalness,m.metalnessMap&&(_.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,_.metalnessMapTransform)),_.roughness.value=m.roughness,m.roughnessMap&&(_.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,_.roughnessMapTransform)),m.envMap&&(_.envMapIntensity.value=m.envMapIntensity)}function g(_,m,w){_.ior.value=m.ior,m.sheen>0&&(_.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),_.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(_.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,_.sheenColorMapTransform)),m.sheenRoughnessMap&&(_.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,_.sheenRoughnessMapTransform))),m.clearcoat>0&&(_.clearcoat.value=m.clearcoat,_.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(_.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,_.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(_.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===Ai&&_.clearcoatNormalScale.value.negate())),m.dispersion>0&&(_.dispersion.value=m.dispersion),m.iridescence>0&&(_.iridescence.value=m.iridescence,_.iridescenceIOR.value=m.iridescenceIOR,_.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(_.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,_.iridescenceMapTransform)),m.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),m.transmission>0&&(_.transmission.value=m.transmission,_.transmissionSamplerMap.value=w.texture,_.transmissionSamplerSize.value.set(w.width,w.height),m.transmissionMap&&(_.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,_.transmissionMapTransform)),_.thickness.value=m.thickness,m.thicknessMap&&(_.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=m.attenuationDistance,_.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(_.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(_.anisotropyMap.value=m.anisotropyMap,t(m.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=m.specularIntensity,_.specularColor.value.copy(m.specularColor),m.specularColorMap&&(_.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,_.specularColorMapTransform)),m.specularIntensityMap&&(_.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,_.specularIntensityMapTransform))}function v(_,m){m.matcap&&(_.matcap.value=m.matcap)}function x(_,m){const w=e.get(m).light;_.referencePosition.value.setFromMatrixPosition(w.matrixWorld),_.nearDistance.value=w.shadow.camera.near,_.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function AH(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(w,S){const b=S.program;i.uniformBlockBinding(w,b)}function u(w,S){let b=r[w.id];b===void 0&&(v(w),b=f(w),r[w.id]=b,w.addEventListener("dispose",_));const R=S.program;i.updateUBOMapping(w,R);const A=e.render.frame;s[w.id]!==A&&(p(w),s[w.id]=A)}function f(w){const S=d();w.__bindingPointIndex=S;const b=n.createBuffer(),R=w.__size,A=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,R,A),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,b),b}function d(){for(let w=0;w<a;w++)if(o.indexOf(w)===-1)return o.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(w){const S=r[w.id],b=w.uniforms,R=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let A=0,C=b.length;A<C;A++){const L=Array.isArray(b[A])?b[A]:[b[A]];for(let I=0,E=L.length;I<E;I++){const N=L[I];if(g(N,A,I,R)===!0){const z=N.__offset,O=Array.isArray(N.value)?N.value:[N.value];let q=0;for(let j=0;j<O.length;j++){const Q=O[j],oe=x(Q);typeof Q=="number"||typeof Q=="boolean"?(N.__data[0]=Q,n.bufferSubData(n.UNIFORM_BUFFER,z+q,N.__data)):Q.isMatrix3?(N.__data[0]=Q.elements[0],N.__data[1]=Q.elements[1],N.__data[2]=Q.elements[2],N.__data[3]=0,N.__data[4]=Q.elements[3],N.__data[5]=Q.elements[4],N.__data[6]=Q.elements[5],N.__data[7]=0,N.__data[8]=Q.elements[6],N.__data[9]=Q.elements[7],N.__data[10]=Q.elements[8],N.__data[11]=0):(Q.toArray(N.__data,q),q+=oe.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,z,N.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(w,S,b,R){const A=w.value,C=S+"_"+b;if(R[C]===void 0)return typeof A=="number"||typeof A=="boolean"?R[C]=A:R[C]=A.clone(),!0;{const L=R[C];if(typeof A=="number"||typeof A=="boolean"){if(L!==A)return R[C]=A,!0}else if(L.equals(A)===!1)return L.copy(A),!0}return!1}function v(w){const S=w.uniforms;let b=0;const R=16;for(let C=0,L=S.length;C<L;C++){const I=Array.isArray(S[C])?S[C]:[S[C]];for(let E=0,N=I.length;E<N;E++){const z=I[E],O=Array.isArray(z.value)?z.value:[z.value];for(let q=0,j=O.length;q<j;q++){const Q=O[q],oe=x(Q),k=b%R;k!==0&&R-k<oe.boundary&&(b+=R-k),z.__data=new Float32Array(oe.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=b,b+=oe.storage}}}const A=b%R;return A>0&&(b+=R-A),w.__size=b,w.__cache={},this}function x(w){const S={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(S.boundary=4,S.storage=4):w.isVector2?(S.boundary=8,S.storage=8):w.isVector3||w.isColor?(S.boundary=16,S.storage=12):w.isVector4?(S.boundary=16,S.storage=16):w.isMatrix3?(S.boundary=48,S.storage=48):w.isMatrix4?(S.boundary=64,S.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),S}function _(w){const S=w.target;S.removeEventListener("dispose",_);const b=o.indexOf(S.__bindingPointIndex);o.splice(b,1),n.deleteBuffer(r[S.id]),delete r[S.id],delete s[S.id]}function m(){for(const w in r)n.deleteBuffer(r[w]);o=[],r={},s={}}return{bind:l,update:u,dispose:m}}class qL{constructor(e={}){const{canvas:t=LL(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=o;const g=new Uint32Array(4),v=new Int32Array(4);let x=null,_=null;const m=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Vr,this._useLegacyLights=!1,this.toneMapping=Gs,this.toneMappingExposure=1;const S=this;let b=!1,R=0,A=0,C=null,L=-1,I=null;const E=new Yt,N=new Yt;let z=null;const O=new ze(0);let q=0,j=t.width,Q=t.height,oe=1,k=null,W=null;const G=new Yt(0,0,j,Q),ne=new Yt(0,0,j,Q);let me=!1;const _e=new vd;let J=!1,pe=!1;const Me=new ht,de=new U,Qe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function lt(){return C===null?oe:1}let K=i;function tt(F,ee){return t.getContext(F,ee)}try{const F={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${fd}`),t.addEventListener("webglcontextlost",H,!1),t.addEventListener("webglcontextrestored",ue,!1),t.addEventListener("webglcontextcreationerror",ce,!1),K===null){const ee="webgl2";if(K=tt(ee,F),K===null)throw tt(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(F){throw console.error("THREE.WebGLRenderer: "+F.message),F}let he,we,ye,Ce,be,Be,Ke,V,D,te,xe,Ee,Se,qe,Le,Ie,ft,Re,$e,Mt,it,Ve,pt,Et;function X(){he=new BV(K),he.init(),Ve=new XL(K,he),we=new DV(K,he,e,Ve),ye=new yH(K),Ce=new GV(K),be=new oH,Be=new _H(K,he,ye,be,we,Ve,Ce),Ke=new kV(S),V=new zV(S),D=new Zz(K),pt=new LV(K,D),te=new VV(K,D,Ce,pt),xe=new jV(K,te,D,Ce),$e=new WV(K,we,Be),Ie=new OV(be),Ee=new sH(S,Ke,V,he,we,pt,Ie),Se=new TH(S,be),qe=new lH,Le=new pH(he),Re=new IV(S,Ke,V,ye,xe,p,l),ft=new vH(S,xe,we),Et=new AH(K,Ce,we,ye),Mt=new NV(K,he,Ce),it=new HV(K,he,Ce),Ce.programs=Ee.programs,S.capabilities=we,S.extensions=he,S.properties=be,S.renderLists=qe,S.shadowMap=ft,S.state=ye,S.info=Ce}X();const ge=new EH(S,K);this.xr=ge,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const F=he.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){const F=he.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return oe},this.setPixelRatio=function(F){F!==void 0&&(oe=F,this.setSize(j,Q,!1))},this.getSize=function(F){return F.set(j,Q)},this.setSize=function(F,ee,ae=!0){if(ge.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}j=F,Q=ee,t.width=Math.floor(F*oe),t.height=Math.floor(ee*oe),ae===!0&&(t.style.width=F+"px",t.style.height=ee+"px"),this.setViewport(0,0,F,ee)},this.getDrawingBufferSize=function(F){return F.set(j*oe,Q*oe).floor()},this.setDrawingBufferSize=function(F,ee,ae){j=F,Q=ee,oe=ae,t.width=Math.floor(F*ae),t.height=Math.floor(ee*ae),this.setViewport(0,0,F,ee)},this.getCurrentViewport=function(F){return F.copy(E)},this.getViewport=function(F){return F.copy(G)},this.setViewport=function(F,ee,ae,re){F.isVector4?G.set(F.x,F.y,F.z,F.w):G.set(F,ee,ae,re),ye.viewport(E.copy(G).multiplyScalar(oe).round())},this.getScissor=function(F){return F.copy(ne)},this.setScissor=function(F,ee,ae,re){F.isVector4?ne.set(F.x,F.y,F.z,F.w):ne.set(F,ee,ae,re),ye.scissor(N.copy(ne).multiplyScalar(oe).round())},this.getScissorTest=function(){return me},this.setScissorTest=function(F){ye.setScissorTest(me=F)},this.setOpaqueSort=function(F){k=F},this.setTransparentSort=function(F){W=F},this.getClearColor=function(F){return F.copy(Re.getClearColor())},this.setClearColor=function(){Re.setClearColor.apply(Re,arguments)},this.getClearAlpha=function(){return Re.getClearAlpha()},this.setClearAlpha=function(){Re.setClearAlpha.apply(Re,arguments)},this.clear=function(F=!0,ee=!0,ae=!0){let re=0;if(F){let se=!1;if(C!==null){const ke=C.texture.format;se=ke===dM||ke===fM||ke===hM}if(se){const ke=C.texture.type,Xe=ke===Xs||ke===Al||ke===oM||ke===Nc||ke===lM||ke===uM,Ye=Re.getClearColor(),ut=Re.getClearAlpha(),mt=Ye.r,gt=Ye.g,vt=Ye.b;Xe?(g[0]=mt,g[1]=gt,g[2]=vt,g[3]=ut,K.clearBufferuiv(K.COLOR,0,g)):(v[0]=mt,v[1]=gt,v[2]=vt,v[3]=ut,K.clearBufferiv(K.COLOR,0,v))}else re|=K.COLOR_BUFFER_BIT}ee&&(re|=K.DEPTH_BUFFER_BIT),ae&&(re|=K.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),K.clear(re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",H,!1),t.removeEventListener("webglcontextrestored",ue,!1),t.removeEventListener("webglcontextcreationerror",ce,!1),qe.dispose(),Le.dispose(),be.dispose(),Ke.dispose(),V.dispose(),xe.dispose(),pt.dispose(),Et.dispose(),Ee.dispose(),ge.dispose(),ge.removeEventListener("sessionstart",Rt),ge.removeEventListener("sessionend",Gn),an.stop()};function H(F){F.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function ue(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const F=Ce.autoReset,ee=ft.enabled,ae=ft.autoUpdate,re=ft.needsUpdate,se=ft.type;X(),Ce.autoReset=F,ft.enabled=ee,ft.autoUpdate=ae,ft.needsUpdate=re,ft.type=se}function ce(F){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function Pe(F){const ee=F.target;ee.removeEventListener("dispose",Pe),Ne(ee)}function Ne(F){Dt(F),be.remove(F)}function Dt(F){const ee=be.get(F).programs;ee!==void 0&&(ee.forEach(function(ae){Ee.releaseProgram(ae)}),F.isShaderMaterial&&Ee.releaseShaderCache(F))}this.renderBufferDirect=function(F,ee,ae,re,se,ke){ee===null&&(ee=Qe);const Xe=se.isMesh&&se.matrixWorld.determinant()<0,Ye=ly(F,ee,ae,re,se);ye.setMaterial(re,Xe);let ut=ae.index,mt=1;if(re.wireframe===!0){if(ut=te.getWireframeAttribute(ae),ut===void 0)return;mt=2}const gt=ae.drawRange,vt=ae.attributes.position;let ln=gt.start*mt,Dn=(gt.start+gt.count)*mt;ke!==null&&(ln=Math.max(ln,ke.start*mt),Dn=Math.min(Dn,(ke.start+ke.count)*mt)),ut!==null?(ln=Math.max(ln,0),Dn=Math.min(Dn,ut.count)):vt!=null&&(ln=Math.max(ln,0),Dn=Math.min(Dn,vt.count));const Ii=Dn-ln;if(Ii<0||Ii===1/0)return;pt.setup(se,re,Ye,ae,ut);let sr,Pt=Mt;if(ut!==null&&(sr=D.get(ut),Pt=it,Pt.setIndex(sr)),se.isMesh)re.wireframe===!0?(ye.setLineWidth(re.wireframeLinewidth*lt()),Pt.setMode(K.LINES)):Pt.setMode(K.TRIANGLES);else if(se.isLine){let ot=re.linewidth;ot===void 0&&(ot=1),ye.setLineWidth(ot*lt()),se.isLineSegments?Pt.setMode(K.LINES):se.isLineLoop?Pt.setMode(K.LINE_LOOP):Pt.setMode(K.LINE_STRIP)}else se.isPoints?Pt.setMode(K.POINTS):se.isSprite&&Pt.setMode(K.TRIANGLES);if(se.isBatchedMesh)se._multiDrawInstances!==null?Pt.renderMultiDrawInstances(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount,se._multiDrawInstances):Pt.renderMultiDraw(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount);else if(se.isInstancedMesh)Pt.renderInstances(ln,Ii,se.count);else if(ae.isInstancedBufferGeometry){const ot=ae._maxInstanceCount!==void 0?ae._maxInstanceCount:1/0,jt=Math.min(ae.instanceCount,ot);Pt.renderInstances(ln,Ii,jt)}else Pt.render(ln,Ii)};function Wt(F,ee,ae){F.transparent===!0&&F.side===Fs&&F.forceSinglePass===!1?(F.side=Ai,F.needsUpdate=!0,Vl(F,ee,ae),F.side=Co,F.needsUpdate=!0,Vl(F,ee,ae),F.side=Fs):Vl(F,ee,ae)}this.compile=function(F,ee,ae=null){ae===null&&(ae=F),_=Le.get(ae),_.init(ee),w.push(_),ae.traverseVisible(function(se){se.isLight&&se.layers.test(ee.layers)&&(_.pushLight(se),se.castShadow&&_.pushShadow(se))}),F!==ae&&F.traverseVisible(function(se){se.isLight&&se.layers.test(ee.layers)&&(_.pushLight(se),se.castShadow&&_.pushShadow(se))}),_.setupLights(S._useLegacyLights);const re=new Set;return F.traverse(function(se){const ke=se.material;if(ke)if(Array.isArray(ke))for(let Xe=0;Xe<ke.length;Xe++){const Ye=ke[Xe];Wt(Ye,ae,se),re.add(Ye)}else Wt(ke,ae,se),re.add(ke)}),w.pop(),_=null,re},this.compileAsync=function(F,ee,ae=null){const re=this.compile(F,ee,ae);return new Promise(se=>{function ke(){if(re.forEach(function(Xe){be.get(Xe).currentProgram.isReady()&&re.delete(Xe)}),re.size===0){se(F);return}setTimeout(ke,10)}he.get("KHR_parallel_shader_compile")!==null?ke():setTimeout(ke,10)})};let Ot=null;function Qt(F){Ot&&Ot(F)}function Rt(){an.stop()}function Gn(){an.start()}const an=new BL;an.setAnimationLoop(Qt),typeof self<"u"&&an.setContext(self),this.setAnimationLoop=function(F){Ot=F,ge.setAnimationLoop(F),F===null?an.stop():an.start()},ge.addEventListener("sessionstart",Rt),ge.addEventListener("sessionend",Gn),this.render=function(F,ee){if(ee!==void 0&&ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(b===!0)return;F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),ee.parent===null&&ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),ge.enabled===!0&&ge.isPresenting===!0&&(ge.cameraAutoUpdate===!0&&ge.updateCamera(ee),ee=ge.getCamera()),F.isScene===!0&&F.onBeforeRender(S,F,ee,C),_=Le.get(F,w.length),_.init(ee),w.push(_),Me.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),_e.setFromProjectionMatrix(Me),pe=this.localClippingEnabled,J=Ie.init(this.clippingPlanes,pe),x=qe.get(F,m.length),x.init(),m.push(x),Zs(F,ee,0,S.sortObjects),x.finish(),S.sortObjects===!0&&x.sort(k,W);const ae=ge.enabled===!1||ge.isPresenting===!1||ge.hasDepthSensing()===!1;ae&&Re.addToRenderList(x,F),this.info.render.frame++,J===!0&&Ie.beginShadows();const re=_.state.shadowsArray;ft.render(re,F,ee),J===!0&&Ie.endShadows(),this.info.autoReset===!0&&this.info.reset();const se=x.opaque,ke=x.transmissive;if(_.setupLights(S._useLegacyLights),ee.isArrayCamera){const Xe=ee.cameras;if(ke.length>0)for(let Ye=0,ut=Xe.length;Ye<ut;Ye++){const mt=Xe[Ye];Ad(se,ke,F,mt)}ae&&Re.render(F);for(let Ye=0,ut=Xe.length;Ye<ut;Ye++){const mt=Xe[Ye];Td(x,F,mt,mt.viewport)}}else ke.length>0&&Ad(se,ke,F,ee),ae&&Re.render(F),Td(x,F,ee);C!==null&&(Be.updateMultisampleRenderTarget(C),Be.updateRenderTargetMipmap(C)),F.isScene===!0&&F.onAfterRender(S,F,ee),pt.resetDefaultState(),L=-1,I=null,w.pop(),w.length>0?(_=w[w.length-1],J===!0&&Ie.setGlobalState(S.clippingPlanes,_.state.camera)):_=null,m.pop(),m.length>0?x=m[m.length-1]:x=null};function Zs(F,ee,ae,re){if(F.visible===!1)return;if(F.layers.test(ee.layers)){if(F.isGroup)ae=F.renderOrder;else if(F.isLOD)F.autoUpdate===!0&&F.update(ee);else if(F.isLight)_.pushLight(F),F.castShadow&&_.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||_e.intersectsSprite(F)){re&&de.setFromMatrixPosition(F.matrixWorld).applyMatrix4(Me);const Xe=xe.update(F),Ye=F.material;Ye.visible&&x.push(F,Xe,Ye,ae,de.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||_e.intersectsObject(F))){const Xe=xe.update(F),Ye=F.material;if(re&&(F.boundingSphere!==void 0?(F.boundingSphere===null&&F.computeBoundingSphere(),de.copy(F.boundingSphere.center)):(Xe.boundingSphere===null&&Xe.computeBoundingSphere(),de.copy(Xe.boundingSphere.center)),de.applyMatrix4(F.matrixWorld).applyMatrix4(Me)),Array.isArray(Ye)){const ut=Xe.groups;for(let mt=0,gt=ut.length;mt<gt;mt++){const vt=ut[mt],ln=Ye[vt.materialIndex];ln&&ln.visible&&x.push(F,Xe,ln,ae,de.z,vt)}}else Ye.visible&&x.push(F,Xe,Ye,ae,de.z,null)}}const ke=F.children;for(let Xe=0,Ye=ke.length;Xe<Ye;Xe++)Zs(ke[Xe],ee,ae,re)}function Td(F,ee,ae,re){const se=F.opaque,ke=F.transmissive,Xe=F.transparent;_.setupLightsView(ae),J===!0&&Ie.setGlobalState(S.clippingPlanes,ae),re&&ye.viewport(E.copy(re)),se.length>0&&Pa(se,ee,ae),ke.length>0&&Pa(ke,ee,ae),Xe.length>0&&Pa(Xe,ee,ae),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function Ad(F,ee,ae,re){if((ae.isScene===!0?ae.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[re.id]===void 0&&(_.state.transmissionRenderTarget[re.id]=new Yr(1,1,{generateMipmaps:!0,type:he.has("EXT_color_buffer_half_float")||he.has("EXT_color_buffer_float")?Lc:Xs,minFilter:Us,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const ke=_.state.transmissionRenderTarget[re.id],Xe=re.viewport||E;ke.setSize(Xe.z,Xe.w);const Ye=S.getRenderTarget();S.setRenderTarget(ke),S.getClearColor(O),q=S.getClearAlpha(),q<1&&S.setClearColor(16777215,.5),S.clear();const ut=S.toneMapping;S.toneMapping=Gs;const mt=re.viewport;if(re.viewport!==void 0&&(re.viewport=void 0),_.setupLightsView(re),J===!0&&Ie.setGlobalState(S.clippingPlanes,re),Pa(F,ae,re),Be.updateMultisampleRenderTarget(ke),Be.updateRenderTargetMipmap(ke),he.has("WEBGL_multisampled_render_to_texture")===!1){let gt=!1;for(let vt=0,ln=ee.length;vt<ln;vt++){const Dn=ee[vt],Ii=Dn.object,sr=Dn.geometry,Pt=Dn.material,ot=Dn.group;if(Pt.side===Fs&&Ii.layers.test(re.layers)){const jt=Pt.side;Pt.side=Ai,Pt.needsUpdate=!0,Bl(Ii,ae,re,sr,Pt,ot),Pt.side=jt,Pt.needsUpdate=!0,gt=!0}}gt===!0&&(Be.updateMultisampleRenderTarget(ke),Be.updateRenderTargetMipmap(ke))}S.setRenderTarget(Ye),S.setClearColor(O,q),mt!==void 0&&(re.viewport=mt),S.toneMapping=ut}function Pa(F,ee,ae){const re=ee.isScene===!0?ee.overrideMaterial:null;for(let se=0,ke=F.length;se<ke;se++){const Xe=F[se],Ye=Xe.object,ut=Xe.geometry,mt=re===null?Xe.material:re,gt=Xe.group;Ye.layers.test(ae.layers)&&Bl(Ye,ee,ae,ut,mt,gt)}}function Bl(F,ee,ae,re,se,ke){F.onBeforeRender(S,ee,ae,re,se,ke),F.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),se.onBeforeRender(S,ee,ae,re,F,ke),se.transparent===!0&&se.side===Fs&&se.forceSinglePass===!1?(se.side=Ai,se.needsUpdate=!0,S.renderBufferDirect(ae,ee,re,se,F,ke),se.side=Co,se.needsUpdate=!0,S.renderBufferDirect(ae,ee,re,se,F,ke),se.side=Fs):S.renderBufferDirect(ae,ee,re,se,F,ke),F.onAfterRender(S,ee,ae,re,se,ke)}function Vl(F,ee,ae){ee.isScene!==!0&&(ee=Qe);const re=be.get(F),se=_.state.lights,ke=_.state.shadowsArray,Xe=se.state.version,Ye=Ee.getParameters(F,se.state,ke,ee,ae),ut=Ee.getProgramCacheKey(Ye);let mt=re.programs;re.environment=F.isMeshStandardMaterial?ee.environment:null,re.fog=ee.fog,re.envMap=(F.isMeshStandardMaterial?V:Ke).get(F.envMap||re.environment),re.envMapRotation=re.environment!==null&&F.envMap===null?ee.environmentRotation:F.envMapRotation,mt===void 0&&(F.addEventListener("dispose",Pe),mt=new Map,re.programs=mt);let gt=mt.get(ut);if(gt!==void 0){if(re.currentProgram===gt&&re.lightsStateVersion===Xe)return Cd(F,Ye),gt}else Ye.uniforms=Ee.getUniforms(F),F.onBuild(ae,Ye,S),F.onBeforeCompile(Ye,S),gt=Ee.acquireProgram(Ye,ut),mt.set(ut,gt),re.uniforms=Ye.uniforms;const vt=re.uniforms;return(!F.isShaderMaterial&&!F.isRawShaderMaterial||F.clipping===!0)&&(vt.clippingPlanes=Ie.uniform),Cd(F,Ye),re.needsLights=cy(F),re.lightsStateVersion=Xe,re.needsLights&&(vt.ambientLightColor.value=se.state.ambient,vt.lightProbe.value=se.state.probe,vt.directionalLights.value=se.state.directional,vt.directionalLightShadows.value=se.state.directionalShadow,vt.spotLights.value=se.state.spot,vt.spotLightShadows.value=se.state.spotShadow,vt.rectAreaLights.value=se.state.rectArea,vt.ltc_1.value=se.state.rectAreaLTC1,vt.ltc_2.value=se.state.rectAreaLTC2,vt.pointLights.value=se.state.point,vt.pointLightShadows.value=se.state.pointShadow,vt.hemisphereLights.value=se.state.hemi,vt.directionalShadowMap.value=se.state.directionalShadowMap,vt.directionalShadowMatrix.value=se.state.directionalShadowMatrix,vt.spotShadowMap.value=se.state.spotShadowMap,vt.spotLightMatrix.value=se.state.spotLightMatrix,vt.spotLightMap.value=se.state.spotLightMap,vt.pointShadowMap.value=se.state.pointShadowMap,vt.pointShadowMatrix.value=se.state.pointShadowMatrix),re.currentProgram=gt,re.uniformsList=null,gt}function Fo(F){if(F.uniformsList===null){const ee=F.currentProgram.getUniforms();F.uniformsList=dg.seqWithValue(ee.seq,F.uniforms)}return F.uniformsList}function Cd(F,ee){const ae=be.get(F);ae.outputColorSpace=ee.outputColorSpace,ae.batching=ee.batching,ae.instancing=ee.instancing,ae.instancingColor=ee.instancingColor,ae.instancingMorph=ee.instancingMorph,ae.skinning=ee.skinning,ae.morphTargets=ee.morphTargets,ae.morphNormals=ee.morphNormals,ae.morphColors=ee.morphColors,ae.morphTargetsCount=ee.morphTargetsCount,ae.numClippingPlanes=ee.numClippingPlanes,ae.numIntersection=ee.numClipIntersection,ae.vertexAlphas=ee.vertexAlphas,ae.vertexTangents=ee.vertexTangents,ae.toneMapping=ee.toneMapping}function ly(F,ee,ae,re,se){ee.isScene!==!0&&(ee=Qe),Be.resetTextureUnits();const ke=ee.fog,Xe=re.isMeshStandardMaterial?ee.environment:null,Ye=C===null?S.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:No,ut=(re.isMeshStandardMaterial?V:Ke).get(re.envMap||Xe),mt=re.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,gt=!!ae.attributes.tangent&&(!!re.normalMap||re.anisotropy>0),vt=!!ae.morphAttributes.position,ln=!!ae.morphAttributes.normal,Dn=!!ae.morphAttributes.color;let Ii=Gs;re.toneMapped&&(C===null||C.isXRRenderTarget===!0)&&(Ii=S.toneMapping);const sr=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,Pt=sr!==void 0?sr.length:0,ot=be.get(re),jt=_.state.lights;if(J===!0&&(pe===!0||F!==I)){const Li=F===I&&re.id===L;Ie.setState(re,F,Li)}let at=!1;re.version===ot.__version?(ot.needsLights&&ot.lightsStateVersion!==jt.state.version||ot.outputColorSpace!==Ye||se.isBatchedMesh&&ot.batching===!1||!se.isBatchedMesh&&ot.batching===!0||se.isInstancedMesh&&ot.instancing===!1||!se.isInstancedMesh&&ot.instancing===!0||se.isSkinnedMesh&&ot.skinning===!1||!se.isSkinnedMesh&&ot.skinning===!0||se.isInstancedMesh&&ot.instancingColor===!0&&se.instanceColor===null||se.isInstancedMesh&&ot.instancingColor===!1&&se.instanceColor!==null||se.isInstancedMesh&&ot.instancingMorph===!0&&se.morphTexture===null||se.isInstancedMesh&&ot.instancingMorph===!1&&se.morphTexture!==null||ot.envMap!==ut||re.fog===!0&&ot.fog!==ke||ot.numClippingPlanes!==void 0&&(ot.numClippingPlanes!==Ie.numPlanes||ot.numIntersection!==Ie.numIntersection)||ot.vertexAlphas!==mt||ot.vertexTangents!==gt||ot.morphTargets!==vt||ot.morphNormals!==ln||ot.morphColors!==Dn||ot.toneMapping!==Ii||ot.morphTargetsCount!==Pt)&&(at=!0):(at=!0,ot.__version=re.version);let fi=ot.currentProgram;at===!0&&(fi=Vl(re,ee,se));let Wn=!1,On=!1,Kr=!1;const fn=fi.getUniforms(),dn=ot.uniforms;if(ye.useProgram(fi.program)&&(Wn=!0,On=!0,Kr=!0),re.id!==L&&(L=re.id,On=!0),Wn||I!==F){fn.setValue(K,"projectionMatrix",F.projectionMatrix),fn.setValue(K,"viewMatrix",F.matrixWorldInverse);const Li=fn.map.cameraPosition;Li!==void 0&&Li.setValue(K,de.setFromMatrixPosition(F.matrixWorld)),we.logarithmicDepthBuffer&&fn.setValue(K,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial)&&fn.setValue(K,"isOrthographic",F.isOrthographicCamera===!0),I!==F&&(I=F,On=!0,Kr=!0)}if(se.isSkinnedMesh){fn.setOptional(K,se,"bindMatrix"),fn.setOptional(K,se,"bindMatrixInverse");const Li=se.skeleton;Li&&(Li.boneTexture===null&&Li.computeBoneTexture(),fn.setValue(K,"boneTexture",Li.boneTexture,Be))}se.isBatchedMesh&&(fn.setOptional(K,se,"batchingTexture"),fn.setValue(K,"batchingTexture",se._matricesTexture,Be));const Uo=ae.morphAttributes;if((Uo.position!==void 0||Uo.normal!==void 0||Uo.color!==void 0)&&$e.update(se,ae,fi),(On||ot.receiveShadow!==se.receiveShadow)&&(ot.receiveShadow=se.receiveShadow,fn.setValue(K,"receiveShadow",se.receiveShadow)),re.isMeshGouraudMaterial&&re.envMap!==null&&(dn.envMap.value=ut,dn.flipEnvMap.value=ut.isCubeTexture&&ut.isRenderTargetTexture===!1?-1:1),re.isMeshStandardMaterial&&re.envMap===null&&ee.environment!==null&&(dn.envMapIntensity.value=ee.environmentIntensity),On&&(fn.setValue(K,"toneMappingExposure",S.toneMappingExposure),ot.needsLights&&uy(dn,Kr),ke&&re.fog===!0&&Se.refreshFogUniforms(dn,ke),Se.refreshMaterialUniforms(dn,re,oe,Q,_.state.transmissionRenderTarget[F.id]),dg.upload(K,Fo(ot),dn,Be)),re.isShaderMaterial&&re.uniformsNeedUpdate===!0&&(dg.upload(K,Fo(ot),dn,Be),re.uniformsNeedUpdate=!1),re.isSpriteMaterial&&fn.setValue(K,"center",se.center),fn.setValue(K,"modelViewMatrix",se.modelViewMatrix),fn.setValue(K,"normalMatrix",se.normalMatrix),fn.setValue(K,"modelMatrix",se.matrixWorld),re.isShaderMaterial||re.isRawShaderMaterial){const Li=re.uniformsGroups;for(let Hl=0,Gl=Li.length;Hl<Gl;Hl++){const Hc=Li[Hl];Et.update(Hc,fi),Et.bind(Hc,fi)}}return fi}function uy(F,ee){F.ambientLightColor.needsUpdate=ee,F.lightProbe.needsUpdate=ee,F.directionalLights.needsUpdate=ee,F.directionalLightShadows.needsUpdate=ee,F.pointLights.needsUpdate=ee,F.pointLightShadows.needsUpdate=ee,F.spotLights.needsUpdate=ee,F.spotLightShadows.needsUpdate=ee,F.rectAreaLights.needsUpdate=ee,F.hemisphereLights.needsUpdate=ee}function cy(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&F.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(F,ee,ae){be.get(F.texture).__webglTexture=ee,be.get(F.depthTexture).__webglTexture=ae;const re=be.get(F);re.__hasExternalTextures=!0,re.__autoAllocateDepthBuffer=ae===void 0,re.__autoAllocateDepthBuffer||he.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),re.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(F,ee){const ae=be.get(F);ae.__webglFramebuffer=ee,ae.__useDefaultFramebuffer=ee===void 0},this.setRenderTarget=function(F,ee=0,ae=0){C=F,R=ee,A=ae;let re=!0,se=null,ke=!1,Xe=!1;if(F){const ut=be.get(F);ut.__useDefaultFramebuffer!==void 0?(ye.bindFramebuffer(K.FRAMEBUFFER,null),re=!1):ut.__webglFramebuffer===void 0?Be.setupRenderTarget(F):ut.__hasExternalTextures&&Be.rebindTextures(F,be.get(F.texture).__webglTexture,be.get(F.depthTexture).__webglTexture);const mt=F.texture;(mt.isData3DTexture||mt.isDataArrayTexture||mt.isCompressedArrayTexture)&&(Xe=!0);const gt=be.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(Array.isArray(gt[ee])?se=gt[ee][ae]:se=gt[ee],ke=!0):F.samples>0&&Be.useMultisampledRTT(F)===!1?se=be.get(F).__webglMultisampledFramebuffer:Array.isArray(gt)?se=gt[ae]:se=gt,E.copy(F.viewport),N.copy(F.scissor),z=F.scissorTest}else E.copy(G).multiplyScalar(oe).floor(),N.copy(ne).multiplyScalar(oe).floor(),z=me;if(ye.bindFramebuffer(K.FRAMEBUFFER,se)&&re&&ye.drawBuffers(F,se),ye.viewport(E),ye.scissor(N),ye.setScissorTest(z),ke){const ut=be.get(F.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+ee,ut.__webglTexture,ae)}else if(Xe){const ut=be.get(F.texture),mt=ee||0;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,ut.__webglTexture,ae||0,mt)}L=-1},this.readRenderTargetPixels=function(F,ee,ae,re,se,ke,Xe){if(!(F&&F.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ye=be.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&Xe!==void 0&&(Ye=Ye[Xe]),Ye){ye.bindFramebuffer(K.FRAMEBUFFER,Ye);try{const ut=F.texture,mt=ut.format,gt=ut.type;if(!we.textureFormatReadable(mt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!we.textureTypeReadable(gt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ee>=0&&ee<=F.width-re&&ae>=0&&ae<=F.height-se&&K.readPixels(ee,ae,re,se,Ve.convert(mt),Ve.convert(gt),ke)}finally{const ut=C!==null?be.get(C).__webglFramebuffer:null;ye.bindFramebuffer(K.FRAMEBUFFER,ut)}}},this.copyFramebufferToTexture=function(F,ee,ae=0){const re=Math.pow(2,-ae),se=Math.floor(ee.image.width*re),ke=Math.floor(ee.image.height*re);Be.setTexture2D(ee,0),K.copyTexSubImage2D(K.TEXTURE_2D,ae,0,0,F.x,F.y,se,ke),ye.unbindTexture()},this.copyTextureToTexture=function(F,ee,ae,re=0){const se=ee.image.width,ke=ee.image.height,Xe=Ve.convert(ae.format),Ye=Ve.convert(ae.type);Be.setTexture2D(ae,0),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,ae.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ae.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,ae.unpackAlignment),ee.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,re,F.x,F.y,se,ke,Xe,Ye,ee.image.data):ee.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,re,F.x,F.y,ee.mipmaps[0].width,ee.mipmaps[0].height,Xe,ee.mipmaps[0].data):K.texSubImage2D(K.TEXTURE_2D,re,F.x,F.y,Xe,Ye,ee.image),re===0&&ae.generateMipmaps&&K.generateMipmap(K.TEXTURE_2D),ye.unbindTexture()},this.copyTextureToTexture3D=function(F,ee,ae,re,se=0){const ke=F.max.x-F.min.x,Xe=F.max.y-F.min.y,Ye=F.max.z-F.min.z,ut=Ve.convert(re.format),mt=Ve.convert(re.type);let gt;if(re.isData3DTexture)Be.setTexture3D(re,0),gt=K.TEXTURE_3D;else if(re.isDataArrayTexture||re.isCompressedArrayTexture)Be.setTexture2DArray(re,0),gt=K.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,re.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,re.unpackAlignment);const vt=K.getParameter(K.UNPACK_ROW_LENGTH),ln=K.getParameter(K.UNPACK_IMAGE_HEIGHT),Dn=K.getParameter(K.UNPACK_SKIP_PIXELS),Ii=K.getParameter(K.UNPACK_SKIP_ROWS),sr=K.getParameter(K.UNPACK_SKIP_IMAGES),Pt=ae.isCompressedTexture?ae.mipmaps[se]:ae.image;K.pixelStorei(K.UNPACK_ROW_LENGTH,Pt.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,Pt.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,F.min.x),K.pixelStorei(K.UNPACK_SKIP_ROWS,F.min.y),K.pixelStorei(K.UNPACK_SKIP_IMAGES,F.min.z),ae.isDataTexture||ae.isData3DTexture?K.texSubImage3D(gt,se,ee.x,ee.y,ee.z,ke,Xe,Ye,ut,mt,Pt.data):re.isCompressedArrayTexture?K.compressedTexSubImage3D(gt,se,ee.x,ee.y,ee.z,ke,Xe,Ye,ut,Pt.data):K.texSubImage3D(gt,se,ee.x,ee.y,ee.z,ke,Xe,Ye,ut,mt,Pt),K.pixelStorei(K.UNPACK_ROW_LENGTH,vt),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,ln),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Dn),K.pixelStorei(K.UNPACK_SKIP_ROWS,Ii),K.pixelStorei(K.UNPACK_SKIP_IMAGES,sr),se===0&&re.generateMipmaps&&K.generateMipmap(gt),ye.unbindTexture()},this.initTexture=function(F){F.isCubeTexture?Be.setTextureCube(F,0):F.isData3DTexture?Be.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?Be.setTexture2DArray(F,0):Be.setTexture2D(F,0),ye.unbindTexture()},this.resetState=function(){R=0,A=0,C=null,ye.reset(),pt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return zs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===m0?"display-p3":"srgb",t.unpackColorSpace=qt.workingColorSpace===pd?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class _0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ze(e),this.density=t}clone(){return new _0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class x0{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new ze(e),this.near=t,this.far=i}clone(){return new x0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class av extends Gt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Er,this.environmentIntensity=1,this.environmentRotation=new Er,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class w0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Vf,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=wr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return NL("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=wr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=wr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Oi=new U;class Cl{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.applyMatrix4(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.applyNormalMatrix(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.transformDirection(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=zi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=St(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=zi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=zi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=zi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=zi(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=St(t,this.array),i=St(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array),s=St(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Kt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Cl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class EM extends hi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let _u;const xh=new U,xu=new U,wu=new U,Su=new ve,wh=new ve,YL=new ht,am=new U,Sh=new U,lm=new U,JA=new ve,mx=new ve,QA=new ve;class ZL extends Gt{constructor(e=new EM){if(super(),this.isSprite=!0,this.type="Sprite",_u===void 0){_u=new Tt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new w0(t,5);_u.setIndex([0,1,2,0,2,3]),_u.setAttribute("position",new Cl(i,3,0,!1)),_u.setAttribute("uv",new Cl(i,2,3,!1))}this.geometry=_u,this.material=e,this.center=new ve(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xu.setFromMatrixScale(this.matrixWorld),YL.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),wu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&xu.multiplyScalar(-wu.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;um(am.set(-.5,-.5,0),wu,o,xu,r,s),um(Sh.set(.5,-.5,0),wu,o,xu,r,s),um(lm.set(.5,.5,0),wu,o,xu,r,s),JA.set(0,0),mx.set(1,0),QA.set(1,1);let a=e.ray.intersectTriangle(am,Sh,lm,!1,xh);if(a===null&&(um(Sh.set(-.5,.5,0),wu,o,xu,r,s),mx.set(0,1),a=e.ray.intersectTriangle(am,lm,Sh,!1,xh),a===null))return;const l=e.ray.origin.distanceTo(xh);l<e.near||l>e.far||t.push({distance:l,point:xh.clone(),uv:gr.getInterpolation(xh,am,Sh,lm,JA,mx,QA,new ve),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function um(n,e,t,i,r,s){Su.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(wh.x=s*Su.x-r*Su.y,wh.y=r*Su.x+s*Su.y):wh.copy(Su),n.copy(e),n.x+=wh.x,n.y+=wh.y,n.applyMatrix4(YL)}const cm=new U,eC=new U;class KL extends Gt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){cm.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(cm);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){cm.setFromMatrixPosition(e.matrixWorld),eC.setFromMatrixPosition(this.matrixWorld);const i=cm.distanceTo(eC)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const tC=new U,nC=new Yt,iC=new Yt,CH=new U,rC=new ht,hm=new U,gx=new Ri,sC=new ht,vx=new Dl;class JL extends Vn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=qw,this.bindMatrix=new ht,this.bindMatrixInverse=new ht,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Vi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,hm),this.boundingBox.expandByPoint(hm)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ri),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,hm),this.boundingSphere.expandByPoint(hm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),gx.copy(this.boundingSphere),gx.applyMatrix4(r),e.ray.intersectsSphere(gx)!==!1&&(sC.copy(r).invert(),vx.copy(e.ray).applyMatrix4(sC),!(this.boundingBox!==null&&vx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,vx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Yt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===qw?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===aL?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;nC.fromBufferAttribute(r.attributes.skinIndex,e),iC.fromBufferAttribute(r.attributes.skinWeight,e),tC.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=iC.getComponent(s);if(o!==0){const a=nC.getComponent(s);rC.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(CH.copy(tC).applyMatrix4(rC),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class bM extends Gt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ya extends _n{constructor(e=null,t=1,i=1,r,s,o,a,l,u=ti,f=ti,d,p){super(null,o,a,l,u,f,r,s,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const oC=new ht,RH=new ht;class S0{constructor(e=[],t=[]){this.uuid=wr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ht)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ht;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:RH;oC.multiplyMatrices(a,t[s]),oC.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new S0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new ya(t,e,e,Ji,yr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new bM),this.bones.push(o),this.boneInverses.push(new ht().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Ec extends Kt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Mu=new ht,aC=new ht,fm=[],lC=new Vi,PH=new ht,Mh=new Vn,Eh=new Ri;class QL extends Vn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ec(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,PH)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Vi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Mu),lC.copy(e.boundingBox).applyMatrix4(Mu),this.boundingBox.union(lC)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ri),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Mu),Eh.copy(e.boundingSphere).applyMatrix4(Mu),this.boundingSphere.union(Eh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Mh.geometry=this.geometry,Mh.material=this.material,Mh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Eh.copy(this.boundingSphere),Eh.applyMatrix4(i),e.ray.intersectsSphere(Eh)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Mu),aC.multiplyMatrices(i,Mu),Mh.matrixWorld=aC,Mh.raycast(e,fm);for(let o=0,a=fm.length;o<a;o++){const l=fm[o];l.instanceId=s,l.object=this,t.push(l)}fm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Ec(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new ya(new Float32Array(r*this.count),r,this.count,cM,yr));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<i.length;u++)o+=i[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function IH(n,e){return n.z-e.z}function LH(n,e){return e.z-n.z}class NH{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const Eu="batchId",ea=new ht,uC=new ht,DH=new ht,cC=new ht,yx=new vd,dm=new Vi,Xa=new Ri,bh=new U,_x=new NH,wi=new Vn,pm=[];function OH(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class e3 extends Vn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,r){super(new Tt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new ya(t,e,e,Ji,yr);this._matricesTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:u,itemSize:f,normalized:d}=l,p=new u.constructor(i*f),g=new Kt(p,f,d);t.setAttribute(a,g)}if(e.getIndex()!==null){const a=i>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Kt(a,1))}const o=r>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute(Eu,new Kt(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Eu))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Eu}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===Eu)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vi);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,ea),this.getBoundingBoxAt(r,dm).applyMatrix4(ea),t.union(dm))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ri);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,ea),this.getBoundingSphereAt(r,Xa).applyMatrix4(ea),t.union(Xa))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const u=e.getIndex(),f=u!==null;if(f&&(i===-1?r.indexCount=u.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._visibility,p=this._active,g=this._matricesTexture,v=this._matricesTexture.image.data;d.push(!0),p.push(!0);const x=this._geometryCount;this._geometryCount++,DH.toArray(v,x*16),g.needsUpdate=!0,o.push(r),a.push({start:f?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Vi,sphereInitialized:!1,sphere:new Ri});const _=this.geometry.getAttribute(Eu);for(let m=0;m<r.vertexCount;m++)_.setX(r.vertexStart+m,x);return _.needsUpdate=!0,this.setGeometryAt(x,e),x}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.vertexCount;for(const g in i.attributes){if(g===Eu)continue;const v=t.getAttribute(g),x=i.getAttribute(g);OH(v,x,l);const _=v.itemSize;for(let m=v.count,w=u;m<w;m++){const S=l+m;for(let b=0;b<_;b++)x.setComponent(S,b,0)}x.needsUpdate=!0,x.addUpdateRange(l*_,u*_)}if(r){const g=a.indexStart;for(let v=0;v<o.count;v++)s.setX(g+v,l+o.getX(v));for(let v=o.count,x=a.indexCount;v<x;v++)s.setX(g+v,l);s.needsUpdate=!0,s.addUpdateRange(g,a.indexCount)}const f=this._bounds[e];t.boundingBox!==null?(f.box.copy(t.boundingBox),f.boxInitialized=!0):f.boxInitialized=!1,t.boundingSphere!==null?(f.sphere.copy(t.boundingSphere),f.sphereInitialized=!0):f.sphereInitialized=!1;const d=this._drawRanges[e],p=t.getAttribute("position");return d.count=r?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(e){return this._multiDrawInstances===null?null:this._multiDrawInstances[e]}setInstanceCountAt(e,t){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=t,e}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,u=this._drawRanges[e];for(let f=u.start,d=u.start+u.count;f<d;f++){let p=f;a&&(p=a.getX(p)),s.expandByPoint(bh.fromBufferAttribute(l,p))}r.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,dm),dm.getCenter(s.center);const a=o.index,l=o.attributes.position,u=this._drawRanges[e];let f=0;for(let d=u.start,p=u.start+u.count;d<p;d++){let g=d;a&&(g=a.getX(g)),bh.fromBufferAttribute(l,g),f=Math.max(f,s.center.distanceToSquared(bh))}s.radius=Math.sqrt(f),r.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*16)}setVisibleAt(e,t){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;wi.material=this.material,wi.geometry.index=l.index,wi.geometry.attributes=l.attributes,wi.geometry.boundingBox===null&&(wi.geometry.boundingBox=new Vi),wi.geometry.boundingSphere===null&&(wi.geometry.boundingSphere=new Ri);for(let u=0;u<o;u++){if(!i[u]||!r[u])continue;const f=s[u];wi.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(u,wi.matrixWorld).premultiply(a),this.getBoundingBoxAt(u,wi.geometry.boundingBox),this.getBoundingSphereAt(u,wi.geometry.boundingSphere),wi.raycast(e,pm);for(let d=0,p=pm.length;d<p;d++){const g=pm[d];g.object=this,g.batchId=u,t.push(g)}pm.length=0}wi.material=null,wi.geometry.index=null,wi.geometry.attributes={},wi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,u=this._visibility,f=this._multiDrawStarts,d=this._multiDrawCounts,p=this._drawRanges,g=this.perObjectFrustumCulled;g&&(cC.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),yx.setFromProjectionMatrix(cC,e.coordinateSystem));let v=0;if(this.sortObjects){uC.copy(this.matrixWorld).invert(),bh.setFromMatrixPosition(i.matrixWorld).applyMatrix4(uC);for(let m=0,w=u.length;m<w;m++)if(u[m]&&l[m]){this.getMatrixAt(m,ea),this.getBoundingSphereAt(m,Xa).applyMatrix4(ea);let S=!1;if(g&&(S=!yx.intersectsSphere(Xa)),!S){const b=bh.distanceTo(Xa.center);_x.push(p[m],b)}}const x=_x.list,_=this.customSort;_===null?x.sort(s.transparent?LH:IH):_.call(this,x,i);for(let m=0,w=x.length;m<w;m++){const S=x[m];f[v]=S.start*a,d[v]=S.count,v++}_x.reset()}else for(let x=0,_=u.length;x<_;x++)if(u[x]&&l[x]){let m=!1;if(g&&(this.getMatrixAt(x,ea),this.getBoundingSphereAt(x,Xa).applyMatrix4(ea),m=!yx.intersectsSphere(Xa)),!m){const w=p[x];f[v]=w.start*a,d[v]=w.count,v++}}this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Wi extends hi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ze(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const lv=new U,uv=new U,hC=new ht,Th=new Dl,mm=new Ri,xx=new U,fC=new U;class Sa extends Gt{constructor(e=new Tt,t=new Wi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)lv.fromBufferAttribute(t,r-1),uv.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=lv.distanceTo(uv);e.setAttribute("lineDistance",new je(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),mm.copy(i.boundingSphere),mm.applyMatrix4(r),mm.radius+=s,e.ray.intersectsSphere(mm)===!1)return;hC.copy(r).invert(),Th.copy(e.ray).applyMatrix4(hC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,f=i.index,p=i.attributes.position;if(f!==null){const g=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let x=g,_=v-1;x<_;x+=u){const m=f.getX(x),w=f.getX(x+1),S=gm(this,e,Th,l,m,w);S&&t.push(S)}if(this.isLineLoop){const x=f.getX(v-1),_=f.getX(g),m=gm(this,e,Th,l,x,_);m&&t.push(m)}}else{const g=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count);for(let x=g,_=v-1;x<_;x+=u){const m=gm(this,e,Th,l,x,x+1);m&&t.push(m)}if(this.isLineLoop){const x=gm(this,e,Th,l,v-1,g);x&&t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function gm(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(lv.fromBufferAttribute(o,r),uv.fromBufferAttribute(o,s),t.distanceSqToSegment(lv,uv,xx,fC)>i)return;xx.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(xx);if(!(l<e.near||l>e.far))return{distance:l,point:fC.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,object:n}}const dC=new U,pC=new U;class qs extends Sa{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)dC.fromBufferAttribute(t,r),pC.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+dC.distanceTo(pC);e.setAttribute("lineDistance",new je(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class t3 extends Sa{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class TM extends hi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const mC=new ht,bS=new Dl,vm=new Ri,ym=new U;class n3 extends Gt{constructor(e=new Tt,t=new TM){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),vm.copy(i.boundingSphere),vm.applyMatrix4(r),vm.radius+=s,e.ray.intersectsSphere(vm)===!1)return;mC.copy(r).invert(),bS.copy(e.ray).applyMatrix4(mC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,d=i.attributes.position;if(u!==null){const p=Math.max(0,o.start),g=Math.min(u.count,o.start+o.count);for(let v=p,x=g;v<x;v++){const _=u.getX(v);ym.fromBufferAttribute(d,_),gC(ym,_,l,r,e,t,this)}}else{const p=Math.max(0,o.start),g=Math.min(d.count,o.start+o.count);for(let v=p,x=g;v<x;v++)ym.fromBufferAttribute(d,v),gC(ym,v,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function gC(n,e,t,i,r,s,o){const a=bS.distanceSqToPoint(n);if(a<t){const l=new U;bS.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class kH extends _n{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:An,this.magFilter=s!==void 0?s:An,this.generateMipmaps=!1;const f=this;function d(){f.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FH extends _n{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ti,this.minFilter=ti,this.generateMipmaps=!1,this.needsUpdate=!0}}class M0 extends _n{constructor(e,t,i,r,s,o,a,l,u,f,d,p){super(null,o,a,l,u,f,r,s,d,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class UH extends M0{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=jr}}class zH extends M0{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Ro),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class BH extends _n{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class _s{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const f=i[r],p=i[r+1]-f,g=(o-f)/p;return(r+g)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new ve:new U);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new U,r=[],s=[],o=[],a=new U,l=new ht;for(let g=0;g<=e;g++){const v=g/e;r[g]=this.getTangentAt(v,new U)}s[0]=new U,o[0]=new U;let u=Number.MAX_VALUE;const f=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);f<=u&&(u=f,i.set(1,0,0)),d<=u&&(u=d,i.set(0,1,0)),p<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(bn(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(l.makeRotationAxis(a,v))}o[g].crossVectors(r[g],s[g])}if(t===!0){let g=Math.acos(bn(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(g=-g);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(r[v],g*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class E0 extends _s{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new ve){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,g=u-this.aY;l=p*f-g*d+this.aX,u=p*d+g*f+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class i3 extends E0{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function AM(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,f,d){let p=(o-s)/u-(a-s)/(u+f)+(a-o)/f,g=(a-o)/f-(l-o)/(f+d)+(l-a)/d;p*=f,g*=f,r(o,a,p,g)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const _m=new U,wx=new AM,Sx=new AM,Mx=new AM;class r3 extends _s{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new U){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,f;this.closed||a>0?u=r[(a-1)%s]:(_m.subVectors(r[0],r[1]).add(r[0]),u=_m);const d=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?f=r[(a+2)%s]:(_m.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=_m),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(d),g),x=Math.pow(d.distanceToSquared(p),g),_=Math.pow(p.distanceToSquared(f),g);x<1e-4&&(x=1),v<1e-4&&(v=x),_<1e-4&&(_=x),wx.initNonuniformCatmullRom(u.x,d.x,p.x,f.x,v,x,_),Sx.initNonuniformCatmullRom(u.y,d.y,p.y,f.y,v,x,_),Mx.initNonuniformCatmullRom(u.z,d.z,p.z,f.z,v,x,_)}else this.curveType==="catmullrom"&&(wx.initCatmullRom(u.x,d.x,p.x,f.x,this.tension),Sx.initCatmullRom(u.y,d.y,p.y,f.y,this.tension),Mx.initCatmullRom(u.z,d.z,p.z,f.z,this.tension));return i.set(wx.calc(l),Sx.calc(l),Mx.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new U().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function vC(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function VH(n,e){const t=1-n;return t*t*e}function HH(n,e){return 2*(1-n)*n*e}function GH(n,e){return n*n*e}function uf(n,e,t,i){return VH(n,e)+HH(n,t)+GH(n,i)}function WH(n,e){const t=1-n;return t*t*t*e}function jH(n,e){const t=1-n;return 3*t*t*n*e}function XH(n,e){return 3*(1-n)*n*n*e}function $H(n,e){return n*n*n*e}function cf(n,e,t,i,r){return WH(n,e)+jH(n,t)+XH(n,i)+$H(n,r)}class CM extends _s{constructor(e=new ve,t=new ve,i=new ve,r=new ve){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ve){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(cf(e,r.x,s.x,o.x,a.x),cf(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class s3 extends _s{constructor(e=new U,t=new U,i=new U,r=new U){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new U){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(cf(e,r.x,s.x,o.x,a.x),cf(e,r.y,s.y,o.y,a.y),cf(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class RM extends _s{constructor(e=new ve,t=new ve){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ve){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ve){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class o3 extends _s{constructor(e=new U,t=new U){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new U){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new U){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PM extends _s{constructor(e=new ve,t=new ve,i=new ve){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ve){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(uf(e,r.x,s.x,o.x),uf(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class IM extends _s{constructor(e=new U,t=new U,i=new U){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new U){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(uf(e,r.x,s.x,o.x),uf(e,r.y,s.y,o.y),uf(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LM extends _s{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ve){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],f=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(vC(a,l.x,u.x,f.x,d.x),vC(a,l.y,u.y,f.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ve().fromArray(r))}return this}}var cv=Object.freeze({__proto__:null,ArcCurve:i3,CatmullRomCurve3:r3,CubicBezierCurve:CM,CubicBezierCurve3:s3,EllipseCurve:E0,LineCurve:RM,LineCurve3:o3,QuadraticBezierCurve:PM,QuadraticBezierCurve3:IM,SplineCurve:LM});class a3 extends _s{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new cv[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const f=l[u];i&&i.equals(f)||(t.push(f),i=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new cv[r.type]().fromJSON(r))}return this}}class Wf extends a3{constructor(e){super(),this.type="Path",this.currentPoint=new ve,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new RM(this.currentPoint.clone(),new ve(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new PM(this.currentPoint.clone(),new ve(e,t),new ve(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new CM(this.currentPoint.clone(),new ve(e,t),new ve(i,r),new ve(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new LM(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const u=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+u,t+f,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const u=new E0(e,t,i,r,s,o,a,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const f=u.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class yd extends Tt{constructor(e=[new ve(0,-.5),new ve(.5,0),new ve(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=bn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],f=1/t,d=new U,p=new ve,g=new U,v=new U,x=new U;let _=0,m=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:_=e[w+1].x-e[w].x,m=e[w+1].y-e[w].y,g.x=m*1,g.y=-_,g.z=m*0,x.copy(g),g.normalize(),l.push(g.x,g.y,g.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:_=e[w+1].x-e[w].x,m=e[w+1].y-e[w].y,g.x=m*1,g.y=-_,g.z=m*0,v.copy(g),g.x+=x.x,g.y+=x.y,g.z+=x.z,g.normalize(),l.push(g.x,g.y,g.z),x.copy(v)}for(let w=0;w<=t;w++){const S=i+w*f*r,b=Math.sin(S),R=Math.cos(S);for(let A=0;A<=e.length-1;A++){d.x=e[A].x*b,d.y=e[A].y,d.z=e[A].x*R,o.push(d.x,d.y,d.z),p.x=w/t,p.y=A/(e.length-1),a.push(p.x,p.y);const C=l[3*A+0]*b,L=l[3*A+1],I=l[3*A+0]*R;u.push(C,L,I)}}for(let w=0;w<t;w++)for(let S=0;S<e.length-1;S++){const b=S+w*e.length,R=b,A=b+e.length,C=b+e.length+1,L=b+1;s.push(R,A,L),s.push(C,L,A)}this.setIndex(s),this.setAttribute("position",new je(o,3)),this.setAttribute("uv",new je(a,2)),this.setAttribute("normal",new je(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yd(e.points,e.segments,e.phiStart,e.phiLength)}}class b0 extends yd{constructor(e=1,t=1,i=4,r=8){const s=new Wf;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new b0(e.radius,e.length,e.capSegments,e.radialSegments)}}class T0 extends Tt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new U,f=new ve;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const g=i+d/t*r;u.x=e*Math.cos(g),u.y=e*Math.sin(g),o.push(u.x,u.y,u.z),a.push(0,0,1),f.x=(o[p]/e+1)/2,f.y=(o[p+1]/e+1)/2,l.push(f.x,f.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new je(o,3)),this.setAttribute("normal",new je(a,3)),this.setAttribute("uv",new je(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new T0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class kc extends Tt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const f=[],d=[],p=[],g=[];let v=0;const x=[],_=i/2;let m=0;w(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(f),this.setAttribute("position",new je(d,3)),this.setAttribute("normal",new je(p,3)),this.setAttribute("uv",new je(g,2));function w(){const b=new U,R=new U;let A=0;const C=(t-e)/i;for(let L=0;L<=s;L++){const I=[],E=L/s,N=E*(t-e)+e;for(let z=0;z<=r;z++){const O=z/r,q=O*l+a,j=Math.sin(q),Q=Math.cos(q);R.x=N*j,R.y=-E*i+_,R.z=N*Q,d.push(R.x,R.y,R.z),b.set(j,C,Q).normalize(),p.push(b.x,b.y,b.z),g.push(O,1-E),I.push(v++)}x.push(I)}for(let L=0;L<r;L++)for(let I=0;I<s;I++){const E=x[I][L],N=x[I+1][L],z=x[I+1][L+1],O=x[I][L+1];f.push(E,N,O),f.push(N,z,O),A+=6}u.addGroup(m,A,0),m+=A}function S(b){const R=v,A=new ve,C=new U;let L=0;const I=b===!0?e:t,E=b===!0?1:-1;for(let z=1;z<=r;z++)d.push(0,_*E,0),p.push(0,E,0),g.push(.5,.5),v++;const N=v;for(let z=0;z<=r;z++){const q=z/r*l+a,j=Math.cos(q),Q=Math.sin(q);C.x=I*Q,C.y=_*E,C.z=I*j,d.push(C.x,C.y,C.z),p.push(0,E,0),A.x=j*.5+.5,A.y=Q*.5*E+.5,g.push(A.x,A.y),v++}for(let z=0;z<r;z++){const O=R+z,q=N+z;b===!0?f.push(q,q+1,O):f.push(q+1,q,O),L+=3}u.addGroup(m,L,b===!0?1:2),m+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class A0 extends kc{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new A0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ca extends Tt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),u(i),f(),this.setAttribute("position",new je(s,3)),this.setAttribute("normal",new je(s.slice(),3)),this.setAttribute("uv",new je(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(w){const S=new U,b=new U,R=new U;for(let A=0;A<t.length;A+=3)g(t[A+0],S),g(t[A+1],b),g(t[A+2],R),l(S,b,R,w)}function l(w,S,b,R){const A=R+1,C=[];for(let L=0;L<=A;L++){C[L]=[];const I=w.clone().lerp(b,L/A),E=S.clone().lerp(b,L/A),N=A-L;for(let z=0;z<=N;z++)z===0&&L===A?C[L][z]=I:C[L][z]=I.clone().lerp(E,z/N)}for(let L=0;L<A;L++)for(let I=0;I<2*(A-L)-1;I++){const E=Math.floor(I/2);I%2===0?(p(C[L][E+1]),p(C[L+1][E]),p(C[L][E])):(p(C[L][E+1]),p(C[L+1][E+1]),p(C[L+1][E]))}}function u(w){const S=new U;for(let b=0;b<s.length;b+=3)S.x=s[b+0],S.y=s[b+1],S.z=s[b+2],S.normalize().multiplyScalar(w),s[b+0]=S.x,s[b+1]=S.y,s[b+2]=S.z}function f(){const w=new U;for(let S=0;S<s.length;S+=3){w.x=s[S+0],w.y=s[S+1],w.z=s[S+2];const b=_(w)/2/Math.PI+.5,R=m(w)/Math.PI+.5;o.push(b,1-R)}v(),d()}function d(){for(let w=0;w<o.length;w+=6){const S=o[w+0],b=o[w+2],R=o[w+4],A=Math.max(S,b,R),C=Math.min(S,b,R);A>.9&&C<.1&&(S<.2&&(o[w+0]+=1),b<.2&&(o[w+2]+=1),R<.2&&(o[w+4]+=1))}}function p(w){s.push(w.x,w.y,w.z)}function g(w,S){const b=w*3;S.x=e[b+0],S.y=e[b+1],S.z=e[b+2]}function v(){const w=new U,S=new U,b=new U,R=new U,A=new ve,C=new ve,L=new ve;for(let I=0,E=0;I<s.length;I+=9,E+=6){w.set(s[I+0],s[I+1],s[I+2]),S.set(s[I+3],s[I+4],s[I+5]),b.set(s[I+6],s[I+7],s[I+8]),A.set(o[E+0],o[E+1]),C.set(o[E+2],o[E+3]),L.set(o[E+4],o[E+5]),R.copy(w).add(S).add(b).divideScalar(3);const N=_(R);x(A,E+0,w,N),x(C,E+2,S,N),x(L,E+4,b,N)}}function x(w,S,b,R){R<0&&w.x===1&&(o[S]=w.x-1),b.x===0&&b.z===0&&(o[S]=R/2/Math.PI+.5)}function _(w){return Math.atan2(w.z,-w.x)}function m(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ca(e.vertices,e.indices,e.radius,e.details)}}class C0 extends Ca{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new C0(e.radius,e.detail)}}const xm=new U,wm=new U,Ex=new U,Sm=new gr;class l3 extends Tt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(yl*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],f=["a","b","c"],d=new Array(3),p={},g=[];for(let v=0;v<l;v+=3){o?(u[0]=o.getX(v),u[1]=o.getX(v+1),u[2]=o.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:x,b:_,c:m}=Sm;if(x.fromBufferAttribute(a,u[0]),_.fromBufferAttribute(a,u[1]),m.fromBufferAttribute(a,u[2]),Sm.getNormal(Ex),d[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,d[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,d[2]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let w=0;w<3;w++){const S=(w+1)%3,b=d[w],R=d[S],A=Sm[f[w]],C=Sm[f[S]],L=`${b}_${R}`,I=`${R}_${b}`;I in p&&p[I]?(Ex.dot(p[I].normal)<=s&&(g.push(A.x,A.y,A.z),g.push(C.x,C.y,C.z)),p[I]=null):L in p||(p[L]={index0:u[w],index1:u[S],normal:Ex.clone()})}}for(const v in p)if(p[v]){const{index0:x,index1:_}=p[v];xm.fromBufferAttribute(a,x),wm.fromBufferAttribute(a,_),g.push(xm.x,xm.y,xm.z),g.push(wm.x,wm.y,wm.z)}this.setAttribute("position",new je(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class xl extends Wf{constructor(e){super(e),this.uuid=wr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Wf().fromJSON(r))}return this}}const qH={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=u3(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,f,d,p,g;if(i&&(s=QH(n,e,s,t)),n.length>80*t){a=u=n[0],l=f=n[1];for(let v=t;v<r;v+=t)d=n[v],p=n[v+1],d<a&&(a=d),p<l&&(l=p),d>u&&(u=d),p>f&&(f=p);g=Math.max(u-a,f-l),g=g!==0?32767/g:0}return jf(s,o,t,a,l,g,0),o}};function u3(n,e,t,i,r){let s,o;if(r===c6(n,e,t,i)>0)for(s=e;s<t;s+=i)o=yC(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=yC(s,n[s],n[s+1],o);return o&&R0(o,o.next)&&($f(o),o=o.next),o}function Rl(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(R0(t,t.next)||vn(t.prev,t,t.next)===0)){if($f(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function jf(n,e,t,i,r,s,o){if(!n)return;!o&&s&&r6(n,i,r,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?ZH(n,i,r,s):YH(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),$f(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=KH(Rl(n),e,t),jf(n,e,t,i,r,s,2)):o===2&&JH(n,e,t,i,r,s):jf(Rl(n),e,t,i,r,s,1);break}}}function YH(n){const e=n.prev,t=n,i=n.next;if(vn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,u=i.y,f=r<s?r<o?r:o:s<o?s:o,d=a<l?a<u?a:u:l<u?l:u,p=r>s?r>o?r:o:s>o?s:o,g=a>l?a>u?a:u:l>u?l:u;let v=i.next;for(;v!==e;){if(v.x>=f&&v.x<=p&&v.y>=d&&v.y<=g&&Ju(r,a,s,l,o,u,v.x,v.y)&&vn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function ZH(n,e,t,i){const r=n.prev,s=n,o=n.next;if(vn(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,f=r.y,d=s.y,p=o.y,g=a<l?a<u?a:u:l<u?l:u,v=f<d?f<p?f:p:d<p?d:p,x=a>l?a>u?a:u:l>u?l:u,_=f>d?f>p?f:p:d>p?d:p,m=TS(g,v,e,t,i),w=TS(x,_,e,t,i);let S=n.prevZ,b=n.nextZ;for(;S&&S.z>=m&&b&&b.z<=w;){if(S.x>=g&&S.x<=x&&S.y>=v&&S.y<=_&&S!==r&&S!==o&&Ju(a,f,l,d,u,p,S.x,S.y)&&vn(S.prev,S,S.next)>=0||(S=S.prevZ,b.x>=g&&b.x<=x&&b.y>=v&&b.y<=_&&b!==r&&b!==o&&Ju(a,f,l,d,u,p,b.x,b.y)&&vn(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;S&&S.z>=m;){if(S.x>=g&&S.x<=x&&S.y>=v&&S.y<=_&&S!==r&&S!==o&&Ju(a,f,l,d,u,p,S.x,S.y)&&vn(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;b&&b.z<=w;){if(b.x>=g&&b.x<=x&&b.y>=v&&b.y<=_&&b!==r&&b!==o&&Ju(a,f,l,d,u,p,b.x,b.y)&&vn(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function KH(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!R0(r,s)&&c3(r,i,i.next,s)&&Xf(r,s)&&Xf(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),$f(i),$f(i.next),i=n=s),i=i.next}while(i!==n);return Rl(i)}function JH(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&a6(o,a)){let l=h3(o,a);o=Rl(o,o.next),l=Rl(l,l.next),jf(o,e,t,i,r,s,0),jf(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function QH(n,e,t,i){const r=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,u=u3(n,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(o6(u));for(r.sort(e6),s=0;s<r.length;s++)t=t6(r[s],t);return t}function e6(n,e){return n.x-e.x}function t6(n,e){const t=n6(n,e);if(!t)return e;const i=h3(t,n);return Rl(i,i.next),Rl(t,t.next)}function n6(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,u=r.y;let f=1/0,d;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&Ju(o<u?s:i,o,l,u,o<u?i:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),Xf(t,n)&&(d<f||d===f&&(t.x>r.x||t.x===r.x&&i6(r,t)))&&(r=t,f=d)),t=t.next;while(t!==a);return r}function i6(n,e){return vn(n.prev,n,e.prev)<0&&vn(e.next,n,n.next)<0}function r6(n,e,t,i){let r=n;do r.z===0&&(r.z=TS(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,s6(r)}function s6(n){let e,t,i,r,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,u*=2}while(o>1);return n}function TS(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function o6(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Ju(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function a6(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!l6(n,e)&&(Xf(n,e)&&Xf(e,n)&&u6(n,e)&&(vn(n.prev,n,e.prev)||vn(n,e.prev,e))||R0(n,e)&&vn(n.prev,n,n.next)>0&&vn(e.prev,e,e.next)>0)}function vn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function R0(n,e){return n.x===e.x&&n.y===e.y}function c3(n,e,t,i){const r=Em(vn(n,e,t)),s=Em(vn(n,e,i)),o=Em(vn(t,i,n)),a=Em(vn(t,i,e));return!!(r!==s&&o!==a||r===0&&Mm(n,t,e)||s===0&&Mm(n,i,e)||o===0&&Mm(t,n,i)||a===0&&Mm(t,e,i))}function Mm(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Em(n){return n>0?1:n<0?-1:0}function l6(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&c3(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Xf(n,e){return vn(n.prev,n,n.next)<0?vn(n,e,n.next)>=0&&vn(n,n.prev,e)>=0:vn(n,e,n.prev)<0||vn(n,n.next,e)<0}function u6(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function h3(n,e){const t=new AS(n.i,n.x,n.y),i=new AS(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function yC(n,e,t,i){const r=new AS(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function $f(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function AS(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function c6(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Ws{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Ws.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];_C(e),xC(i,e);let o=e.length;t.forEach(_C);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,xC(i,t[l]);const a=qH.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function _C(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function xC(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class P0 extends Tt{constructor(e=new xl([new ve(.5,.5),new ve(-.5,.5),new ve(-.5,-.5),new ve(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new je(r,3)),this.setAttribute("uv",new je(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:g-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const m=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:h6;let S,b=!1,R,A,C,L;m&&(S=m.getSpacedPoints(f),b=!0,p=!1,R=m.computeFrenetFrames(f,!1),A=new U,C=new U,L=new U),p||(_=0,g=0,v=0,x=0);const I=a.extractPoints(u);let E=I.shape;const N=I.holes;if(!Ws.isClockWise(E)){E=E.reverse();for(let he=0,we=N.length;he<we;he++){const ye=N[he];Ws.isClockWise(ye)&&(N[he]=ye.reverse())}}const O=Ws.triangulateShape(E,N),q=E;for(let he=0,we=N.length;he<we;he++){const ye=N[he];E=E.concat(ye)}function j(he,we,ye){return we||console.error("THREE.ExtrudeGeometry: vec does not exist"),he.clone().addScaledVector(we,ye)}const Q=E.length,oe=O.length;function k(he,we,ye){let Ce,be,Be;const Ke=he.x-we.x,V=he.y-we.y,D=ye.x-he.x,te=ye.y-he.y,xe=Ke*Ke+V*V,Ee=Ke*te-V*D;if(Math.abs(Ee)>Number.EPSILON){const Se=Math.sqrt(xe),qe=Math.sqrt(D*D+te*te),Le=we.x-V/Se,Ie=we.y+Ke/Se,ft=ye.x-te/qe,Re=ye.y+D/qe,$e=((ft-Le)*te-(Re-Ie)*D)/(Ke*te-V*D);Ce=Le+Ke*$e-he.x,be=Ie+V*$e-he.y;const Mt=Ce*Ce+be*be;if(Mt<=2)return new ve(Ce,be);Be=Math.sqrt(Mt/2)}else{let Se=!1;Ke>Number.EPSILON?D>Number.EPSILON&&(Se=!0):Ke<-Number.EPSILON?D<-Number.EPSILON&&(Se=!0):Math.sign(V)===Math.sign(te)&&(Se=!0),Se?(Ce=-V,be=Ke,Be=Math.sqrt(xe)):(Ce=Ke,be=V,Be=Math.sqrt(xe/2))}return new ve(Ce/Be,be/Be)}const W=[];for(let he=0,we=q.length,ye=we-1,Ce=he+1;he<we;he++,ye++,Ce++)ye===we&&(ye=0),Ce===we&&(Ce=0),W[he]=k(q[he],q[ye],q[Ce]);const G=[];let ne,me=W.concat();for(let he=0,we=N.length;he<we;he++){const ye=N[he];ne=[];for(let Ce=0,be=ye.length,Be=be-1,Ke=Ce+1;Ce<be;Ce++,Be++,Ke++)Be===be&&(Be=0),Ke===be&&(Ke=0),ne[Ce]=k(ye[Ce],ye[Be],ye[Ke]);G.push(ne),me=me.concat(ne)}for(let he=0;he<_;he++){const we=he/_,ye=g*Math.cos(we*Math.PI/2),Ce=v*Math.sin(we*Math.PI/2)+x;for(let be=0,Be=q.length;be<Be;be++){const Ke=j(q[be],W[be],Ce);de(Ke.x,Ke.y,-ye)}for(let be=0,Be=N.length;be<Be;be++){const Ke=N[be];ne=G[be];for(let V=0,D=Ke.length;V<D;V++){const te=j(Ke[V],ne[V],Ce);de(te.x,te.y,-ye)}}}const _e=v+x;for(let he=0;he<Q;he++){const we=p?j(E[he],me[he],_e):E[he];b?(C.copy(R.normals[0]).multiplyScalar(we.x),A.copy(R.binormals[0]).multiplyScalar(we.y),L.copy(S[0]).add(C).add(A),de(L.x,L.y,L.z)):de(we.x,we.y,0)}for(let he=1;he<=f;he++)for(let we=0;we<Q;we++){const ye=p?j(E[we],me[we],_e):E[we];b?(C.copy(R.normals[he]).multiplyScalar(ye.x),A.copy(R.binormals[he]).multiplyScalar(ye.y),L.copy(S[he]).add(C).add(A),de(L.x,L.y,L.z)):de(ye.x,ye.y,d/f*he)}for(let he=_-1;he>=0;he--){const we=he/_,ye=g*Math.cos(we*Math.PI/2),Ce=v*Math.sin(we*Math.PI/2)+x;for(let be=0,Be=q.length;be<Be;be++){const Ke=j(q[be],W[be],Ce);de(Ke.x,Ke.y,d+ye)}for(let be=0,Be=N.length;be<Be;be++){const Ke=N[be];ne=G[be];for(let V=0,D=Ke.length;V<D;V++){const te=j(Ke[V],ne[V],Ce);b?de(te.x,te.y+S[f-1].y,S[f-1].x+ye):de(te.x,te.y,d+ye)}}}J(),pe();function J(){const he=r.length/3;if(p){let we=0,ye=Q*we;for(let Ce=0;Ce<oe;Ce++){const be=O[Ce];Qe(be[2]+ye,be[1]+ye,be[0]+ye)}we=f+_*2,ye=Q*we;for(let Ce=0;Ce<oe;Ce++){const be=O[Ce];Qe(be[0]+ye,be[1]+ye,be[2]+ye)}}else{for(let we=0;we<oe;we++){const ye=O[we];Qe(ye[2],ye[1],ye[0])}for(let we=0;we<oe;we++){const ye=O[we];Qe(ye[0]+Q*f,ye[1]+Q*f,ye[2]+Q*f)}}i.addGroup(he,r.length/3-he,0)}function pe(){const he=r.length/3;let we=0;Me(q,we),we+=q.length;for(let ye=0,Ce=N.length;ye<Ce;ye++){const be=N[ye];Me(be,we),we+=be.length}i.addGroup(he,r.length/3-he,1)}function Me(he,we){let ye=he.length;for(;--ye>=0;){const Ce=ye;let be=ye-1;be<0&&(be=he.length-1);for(let Be=0,Ke=f+_*2;Be<Ke;Be++){const V=Q*Be,D=Q*(Be+1),te=we+Ce+V,xe=we+be+V,Ee=we+be+D,Se=we+Ce+D;lt(te,xe,Ee,Se)}}}function de(he,we,ye){l.push(he),l.push(we),l.push(ye)}function Qe(he,we,ye){K(he),K(we),K(ye);const Ce=r.length/3,be=w.generateTopUV(i,r,Ce-3,Ce-2,Ce-1);tt(be[0]),tt(be[1]),tt(be[2])}function lt(he,we,ye,Ce){K(he),K(we),K(Ce),K(we),K(ye),K(Ce);const be=r.length/3,Be=w.generateSideWallUV(i,r,be-6,be-3,be-2,be-1);tt(Be[0]),tt(Be[1]),tt(Be[3]),tt(Be[1]),tt(Be[2]),tt(Be[3])}function K(he){r.push(l[he*3+0]),r.push(l[he*3+1]),r.push(l[he*3+2])}function tt(he){s.push(he.x),s.push(he.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return f6(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new cv[r.type]().fromJSON(r)),new P0(i,e.options)}}const h6={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],u=e[r*3],f=e[r*3+1];return[new ve(s,o),new ve(a,l),new ve(u,f)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[i*3],f=e[i*3+1],d=e[i*3+2],p=e[r*3],g=e[r*3+1],v=e[r*3+2],x=e[s*3],_=e[s*3+1],m=e[s*3+2];return Math.abs(a-f)<Math.abs(o-u)?[new ve(o,1-l),new ve(u,1-d),new ve(p,1-v),new ve(x,1-m)]:[new ve(a,1-l),new ve(f,1-d),new ve(g,1-v),new ve(_,1-m)]}};function f6(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class I0 extends Ca{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new I0(e.radius,e.detail)}}class _d extends Ca{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _d(e.radius,e.detail)}}class L0 extends Tt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],u=[],f=[];let d=e;const p=(t-e)/r,g=new U,v=new ve;for(let x=0;x<=r;x++){for(let _=0;_<=i;_++){const m=s+_/i*o;g.x=d*Math.cos(m),g.y=d*Math.sin(m),l.push(g.x,g.y,g.z),u.push(0,0,1),v.x=(g.x/t+1)/2,v.y=(g.y/t+1)/2,f.push(v.x,v.y)}d+=p}for(let x=0;x<r;x++){const _=x*(i+1);for(let m=0;m<i;m++){const w=m+_,S=w,b=w+i+1,R=w+i+2,A=w+1;a.push(S,b,A),a.push(b,R,A)}}this.setIndex(a),this.setAttribute("position",new je(l,3)),this.setAttribute("normal",new je(u,3)),this.setAttribute("uv",new je(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new L0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class N0 extends Tt{constructor(e=new xl([new ve(0,.5),new ve(-.5,-.5),new ve(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let f=0;f<e.length;f++)u(e[f]),this.addGroup(a,l,f),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new je(r,3)),this.setAttribute("normal",new je(s,3)),this.setAttribute("uv",new je(o,2));function u(f){const d=r.length/3,p=f.extractPoints(t);let g=p.shape;const v=p.holes;Ws.isClockWise(g)===!1&&(g=g.reverse());for(let _=0,m=v.length;_<m;_++){const w=v[_];Ws.isClockWise(w)===!0&&(v[_]=w.reverse())}const x=Ws.triangulateShape(g,v);for(let _=0,m=v.length;_<m;_++){const w=v[_];g=g.concat(w)}for(let _=0,m=g.length;_<m;_++){const w=g[_];r.push(w.x,w.y,0),s.push(0,0,1),o.push(w.x,w.y)}for(let _=0,m=x.length;_<m;_++){const w=x[_],S=w[0]+d,b=w[1]+d,R=w[2]+d;i.push(S,b,R),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return d6(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new N0(i,e.curveSegments)}}function d6(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class xd extends Tt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let u=0;const f=[],d=new U,p=new U,g=[],v=[],x=[],_=[];for(let m=0;m<=i;m++){const w=[],S=m/i;let b=0;m===0&&o===0?b=.5/t:m===i&&l===Math.PI&&(b=-.5/t);for(let R=0;R<=t;R++){const A=R/t;d.x=-e*Math.cos(r+A*s)*Math.sin(o+S*a),d.y=e*Math.cos(o+S*a),d.z=e*Math.sin(r+A*s)*Math.sin(o+S*a),v.push(d.x,d.y,d.z),p.copy(d).normalize(),x.push(p.x,p.y,p.z),_.push(A+b,1-S),w.push(u++)}f.push(w)}for(let m=0;m<i;m++)for(let w=0;w<t;w++){const S=f[m][w+1],b=f[m][w],R=f[m+1][w],A=f[m+1][w+1];(m!==0||o>0)&&g.push(S,b,A),(m!==i-1||l<Math.PI)&&g.push(b,R,A)}this.setIndex(g),this.setAttribute("position",new je(v,3)),this.setAttribute("normal",new je(x,3)),this.setAttribute("uv",new je(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class D0 extends Ca{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new D0(e.radius,e.detail)}}class O0 extends Tt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],u=[],f=new U,d=new U,p=new U;for(let g=0;g<=i;g++)for(let v=0;v<=r;v++){const x=v/r*s,_=g/i*Math.PI*2;d.x=(e+t*Math.cos(_))*Math.cos(x),d.y=(e+t*Math.cos(_))*Math.sin(x),d.z=t*Math.sin(_),a.push(d.x,d.y,d.z),f.x=e*Math.cos(x),f.y=e*Math.sin(x),p.subVectors(d,f).normalize(),l.push(p.x,p.y,p.z),u.push(v/r),u.push(g/i)}for(let g=1;g<=i;g++)for(let v=1;v<=r;v++){const x=(r+1)*g+v-1,_=(r+1)*(g-1)+v-1,m=(r+1)*(g-1)+v,w=(r+1)*g+v;o.push(x,_,w),o.push(_,m,w)}this.setIndex(o),this.setAttribute("position",new je(a,3)),this.setAttribute("normal",new je(l,3)),this.setAttribute("uv",new je(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new O0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class k0 extends Tt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],f=[],d=new U,p=new U,g=new U,v=new U,x=new U,_=new U,m=new U;for(let S=0;S<=i;++S){const b=S/i*s*Math.PI*2;w(b,s,o,e,g),w(b+.01,s,o,e,v),_.subVectors(v,g),m.addVectors(v,g),x.crossVectors(_,m),m.crossVectors(x,_),x.normalize(),m.normalize();for(let R=0;R<=r;++R){const A=R/r*Math.PI*2,C=-t*Math.cos(A),L=t*Math.sin(A);d.x=g.x+(C*m.x+L*x.x),d.y=g.y+(C*m.y+L*x.y),d.z=g.z+(C*m.z+L*x.z),l.push(d.x,d.y,d.z),p.subVectors(d,g).normalize(),u.push(p.x,p.y,p.z),f.push(S/i),f.push(R/r)}}for(let S=1;S<=i;S++)for(let b=1;b<=r;b++){const R=(r+1)*(S-1)+(b-1),A=(r+1)*S+(b-1),C=(r+1)*S+b,L=(r+1)*(S-1)+b;a.push(R,A,L),a.push(A,C,L)}this.setIndex(a),this.setAttribute("position",new je(l,3)),this.setAttribute("normal",new je(u,3)),this.setAttribute("uv",new je(f,2));function w(S,b,R,A,C){const L=Math.cos(S),I=Math.sin(S),E=R/b*S,N=Math.cos(E);C.x=A*(2+N)*.5*L,C.y=A*(2+N)*I*.5,C.z=A*Math.sin(E)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new k0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class F0 extends Tt{constructor(e=new IM(new U(-1,-1,0),new U(-1,1,0),new U(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new U,l=new U,u=new ve;let f=new U;const d=[],p=[],g=[],v=[];x(),this.setIndex(v),this.setAttribute("position",new je(d,3)),this.setAttribute("normal",new je(p,3)),this.setAttribute("uv",new je(g,2));function x(){for(let S=0;S<t;S++)_(S);_(s===!1?t:0),w(),m()}function _(S){f=e.getPointAt(S/t,f);const b=o.normals[S],R=o.binormals[S];for(let A=0;A<=r;A++){const C=A/r*Math.PI*2,L=Math.sin(C),I=-Math.cos(C);l.x=I*b.x+L*R.x,l.y=I*b.y+L*R.y,l.z=I*b.z+L*R.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=f.x+i*l.x,a.y=f.y+i*l.y,a.z=f.z+i*l.z,d.push(a.x,a.y,a.z)}}function m(){for(let S=1;S<=t;S++)for(let b=1;b<=r;b++){const R=(r+1)*(S-1)+(b-1),A=(r+1)*S+(b-1),C=(r+1)*S+b,L=(r+1)*(S-1)+b;v.push(R,A,L),v.push(A,C,L)}}function w(){for(let S=0;S<=t;S++)for(let b=0;b<=r;b++)u.x=S/t,u.y=b/r,g.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new F0(new cv[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class f3 extends Tt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new U,s=new U;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,f=l.length;u<f;++u){const d=l[u],p=d.start,g=d.count;for(let v=p,x=p+g;v<x;v+=3)for(let _=0;_<3;_++){const m=a.getX(v+_),w=a.getX(v+(_+1)%3);r.fromBufferAttribute(o,m),s.fromBufferAttribute(o,w),wC(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const f=3*a+u,d=3*a+(u+1)%3;r.fromBufferAttribute(o,f),s.fromBufferAttribute(o,d),wC(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new je(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function wC(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var SC=Object.freeze({__proto__:null,BoxGeometry:Ol,CapsuleGeometry:b0,CircleGeometry:T0,ConeGeometry:A0,CylinderGeometry:kc,DodecahedronGeometry:C0,EdgesGeometry:l3,ExtrudeGeometry:P0,IcosahedronGeometry:I0,LatheGeometry:yd,OctahedronGeometry:_d,PlaneGeometry:Dc,PolyhedronGeometry:Ca,RingGeometry:L0,ShapeGeometry:N0,SphereGeometry:xd,TetrahedronGeometry:D0,TorusGeometry:O0,TorusKnotGeometry:k0,TubeGeometry:F0,WireframeGeometry:f3});class d3 extends hi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ze(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class p3 extends Zr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class NM extends hi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ze(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ta,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class m3 extends NM{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return bn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ze(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ze(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ze(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class g3 extends hi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ze(16777215),this.specular=new ze(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ta,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.combine=dd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class v3 extends hi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ze(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ta,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class y3 extends hi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ta,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class _3 extends hi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ta,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.combine=dd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class x3 extends hi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ze(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ta,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class w3 extends Wi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function fl(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function S3(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function M3(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function CS(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function DM(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function p6(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],f=u.getValueSize(),d=[],p=[];for(let g=0;g<u.times.length;++g){const v=u.times[g]*r;if(!(v<t||v>=i)){d.push(u.times[g]);for(let x=0;x<f;++x)p.push(u.values[g*f+x])}}d.length!==0&&(u.times=fl(d,u.times.constructor),u.values=fl(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function m6(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(m){return m.name===a.name&&m.ValueTypeName===l});if(u===void 0)continue;let f=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);let p=0;const g=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);const v=a.times.length-1;let x;if(s<=a.times[0]){const m=f,w=d-f;x=a.values.slice(m,w)}else if(s>=a.times[v]){const m=v*d+f,w=m+d-f;x=a.values.slice(m,w)}else{const m=a.createInterpolant(),w=f,S=d-f;m.evaluate(s),x=m.resultBuffer.slice(w,S)}l==="quaternion"&&new Ci().fromArray(x).normalize().conjugate().toArray(x);const _=u.times.length;for(let m=0;m<_;++m){const w=m*g+p;if(l==="quaternion")Ci.multiplyQuaternionsFlat(u.values,w,x,0,u.values,w);else{const S=g-p*2;for(let b=0;b<S;++b)u.values[w+b]-=x[b]}}}return n.blendMode=pM,n}const g6={convertArray:fl,isTypedArray:S3,getKeyframeOrder:M3,sortedArray:CS,flattenJSON:DM,subclip:p6,makeClipAdditive:m6};class wd{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class E3 extends wd{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ul,endingEnd:ul}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case cl:s=e,a=2*t-i;break;case Ff:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case cl:o=e,l=2*i-t;break;case Ff:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const u=(i-t)*.5,f=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-i),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,g=this._weightNext,v=(i-t)/(r-t),x=v*v,_=x*v,m=-p*_+2*p*x-p*v,w=(1+p)*_+(-1.5-2*p)*x+(-.5+p)*v+1,S=(-1-g)*_+(1.5+g)*x+.5*v,b=g*_-g*x;for(let R=0;R!==a;++R)s[R]=m*o[f+R]+w*o[u+R]+S*o[l+R]+b*o[d+R];return s}}class OM extends wd{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=(i-t)/(r-t),d=1-f;for(let p=0;p!==a;++p)s[p]=o[u+p]*d+o[l+p]*f;return s}}class b3 extends wd{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class xs{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=fl(t,this.TimeBufferType),this.values=fl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:fl(e.times,Array),values:fl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new b3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new OM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new E3(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Of:t=this.InterpolantFactoryMethodDiscrete;break;case kf:t=this.InterpolantFactoryMethodLinear;break;case fg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Of;case this.InterpolantFactoryMethodLinear:return kf;case this.InterpolantFactoryMethodSmooth:return fg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&S3(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===fg,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],f=e[a+1];if(u!==f&&(a!==1||u!==e[0]))if(r)l=!0;else{const d=a*i,p=d-i,g=d+i;for(let v=0;v!==i;++v){const x=t[d+v];if(x!==t[p+v]||x!==t[g+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,p=o*i;for(let g=0;g!==i;++g)t[p+g]=t[d+g]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,u=0;u!==i;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}xs.prototype.TimeBufferType=Float32Array;xs.prototype.ValueBufferType=Float32Array;xs.prototype.DefaultInterpolation=kf;class kl extends xs{}kl.prototype.ValueTypeName="bool";kl.prototype.ValueBufferType=Array;kl.prototype.DefaultInterpolation=Of;kl.prototype.InterpolantFactoryMethodLinear=void 0;kl.prototype.InterpolantFactoryMethodSmooth=void 0;class kM extends xs{}kM.prototype.ValueTypeName="color";class qf extends xs{}qf.prototype.ValueTypeName="number";class T3 extends wd{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let u=e*a;for(let f=u+a;u!==f;u+=4)Ci.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Fc extends xs{InterpolantFactoryMethodLinear(e){return new T3(this.times,this.values,this.getValueSize(),e)}}Fc.prototype.ValueTypeName="quaternion";Fc.prototype.DefaultInterpolation=kf;Fc.prototype.InterpolantFactoryMethodSmooth=void 0;class Fl extends xs{}Fl.prototype.ValueTypeName="string";Fl.prototype.ValueBufferType=Array;Fl.prototype.DefaultInterpolation=Of;Fl.prototype.InterpolantFactoryMethodLinear=void 0;Fl.prototype.InterpolantFactoryMethodSmooth=void 0;class Yf extends xs{}Yf.prototype.ValueTypeName="vector";class Zf{constructor(e="",t=-1,i=[],r=p0){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=wr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(y6(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(xs.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const f=M3(l);l=CS(l,1,f),u=CS(u,1,f),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new qf(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],f=u.name.match(s);if(f&&f.length>1){const d=f[1];let p=r[d];p||(r[d]=p=[]),p.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,g,v,x){if(g.length!==0){const _=[],m=[];DM(g,_,m,v),_.length!==0&&x.push(new d(p,_,m))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const p=u[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const g={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let x=0;x<p[v].morphTargets.length;x++)g[p[v].morphTargets[x]]=-1;for(const x in g){const _=[],m=[];for(let w=0;w!==p[v].morphTargets.length;++w){const S=p[v];_.push(S.time),m.push(S.morphTarget===x?1:0)}r.push(new qf(".morphTargetInfluence["+x+"]",_,m))}l=g.length*o}else{const g=".bones["+t[d].name+"]";i(Yf,g+".position",p,"pos",r),i(Fc,g+".quaternion",p,"rot",r),i(Yf,g+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function v6(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return qf;case"vector":case"vector2":case"vector3":case"vector4":return Yf;case"color":return kM;case"quaternion":return Fc;case"bool":case"boolean":return kl;case"string":return Fl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function y6(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=v6(n.type);if(n.times===void 0){const t=[],i=[];DM(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const xo={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class FM{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){a++,s===!1&&r.onStart!==void 0&&r.onStart(f,o,a),s=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&&r.onProgress(f,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,d){return u.push(f,d),this},this.removeHandler=function(f){const d=u.indexOf(f);return d!==-1&&u.splice(d,2),this},this.getHandler=function(f){for(let d=0,p=u.length;d<p;d+=2){const g=u[d],v=u[d+1];if(g.global&&(g.lastIndex=0),g.test(f))return v}return null}}}const A3=new FM;class ir{constructor(e){this.manager=e!==void 0?e:A3,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ir.DEFAULT_MATERIAL_NAME="__DEFAULT";const lo={};class _6 extends Error{constructor(e,t){super(e),this.response=t}}class Po extends ir{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=xo.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(lo[e]!==void 0){lo[e].push({onLoad:t,onProgress:i,onError:r});return}lo[e]=[],lo[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const f=lo[e],d=u.body.getReader(),p=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),g=p?parseInt(p):0,v=g!==0;let x=0;const _=new ReadableStream({start(m){w();function w(){d.read().then(({done:S,value:b})=>{if(S)m.close();else{x+=b.byteLength;const R=new ProgressEvent("progress",{lengthComputable:v,loaded:x,total:g});for(let A=0,C=f.length;A<C;A++){const L=f[A];L.onProgress&&L.onProgress(R)}m.enqueue(b),w()}})}}});return new Response(_)}else throw new _6(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return u.json();default:if(a===void 0)return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,g=new TextDecoder(p);return u.arrayBuffer().then(v=>g.decode(v))}}}).then(u=>{xo.add(e,u);const f=lo[e];delete lo[e];for(let d=0,p=f.length;d<p;d++){const g=f[d];g.onLoad&&g.onLoad(u)}}).catch(u=>{const f=lo[e];if(f===void 0)throw this.manager.itemError(e),u;delete lo[e];for(let d=0,p=f.length;d<p;d++){const g=f[d];g.onError&&g.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class x6 extends ir{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Po(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Zf.parse(e[i]);t.push(r)}return t}}class w6 extends ir{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new M0,l=new Po(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function f(d){l.load(e[d],function(p){const g=s.parse(p,!0);o[d]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},u+=1,u===6&&(g.mipmapCount===1&&(a.minFilter=An),a.image=o,a.format=g.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)f(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const g=p.mipmaps.length/p.mipmapCount;for(let v=0;v<g;v++){o[v]={mipmaps:[]};for(let x=0;x<p.mipmapCount;x++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+x]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=An),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class Kf extends ir{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=xo.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Gf("img");function l(){f(),xo.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(d){f(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class S6 extends ir{constructor(e){super(e)}load(e,t,i,r){const s=new gd;s.colorSpace=Vr;const o=new Kf(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(f){s.images[u]=f,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class M6 extends ir{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ya,a=new Po(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(f){if(r!==void 0)r(f);else{console.error(f);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:jr,o.wrapT=u.wrapT!==void 0?u.wrapT:jr,o.magFilter=u.magFilter!==void 0?u.magFilter:An,o.minFilter=u.minFilter!==void 0?u.minFilter:An,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Us),u.mipmapCount===1&&(o.minFilter=An),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},i,r),o}}class E6 extends ir{constructor(e){super(e)}load(e,t,i,r){const s=new _n,o=new Kf(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Ra extends Gt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ze(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class C3 extends Ra{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Gt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ze(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const bx=new ht,MC=new U,EC=new U;class UM{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ve(512,512),this.map=null,this.mapPass=null,this.matrix=new ht,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new vd,this._frameExtents=new ve(1,1),this._viewportCount=1,this._viewports=[new Yt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;MC.setFromMatrixPosition(e.matrixWorld),t.position.copy(MC),EC.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(EC),t.updateMatrixWorld(),bx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bx),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(bx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class b6 extends UM{constructor(){super(new Tn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Sc*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class R3 extends Ra{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Gt.DEFAULT_UP),this.updateMatrix(),this.target=new Gt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new b6}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const bC=new ht,Ah=new U,Tx=new U;class T6 extends UM{constructor(){super(new Tn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ve(4,2),this._viewportCount=6,this._viewports=[new Yt(2,1,1,1),new Yt(0,1,1,1),new Yt(3,1,1,1),new Yt(1,1,1,1),new Yt(3,0,1,1),new Yt(1,0,1,1)],this._cubeDirections=[new U(1,0,0),new U(-1,0,0),new U(0,0,1),new U(0,0,-1),new U(0,1,0),new U(0,-1,0)],this._cubeUps=[new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,0,1),new U(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Ah.setFromMatrixPosition(e.matrixWorld),i.position.copy(Ah),Tx.copy(i.position),Tx.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Tx),i.updateMatrixWorld(),r.makeTranslation(-Ah.x,-Ah.y,-Ah.z),bC.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bC)}}class P3 extends Ra{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new T6}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class A6 extends UM{constructor(){super(new _o(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class I3 extends Ra{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Gt.DEFAULT_UP),this.updateMatrix(),this.target=new Gt,this.shadow=new A6}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class L3 extends Ra{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class N3 extends Ra{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class D3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new U)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class O3 extends Ra{constructor(e=new D3,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class U0 extends ir{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Po(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=U0.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ze().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new ze().setHex(o.value);break;case"v2":r.uniforms[s].value=new ve().fromArray(o.value);break;case"v3":r.uniforms[s].value=new U().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Yt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new wt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new ht().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ve().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ve().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:d3,SpriteMaterial:EM,RawShaderMaterial:p3,ShaderMaterial:Zr,PointsMaterial:TM,MeshPhysicalMaterial:m3,MeshStandardMaterial:NM,MeshPhongMaterial:g3,MeshToonMaterial:v3,MeshNormalMaterial:y3,MeshLambertMaterial:_3,MeshDepthMaterial:SM,MeshDistanceMaterial:MM,MeshBasicMaterial:Aa,MeshMatcapMaterial:x3,LineDashedMaterial:w3,LineBasicMaterial:Wi,Material:hi};return new t[e]}}class RS{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class k3 extends Tt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class F3 extends ir{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Po(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(g,v){if(t[v]!==void 0)return t[v];const _=g.interleavedBuffers[v],m=s(g,_.buffer),w=Yu(_.type,m),S=new w0(w,_.stride);return S.uuid=_.uuid,t[v]=S,S}function s(g,v){if(i[v]!==void 0)return i[v];const _=g.arrayBuffers[v],m=new Uint32Array(_).buffer;return i[v]=m,m}const o=e.isInstancedBufferGeometry?new k3:new Tt,a=e.data.index;if(a!==void 0){const g=Yu(a.type,a.array);o.setIndex(new Kt(g,1))}const l=e.data.attributes;for(const g in l){const v=l[g];let x;if(v.isInterleavedBufferAttribute){const _=r(e.data,v.data);x=new Cl(_,v.itemSize,v.offset,v.normalized)}else{const _=Yu(v.type,v.array),m=v.isInstancedBufferAttribute?Ec:Kt;x=new m(_,v.itemSize,v.normalized)}v.name!==void 0&&(x.name=v.name),v.usage!==void 0&&x.setUsage(v.usage),o.setAttribute(g,x)}const u=e.data.morphAttributes;if(u)for(const g in u){const v=u[g],x=[];for(let _=0,m=v.length;_<m;_++){const w=v[_];let S;if(w.isInterleavedBufferAttribute){const b=r(e.data,w.data);S=new Cl(b,w.itemSize,w.offset,w.normalized)}else{const b=Yu(w.type,w.array);S=new Kt(b,w.itemSize,w.normalized)}w.name!==void 0&&(S.name=w.name),x.push(S)}o.morphAttributes[g]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let g=0,v=d.length;g!==v;++g){const x=d[g];o.addGroup(x.start,x.count,x.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const g=new U;p.center!==void 0&&g.fromArray(p.center),o.boundingSphere=new Ri(g,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class C6 extends ir{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?RS.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Po(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const f=u.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?RS.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Po(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,i),f=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,f),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new xl().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new S0().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new F3;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in SC?a=SC[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new U0;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Zf.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return o(f)}else return l.data?{data:Yu(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new FM(t);s=new Kf(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,f=e.length;u<f;u++){const d=e[u],p=d.url;if(Array.isArray(p)){const g=[];for(let v=0,x=p.length;v<x;v++){const _=p[v],m=a(_);m!==null&&(m instanceof HTMLImageElement?g.push(m):g.push(new ya(m.data,m.width,m.height)))}r[d.uuid]=new hl(g)}else{const g=a(d.url);r[d.uuid]=new hl(g)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Yu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Kf(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const f=[];for(let d=0,p=u.length;d<p;d++){const g=u[d],v=await s(g);v!==null&&(v instanceof HTMLImageElement?f.push(v):f.push(new ya(v.data,v.width,v.height)))}i[l.uuid]=new hl(f)}else{const f=await s(l.url);i[l.uuid]=new hl(f)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let f;Array.isArray(u)?(f=new gd,u.length===6&&(f.needsUpdate=!0)):(u&&u.data?f=new ya:f=new _n,u&&(f.needsUpdate=!0)),f.source=l,f.uuid=a.uuid,a.name!==void 0&&(f.name=a.name),a.mapping!==void 0&&(f.mapping=i(a.mapping,R6)),a.channel!==void 0&&(f.channel=a.channel),a.offset!==void 0&&f.offset.fromArray(a.offset),a.repeat!==void 0&&f.repeat.fromArray(a.repeat),a.center!==void 0&&f.center.fromArray(a.center),a.rotation!==void 0&&(f.rotation=a.rotation),a.wrap!==void 0&&(f.wrapS=i(a.wrap[0],TC),f.wrapT=i(a.wrap[1],TC)),a.format!==void 0&&(f.format=a.format),a.internalFormat!==void 0&&(f.internalFormat=a.internalFormat),a.type!==void 0&&(f.type=a.type),a.colorSpace!==void 0&&(f.colorSpace=a.colorSpace),a.minFilter!==void 0&&(f.minFilter=i(a.minFilter,AC)),a.magFilter!==void 0&&(f.magFilter=i(a.magFilter,AC)),a.anisotropy!==void 0&&(f.anisotropy=a.anisotropy),a.flipY!==void 0&&(f.flipY=a.flipY),a.generateMipmaps!==void 0&&(f.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(f.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(f.compareFunction=a.compareFunction),a.userData!==void 0&&(f.userData=a.userData),r[a.uuid]=f}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const g=[];for(let v=0,x=p.length;v<x;v++){const _=p[v];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),g.push(i[_])}return g}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function u(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let f,d;switch(e.type){case"Scene":o=new av,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ze(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new x0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new _0(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Tn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new _o(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new L3(e.color,e.intensity);break;case"DirectionalLight":o=new I3(e.color,e.intensity);break;case"PointLight":o=new P3(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new N3(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new R3(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new C3(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new O3().fromJSON(e);break;case"SkinnedMesh":f=a(e.geometry),d=l(e.material),o=new JL(f,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":f=a(e.geometry),d=l(e.material),o=new Vn(f,d);break;case"InstancedMesh":f=a(e.geometry),d=l(e.material);const p=e.count,g=e.instanceMatrix,v=e.instanceColor;o=new QL(f,d,p),o.instanceMatrix=new Ec(new Float32Array(g.array),16),v!==void 0&&(o.instanceColor=new Ec(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":f=a(e.geometry),d=l(e.material),o=new e3(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=f,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(x=>{const _=new Vi;_.min.fromArray(x.boxMin),_.max.fromArray(x.boxMax);const m=new Ri;return m.radius=x.sphereRadius,m.center.fromArray(x.sphereCenter),{boxInitialized:x.boxInitialized,box:_,sphereInitialized:x.sphereInitialized,sphere:m}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid);break;case"LOD":o=new KL;break;case"Line":o=new Sa(a(e.geometry),l(e.material));break;case"LineLoop":o=new t3(a(e.geometry),l(e.material));break;case"LineSegments":o=new qs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new n3(a(e.geometry),l(e.material));break;case"Sprite":o=new ZL(l(e.material));break;case"Group":o=new Ku;break;case"Bone":o=new bM;break;default:o=new Gt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let g=0;g<p.length;g++)o.add(this.parseObject(p[g],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let g=0;g<p.length;g++){const v=p[g];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let g=0;g<p.length;g++){const v=p[g],x=o.getObjectByProperty("uuid",v.object);x!==void 0&&o.addLevel(x,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const R6={UVMapping:d0,CubeReflectionMapping:Ro,CubeRefractionMapping:wa,EquirectangularReflectionMapping:If,EquirectangularRefractionMapping:Lf,CubeUVReflectionMapping:Ic},TC={RepeatWrapping:Nf,ClampToEdgeWrapping:jr,MirroredRepeatWrapping:Df},AC={NearestFilter:ti,NearestMipmapNearestFilter:sM,NearestMipmapLinearFilter:qu,LinearFilter:An,LinearMipmapNearestFilter:af,LinearMipmapLinearFilter:Us};class P6 extends ir{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=xo.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{t&&t(u),s.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return xo.add(e,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),xo.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});xo.add(e,l),s.manager.itemStart(e)}}let bm;class zM{static getContext(){return bm===void 0&&(bm=new(window.AudioContext||window.webkitAudioContext)),bm}static setContext(e){bm=e}}class I6 extends ir{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Po(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);zM.getContext().decodeAudioData(u,function(d){t(d)}).catch(a)}catch(u){a(u)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const CC=new ht,RC=new ht,$a=new ht;class L6{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Tn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Tn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,$a.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(yl*t.fov*.5)/t.zoom;let a,l;RC.elements[12]=-r,CC.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,$a.elements[0]=2*t.near/(l-a),$a.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy($a),a=-o*t.aspect-s,l=o*t.aspect-s,$a.elements[0]=2*t.near/(l-a),$a.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy($a)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(RC),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(CC)}}class BM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=PC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=PC();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function PC(){return(typeof performance>"u"?Date:performance).now()}const qa=new U,IC=new Ci,N6=new U,Ya=new U;class D6 extends Gt{constructor(){super(),this.type="AudioListener",this.context=zM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new BM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(qa,IC,N6),Ya.set(0,0,-1).applyQuaternion(IC),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(qa.x,r),t.positionY.linearRampToValueAtTime(qa.y,r),t.positionZ.linearRampToValueAtTime(qa.z,r),t.forwardX.linearRampToValueAtTime(Ya.x,r),t.forwardY.linearRampToValueAtTime(Ya.y,r),t.forwardZ.linearRampToValueAtTime(Ya.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(qa.x,qa.y,qa.z),t.setOrientation(Ya.x,Ya.y,Ya.z,i.x,i.y,i.z)}}let U3=class extends Gt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const Za=new U,LC=new Ci,O6=new U,Ka=new U;class k6 extends U3{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Za,LC,O6),Ka.set(0,0,1).applyQuaternion(LC);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Za.x,i),t.positionY.linearRampToValueAtTime(Za.y,i),t.positionZ.linearRampToValueAtTime(Za.z,i),t.orientationX.linearRampToValueAtTime(Ka.x,i),t.orientationY.linearRampToValueAtTime(Ka.y,i),t.orientationZ.linearRampToValueAtTime(Ka.z,i)}else t.setPosition(Za.x,Za.y,Za.z),t.setOrientation(Ka.x,Ka.y,Ka.z)}}class F6{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class z3{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Ci.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Ci.multiplyQuaternionsFlat(e,o,e,t,e,i),Ci.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const VM="\\[\\]\\.:\\/",U6=new RegExp("["+VM+"]","g"),HM="[^"+VM+"]",z6="[^"+VM.replace("\\.","")+"]",B6=/((?:WC+[\/:])*)/.source.replace("WC",HM),V6=/(WCOD+)?/.source.replace("WCOD",z6),H6=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",HM),G6=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",HM),W6=new RegExp("^"+B6+V6+H6+G6+"$"),j6=["material","materials","bones","map"];class X6{constructor(e,t,i){const r=i||Ut.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Ut{constructor(e,t,i){this.path=t,this.parsedPath=i||Ut.parseTrackName(t),this.node=Ut.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Ut.Composite(e,t,i):new Ut(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(U6,"")}static parseTrackName(e){const t=W6.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);j6.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Ut.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===u){u=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ut.Composite=X6;Ut.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ut.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ut.prototype.GetterByBindingType=[Ut.prototype._getValue_direct,Ut.prototype._getValue_array,Ut.prototype._getValue_arrayElement,Ut.prototype._getValue_toArray];Ut.prototype.SetterByBindingTypeAndVersioning=[[Ut.prototype._setValue_direct,Ut.prototype._setValue_direct_setNeedsUpdate,Ut.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ut.prototype._setValue_array,Ut.prototype._setValue_array_setNeedsUpdate,Ut.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ut.prototype._setValue_arrayElement,Ut.prototype._setValue_arrayElement_setNeedsUpdate,Ut.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ut.prototype._setValue_fromArray,Ut.prototype._setValue_fromArray_setNeedsUpdate,Ut.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class $6{constructor(){this.isAnimationObjectGroup=!0,this.uuid=wr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let f=0,d=arguments.length;f!==d;++f){const p=arguments[f],g=p.uuid;let v=t[g];if(v===void 0){v=l++,t[g]=v,e.push(p);for(let x=0,_=o;x!==_;++x)s[x].push(new Ut(p,i[x],r[x]))}else if(v<u){a=e[v];const x=--u,_=e[x];t[_.uuid]=v,e[v]=_,t[g]=x,e[x]=p;for(let m=0,w=o;m!==w;++m){const S=s[m],b=S[x];let R=S[v];S[v]=b,R===void 0&&(R=new Ut(p,i[m],r[m])),S[x]=R}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,f=t[u];if(f!==void 0&&f>=s){const d=s++,p=e[d];t[p.uuid]=f,e[f]=p,t[u]=d,e[d]=l;for(let g=0,v=r;g!==v;++g){const x=i[g],_=x[d],m=x[f];x[f]=_,x[d]=m}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],f=u.uuid,d=t[f];if(d!==void 0)if(delete t[f],d<s){const p=--s,g=e[p],v=--o,x=e[v];t[g.uuid]=d,e[d]=g,t[x.uuid]=p,e[p]=x,e.pop();for(let _=0,m=r;_!==m;++_){const w=i[_],S=w[p],b=w[v];w[d]=S,w[p]=b,w.pop()}}else{const p=--o,g=e[p];p>0&&(t[g.uuid]=d),e[d]=g,e.pop();for(let v=0,x=r;v!==x;++v){const _=i[v];_[d]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,f=this.nCachedObjects_,d=new Array(u);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(d);for(let p=f,g=l.length;p!==g;++p){const v=l[p];d[p]=new Ut(v,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class B3{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:ul,endingEnd:ul};for(let u=0;u!==o;++u){const f=s[u].createInterpolant(null);a[u]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=yL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case pM:for(let f=0,d=l.length;f!==d;++f)l[f].evaluate(o),u[f].accumulateAdditive(a);break;case p0:default:for(let f=0,d=l.length;f!==d;++f)l[f].evaluate(o),u[f].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===_L;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===vL){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=cl,r.endingEnd=cl):(e?r.endingStart=this.zeroSlopeAtStart?cl:ul:r.endingStart=Ff,t?r.endingEnd=this.zeroSlopeAtEnd?cl:ul:r.endingEnd=Ff)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const q6=new Float32Array(1);class Y6 extends $s{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let f=u[l];f===void 0&&(f={},u[l]=f);for(let d=0;d!==s;++d){const p=r[d],g=p.name;let v=f[g];if(v!==void 0)++v.referenceCount,o[d]=v;else{if(v=o[d],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,g));continue}const x=t&&t._propertyBindings[d].binding.parsedPath;v=new z3(Ut.create(i,g,x),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,g),o[d]=v}a[d].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],f=e._byClipCacheIndex;u._byClipCacheIndex=f,l[f]=u,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new OM(new Float32Array(2),new Float32Array(2),1,q6),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Zf.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(i===void 0&&(o!==null?i=o.blendMode:i=p0),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const f=new B3(this,o,t,i);return this._bindAction(f,u),this._addInactiveAction(f,a,s),f}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Zf.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const f=u._cacheIndex,d=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=f,t[f]=d,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class GM{constructor(e){this.value=e}clone(){return new GM(this.value.clone===void 0?this.value:this.value.clone())}}let Z6=0;class K6 extends $s{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Z6++}),this.name="",this.usage=Vf,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class J6 extends w0{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Q6{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const NC=new ht;class V3{constructor(e,t,i=0,r=1/0){this.ray=new Dl(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new _l,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return NC.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(NC),this}intersectObject(e,t=!0,i=[]){return PS(e,this,i,t),i.sort(DC),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)PS(e[r],this,i,t);return i.sort(DC),i}}function DC(n,e){return n.distance-e.distance}function PS(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)PS(r[s],e,t,!0)}}class IS{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(bn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class eG{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const OC=new ve;class tG{constructor(e=new ve(1/0,1/0),t=new ve(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=OC.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,OC).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const kC=new U,Tm=new U;class nG{constructor(e=new U,t=new U){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){kC.subVectors(e,this.start),Tm.subVectors(this.end,this.start);const i=Tm.dot(Tm);let s=Tm.dot(kC)/i;return t&&(s=bn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const FC=new U;class iG extends Gt{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Tt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,f=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(f),Math.sin(f),1)}i.setAttribute("position",new je(r,3));const s=new Wi({fog:!1,toneMapped:!1});this.cone=new qs(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),FC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(FC),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ta=new U,Am=new ht,Ax=new ht;class rG extends qs{constructor(e){const t=H3(e),i=new Tt,r=[],s=[],o=new ze(0,0,1),a=new ze(0,1,0);for(let u=0;u<t.length;u++){const f=t[u];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new je(r,3)),i.setAttribute("color",new je(s,3));const l=new Wi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Ax.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Am.multiplyMatrices(Ax,a.matrixWorld),ta.setFromMatrixPosition(Am),r.setXYZ(o,ta.x,ta.y,ta.z),Am.multiplyMatrices(Ax,a.parent.matrixWorld),ta.setFromMatrixPosition(Am),r.setXYZ(o+1,ta.x,ta.y,ta.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function H3(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,H3(n.children[t]));return e}class sG extends Vn{constructor(e,t,i){const r=new xd(t,4,2),s=new Aa({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const oG=new U,UC=new ze,zC=new ze;class aG extends Gt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new _d(t);r.rotateY(Math.PI*.5),this.material=new Aa({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Kt(o,3)),this.add(new Vn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");UC.copy(this.light.color),zC.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?UC:zC;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(oG.setFromMatrixPosition(this.light.matrixWorld).negate())}}class lG extends qs{constructor(e=10,t=10,i=4473924,r=8947848){i=new ze(i),r=new ze(r);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let p=0,g=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const x=p===s?i:r;x.toArray(u,g),g+=3,x.toArray(u,g),g+=3,x.toArray(u,g),g+=3,x.toArray(u,g),g+=3}const f=new Tt;f.setAttribute("position",new je(l,3)),f.setAttribute("color",new je(u,3));const d=new Wi({vertexColors:!0,toneMapped:!1});super(f,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class uG extends qs{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new ze(s),o=new ze(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),g=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(g,0,v);const x=d&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let d=0;d<i;d++){const p=d&1?s:o,g=e-e/i*d;for(let v=0;v<r;v++){let x=v/r*(Math.PI*2),_=Math.sin(x)*g,m=Math.cos(x)*g;a.push(_,0,m),l.push(p.r,p.g,p.b),x=(v+1)/r*(Math.PI*2),_=Math.sin(x)*g,m=Math.cos(x)*g,a.push(_,0,m),l.push(p.r,p.g,p.b)}}const u=new Tt;u.setAttribute("position",new je(a,3)),u.setAttribute("color",new je(l,3));const f=new Wi({vertexColors:!0,toneMapped:!1});super(u,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const BC=new U,Cm=new U,VC=new U;class cG extends Gt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Tt;r.setAttribute("position",new je([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Wi({fog:!1,toneMapped:!1});this.lightPlane=new Sa(r,s),this.add(this.lightPlane),r=new Tt,r.setAttribute("position",new je([0,0,0,0,0,1],3)),this.targetLine=new Sa(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),BC.setFromMatrixPosition(this.light.matrixWorld),Cm.setFromMatrixPosition(this.light.target.matrixWorld),VC.subVectors(Cm,BC),this.lightPlane.lookAt(Cm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Cm),this.targetLine.scale.z=VC.length()}}const Rm=new U,Sn=new md;class hG extends qs{constructor(e){const t=new Tt,i=new Wi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,x){l(v),l(x)}function l(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute("position",new je(r,3)),t.setAttribute("color",new je(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new ze(16755200),f=new ze(16711680),d=new ze(43775),p=new ze(16777215),g=new ze(3355443);this.setColors(u,f,d,p,g)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Sn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Pn("c",t,e,Sn,0,0,-1),Pn("t",t,e,Sn,0,0,1),Pn("n1",t,e,Sn,-i,-r,-1),Pn("n2",t,e,Sn,i,-r,-1),Pn("n3",t,e,Sn,-i,r,-1),Pn("n4",t,e,Sn,i,r,-1),Pn("f1",t,e,Sn,-i,-r,1),Pn("f2",t,e,Sn,i,-r,1),Pn("f3",t,e,Sn,-i,r,1),Pn("f4",t,e,Sn,i,r,1),Pn("u1",t,e,Sn,i*.7,r*1.1,-1),Pn("u2",t,e,Sn,-i*.7,r*1.1,-1),Pn("u3",t,e,Sn,0,r*2,-1),Pn("cf1",t,e,Sn,-i,0,1),Pn("cf2",t,e,Sn,i,0,1),Pn("cf3",t,e,Sn,0,-r,1),Pn("cf4",t,e,Sn,0,r,1),Pn("cn1",t,e,Sn,-i,0,-1),Pn("cn2",t,e,Sn,i,0,-1),Pn("cn3",t,e,Sn,0,-r,-1),Pn("cn4",t,e,Sn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Pn(n,e,t,i,r,s,o){Rm.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,f=a.length;u<f;u++)l.setXYZ(a[u],Rm.x,Rm.y,Rm.z)}}const Pm=new Vi;class fG extends qs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Tt;s.setIndex(new Kt(i,1)),s.setAttribute("position",new Kt(r,3)),super(s,new Wi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Pm.setFromObject(this.object),Pm.isEmpty())return;const t=Pm.min,i=Pm.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class dG extends qs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Tt;s.setIndex(new Kt(i,1)),s.setAttribute("position",new je(r,3)),super(s,new Wi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class pG extends Sa{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Tt;o.setAttribute("position",new je(s,3)),o.computeBoundingSphere(),super(o,new Wi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Tt;l.setAttribute("position",new je(a,3)),l.computeBoundingSphere(),this.add(new Vn(l,new Aa({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const HC=new U;let Im,Cx;class mG extends Gt{constructor(e=new U(0,0,1),t=new U(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Im===void 0&&(Im=new Tt,Im.setAttribute("position",new je([0,0,0,0,1,0],3)),Cx=new kc(0,.5,1,5,1),Cx.translate(0,-.5,0)),this.position.copy(t),this.line=new Sa(Im,new Wi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Vn(Cx,new Aa({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{HC.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(HC,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class gG extends qs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Tt;r.setAttribute("position",new je(t,3)),r.setAttribute("color",new je(i,3));const s=new Wi({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new ze,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class vG{constructor(){this.type="ShapePath",this.color=new ze,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Wf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(m){const w=[];for(let S=0,b=m.length;S<b;S++){const R=m[S],A=new xl;A.curves=R.curves,w.push(A)}return w}function i(m,w){const S=w.length;let b=!1;for(let R=S-1,A=0;A<S;R=A++){let C=w[R],L=w[A],I=L.x-C.x,E=L.y-C.y;if(Math.abs(E)>Number.EPSILON){if(E<0&&(C=w[A],I=-I,L=w[R],E=-E),m.y<C.y||m.y>L.y)continue;if(m.y===C.y){if(m.x===C.x)return!0}else{const N=E*(m.x-C.x)-I*(m.y-C.y);if(N===0)return!0;if(N<0)continue;b=!b}}else{if(m.y!==C.y)continue;if(L.x<=m.x&&m.x<=C.x||C.x<=m.x&&m.x<=L.x)return!0}}return b}const r=Ws.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new xl,l.curves=a.curves,u.push(l),u;let f=!r(s[0].getPoints());f=e?!f:f;const d=[],p=[];let g=[],v=0,x;p[v]=void 0,g[v]=[];for(let m=0,w=s.length;m<w;m++)a=s[m],x=a.getPoints(),o=r(x),o=e?!o:o,o?(!f&&p[v]&&v++,p[v]={s:new xl,p:x},p[v].s.curves=a.curves,f&&v++,g[v]=[]):g[v].push({h:a,p:x[0]});if(!p[0])return t(s);if(p.length>1){let m=!1,w=0;for(let S=0,b=p.length;S<b;S++)d[S]=[];for(let S=0,b=p.length;S<b;S++){const R=g[S];for(let A=0;A<R.length;A++){const C=R[A];let L=!0;for(let I=0;I<p.length;I++)i(C.p,p[I].p)&&(S!==I&&w++,L?(L=!1,d[I].push(C)):m=!0);L&&d[S].push(C)}}w>0&&m===!1&&(g=d)}let _;for(let m=0,w=p.length;m<w;m++){l=p[m].s,u.push(l),_=g[m];for(let S=0,b=_.length;S<b;S++)l.holes.push(_[S].h)}return u}}class yG extends Yr{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:fd}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=fd);const _G=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:rM,AddEquation:aa,AddOperation:eL,AdditiveAnimationBlendMode:pM,AdditiveBlending:jw,AgXToneMapping:sL,AlphaFormat:hL,AlwaysCompare:RL,AlwaysDepth:$I,AlwaysStencilFunc:wS,AmbientLight:L3,AnimationAction:B3,AnimationClip:Zf,AnimationLoader:x6,AnimationMixer:Y6,AnimationObjectGroup:$6,AnimationUtils:g6,ArcCurve:i3,ArrayCamera:$L,ArrowHelper:mG,AttachedBindMode:qw,Audio:U3,AudioAnalyser:F6,AudioContext:zM,AudioListener:D6,AudioLoader:I6,AxesHelper:gG,BackSide:Ai,BasicDepthPacking:xL,BasicShadowMap:AI,BatchedMesh:e3,Bone:bM,BooleanKeyframeTrack:kl,Box2:tG,Box3:Vi,Box3Helper:dG,BoxGeometry:Ol,BoxHelper:fG,BufferAttribute:Kt,BufferGeometry:Tt,BufferGeometryLoader:F3,ByteType:lL,Cache:xo,Camera:md,CameraHelper:hG,CanvasTexture:BH,CapsuleGeometry:b0,CatmullRomCurve3:r3,CineonToneMapping:iL,CircleGeometry:T0,ClampToEdgeWrapping:jr,Clock:BM,Color:ze,ColorKeyframeTrack:kM,ColorManagement:qt,CompressedArrayTexture:UH,CompressedCubeTexture:zH,CompressedTexture:M0,CompressedTextureLoader:w6,ConeGeometry:A0,ConstantAlphaFactor:WI,ConstantColorFactor:HI,CubeCamera:UL,CubeReflectionMapping:Ro,CubeRefractionMapping:wa,CubeTexture:gd,CubeTextureLoader:S6,CubeUVReflectionMapping:Ic,CubicBezierCurve:CM,CubicBezierCurve3:s3,CubicInterpolant:E3,CullFaceBack:Ww,CullFaceFront:TI,CullFaceFrontBack:CU,CullFaceNone:bI,Curve:_s,CurvePath:a3,CustomBlending:CI,CustomToneMapping:rL,CylinderGeometry:kc,Cylindrical:eG,Data3DTexture:vM,DataArrayTexture:g0,DataTexture:ya,DataTextureLoader:M6,DataUtils:kz,DecrementStencilOp:zU,DecrementWrapStencilOp:VU,DefaultLoadingManager:A3,DepthFormat:vl,DepthStencilFormat:wc,DepthTexture:v0,DetachedBindMode:aL,DirectionalLight:I3,DirectionalLightHelper:cG,DiscreteInterpolant:b3,DisplayP3ColorSpace:m0,DodecahedronGeometry:C0,DoubleSide:Fs,DstAlphaFactor:FI,DstColorFactor:zI,DynamicCopyUsage:nz,DynamicDrawUsage:ZU,DynamicReadUsage:QU,EdgesGeometry:l3,EllipseCurve:E0,EqualCompare:bL,EqualDepth:YI,EqualStencilFunc:jU,EquirectangularReflectionMapping:If,EquirectangularRefractionMapping:Lf,Euler:Er,EventDispatcher:$s,ExtrudeGeometry:P0,FileLoader:Po,Float16BufferAttribute:Hz,Float32BufferAttribute:je,FloatType:yr,Fog:x0,FogExp2:_0,FramebufferTexture:FH,FrontSide:Co,Frustum:vd,GLBufferAttribute:Q6,GLSL1:rz,GLSL3:SS,GreaterCompare:TL,GreaterDepth:KI,GreaterEqualCompare:CL,GreaterEqualDepth:ZI,GreaterEqualStencilFunc:YU,GreaterStencilFunc:$U,GridHelper:lG,Group:Ku,HalfFloatType:Lc,HemisphereLight:C3,HemisphereLightHelper:aG,IcosahedronGeometry:I0,ImageBitmapLoader:P6,ImageLoader:Kf,ImageUtils:DL,IncrementStencilOp:UU,IncrementWrapStencilOp:BU,InstancedBufferAttribute:Ec,InstancedBufferGeometry:k3,InstancedInterleavedBuffer:J6,InstancedMesh:QL,Int16BufferAttribute:Bz,Int32BufferAttribute:Vz,Int8BufferAttribute:Fz,IntType:aM,InterleavedBuffer:w0,InterleavedBufferAttribute:Cl,Interpolant:wd,InterpolateDiscrete:Of,InterpolateLinear:kf,InterpolateSmooth:fg,InvertStencilOp:HU,KeepStencilOp:nl,KeyframeTrack:xs,LOD:KL,LatheGeometry:yd,Layers:_l,LessCompare:EL,LessDepth:qI,LessEqualCompare:mM,LessEqualDepth:Pf,LessEqualStencilFunc:XU,LessStencilFunc:WU,Light:Ra,LightProbe:O3,Line:Sa,Line3:nG,LineBasicMaterial:Wi,LineCurve:RM,LineCurve3:o3,LineDashedMaterial:w3,LineLoop:t3,LineSegments:qs,LinearDisplayP3ColorSpace:pd,LinearFilter:An,LinearInterpolant:OM,LinearMipMapLinearFilter:LU,LinearMipMapNearestFilter:IU,LinearMipmapLinearFilter:Us,LinearMipmapNearestFilter:af,LinearSRGBColorSpace:No,LinearToneMapping:tL,LinearTransfer:Uf,Loader:ir,LoaderUtils:RS,LoadingManager:FM,LoopOnce:vL,LoopPingPong:_L,LoopRepeat:yL,LuminanceAlphaFormat:pL,LuminanceFormat:dL,MOUSE:el,Material:hi,MaterialLoader:U0,MathUtils:PL,Matrix3:wt,Matrix4:ht,MaxEquation:LI,Mesh:Vn,MeshBasicMaterial:Aa,MeshDepthMaterial:SM,MeshDistanceMaterial:MM,MeshLambertMaterial:_3,MeshMatcapMaterial:x3,MeshNormalMaterial:y3,MeshPhongMaterial:g3,MeshPhysicalMaterial:m3,MeshStandardMaterial:NM,MeshToonMaterial:v3,MinEquation:II,MirroredRepeatWrapping:Df,MixOperation:QI,MultiplyBlending:$w,MultiplyOperation:dd,NearestFilter:ti,NearestMipMapLinearFilter:PU,NearestMipMapNearestFilter:RU,NearestMipmapLinearFilter:qu,NearestMipmapNearestFilter:sM,NeutralToneMapping:oL,NeverCompare:ML,NeverDepth:XI,NeverStencilFunc:GU,NoBlending:So,NoColorSpace:mo,NoToneMapping:Gs,NormalAnimationBlendMode:p0,NormalBlending:gl,NotEqualCompare:AL,NotEqualDepth:JI,NotEqualStencilFunc:qU,NumberKeyframeTrack:qf,Object3D:Gt,ObjectLoader:C6,ObjectSpaceNormalMap:SL,OctahedronGeometry:_d,OneFactor:DI,OneMinusConstantAlphaFactor:jI,OneMinusConstantColorFactor:GI,OneMinusDstAlphaFactor:UI,OneMinusDstColorFactor:BI,OneMinusSrcAlphaFactor:ov,OneMinusSrcColorFactor:kI,OrthographicCamera:_o,P3Primaries:Bf,PCFShadowMap:f0,PCFSoftShadowMap:of,PMREMGenerator:MS,Path:Wf,PerspectiveCamera:Tn,Plane:Ns,PlaneGeometry:Dc,PlaneHelper:pG,PointLight:P3,PointLightHelper:sG,Points:n3,PointsMaterial:TM,PolarGridHelper:uG,PolyhedronGeometry:Ca,PositionalAudio:k6,PropertyBinding:Ut,PropertyMixer:z3,QuadraticBezierCurve:PM,QuadraticBezierCurve3:IM,Quaternion:Ci,QuaternionKeyframeTrack:Fc,QuaternionLinearInterpolant:T3,RED_GREEN_RGTC2_Format:_S,RED_RGTC1_Format:gL,REVISION:fd,RGBADepthPacking:wL,RGBAFormat:Ji,RGBAIntegerFormat:dM,RGBA_ASTC_10x10_Format:dS,RGBA_ASTC_10x5_Format:cS,RGBA_ASTC_10x6_Format:hS,RGBA_ASTC_10x8_Format:fS,RGBA_ASTC_12x10_Format:pS,RGBA_ASTC_12x12_Format:mS,RGBA_ASTC_4x4_Format:nS,RGBA_ASTC_5x4_Format:iS,RGBA_ASTC_5x5_Format:rS,RGBA_ASTC_6x5_Format:sS,RGBA_ASTC_6x6_Format:oS,RGBA_ASTC_8x5_Format:aS,RGBA_ASTC_8x6_Format:lS,RGBA_ASTC_8x8_Format:uS,RGBA_BPTC_Format:hg,RGBA_ETC2_EAC_Format:tS,RGBA_PVRTC_2BPPV1_Format:Jw,RGBA_PVRTC_4BPPV1_Format:Kw,RGBA_S3TC_DXT1_Format:lg,RGBA_S3TC_DXT3_Format:ug,RGBA_S3TC_DXT5_Format:cg,RGBFormat:fL,RGB_BPTC_SIGNED_Format:gS,RGB_BPTC_UNSIGNED_Format:vS,RGB_ETC1_Format:Qw,RGB_ETC2_Format:eS,RGB_PVRTC_2BPPV1_Format:Zw,RGB_PVRTC_4BPPV1_Format:Yw,RGB_S3TC_DXT1_Format:ag,RGFormat:mL,RGIntegerFormat:fM,RawShaderMaterial:p3,Ray:Dl,Raycaster:V3,Rec709Primaries:zf,RectAreaLight:N3,RedFormat:cM,RedIntegerFormat:hM,ReinhardToneMapping:nL,RenderTarget:OL,RepeatWrapping:Nf,ReplaceStencilOp:FU,ReverseSubtractEquation:PI,RingGeometry:L0,SIGNED_RED_GREEN_RGTC2_Format:xS,SIGNED_RED_RGTC1_Format:yS,SRGBColorSpace:Vr,SRGBTransfer:nn,Scene:av,ShaderChunk:bt,ShaderLib:ps,ShaderMaterial:Zr,ShadowMaterial:d3,Shape:xl,ShapeGeometry:N0,ShapePath:vG,ShapeUtils:Ws,ShortType:uL,Skeleton:S0,SkeletonHelper:rG,SkinnedMesh:JL,Source:hl,Sphere:Ri,SphereGeometry:xd,Spherical:IS,SphericalHarmonics3:D3,SplineCurve:LM,SpotLight:R3,SpotLightHelper:iG,Sprite:ZL,SpriteMaterial:EM,SrcAlphaFactor:sv,SrcAlphaSaturateFactor:VI,SrcColorFactor:OI,StaticCopyUsage:tz,StaticDrawUsage:Vf,StaticReadUsage:JU,StereoCamera:L6,StreamCopyUsage:iz,StreamDrawUsage:KU,StreamReadUsage:ez,StringKeyframeTrack:Fl,SubtractEquation:RI,SubtractiveBlending:Xw,TOUCH:tl,TangentSpaceNormalMap:Ta,TetrahedronGeometry:D0,Texture:_n,TextureLoader:E6,TorusGeometry:O0,TorusKnotGeometry:k0,Triangle:gr,TriangleFanDrawMode:OU,TriangleStripDrawMode:DU,TrianglesDrawMode:NU,TubeGeometry:F0,UVMapping:d0,Uint16BufferAttribute:yM,Uint32BufferAttribute:_M,Uint8BufferAttribute:Uz,Uint8ClampedBufferAttribute:zz,Uniform:GM,UniformsGroup:K6,UniformsLib:De,UniformsUtils:xM,UnsignedByteType:Xs,UnsignedInt248Type:Nc,UnsignedInt5999Type:cL,UnsignedIntType:Al,UnsignedShort4444Type:lM,UnsignedShort5551Type:uM,UnsignedShortType:oM,VSMShadowMap:cs,Vector2:ve,Vector3:U,Vector4:Yt,VectorKeyframeTrack:Yf,VideoTexture:kH,WebGL3DRenderTarget:Tz,WebGLArrayRenderTarget:bz,WebGLCoordinateSystem:zs,WebGLCubeRenderTarget:zL,WebGLMultipleRenderTargets:yG,WebGLRenderTarget:Yr,WebGLRenderer:qL,WebGLUtils:XL,WebGPUCoordinateSystem:Hf,WireframeGeometry:f3,WrapAroundEnding:Ff,ZeroCurvatureEnding:ul,ZeroFactor:NI,ZeroSlopeEnding:cl,ZeroStencilOp:kU,createCanvasElement:LL},Symbol.toStringTag,{value:"Module"}));var G3={exports:{}},Ul={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Ul.ConcurrentRoot=1;Ul.ContinuousEventPriority=4;Ul.DefaultEventPriority=16;Ul.DiscreteEventPriority=1;Ul.IdleEventPriority=536870912;Ul.LegacyRoot=0;G3.exports=Ul;var Qu=G3.exports;function xG(n){let e;const t=new Set,i=(u,f)=>{const d=typeof u=="function"?u(e):u;if(d!==e){const p=e;e=f?d:Object.assign({},e,d),t.forEach(g=>g(e,p))}},r=()=>e,s=(u,f=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=f(e);function g(){const v=f(e);if(!d(p,v)){const x=p;u(p=v,x)}}return t.add(g),()=>t.delete(g)},l={setState:i,getState:r,subscribe:(u,f,d)=>f||d?s(u,f,d):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,r,l),l}const wG=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),GC=wG?Y.useEffect:Y.useLayoutEffect;function SG(n){const e=typeof n=="function"?xG(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=Y.useReducer(_=>_+1,0),o=e.getState(),a=Y.useRef(o),l=Y.useRef(i),u=Y.useRef(r),f=Y.useRef(!1),d=Y.useRef();d.current===void 0&&(d.current=i(o));let p,g=!1;(a.current!==o||l.current!==i||u.current!==r||f.current)&&(p=i(o),g=!r(d.current,p)),GC(()=>{g&&(d.current=p),a.current=o,l.current=i,u.current=r,f.current=!1});const v=Y.useRef(o);GC(()=>{const _=()=>{try{const w=e.getState(),S=l.current(w);u.current(d.current,S)||(a.current=w,d.current=S,s())}catch{f.current=!0,s()}},m=e.subscribe(_);return e.getState()!==v.current&&_(),m},[]);const x=g?p:d.current;return Y.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var W3={exports:{}},j3={exports:{}},X3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(k,W){var G=k.length;k.push(W);e:for(;0<G;){var ne=G-1>>>1,me=k[ne];if(0<r(me,W))k[ne]=W,k[G]=me,G=ne;else break e}}function t(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var W=k[0],G=k.pop();if(G!==W){k[0]=G;e:for(var ne=0,me=k.length,_e=me>>>1;ne<_e;){var J=2*(ne+1)-1,pe=k[J],Me=J+1,de=k[Me];if(0>r(pe,G))Me<me&&0>r(de,pe)?(k[ne]=de,k[Me]=G,ne=Me):(k[ne]=pe,k[J]=G,ne=J);else if(Me<me&&0>r(de,G))k[ne]=de,k[Me]=G,ne=Me;else break e}}return W}function r(k,W){var G=k.sortIndex-W.sortIndex;return G!==0?G:k.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,d=null,p=3,g=!1,v=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(k){for(var W=t(u);W!==null;){if(W.callback===null)i(u);else if(W.startTime<=k)i(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(u)}}function b(k){if(x=!1,S(k),!v)if(t(l)!==null)v=!0,Q(R);else{var W=t(u);W!==null&&oe(b,W.startTime-k)}}function R(k,W){v=!1,x&&(x=!1,m(L),L=-1),g=!0;var G=p;try{for(S(W),d=t(l);d!==null&&(!(d.expirationTime>W)||k&&!N());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,p=d.priorityLevel;var me=ne(d.expirationTime<=W);W=n.unstable_now(),typeof me=="function"?d.callback=me:d===t(l)&&i(l),S(W)}else i(l);d=t(l)}if(d!==null)var _e=!0;else{var J=t(u);J!==null&&oe(b,J.startTime-W),_e=!1}return _e}finally{d=null,p=G,g=!1}}var A=!1,C=null,L=-1,I=5,E=-1;function N(){return!(n.unstable_now()-E<I)}function z(){if(C!==null){var k=n.unstable_now();E=k;var W=!0;try{W=C(!0,k)}finally{W?O():(A=!1,C=null)}}else A=!1}var O;if(typeof w=="function")O=function(){w(z)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,j=q.port2;q.port1.onmessage=z,O=function(){j.postMessage(null)}}else O=function(){_(z,0)};function Q(k){C=k,A||(A=!0,O())}function oe(k,W){L=_(function(){k(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){v||g||(v=!0,Q(R))},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(k){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var G=p;p=W;try{return k()}finally{p=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,W){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var G=p;p=k;try{return W()}finally{p=G}},n.unstable_scheduleCallback=function(k,W,G){var ne=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ne+G:ne):G=ne,k){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=G+me,k={id:f++,callback:W,priorityLevel:k,startTime:G,expirationTime:me,sortIndex:-1},G>ne?(k.sortIndex=G,e(u,k),t(l)===null&&k===t(u)&&(x?(m(L),L=-1):x=!0,oe(b,G-ne))):(k.sortIndex=me,e(l,k),v||g||(v=!0,Q(R))),k},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(k){var W=p;return function(){var G=p;p=W;try{return k.apply(this,arguments)}finally{p=G}}}})(X3);j3.exports=X3;var LS=j3.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MG=function(e){var t={},i=Y,r=LS,s=Object.assign;function o(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,y=1;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),v=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),R=Symbol.iterator;function A(c){return c===null||typeof c!="object"?null:(c=R&&c[R]||c["@@iterator"],typeof c=="function"?c:null)}function C(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case f:return"Fragment";case u:return"Portal";case p:return"Profiler";case d:return"StrictMode";case _:return"Suspense";case m:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case v:return(c.displayName||"Context")+".Consumer";case g:return(c._context.displayName||"Context")+".Provider";case x:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case w:return h=c.displayName||null,h!==null?h:C(c.type)||"Memo";case S:h=c._payload,c=c._init;try{return C(c(h))}catch{}}return null}function L(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C(h);case 8:return h===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function I(c){var h=c,y=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,h.flags&4098&&(y=h.return),c=h.return;while(c)}return h.tag===3?y:null}function E(c){if(I(c)!==c)throw Error(o(188))}function N(c){var h=c.alternate;if(!h){if(h=I(c),h===null)throw Error(o(188));return h!==c?null:c}for(var y=c,M=h;;){var T=y.return;if(T===null)break;var P=T.alternate;if(P===null){if(M=T.return,M!==null){y=M;continue}break}if(T.child===P.child){for(P=T.child;P;){if(P===y)return E(T),c;if(P===M)return E(T),h;P=P.sibling}throw Error(o(188))}if(y.return!==M.return)y=T,M=P;else{for(var B=!1,$=T.child;$;){if($===y){B=!0,y=T,M=P;break}if($===M){B=!0,M=T,y=P;break}$=$.sibling}if(!B){for($=P.child;$;){if($===y){B=!0,y=P,M=T;break}if($===M){B=!0,M=P,y=T;break}$=$.sibling}if(!B)throw Error(o(189))}}if(y.alternate!==M)throw Error(o(190))}if(y.tag!==3)throw Error(o(188));return y.stateNode.current===y?c:h}function z(c){return c=N(c),c!==null?O(c):null}function O(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=O(c);if(h!==null)return h;c=c.sibling}return null}function q(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var h=q(c);if(h!==null)return h}c=c.sibling}return null}var j=Array.isArray,Q=e.getPublicInstance,oe=e.getRootHostContext,k=e.getChildHostContext,W=e.prepareForCommit,G=e.resetAfterCommit,ne=e.createInstance,me=e.appendInitialChild,_e=e.finalizeInitialChildren,J=e.prepareUpdate,pe=e.shouldSetTextContent,Me=e.createTextInstance,de=e.scheduleTimeout,Qe=e.cancelTimeout,lt=e.noTimeout,K=e.isPrimaryRenderer,tt=e.supportsMutation,he=e.supportsPersistence,we=e.supportsHydration,ye=e.getInstanceFromNode,Ce=e.preparePortalMount,be=e.getCurrentEventPriority,Be=e.detachDeletedInstance,Ke=e.supportsMicrotasks,V=e.scheduleMicrotask,D=e.supportsTestSelectors,te=e.findFiberRoot,xe=e.getBoundingRect,Ee=e.getTextContent,Se=e.isHiddenSubtree,qe=e.matchAccessibilityRole,Le=e.setFocusIfFocusable,Ie=e.setupIntersectionObserver,ft=e.appendChild,Re=e.appendChildToContainer,$e=e.commitTextUpdate,Mt=e.commitMount,it=e.commitUpdate,Ve=e.insertBefore,pt=e.insertInContainerBefore,Et=e.removeChild,X=e.removeChildFromContainer,ge=e.resetTextContent,H=e.hideInstance,ue=e.hideTextInstance,ce=e.unhideInstance,Pe=e.unhideTextInstance,Ne=e.clearContainer,Dt=e.cloneInstance,Wt=e.createContainerChildSet,Ot=e.appendChildToContainerChildSet,Qt=e.finalizeContainerChildren,Rt=e.replaceContainerChildren,Gn=e.cloneHiddenInstance,an=e.cloneHiddenTextInstance,Zs=e.canHydrateInstance,Td=e.canHydrateTextInstance,Ad=e.canHydrateSuspenseInstance,Pa=e.isSuspenseInstancePending,Bl=e.isSuspenseInstanceFallback,Vl=e.registerSuspenseInstanceRetry,Fo=e.getNextHydratableSibling,Cd=e.getFirstHydratableChild,ly=e.getFirstHydratableChildWithinContainer,uy=e.getFirstHydratableChildWithinSuspenseInstance,cy=e.hydrateInstance,F=e.hydrateTextInstance,ee=e.hydrateSuspenseInstance,ae=e.getNextHydratableInstanceAfterSuspenseInstance,re=e.commitHydratedContainer,se=e.commitHydratedSuspenseInstance,ke=e.clearSuspenseBoundary,Xe=e.clearSuspenseBoundaryFromContainer,Ye=e.shouldDeleteUnhydratedTailInstances,ut=e.didNotMatchHydratedContainerTextInstance,mt=e.didNotMatchHydratedTextInstance,gt;function vt(c){if(gt===void 0)try{throw Error()}catch(y){var h=y.stack.trim().match(/\n( *(at )?)/);gt=h&&h[1]||""}return`
`+gt+c}var ln=!1;function Dn(c,h){if(!c||ln)return"";ln=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Ae){var M=Ae}Reflect.construct(c,[],h)}else{try{h.call()}catch(Ae){M=Ae}c.call(h.prototype)}else{try{throw Error()}catch(Ae){M=Ae}c()}}catch(Ae){if(Ae&&M&&typeof Ae.stack=="string"){for(var T=Ae.stack.split(`
`),P=M.stack.split(`
`),B=T.length-1,$=P.length-1;1<=B&&0<=$&&T[B]!==P[$];)$--;for(;1<=B&&0<=$;B--,$--)if(T[B]!==P[$]){if(B!==1||$!==1)do if(B--,$--,0>$||T[B]!==P[$]){var fe=`
`+T[B].replace(" at new "," at ");return c.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",c.displayName)),fe}while(1<=B&&0<=$);break}}}finally{ln=!1,Error.prepareStackTrace=y}return(c=c?c.displayName||c.name:"")?vt(c):""}var Ii=Object.prototype.hasOwnProperty,sr=[],Pt=-1;function ot(c){return{current:c}}function jt(c){0>Pt||(c.current=sr[Pt],sr[Pt]=null,Pt--)}function at(c,h){Pt++,sr[Pt]=c.current,c.current=h}var fi={},Wn=ot(fi),On=ot(!1),Kr=fi;function fn(c,h){var y=c.type.contextTypes;if(!y)return fi;var M=c.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===h)return M.__reactInternalMemoizedMaskedChildContext;var T={},P;for(P in y)T[P]=h[P];return M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=T),T}function dn(c){return c=c.childContextTypes,c!=null}function Uo(){jt(On),jt(Wn)}function Li(c,h,y){if(Wn.current!==fi)throw Error(o(168));at(Wn,h),at(On,y)}function Hl(c,h,y){var M=c.stateNode;if(h=h.childContextTypes,typeof M.getChildContext!="function")return y;M=M.getChildContext();for(var T in M)if(!(T in h))throw Error(o(108,L(c)||"Unknown",T));return s({},y,M)}function Gl(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||fi,Kr=Wn.current,at(Wn,c),at(On,On.current),!0}function Hc(c,h,y){var M=c.stateNode;if(!M)throw Error(o(169));y?(c=Hl(c,h,Kr),M.__reactInternalMemoizedMergedChildContext=c,jt(On),jt(Wn),at(Wn,c)):jt(On),at(On,y)}var Jr=Math.clz32?Math.clz32:hO,uO=Math.log,cO=Math.LN2;function hO(c){return c>>>=0,c===0?32:31-(uO(c)/cO|0)|0}var Rd=64,Pd=4194304;function Gc(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Id(c,h){var y=c.pendingLanes;if(y===0)return 0;var M=0,T=c.suspendedLanes,P=c.pingedLanes,B=y&268435455;if(B!==0){var $=B&~T;$!==0?M=Gc($):(P&=B,P!==0&&(M=Gc(P)))}else B=y&~T,B!==0?M=Gc(B):P!==0&&(M=Gc(P));if(M===0)return 0;if(h!==0&&h!==M&&!(h&T)&&(T=M&-M,P=h&-h,T>=P||T===16&&(P&4194240)!==0))return h;if(M&4&&(M|=y&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=M;0<h;)y=31-Jr(h),T=1<<y,M|=c[y],h&=~T;return M}function fO(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dO(c,h){for(var y=c.suspendedLanes,M=c.pingedLanes,T=c.expirationTimes,P=c.pendingLanes;0<P;){var B=31-Jr(P),$=1<<B,fe=T[B];fe===-1?(!($&y)||$&M)&&(T[B]=fO($,h)):fe<=h&&(c.expiredLanes|=$),P&=~$}}function hy(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function fy(c){for(var h=[],y=0;31>y;y++)h.push(c);return h}function Wc(c,h,y){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-Jr(h),c[h]=y}function pO(c,h){var y=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var M=c.eventTimes;for(c=c.expirationTimes;0<y;){var T=31-Jr(y),P=1<<T;h[T]=0,M[T]=-1,c[T]=-1,y&=~P}}function dy(c,h){var y=c.entangledLanes|=h;for(c=c.entanglements;y;){var M=31-Jr(y),T=1<<M;T&h|c[M]&h&&(c[M]|=h),y&=~T}}var Bt=0;function EE(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var py=r.unstable_scheduleCallback,bE=r.unstable_cancelCallback,mO=r.unstable_shouldYield,gO=r.unstable_requestPaint,Zn=r.unstable_now,my=r.unstable_ImmediatePriority,vO=r.unstable_UserBlockingPriority,gy=r.unstable_NormalPriority,yO=r.unstable_IdlePriority,Ld=null,Ss=null;function _O(c){if(Ss&&typeof Ss.onCommitFiberRoot=="function")try{Ss.onCommitFiberRoot(Ld,c,void 0,(c.current.flags&128)===128)}catch{}}function xO(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var Ms=typeof Object.is=="function"?Object.is:xO,Ks=null,Nd=!1,vy=!1;function TE(c){Ks===null?Ks=[c]:Ks.push(c)}function wO(c){Nd=!0,TE(c)}function Es(){if(!vy&&Ks!==null){vy=!0;var c=0,h=Bt;try{var y=Ks;for(Bt=1;c<y.length;c++){var M=y[c];do M=M(!0);while(M!==null)}Ks=null,Nd=!1}catch(T){throw Ks!==null&&(Ks=Ks.slice(c+1)),py(my,Es),T}finally{Bt=h,vy=!1}}return null}var SO=a.ReactCurrentBatchConfig;function Dd(c,h){if(Ms(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var y=Object.keys(c),M=Object.keys(h);if(y.length!==M.length)return!1;for(M=0;M<y.length;M++){var T=y[M];if(!Ii.call(h,T)||!Ms(c[T],h[T]))return!1}return!0}function MO(c){switch(c.tag){case 5:return vt(c.type);case 16:return vt("Lazy");case 13:return vt("Suspense");case 19:return vt("SuspenseList");case 0:case 2:case 15:return c=Dn(c.type,!1),c;case 11:return c=Dn(c.type.render,!1),c;case 1:return c=Dn(c.type,!0),c;default:return""}}function Qr(c,h){if(c&&c.defaultProps){h=s({},h),c=c.defaultProps;for(var y in c)h[y]===void 0&&(h[y]=c[y]);return h}return h}var Od=ot(null),kd=null,Wl=null,yy=null;function _y(){yy=Wl=kd=null}function AE(c,h,y){K?(at(Od,h._currentValue),h._currentValue=y):(at(Od,h._currentValue2),h._currentValue2=y)}function xy(c){var h=Od.current;jt(Od),K?c._currentValue=h:c._currentValue2=h}function wy(c,h,y){for(;c!==null;){var M=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,M!==null&&(M.childLanes|=h)):M!==null&&(M.childLanes&h)!==h&&(M.childLanes|=h),c===y)break;c=c.return}}function jl(c,h){kd=c,yy=Wl=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&h&&(lr=!0),c.firstContext=null)}function Pr(c){var h=K?c._currentValue:c._currentValue2;if(yy!==c)if(c={context:c,memoizedValue:h,next:null},Wl===null){if(kd===null)throw Error(o(308));Wl=c,kd.dependencies={lanes:0,firstContext:c}}else Wl=Wl.next=c;return h}var bs=null,zo=!1;function Sy(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CE(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Js(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function Bo(c,h){var y=c.updateQueue;y!==null&&(y=y.shared,kn!==null&&c.mode&1&&!(Ct&2)?(c=y.interleaved,c===null?(h.next=h,bs===null?bs=[y]:bs.push(y)):(h.next=c.next,c.next=h),y.interleaved=h):(c=y.pending,c===null?h.next=h:(h.next=c.next,c.next=h),y.pending=h))}function Fd(c,h,y){if(h=h.updateQueue,h!==null&&(h=h.shared,(y&4194240)!==0)){var M=h.lanes;M&=c.pendingLanes,y|=M,h.lanes=y,dy(c,y)}}function RE(c,h){var y=c.updateQueue,M=c.alternate;if(M!==null&&(M=M.updateQueue,y===M)){var T=null,P=null;if(y=y.firstBaseUpdate,y!==null){do{var B={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};P===null?T=P=B:P=P.next=B,y=y.next}while(y!==null);P===null?T=P=h:P=P.next=h}else T=P=h;y={baseState:M.baseState,firstBaseUpdate:T,lastBaseUpdate:P,shared:M.shared,effects:M.effects},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=h:c.next=h,y.lastBaseUpdate=h}function Ud(c,h,y,M){var T=c.updateQueue;zo=!1;var P=T.firstBaseUpdate,B=T.lastBaseUpdate,$=T.shared.pending;if($!==null){T.shared.pending=null;var fe=$,Ae=fe.next;fe.next=null,B===null?P=Ae:B.next=Ae,B=fe;var Ge=c.alternate;Ge!==null&&(Ge=Ge.updateQueue,$=Ge.lastBaseUpdate,$!==B&&($===null?Ge.firstBaseUpdate=Ae:$.next=Ae,Ge.lastBaseUpdate=fe))}if(P!==null){var yt=T.baseState;B=0,Ge=Ae=fe=null,$=P;do{var rt=$.lane,en=$.eventTime;if((M&rt)===rt){Ge!==null&&(Ge=Ge.next={eventTime:en,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var Je=c,gi=$;switch(rt=h,en=y,gi.tag){case 1:if(Je=gi.payload,typeof Je=="function"){yt=Je.call(en,yt,rt);break e}yt=Je;break e;case 3:Je.flags=Je.flags&-65537|128;case 0:if(Je=gi.payload,rt=typeof Je=="function"?Je.call(en,yt,rt):Je,rt==null)break e;yt=s({},yt,rt);break e;case 2:zo=!0}}$.callback!==null&&$.lane!==0&&(c.flags|=64,rt=T.effects,rt===null?T.effects=[$]:rt.push($))}else en={eventTime:en,lane:rt,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Ge===null?(Ae=Ge=en,fe=yt):Ge=Ge.next=en,B|=rt;if($=$.next,$===null){if($=T.shared.pending,$===null)break;rt=$,$=rt.next,rt.next=null,T.lastBaseUpdate=rt,T.shared.pending=null}}while(!0);if(Ge===null&&(fe=yt),T.baseState=fe,T.firstBaseUpdate=Ae,T.lastBaseUpdate=Ge,h=T.shared.interleaved,h!==null){T=h;do B|=T.lane,T=T.next;while(T!==h)}else P===null&&(T.shared.lanes=0);eu|=B,c.lanes=B,c.memoizedState=yt}}function PE(c,h,y){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var M=c[h],T=M.callback;if(T!==null){if(M.callback=null,M=y,typeof T!="function")throw Error(o(191,T));T.call(M)}}}var IE=new i.Component().refs;function My(c,h,y,M){h=c.memoizedState,y=y(M,h),y=y==null?h:s({},h,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var zd={isMounted:function(c){return(c=c._reactInternals)?I(c)===c:!1},enqueueSetState:function(c,h,y){c=c._reactInternals;var M=Di(),T=Go(c),P=Js(M,T);P.payload=h,y!=null&&(P.callback=y),Bo(c,P),h=Or(c,T,M),h!==null&&Fd(h,c,T)},enqueueReplaceState:function(c,h,y){c=c._reactInternals;var M=Di(),T=Go(c),P=Js(M,T);P.tag=1,P.payload=h,y!=null&&(P.callback=y),Bo(c,P),h=Or(c,T,M),h!==null&&Fd(h,c,T)},enqueueForceUpdate:function(c,h){c=c._reactInternals;var y=Di(),M=Go(c),T=Js(y,M);T.tag=2,h!=null&&(T.callback=h),Bo(c,T),h=Or(c,M,y),h!==null&&Fd(h,c,M)}};function LE(c,h,y,M,T,P,B){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(M,P,B):h.prototype&&h.prototype.isPureReactComponent?!Dd(y,M)||!Dd(T,P):!0}function NE(c,h,y){var M=!1,T=fi,P=h.contextType;return typeof P=="object"&&P!==null?P=Pr(P):(T=dn(h)?Kr:Wn.current,M=h.contextTypes,P=(M=M!=null)?fn(c,T):fi),h=new h(y,P),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=zd,c.stateNode=h,h._reactInternals=c,M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=T,c.__reactInternalMemoizedMaskedChildContext=P),h}function DE(c,h,y,M){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(y,M),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(y,M),h.state!==c&&zd.enqueueReplaceState(h,h.state,null)}function Ey(c,h,y,M){var T=c.stateNode;T.props=y,T.state=c.memoizedState,T.refs=IE,Sy(c);var P=h.contextType;typeof P=="object"&&P!==null?T.context=Pr(P):(P=dn(h)?Kr:Wn.current,T.context=fn(c,P)),T.state=c.memoizedState,P=h.getDerivedStateFromProps,typeof P=="function"&&(My(c,h,P,y),T.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(h=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),h!==T.state&&zd.enqueueReplaceState(T,T.state,null),Ud(c,y,T,M),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308)}var Xl=[],$l=0,Bd=null,Vd=0,Ir=[],Lr=0,Ia=null,Qs=1,eo="";function La(c,h){Xl[$l++]=Vd,Xl[$l++]=Bd,Bd=c,Vd=h}function OE(c,h,y){Ir[Lr++]=Qs,Ir[Lr++]=eo,Ir[Lr++]=Ia,Ia=c;var M=Qs;c=eo;var T=32-Jr(M)-1;M&=~(1<<T),y+=1;var P=32-Jr(h)+T;if(30<P){var B=T-T%5;P=(M&(1<<B)-1).toString(32),M>>=B,T-=B,Qs=1<<32-Jr(h)+T|y<<T|M,eo=P+c}else Qs=1<<P|y<<T|M,eo=c}function by(c){c.return!==null&&(La(c,1),OE(c,1,0))}function Ty(c){for(;c===Bd;)Bd=Xl[--$l],Xl[$l]=null,Vd=Xl[--$l],Xl[$l]=null;for(;c===Ia;)Ia=Ir[--Lr],Ir[Lr]=null,eo=Ir[--Lr],Ir[Lr]=null,Qs=Ir[--Lr],Ir[Lr]=null}var or=null,ar=null,un=!1,jc=!1,es=null;function kE(c,h){var y=kr(5,null,null,0);y.elementType="DELETED",y.stateNode=h,y.return=c,h=c.deletions,h===null?(c.deletions=[y],c.flags|=16):h.push(y)}function FE(c,h){switch(c.tag){case 5:return h=Zs(h,c.type,c.pendingProps),h!==null?(c.stateNode=h,or=c,ar=Cd(h),!0):!1;case 6:return h=Td(h,c.pendingProps),h!==null?(c.stateNode=h,or=c,ar=null,!0):!1;case 13:if(h=Ad(h),h!==null){var y=Ia!==null?{id:Qs,overflow:eo}:null;return c.memoizedState={dehydrated:h,treeContext:y,retryLane:1073741824},y=kr(18,null,null,0),y.stateNode=h,y.return=c,c.child=y,or=c,ar=null,!0}return!1;default:return!1}}function Ay(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Cy(c){if(un){var h=ar;if(h){var y=h;if(!FE(c,h)){if(Ay(c))throw Error(o(418));h=Fo(y);var M=or;h&&FE(c,h)?kE(M,y):(c.flags=c.flags&-4097|2,un=!1,or=c)}}else{if(Ay(c))throw Error(o(418));c.flags=c.flags&-4097|2,un=!1,or=c}}}function UE(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;or=c}function Xc(c){if(!we||c!==or)return!1;if(!un)return UE(c),un=!0,!1;if(c.tag!==3&&(c.tag!==5||Ye(c.type)&&!pe(c.type,c.memoizedProps))){var h=ar;if(h){if(Ay(c)){for(c=ar;c;)c=Fo(c);throw Error(o(418))}for(;h;)kE(c,h),h=Fo(h)}}if(UE(c),c.tag===13){if(!we)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));ar=ae(c)}else ar=or?Fo(c.stateNode):null;return!0}function ql(){we&&(ar=or=null,jc=un=!1)}function Ry(c){es===null?es=[c]:es.push(c)}function $c(c,h,y){if(c=y.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(o(309));var M=y.stateNode}if(!M)throw Error(o(147,c));var T=M,P=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===P?h.ref:(h=function(B){var $=T.refs;$===IE&&($=T.refs={}),B===null?delete $[P]:$[P]=B},h._stringRef=P,h)}if(typeof c!="string")throw Error(o(284));if(!y._owner)throw Error(o(290,c))}return c}function Hd(c,h){throw c=Object.prototype.toString.call(h),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function zE(c){var h=c._init;return h(c._payload)}function BE(c){function h(ie,Z){if(c){var le=ie.deletions;le===null?(ie.deletions=[Z],ie.flags|=16):le.push(Z)}}function y(ie,Z){if(!c)return null;for(;Z!==null;)h(ie,Z),Z=Z.sibling;return null}function M(ie,Z){for(ie=new Map;Z!==null;)Z.key!==null?ie.set(Z.key,Z):ie.set(Z.index,Z),Z=Z.sibling;return ie}function T(ie,Z){return ie=jo(ie,Z),ie.index=0,ie.sibling=null,ie}function P(ie,Z,le){return ie.index=le,c?(le=ie.alternate,le!==null?(le=le.index,le<Z?(ie.flags|=2,Z):le):(ie.flags|=2,Z)):(ie.flags|=1048576,Z)}function B(ie){return c&&ie.alternate===null&&(ie.flags|=2),ie}function $(ie,Z,le,Ue){return Z===null||Z.tag!==6?(Z=f_(le,ie.mode,Ue),Z.return=ie,Z):(Z=T(Z,le),Z.return=ie,Z)}function fe(ie,Z,le,Ue){var Ze=le.type;return Ze===f?Ge(ie,Z,le.props.children,Ue,le.key):Z!==null&&(Z.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===S&&zE(Ze)===Z.type)?(Ue=T(Z,le.props),Ue.ref=$c(ie,Z,le),Ue.return=ie,Ue):(Ue=_p(le.type,le.key,le.props,null,ie.mode,Ue),Ue.ref=$c(ie,Z,le),Ue.return=ie,Ue)}function Ae(ie,Z,le,Ue){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==le.containerInfo||Z.stateNode.implementation!==le.implementation?(Z=d_(le,ie.mode,Ue),Z.return=ie,Z):(Z=T(Z,le.children||[]),Z.return=ie,Z)}function Ge(ie,Z,le,Ue,Ze){return Z===null||Z.tag!==7?(Z=za(le,ie.mode,Ue,Ze),Z.return=ie,Z):(Z=T(Z,le),Z.return=ie,Z)}function yt(ie,Z,le){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=f_(""+Z,ie.mode,le),Z.return=ie,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case l:return le=_p(Z.type,Z.key,Z.props,null,ie.mode,le),le.ref=$c(ie,null,Z),le.return=ie,le;case u:return Z=d_(Z,ie.mode,le),Z.return=ie,Z;case S:var Ue=Z._init;return yt(ie,Ue(Z._payload),le)}if(j(Z)||A(Z))return Z=za(Z,ie.mode,le,null),Z.return=ie,Z;Hd(ie,Z)}return null}function rt(ie,Z,le,Ue){var Ze=Z!==null?Z.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return Ze!==null?null:$(ie,Z,""+le,Ue);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case l:return le.key===Ze?fe(ie,Z,le,Ue):null;case u:return le.key===Ze?Ae(ie,Z,le,Ue):null;case S:return Ze=le._init,rt(ie,Z,Ze(le._payload),Ue)}if(j(le)||A(le))return Ze!==null?null:Ge(ie,Z,le,Ue,null);Hd(ie,le)}return null}function en(ie,Z,le,Ue,Ze){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return ie=ie.get(le)||null,$(Z,ie,""+Ue,Ze);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case l:return ie=ie.get(Ue.key===null?le:Ue.key)||null,fe(Z,ie,Ue,Ze);case u:return ie=ie.get(Ue.key===null?le:Ue.key)||null,Ae(Z,ie,Ue,Ze);case S:var At=Ue._init;return en(ie,Z,le,At(Ue._payload),Ze)}if(j(Ue)||A(Ue))return ie=ie.get(le)||null,Ge(Z,ie,Ue,Ze,null);Hd(Z,Ue)}return null}function Je(ie,Z,le,Ue){for(var Ze=null,At=null,_t=Z,Vt=Z=0,Jn=null;_t!==null&&Vt<le.length;Vt++){_t.index>Vt?(Jn=_t,_t=null):Jn=_t.sibling;var Ht=rt(ie,_t,le[Vt],Ue);if(Ht===null){_t===null&&(_t=Jn);break}c&&_t&&Ht.alternate===null&&h(ie,_t),Z=P(Ht,Z,Vt),At===null?Ze=Ht:At.sibling=Ht,At=Ht,_t=Jn}if(Vt===le.length)return y(ie,_t),un&&La(ie,Vt),Ze;if(_t===null){for(;Vt<le.length;Vt++)_t=yt(ie,le[Vt],Ue),_t!==null&&(Z=P(_t,Z,Vt),At===null?Ze=_t:At.sibling=_t,At=_t);return un&&La(ie,Vt),Ze}for(_t=M(ie,_t);Vt<le.length;Vt++)Jn=en(_t,ie,Vt,le[Vt],Ue),Jn!==null&&(c&&Jn.alternate!==null&&_t.delete(Jn.key===null?Vt:Jn.key),Z=P(Jn,Z,Vt),At===null?Ze=Jn:At.sibling=Jn,At=Jn);return c&&_t.forEach(function(Xo){return h(ie,Xo)}),un&&La(ie,Vt),Ze}function gi(ie,Z,le,Ue){var Ze=A(le);if(typeof Ze!="function")throw Error(o(150));if(le=Ze.call(le),le==null)throw Error(o(151));for(var At=Ze=null,_t=Z,Vt=Z=0,Jn=null,Ht=le.next();_t!==null&&!Ht.done;Vt++,Ht=le.next()){_t.index>Vt?(Jn=_t,_t=null):Jn=_t.sibling;var Xo=rt(ie,_t,Ht.value,Ue);if(Xo===null){_t===null&&(_t=Jn);break}c&&_t&&Xo.alternate===null&&h(ie,_t),Z=P(Xo,Z,Vt),At===null?Ze=Xo:At.sibling=Xo,At=Xo,_t=Jn}if(Ht.done)return y(ie,_t),un&&La(ie,Vt),Ze;if(_t===null){for(;!Ht.done;Vt++,Ht=le.next())Ht=yt(ie,Ht.value,Ue),Ht!==null&&(Z=P(Ht,Z,Vt),At===null?Ze=Ht:At.sibling=Ht,At=Ht);return un&&La(ie,Vt),Ze}for(_t=M(ie,_t);!Ht.done;Vt++,Ht=le.next())Ht=en(_t,ie,Vt,Ht.value,Ue),Ht!==null&&(c&&Ht.alternate!==null&&_t.delete(Ht.key===null?Vt:Ht.key),Z=P(Ht,Z,Vt),At===null?Ze=Ht:At.sibling=Ht,At=Ht);return c&&_t.forEach(function(QO){return h(ie,QO)}),un&&La(ie,Vt),Ze}function Fr(ie,Z,le,Ue){if(typeof le=="object"&&le!==null&&le.type===f&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case l:e:{for(var Ze=le.key,At=Z;At!==null;){if(At.key===Ze){if(Ze=le.type,Ze===f){if(At.tag===7){y(ie,At.sibling),Z=T(At,le.props.children),Z.return=ie,ie=Z;break e}}else if(At.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===S&&zE(Ze)===At.type){y(ie,At.sibling),Z=T(At,le.props),Z.ref=$c(ie,At,le),Z.return=ie,ie=Z;break e}y(ie,At);break}else h(ie,At);At=At.sibling}le.type===f?(Z=za(le.props.children,ie.mode,Ue,le.key),Z.return=ie,ie=Z):(Ue=_p(le.type,le.key,le.props,null,ie.mode,Ue),Ue.ref=$c(ie,Z,le),Ue.return=ie,ie=Ue)}return B(ie);case u:e:{for(At=le.key;Z!==null;){if(Z.key===At)if(Z.tag===4&&Z.stateNode.containerInfo===le.containerInfo&&Z.stateNode.implementation===le.implementation){y(ie,Z.sibling),Z=T(Z,le.children||[]),Z.return=ie,ie=Z;break e}else{y(ie,Z);break}else h(ie,Z);Z=Z.sibling}Z=d_(le,ie.mode,Ue),Z.return=ie,ie=Z}return B(ie);case S:return At=le._init,Fr(ie,Z,At(le._payload),Ue)}if(j(le))return Je(ie,Z,le,Ue);if(A(le))return gi(ie,Z,le,Ue);Hd(ie,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,Z!==null&&Z.tag===6?(y(ie,Z.sibling),Z=T(Z,le),Z.return=ie,ie=Z):(y(ie,Z),Z=f_(le,ie.mode,Ue),Z.return=ie,ie=Z),B(ie)):y(ie,Z)}return Fr}var Yl=BE(!0),VE=BE(!1),qc={},Nr=ot(qc),Yc=ot(qc),Zl=ot(qc);function Ts(c){if(c===qc)throw Error(o(174));return c}function Py(c,h){at(Zl,h),at(Yc,c),at(Nr,qc),c=oe(h),jt(Nr),at(Nr,c)}function Kl(){jt(Nr),jt(Yc),jt(Zl)}function HE(c){var h=Ts(Zl.current),y=Ts(Nr.current);h=k(y,c.type,h),y!==h&&(at(Yc,c),at(Nr,h))}function Iy(c){Yc.current===c&&(jt(Nr),jt(Yc))}var pn=ot(0);function Gd(c){for(var h=c;h!==null;){if(h.tag===13){var y=h.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||Pa(y)||Bl(y)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Ly=[];function Ny(){for(var c=0;c<Ly.length;c++){var h=Ly[c];K?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}Ly.length=0}var Wd=a.ReactCurrentDispatcher,Dr=a.ReactCurrentBatchConfig,Jl=0,wn=null,di=null,Kn=null,jd=!1,Zc=!1,Kc=0,EO=0;function pi(){throw Error(o(321))}function Dy(c,h){if(h===null)return!1;for(var y=0;y<h.length&&y<c.length;y++)if(!Ms(c[y],h[y]))return!1;return!0}function Oy(c,h,y,M,T,P){if(Jl=P,wn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Wd.current=c===null||c.memoizedState===null?CO:RO,c=y(M,T),Zc){P=0;do{if(Zc=!1,Kc=0,25<=P)throw Error(o(301));P+=1,Kn=di=null,h.updateQueue=null,Wd.current=PO,c=y(M,T)}while(Zc)}if(Wd.current=Zd,h=di!==null&&di.next!==null,Jl=0,Kn=di=wn=null,jd=!1,h)throw Error(o(300));return c}function ky(){var c=Kc!==0;return Kc=0,c}function to(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?wn.memoizedState=Kn=c:Kn=Kn.next=c,Kn}function As(){if(di===null){var c=wn.alternate;c=c!==null?c.memoizedState:null}else c=di.next;var h=Kn===null?wn.memoizedState:Kn.next;if(h!==null)Kn=h,di=c;else{if(c===null)throw Error(o(310));di=c,c={memoizedState:di.memoizedState,baseState:di.baseState,baseQueue:di.baseQueue,queue:di.queue,next:null},Kn===null?wn.memoizedState=Kn=c:Kn=Kn.next=c}return Kn}function Na(c,h){return typeof h=="function"?h(c):h}function Xd(c){var h=As(),y=h.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=c;var M=di,T=M.baseQueue,P=y.pending;if(P!==null){if(T!==null){var B=T.next;T.next=P.next,P.next=B}M.baseQueue=T=P,y.pending=null}if(T!==null){P=T.next,M=M.baseState;var $=B=null,fe=null,Ae=P;do{var Ge=Ae.lane;if((Jl&Ge)===Ge)fe!==null&&(fe=fe.next={lane:0,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),M=Ae.hasEagerState?Ae.eagerState:c(M,Ae.action);else{var yt={lane:Ge,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null};fe===null?($=fe=yt,B=M):fe=fe.next=yt,wn.lanes|=Ge,eu|=Ge}Ae=Ae.next}while(Ae!==null&&Ae!==P);fe===null?B=M:fe.next=$,Ms(M,h.memoizedState)||(lr=!0),h.memoizedState=M,h.baseState=B,h.baseQueue=fe,y.lastRenderedState=M}if(c=y.interleaved,c!==null){T=c;do P=T.lane,wn.lanes|=P,eu|=P,T=T.next;while(T!==c)}else T===null&&(y.lanes=0);return[h.memoizedState,y.dispatch]}function $d(c){var h=As(),y=h.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=c;var M=y.dispatch,T=y.pending,P=h.memoizedState;if(T!==null){y.pending=null;var B=T=T.next;do P=c(P,B.action),B=B.next;while(B!==T);Ms(P,h.memoizedState)||(lr=!0),h.memoizedState=P,h.baseQueue===null&&(h.baseState=P),y.lastRenderedState=P}return[P,M]}function GE(){}function WE(c,h){var y=wn,M=As(),T=h(),P=!Ms(M.memoizedState,T);if(P&&(M.memoizedState=T,lr=!0),M=M.queue,Qc($E.bind(null,y,M,c),[c]),M.getSnapshot!==h||P||Kn!==null&&Kn.memoizedState.tag&1){if(y.flags|=2048,Jc(9,XE.bind(null,y,M,T,h),void 0,null),kn===null)throw Error(o(349));Jl&30||jE(y,h,T)}return T}function jE(c,h,y){c.flags|=16384,c={getSnapshot:h,value:y},h=wn.updateQueue,h===null?(h={lastEffect:null,stores:null},wn.updateQueue=h,h.stores=[c]):(y=h.stores,y===null?h.stores=[c]:y.push(c))}function XE(c,h,y,M){h.value=y,h.getSnapshot=M,qE(h)&&Or(c,1,-1)}function $E(c,h,y){return y(function(){qE(h)&&Or(c,1,-1)})}function qE(c){var h=c.getSnapshot;c=c.value;try{var y=h();return!Ms(c,y)}catch{return!0}}function Fy(c){var h=to();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:c},h.queue=c,c=c.dispatch=AO.bind(null,wn,c),[h.memoizedState,c]}function Jc(c,h,y,M){return c={tag:c,create:h,destroy:y,deps:M,next:null},h=wn.updateQueue,h===null?(h={lastEffect:null,stores:null},wn.updateQueue=h,h.lastEffect=c.next=c):(y=h.lastEffect,y===null?h.lastEffect=c.next=c:(M=y.next,y.next=c,c.next=M,h.lastEffect=c)),c}function YE(){return As().memoizedState}function qd(c,h,y,M){var T=to();wn.flags|=c,T.memoizedState=Jc(1|h,y,void 0,M===void 0?null:M)}function Yd(c,h,y,M){var T=As();M=M===void 0?null:M;var P=void 0;if(di!==null){var B=di.memoizedState;if(P=B.destroy,M!==null&&Dy(M,B.deps)){T.memoizedState=Jc(h,y,P,M);return}}wn.flags|=c,T.memoizedState=Jc(1|h,y,P,M)}function Uy(c,h){return qd(8390656,8,c,h)}function Qc(c,h){return Yd(2048,8,c,h)}function ZE(c,h){return Yd(4,2,c,h)}function KE(c,h){return Yd(4,4,c,h)}function JE(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function QE(c,h,y){return y=y!=null?y.concat([c]):null,Yd(4,4,JE.bind(null,h,c),y)}function zy(){}function eb(c,h){var y=As();h=h===void 0?null:h;var M=y.memoizedState;return M!==null&&h!==null&&Dy(h,M[1])?M[0]:(y.memoizedState=[c,h],c)}function tb(c,h){var y=As();h=h===void 0?null:h;var M=y.memoizedState;return M!==null&&h!==null&&Dy(h,M[1])?M[0]:(c=c(),y.memoizedState=[c,h],c)}function bO(c,h){var y=Bt;Bt=y!==0&&4>y?y:4,c(!0);var M=Dr.transition;Dr.transition={};try{c(!1),h()}finally{Bt=y,Dr.transition=M}}function nb(){return As().memoizedState}function TO(c,h,y){var M=Go(c);y={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null},ib(c)?rb(h,y):(sb(c,h,y),y=Di(),c=Or(c,M,y),c!==null&&ob(c,h,M))}function AO(c,h,y){var M=Go(c),T={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null};if(ib(c))rb(h,T);else{sb(c,h,T);var P=c.alternate;if(c.lanes===0&&(P===null||P.lanes===0)&&(P=h.lastRenderedReducer,P!==null))try{var B=h.lastRenderedState,$=P(B,y);if(T.hasEagerState=!0,T.eagerState=$,Ms($,B))return}catch{}finally{}y=Di(),c=Or(c,M,y),c!==null&&ob(c,h,M)}}function ib(c){var h=c.alternate;return c===wn||h!==null&&h===wn}function rb(c,h){Zc=jd=!0;var y=c.pending;y===null?h.next=h:(h.next=y.next,y.next=h),c.pending=h}function sb(c,h,y){kn!==null&&c.mode&1&&!(Ct&2)?(c=h.interleaved,c===null?(y.next=y,bs===null?bs=[h]:bs.push(h)):(y.next=c.next,c.next=y),h.interleaved=y):(c=h.pending,c===null?y.next=y:(y.next=c.next,c.next=y),h.pending=y)}function ob(c,h,y){if(y&4194240){var M=h.lanes;M&=c.pendingLanes,y|=M,h.lanes=y,dy(c,y)}}var Zd={readContext:Pr,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},CO={readContext:Pr,useCallback:function(c,h){return to().memoizedState=[c,h===void 0?null:h],c},useContext:Pr,useEffect:Uy,useImperativeHandle:function(c,h,y){return y=y!=null?y.concat([c]):null,qd(4194308,4,JE.bind(null,h,c),y)},useLayoutEffect:function(c,h){return qd(4194308,4,c,h)},useInsertionEffect:function(c,h){return qd(4,2,c,h)},useMemo:function(c,h){var y=to();return h=h===void 0?null:h,c=c(),y.memoizedState=[c,h],c},useReducer:function(c,h,y){var M=to();return h=y!==void 0?y(h):h,M.memoizedState=M.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},M.queue=c,c=c.dispatch=TO.bind(null,wn,c),[M.memoizedState,c]},useRef:function(c){var h=to();return c={current:c},h.memoizedState=c},useState:Fy,useDebugValue:zy,useDeferredValue:function(c){var h=Fy(c),y=h[0],M=h[1];return Uy(function(){var T=Dr.transition;Dr.transition={};try{M(c)}finally{Dr.transition=T}},[c]),y},useTransition:function(){var c=Fy(!1),h=c[0];return c=bO.bind(null,c[1]),to().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,y){var M=wn,T=to();if(un){if(y===void 0)throw Error(o(407));y=y()}else{if(y=h(),kn===null)throw Error(o(349));Jl&30||jE(M,h,y)}T.memoizedState=y;var P={value:y,getSnapshot:h};return T.queue=P,Uy($E.bind(null,M,P,c),[c]),M.flags|=2048,Jc(9,XE.bind(null,M,P,y,h),void 0,null),y},useId:function(){var c=to(),h=kn.identifierPrefix;if(un){var y=eo,M=Qs;y=(M&~(1<<32-Jr(M)-1)).toString(32)+y,h=":"+h+"R"+y,y=Kc++,0<y&&(h+="H"+y.toString(32)),h+=":"}else y=EO++,h=":"+h+"r"+y.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},RO={readContext:Pr,useCallback:eb,useContext:Pr,useEffect:Qc,useImperativeHandle:QE,useInsertionEffect:ZE,useLayoutEffect:KE,useMemo:tb,useReducer:Xd,useRef:YE,useState:function(){return Xd(Na)},useDebugValue:zy,useDeferredValue:function(c){var h=Xd(Na),y=h[0],M=h[1];return Qc(function(){var T=Dr.transition;Dr.transition={};try{M(c)}finally{Dr.transition=T}},[c]),y},useTransition:function(){var c=Xd(Na)[0],h=As().memoizedState;return[c,h]},useMutableSource:GE,useSyncExternalStore:WE,useId:nb,unstable_isNewReconciler:!1},PO={readContext:Pr,useCallback:eb,useContext:Pr,useEffect:Qc,useImperativeHandle:QE,useInsertionEffect:ZE,useLayoutEffect:KE,useMemo:tb,useReducer:$d,useRef:YE,useState:function(){return $d(Na)},useDebugValue:zy,useDeferredValue:function(c){var h=$d(Na),y=h[0],M=h[1];return Qc(function(){var T=Dr.transition;Dr.transition={};try{M(c)}finally{Dr.transition=T}},[c]),y},useTransition:function(){var c=$d(Na)[0],h=As().memoizedState;return[c,h]},useMutableSource:GE,useSyncExternalStore:WE,useId:nb,unstable_isNewReconciler:!1};function By(c,h){try{var y="",M=h;do y+=MO(M),M=M.return;while(M);var T=y}catch(P){T=`
Error generating stack: `+P.message+`
`+P.stack}return{value:c,source:h,stack:T}}function Vy(c,h){try{console.error(h.value)}catch(y){setTimeout(function(){throw y})}}var IO=typeof WeakMap=="function"?WeakMap:Map;function ab(c,h,y){y=Js(-1,y),y.tag=3,y.payload={element:null};var M=h.value;return y.callback=function(){fp||(fp=!0,s_=M),Vy(c,h)},y}function lb(c,h,y){y=Js(-1,y),y.tag=3;var M=c.type.getDerivedStateFromError;if(typeof M=="function"){var T=h.value;y.payload=function(){return M(T)},y.callback=function(){Vy(c,h)}}var P=c.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(y.callback=function(){Vy(c,h),typeof M!="function"&&(Vo===null?Vo=new Set([this]):Vo.add(this));var B=h.stack;this.componentDidCatch(h.value,{componentStack:B!==null?B:""})}),y}function ub(c,h,y){var M=c.pingCache;if(M===null){M=c.pingCache=new IO;var T=new Set;M.set(h,T)}else T=M.get(h),T===void 0&&(T=new Set,M.set(h,T));T.has(y)||(T.add(y),c=jO.bind(null,c,h,y),h.then(c,c))}function cb(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function hb(c,h,y,M,T){return c.mode&1?(c.flags|=65536,c.lanes=T,c):(c===h?c.flags|=65536:(c.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(h=Js(-1,1),h.tag=2,Bo(y,h))),y.lanes|=1),c)}function Cs(c){c.flags|=4}function fb(c,h){if(c!==null&&c.child===h.child)return!0;if(h.flags&16)return!1;for(c=h.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var eh,th,Kd,Jd;if(tt)eh=function(c,h){for(var y=h.child;y!==null;){if(y.tag===5||y.tag===6)me(c,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===h)break;for(;y.sibling===null;){if(y.return===null||y.return===h)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},th=function(){},Kd=function(c,h,y,M,T){if(c=c.memoizedProps,c!==M){var P=h.stateNode,B=Ts(Nr.current);y=J(P,y,c,M,T,B),(h.updateQueue=y)&&Cs(h)}},Jd=function(c,h,y,M){y!==M&&Cs(h)};else if(he){eh=function(c,h,y,M){for(var T=h.child;T!==null;){if(T.tag===5){var P=T.stateNode;y&&M&&(P=Gn(P,T.type,T.memoizedProps,T)),me(c,P)}else if(T.tag===6)P=T.stateNode,y&&M&&(P=an(P,T.memoizedProps,T)),me(c,P);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)P=T.child,P!==null&&(P.return=T),eh(c,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===h)break;for(;T.sibling===null;){if(T.return===null||T.return===h)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var db=function(c,h,y,M){for(var T=h.child;T!==null;){if(T.tag===5){var P=T.stateNode;y&&M&&(P=Gn(P,T.type,T.memoizedProps,T)),Ot(c,P)}else if(T.tag===6)P=T.stateNode,y&&M&&(P=an(P,T.memoizedProps,T)),Ot(c,P);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)P=T.child,P!==null&&(P.return=T),db(c,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===h)break;for(;T.sibling===null;){if(T.return===null||T.return===h)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};th=function(c,h){var y=h.stateNode;if(!fb(c,h)){c=y.containerInfo;var M=Wt(c);db(M,h,!1,!1),y.pendingChildren=M,Cs(h),Qt(c,M)}},Kd=function(c,h,y,M,T){var P=c.stateNode,B=c.memoizedProps;if((c=fb(c,h))&&B===M)h.stateNode=P;else{var $=h.stateNode,fe=Ts(Nr.current),Ae=null;B!==M&&(Ae=J($,y,B,M,T,fe)),c&&Ae===null?h.stateNode=P:(P=Dt(P,Ae,y,B,M,h,c,$),_e(P,y,M,T,fe)&&Cs(h),h.stateNode=P,c?Cs(h):eh(P,h,!1,!1))}},Jd=function(c,h,y,M){y!==M?(c=Ts(Zl.current),y=Ts(Nr.current),h.stateNode=Me(M,c,y,h),Cs(h)):h.stateNode=c.stateNode}}else th=function(){},Kd=function(){},Jd=function(){};function nh(c,h){if(!un)switch(c.tailMode){case"hidden":h=c.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var M=null;y!==null;)y.alternate!==null&&(M=y),y=y.sibling;M===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:M.sibling=null}}function mi(c){var h=c.alternate!==null&&c.alternate.child===c.child,y=0,M=0;if(h)for(var T=c.child;T!==null;)y|=T.lanes|T.childLanes,M|=T.subtreeFlags&14680064,M|=T.flags&14680064,T.return=c,T=T.sibling;else for(T=c.child;T!==null;)y|=T.lanes|T.childLanes,M|=T.subtreeFlags,M|=T.flags,T.return=c,T=T.sibling;return c.subtreeFlags|=M,c.childLanes=y,h}function LO(c,h,y){var M=h.pendingProps;switch(Ty(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mi(h),null;case 1:return dn(h.type)&&Uo(),mi(h),null;case 3:return M=h.stateNode,Kl(),jt(On),jt(Wn),Ny(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(c===null||c.child===null)&&(Xc(h)?Cs(h):c===null||c.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,es!==null&&(l_(es),es=null))),th(c,h),mi(h),null;case 5:Iy(h),y=Ts(Zl.current);var T=h.type;if(c!==null&&h.stateNode!=null)Kd(c,h,T,M,y),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!M){if(h.stateNode===null)throw Error(o(166));return mi(h),null}if(c=Ts(Nr.current),Xc(h)){if(!we)throw Error(o(175));c=cy(h.stateNode,h.type,h.memoizedProps,y,c,h,!jc),h.updateQueue=c,c!==null&&Cs(h)}else{var P=ne(T,M,y,c,h);eh(P,h,!1,!1),h.stateNode=P,_e(P,T,M,y,c)&&Cs(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return mi(h),null;case 6:if(c&&h.stateNode!=null)Jd(c,h,c.memoizedProps,M);else{if(typeof M!="string"&&h.stateNode===null)throw Error(o(166));if(c=Ts(Zl.current),y=Ts(Nr.current),Xc(h)){if(!we)throw Error(o(176));if(c=h.stateNode,M=h.memoizedProps,(y=F(c,M,h,!jc))&&(T=or,T!==null))switch(P=(T.mode&1)!==0,T.tag){case 3:ut(T.stateNode.containerInfo,c,M,P);break;case 5:mt(T.type,T.memoizedProps,T.stateNode,c,M,P)}y&&Cs(h)}else h.stateNode=Me(M,c,y,h)}return mi(h),null;case 13:if(jt(pn),M=h.memoizedState,un&&ar!==null&&h.mode&1&&!(h.flags&128)){for(c=ar;c;)c=Fo(c);return ql(),h.flags|=98560,h}if(M!==null&&M.dehydrated!==null){if(M=Xc(h),c===null){if(!M)throw Error(o(318));if(!we)throw Error(o(344));if(c=h.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));ee(c,h)}else ql(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return mi(h),null}return es!==null&&(l_(es),es=null),h.flags&128?(h.lanes=y,h):(M=M!==null,y=!1,c===null?Xc(h):y=c.memoizedState!==null,M&&!y&&(h.child.flags|=8192,h.mode&1&&(c===null||pn.current&1?jn===0&&(jn=3):c_())),h.updateQueue!==null&&(h.flags|=4),mi(h),null);case 4:return Kl(),th(c,h),c===null&&Ce(h.stateNode.containerInfo),mi(h),null;case 10:return xy(h.type._context),mi(h),null;case 17:return dn(h.type)&&Uo(),mi(h),null;case 19:if(jt(pn),T=h.memoizedState,T===null)return mi(h),null;if(M=(h.flags&128)!==0,P=T.rendering,P===null)if(M)nh(T,!1);else{if(jn!==0||c!==null&&c.flags&128)for(c=h.child;c!==null;){if(P=Gd(c),P!==null){for(h.flags|=128,nh(T,!1),c=P.updateQueue,c!==null&&(h.updateQueue=c,h.flags|=4),h.subtreeFlags=0,c=y,M=h.child;M!==null;)y=M,T=c,y.flags&=14680066,P=y.alternate,P===null?(y.childLanes=0,y.lanes=T,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=P.childLanes,y.lanes=P.lanes,y.child=P.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=P.memoizedProps,y.memoizedState=P.memoizedState,y.updateQueue=P.updateQueue,y.type=P.type,T=P.dependencies,y.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),M=M.sibling;return at(pn,pn.current&1|2),h.child}c=c.sibling}T.tail!==null&&Zn()>r_&&(h.flags|=128,M=!0,nh(T,!1),h.lanes=4194304)}else{if(!M)if(c=Gd(P),c!==null){if(h.flags|=128,M=!0,c=c.updateQueue,c!==null&&(h.updateQueue=c,h.flags|=4),nh(T,!0),T.tail===null&&T.tailMode==="hidden"&&!P.alternate&&!un)return mi(h),null}else 2*Zn()-T.renderingStartTime>r_&&y!==1073741824&&(h.flags|=128,M=!0,nh(T,!1),h.lanes=4194304);T.isBackwards?(P.sibling=h.child,h.child=P):(c=T.last,c!==null?c.sibling=P:h.child=P,T.last=P)}return T.tail!==null?(h=T.tail,T.rendering=h,T.tail=h.sibling,T.renderingStartTime=Zn(),h.sibling=null,c=pn.current,at(pn,M?c&1|2:c&1),h):(mi(h),null);case 22:case 23:return u_(),M=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==M&&(h.flags|=8192),M&&h.mode&1?ur&1073741824&&(mi(h),tt&&h.subtreeFlags&6&&(h.flags|=8192)):mi(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var NO=a.ReactCurrentOwner,lr=!1;function Ni(c,h,y,M){h.child=c===null?VE(h,null,y,M):Yl(h,c.child,y,M)}function pb(c,h,y,M,T){y=y.render;var P=h.ref;return jl(h,T),M=Oy(c,h,y,M,P,T),y=ky(),c!==null&&!lr?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~T,no(c,h,T)):(un&&y&&by(h),h.flags|=1,Ni(c,h,M,T),h.child)}function mb(c,h,y,M,T){if(c===null){var P=y.type;return typeof P=="function"&&!h_(P)&&P.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(h.tag=15,h.type=P,gb(c,h,P,M,T)):(c=_p(y.type,null,M,h,h.mode,T),c.ref=h.ref,c.return=h,h.child=c)}if(P=c.child,!(c.lanes&T)){var B=P.memoizedProps;if(y=y.compare,y=y!==null?y:Dd,y(B,M)&&c.ref===h.ref)return no(c,h,T)}return h.flags|=1,c=jo(P,M),c.ref=h.ref,c.return=h,h.child=c}function gb(c,h,y,M,T){if(c!==null&&Dd(c.memoizedProps,M)&&c.ref===h.ref)if(lr=!1,(c.lanes&T)!==0)c.flags&131072&&(lr=!0);else return h.lanes=c.lanes,no(c,h,T);return Hy(c,h,y,M,T)}function vb(c,h,y){var M=h.pendingProps,T=M.children,P=c!==null?c.memoizedState:null;if(M.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},at(Ql,ur),ur|=y;else if(y&1073741824)h.memoizedState={baseLanes:0,cachePool:null},M=P!==null?P.baseLanes:y,at(Ql,ur),ur|=M;else return c=P!==null?P.baseLanes|y:y,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null},h.updateQueue=null,at(Ql,ur),ur|=c,null;else P!==null?(M=P.baseLanes|y,h.memoizedState=null):M=y,at(Ql,ur),ur|=M;return Ni(c,h,T,y),h.child}function yb(c,h){var y=h.ref;(c===null&&y!==null||c!==null&&c.ref!==y)&&(h.flags|=512,h.flags|=2097152)}function Hy(c,h,y,M,T){var P=dn(y)?Kr:Wn.current;return P=fn(h,P),jl(h,T),y=Oy(c,h,y,M,P,T),M=ky(),c!==null&&!lr?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~T,no(c,h,T)):(un&&M&&by(h),h.flags|=1,Ni(c,h,y,T),h.child)}function _b(c,h,y,M,T){if(dn(y)){var P=!0;Gl(h)}else P=!1;if(jl(h,T),h.stateNode===null)c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),NE(h,y,M),Ey(h,y,M,T),M=!0;else if(c===null){var B=h.stateNode,$=h.memoizedProps;B.props=$;var fe=B.context,Ae=y.contextType;typeof Ae=="object"&&Ae!==null?Ae=Pr(Ae):(Ae=dn(y)?Kr:Wn.current,Ae=fn(h,Ae));var Ge=y.getDerivedStateFromProps,yt=typeof Ge=="function"||typeof B.getSnapshotBeforeUpdate=="function";yt||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||($!==M||fe!==Ae)&&DE(h,B,M,Ae),zo=!1;var rt=h.memoizedState;B.state=rt,Ud(h,M,B,T),fe=h.memoizedState,$!==M||rt!==fe||On.current||zo?(typeof Ge=="function"&&(My(h,y,Ge,M),fe=h.memoizedState),($=zo||LE(h,y,$,M,rt,fe,Ae))?(yt||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(h.flags|=4194308)):(typeof B.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=M,h.memoizedState=fe),B.props=M,B.state=fe,B.context=Ae,M=$):(typeof B.componentDidMount=="function"&&(h.flags|=4194308),M=!1)}else{B=h.stateNode,CE(c,h),$=h.memoizedProps,Ae=h.type===h.elementType?$:Qr(h.type,$),B.props=Ae,yt=h.pendingProps,rt=B.context,fe=y.contextType,typeof fe=="object"&&fe!==null?fe=Pr(fe):(fe=dn(y)?Kr:Wn.current,fe=fn(h,fe));var en=y.getDerivedStateFromProps;(Ge=typeof en=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||($!==yt||rt!==fe)&&DE(h,B,M,fe),zo=!1,rt=h.memoizedState,B.state=rt,Ud(h,M,B,T);var Je=h.memoizedState;$!==yt||rt!==Je||On.current||zo?(typeof en=="function"&&(My(h,y,en,M),Je=h.memoizedState),(Ae=zo||LE(h,y,Ae,M,rt,Je,fe)||!1)?(Ge||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(M,Je,fe),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(M,Je,fe)),typeof B.componentDidUpdate=="function"&&(h.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof B.componentDidUpdate!="function"||$===c.memoizedProps&&rt===c.memoizedState||(h.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||$===c.memoizedProps&&rt===c.memoizedState||(h.flags|=1024),h.memoizedProps=M,h.memoizedState=Je),B.props=M,B.state=Je,B.context=fe,M=Ae):(typeof B.componentDidUpdate!="function"||$===c.memoizedProps&&rt===c.memoizedState||(h.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||$===c.memoizedProps&&rt===c.memoizedState||(h.flags|=1024),M=!1)}return Gy(c,h,y,M,P,T)}function Gy(c,h,y,M,T,P){yb(c,h);var B=(h.flags&128)!==0;if(!M&&!B)return T&&Hc(h,y,!1),no(c,h,P);M=h.stateNode,NO.current=h;var $=B&&typeof y.getDerivedStateFromError!="function"?null:M.render();return h.flags|=1,c!==null&&B?(h.child=Yl(h,c.child,null,P),h.child=Yl(h,null,$,P)):Ni(c,h,$,P),h.memoizedState=M.state,T&&Hc(h,y,!0),h.child}function xb(c){var h=c.stateNode;h.pendingContext?Li(c,h.pendingContext,h.pendingContext!==h.context):h.context&&Li(c,h.context,!1),Py(c,h.containerInfo)}function wb(c,h,y,M,T){return ql(),Ry(T),h.flags|=256,Ni(c,h,y,M),h.child}var Qd={dehydrated:null,treeContext:null,retryLane:0};function ep(c){return{baseLanes:c,cachePool:null}}function Sb(c,h,y){var M=h.pendingProps,T=pn.current,P=!1,B=(h.flags&128)!==0,$;if(($=B)||($=c!==null&&c.memoizedState===null?!1:(T&2)!==0),$?(P=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(T|=1),at(pn,T&1),c===null)return Cy(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(h.mode&1?Bl(c)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(T=M.children,c=M.fallback,P?(M=h.mode,P=h.child,T={mode:"hidden",children:T},!(M&1)&&P!==null?(P.childLanes=0,P.pendingProps=T):P=xp(T,M,0,null),c=za(c,M,y,null),P.return=h,c.return=h,P.sibling=c,h.child=P,h.child.memoizedState=ep(y),h.memoizedState=Qd,c):Wy(h,T));if(T=c.memoizedState,T!==null){if($=T.dehydrated,$!==null){if(B)return h.flags&256?(h.flags&=-257,tp(c,h,y,Error(o(422)))):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(P=M.fallback,T=h.mode,M=xp({mode:"visible",children:M.children},T,0,null),P=za(P,T,y,null),P.flags|=2,M.return=h,P.return=h,M.sibling=P,h.child=M,h.mode&1&&Yl(h,c.child,null,y),h.child.memoizedState=ep(y),h.memoizedState=Qd,P);if(!(h.mode&1))h=tp(c,h,y,null);else if(Bl($))h=tp(c,h,y,Error(o(419)));else if(M=(y&c.childLanes)!==0,lr||M){if(M=kn,M!==null){switch(y&-y){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}M=P&(M.suspendedLanes|y)?0:P,M!==0&&M!==T.retryLane&&(T.retryLane=M,Or(c,M,-1))}c_(),h=tp(c,h,y,Error(o(421)))}else Pa($)?(h.flags|=128,h.child=c.child,h=XO.bind(null,c),Vl($,h),h=null):(y=T.treeContext,we&&(ar=uy($),or=h,un=!0,es=null,jc=!1,y!==null&&(Ir[Lr++]=Qs,Ir[Lr++]=eo,Ir[Lr++]=Ia,Qs=y.id,eo=y.overflow,Ia=h)),h=Wy(h,h.pendingProps.children),h.flags|=4096);return h}return P?(M=Eb(c,h,M.children,M.fallback,y),P=h.child,T=c.child.memoizedState,P.memoizedState=T===null?ep(y):{baseLanes:T.baseLanes|y,cachePool:null},P.childLanes=c.childLanes&~y,h.memoizedState=Qd,M):(y=Mb(c,h,M.children,y),h.memoizedState=null,y)}return P?(M=Eb(c,h,M.children,M.fallback,y),P=h.child,T=c.child.memoizedState,P.memoizedState=T===null?ep(y):{baseLanes:T.baseLanes|y,cachePool:null},P.childLanes=c.childLanes&~y,h.memoizedState=Qd,M):(y=Mb(c,h,M.children,y),h.memoizedState=null,y)}function Wy(c,h){return h=xp({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function Mb(c,h,y,M){var T=c.child;return c=T.sibling,y=jo(T,{mode:"visible",children:y}),!(h.mode&1)&&(y.lanes=M),y.return=h,y.sibling=null,c!==null&&(M=h.deletions,M===null?(h.deletions=[c],h.flags|=16):M.push(c)),h.child=y}function Eb(c,h,y,M,T){var P=h.mode;c=c.child;var B=c.sibling,$={mode:"hidden",children:y};return!(P&1)&&h.child!==c?(y=h.child,y.childLanes=0,y.pendingProps=$,h.deletions=null):(y=jo(c,$),y.subtreeFlags=c.subtreeFlags&14680064),B!==null?M=jo(B,M):(M=za(M,P,T,null),M.flags|=2),M.return=h,y.return=h,y.sibling=M,h.child=y,M}function tp(c,h,y,M){return M!==null&&Ry(M),Yl(h,c.child,null,y),c=Wy(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function bb(c,h,y){c.lanes|=h;var M=c.alternate;M!==null&&(M.lanes|=h),wy(c.return,h,y)}function jy(c,h,y,M,T){var P=c.memoizedState;P===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:M,tail:y,tailMode:T}:(P.isBackwards=h,P.rendering=null,P.renderingStartTime=0,P.last=M,P.tail=y,P.tailMode=T)}function Tb(c,h,y){var M=h.pendingProps,T=M.revealOrder,P=M.tail;if(Ni(c,h,M.children,y),M=pn.current,M&2)M=M&1|2,h.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&bb(c,y,h);else if(c.tag===19)bb(c,y,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}M&=1}if(at(pn,M),!(h.mode&1))h.memoizedState=null;else switch(T){case"forwards":for(y=h.child,T=null;y!==null;)c=y.alternate,c!==null&&Gd(c)===null&&(T=y),y=y.sibling;y=T,y===null?(T=h.child,h.child=null):(T=y.sibling,y.sibling=null),jy(h,!1,T,y,P);break;case"backwards":for(y=null,T=h.child,h.child=null;T!==null;){if(c=T.alternate,c!==null&&Gd(c)===null){h.child=T;break}c=T.sibling,T.sibling=y,y=T,T=c}jy(h,!0,y,null,P);break;case"together":jy(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function no(c,h,y){if(c!==null&&(h.dependencies=c.dependencies),eu|=h.lanes,!(y&h.childLanes))return null;if(c!==null&&h.child!==c.child)throw Error(o(153));if(h.child!==null){for(c=h.child,y=jo(c,c.pendingProps),h.child=y,y.return=h;c.sibling!==null;)c=c.sibling,y=y.sibling=jo(c,c.pendingProps),y.return=h;y.sibling=null}return h.child}function DO(c,h,y){switch(h.tag){case 3:xb(h),ql();break;case 5:HE(h);break;case 1:dn(h.type)&&Gl(h);break;case 4:Py(h,h.stateNode.containerInfo);break;case 10:AE(h,h.type._context,h.memoizedProps.value);break;case 13:var M=h.memoizedState;if(M!==null)return M.dehydrated!==null?(at(pn,pn.current&1),h.flags|=128,null):y&h.child.childLanes?Sb(c,h,y):(at(pn,pn.current&1),c=no(c,h,y),c!==null?c.sibling:null);at(pn,pn.current&1);break;case 19:if(M=(y&h.childLanes)!==0,c.flags&128){if(M)return Tb(c,h,y);h.flags|=128}var T=h.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),at(pn,pn.current),M)break;return null;case 22:case 23:return h.lanes=0,vb(c,h,y)}return no(c,h,y)}function OO(c,h){switch(Ty(h),h.tag){case 1:return dn(h.type)&&Uo(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return Kl(),jt(On),jt(Wn),Ny(),c=h.flags,c&65536&&!(c&128)?(h.flags=c&-65537|128,h):null;case 5:return Iy(h),null;case 13:if(jt(pn),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(o(340));ql()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return jt(pn),null;case 4:return Kl(),null;case 10:return xy(h.type._context),null;case 22:case 23:return u_(),null;case 24:return null;default:return null}}var np=!1,Da=!1,kO=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function ip(c,h){var y=c.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(M){$i(c,h,M)}else y.current=null}function Xy(c,h,y){try{y()}catch(M){$i(c,h,M)}}var Ab=!1;function FO(c,h){for(W(c.containerInfo),Fe=h;Fe!==null;)if(c=Fe,h=c.child,(c.subtreeFlags&1028)!==0&&h!==null)h.return=c,Fe=h;else for(;Fe!==null;){c=Fe;try{var y=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var M=y.memoizedProps,T=y.memoizedState,P=c.stateNode,B=P.getSnapshotBeforeUpdate(c.elementType===c.type?M:Qr(c.type,M),T);P.__reactInternalSnapshotBeforeUpdate=B}break;case 3:tt&&Ne(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch($){$i(c,c.return,$)}if(h=c.sibling,h!==null){h.return=c.return,Fe=h;break}Fe=c.return}return y=Ab,Ab=!1,y}function Oa(c,h,y){var M=h.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var T=M=M.next;do{if((T.tag&c)===c){var P=T.destroy;T.destroy=void 0,P!==void 0&&Xy(h,y,P)}T=T.next}while(T!==M)}}function ih(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var y=h=h.next;do{if((y.tag&c)===c){var M=y.create;y.destroy=M()}y=y.next}while(y!==h)}}function $y(c){var h=c.ref;if(h!==null){var y=c.stateNode;switch(c.tag){case 5:c=Q(y);break;default:c=y}typeof h=="function"?h(c):h.current=c}}function Cb(c,h,y){if(Ss&&typeof Ss.onCommitFiberUnmount=="function")try{Ss.onCommitFiberUnmount(Ld,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(c=h.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var M=c=c.next;do{var T=M,P=T.destroy;T=T.tag,P!==void 0&&(T&2||T&4)&&Xy(h,y,P),M=M.next}while(M!==c)}break;case 1:if(ip(h,y),c=h.stateNode,typeof c.componentWillUnmount=="function")try{c.props=h.memoizedProps,c.state=h.memoizedState,c.componentWillUnmount()}catch(B){$i(h,y,B)}break;case 5:ip(h,y);break;case 4:tt?Db(c,h,y):he&&he&&(h=h.stateNode.containerInfo,y=Wt(h),Rt(h,y))}}function Rb(c,h,y){for(var M=h;;)if(Cb(c,M,y),M.child===null||tt&&M.tag===4){if(M===h)break;for(;M.sibling===null;){if(M.return===null||M.return===h)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function Pb(c){var h=c.alternate;h!==null&&(c.alternate=null,Pb(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&Be(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Ib(c){return c.tag===5||c.tag===3||c.tag===4}function Lb(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Ib(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Nb(c){if(tt){e:{for(var h=c.return;h!==null;){if(Ib(h))break e;h=h.return}throw Error(o(160))}var y=h;switch(y.tag){case 5:h=y.stateNode,y.flags&32&&(ge(h),y.flags&=-33),y=Lb(c),Yy(c,y,h);break;case 3:case 4:h=y.stateNode.containerInfo,y=Lb(c),qy(c,y,h);break;default:throw Error(o(161))}}}function qy(c,h,y){var M=c.tag;if(M===5||M===6)c=c.stateNode,h?pt(y,c,h):Re(y,c);else if(M!==4&&(c=c.child,c!==null))for(qy(c,h,y),c=c.sibling;c!==null;)qy(c,h,y),c=c.sibling}function Yy(c,h,y){var M=c.tag;if(M===5||M===6)c=c.stateNode,h?Ve(y,c,h):ft(y,c);else if(M!==4&&(c=c.child,c!==null))for(Yy(c,h,y),c=c.sibling;c!==null;)Yy(c,h,y),c=c.sibling}function Db(c,h,y){for(var M=h,T=!1,P,B;;){if(!T){T=M.return;e:for(;;){if(T===null)throw Error(o(160));switch(P=T.stateNode,T.tag){case 5:B=!1;break e;case 3:P=P.containerInfo,B=!0;break e;case 4:P=P.containerInfo,B=!0;break e}T=T.return}T=!0}if(M.tag===5||M.tag===6)Rb(c,M,y),B?X(P,M.stateNode):Et(P,M.stateNode);else if(M.tag===18)B?Xe(P,M.stateNode):ke(P,M.stateNode);else if(M.tag===4){if(M.child!==null){P=M.stateNode.containerInfo,B=!0,M.child.return=M,M=M.child;continue}}else if(Cb(c,M,y),M.child!==null){M.child.return=M,M=M.child;continue}if(M===h)break;for(;M.sibling===null;){if(M.return===null||M.return===h)return;M=M.return,M.tag===4&&(T=!1)}M.sibling.return=M.return,M=M.sibling}}function Zy(c,h){if(tt){switch(h.tag){case 0:case 11:case 14:case 15:Oa(3,h,h.return),ih(3,h),Oa(5,h,h.return);return;case 1:return;case 5:var y=h.stateNode;if(y!=null){var M=h.memoizedProps;c=c!==null?c.memoizedProps:M;var T=h.type,P=h.updateQueue;h.updateQueue=null,P!==null&&it(y,P,T,c,M,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));y=h.memoizedProps,$e(h.stateNode,c!==null?c.memoizedProps:y,y);return;case 3:we&&c!==null&&c.memoizedState.isDehydrated&&re(h.stateNode.containerInfo);return;case 12:return;case 13:rp(h);return;case 19:rp(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:Oa(3,h,h.return),ih(3,h),Oa(5,h,h.return);return;case 12:return;case 13:rp(h);return;case 19:rp(h);return;case 3:we&&c!==null&&c.memoizedState.isDehydrated&&re(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(he){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,Rt(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function rp(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var y=c.stateNode;y===null&&(y=c.stateNode=new kO),h.forEach(function(M){var T=$O.bind(null,c,M);y.has(M)||(y.add(M),M.then(T,T))})}}function UO(c,h){for(Fe=h;Fe!==null;){h=Fe;var y=h.deletions;if(y!==null)for(var M=0;M<y.length;M++){var T=y[M];try{var P=c;tt?Db(P,T,h):Rb(P,T,h);var B=T.alternate;B!==null&&(B.return=null),T.return=null}catch(Ze){$i(T,h,Ze)}}if(y=h.child,h.subtreeFlags&12854&&y!==null)y.return=h,Fe=y;else for(;Fe!==null;){h=Fe;try{var $=h.flags;if($&32&&tt&&ge(h.stateNode),$&512){var fe=h.alternate;if(fe!==null){var Ae=fe.ref;Ae!==null&&(typeof Ae=="function"?Ae(null):Ae.current=null)}}if($&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var Ge=h.alternate;(Ge===null||Ge.memoizedState===null)&&(i_=Zn())}break;case 22:var yt=h.memoizedState!==null,rt=h.alternate,en=rt!==null&&rt.memoizedState!==null;if(y=h,tt){e:if(M=y,T=yt,P=null,tt)for(var Je=M;;){if(Je.tag===5){if(P===null){P=Je;var gi=Je.stateNode;T?H(gi):ce(Je.stateNode,Je.memoizedProps)}}else if(Je.tag===6){if(P===null){var Fr=Je.stateNode;T?ue(Fr):Pe(Fr,Je.memoizedProps)}}else if((Je.tag!==22&&Je.tag!==23||Je.memoizedState===null||Je===M)&&Je.child!==null){Je.child.return=Je,Je=Je.child;continue}if(Je===M)break;for(;Je.sibling===null;){if(Je.return===null||Je.return===M)break e;P===Je&&(P=null),Je=Je.return}P===Je&&(P=null),Je.sibling.return=Je.return,Je=Je.sibling}}if(yt&&!en&&y.mode&1){Fe=y;for(var ie=y.child;ie!==null;){for(y=Fe=ie;Fe!==null;){M=Fe;var Z=M.child;switch(M.tag){case 0:case 11:case 14:case 15:Oa(4,M,M.return);break;case 1:ip(M,M.return);var le=M.stateNode;if(typeof le.componentWillUnmount=="function"){var Ue=M.return;try{le.props=M.memoizedProps,le.state=M.memoizedState,le.componentWillUnmount()}catch(Ze){$i(M,Ue,Ze)}}break;case 5:ip(M,M.return);break;case 22:if(M.memoizedState!==null){Fb(y);continue}}Z!==null?(Z.return=M,Fe=Z):Fb(y)}ie=ie.sibling}}}switch($&4102){case 2:Nb(h),h.flags&=-3;break;case 6:Nb(h),h.flags&=-3,Zy(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,Zy(h.alternate,h);break;case 4:Zy(h.alternate,h)}}catch(Ze){$i(h,h.return,Ze)}if(y=h.sibling,y!==null){y.return=h.return,Fe=y;break}Fe=h.return}}}function zO(c,h,y){Fe=c,Ob(c)}function Ob(c,h,y){for(var M=(c.mode&1)!==0;Fe!==null;){var T=Fe,P=T.child;if(T.tag===22&&M){var B=T.memoizedState!==null||np;if(!B){var $=T.alternate,fe=$!==null&&$.memoizedState!==null||Da;$=np;var Ae=Da;if(np=B,(Da=fe)&&!Ae)for(Fe=T;Fe!==null;)B=Fe,fe=B.child,B.tag===22&&B.memoizedState!==null?Ub(T):fe!==null?(fe.return=B,Fe=fe):Ub(T);for(;P!==null;)Fe=P,Ob(P),P=P.sibling;Fe=T,np=$,Da=Ae}kb(c)}else T.subtreeFlags&8772&&P!==null?(P.return=T,Fe=P):kb(c)}}function kb(c){for(;Fe!==null;){var h=Fe;if(h.flags&8772){var y=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Da||ih(5,h);break;case 1:var M=h.stateNode;if(h.flags&4&&!Da)if(y===null)M.componentDidMount();else{var T=h.elementType===h.type?y.memoizedProps:Qr(h.type,y.memoizedProps);M.componentDidUpdate(T,y.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var P=h.updateQueue;P!==null&&PE(h,P,M);break;case 3:var B=h.updateQueue;if(B!==null){if(y=null,h.child!==null)switch(h.child.tag){case 5:y=Q(h.child.stateNode);break;case 1:y=h.child.stateNode}PE(h,B,y)}break;case 5:var $=h.stateNode;y===null&&h.flags&4&&Mt($,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(we&&h.memoizedState===null){var fe=h.alternate;if(fe!==null){var Ae=fe.memoizedState;if(Ae!==null){var Ge=Ae.dehydrated;Ge!==null&&se(Ge)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Da||h.flags&512&&$y(h)}catch(yt){$i(h,h.return,yt)}}if(h===c){Fe=null;break}if(y=h.sibling,y!==null){y.return=h.return,Fe=y;break}Fe=h.return}}function Fb(c){for(;Fe!==null;){var h=Fe;if(h===c){Fe=null;break}var y=h.sibling;if(y!==null){y.return=h.return,Fe=y;break}Fe=h.return}}function Ub(c){for(;Fe!==null;){var h=Fe;try{switch(h.tag){case 0:case 11:case 15:var y=h.return;try{ih(4,h)}catch(fe){$i(h,y,fe)}break;case 1:var M=h.stateNode;if(typeof M.componentDidMount=="function"){var T=h.return;try{M.componentDidMount()}catch(fe){$i(h,T,fe)}}var P=h.return;try{$y(h)}catch(fe){$i(h,P,fe)}break;case 5:var B=h.return;try{$y(h)}catch(fe){$i(h,B,fe)}}}catch(fe){$i(h,h.return,fe)}if(h===c){Fe=null;break}var $=h.sibling;if($!==null){$.return=h.return,Fe=$;break}Fe=h.return}}var sp=0,op=1,ap=2,lp=3,up=4;if(typeof Symbol=="function"&&Symbol.for){var rh=Symbol.for;sp=rh("selector.component"),op=rh("selector.has_pseudo_class"),ap=rh("selector.role"),lp=rh("selector.test_id"),up=rh("selector.text")}function Ky(c){var h=ye(c);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(c=te(c),c===null)throw Error(o(362));return c.stateNode.current}function Jy(c,h){switch(h.$$typeof){case sp:if(c.type===h.value)return!0;break;case op:e:{h=h.value,c=[c,0];for(var y=0;y<c.length;){var M=c[y++],T=c[y++],P=h[T];if(M.tag!==5||!Se(M)){for(;P!=null&&Jy(M,P);)T++,P=h[T];if(T===h.length){h=!0;break e}else for(M=M.child;M!==null;)c.push(M,T),M=M.sibling}}h=!1}return h;case ap:if(c.tag===5&&qe(c.stateNode,h.value))return!0;break;case up:if((c.tag===5||c.tag===6)&&(c=Ee(c),c!==null&&0<=c.indexOf(h.value)))return!0;break;case lp:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Qy(c){switch(c.$$typeof){case sp:return"<"+(C(c.value)||"Unknown")+">";case op:return":has("+(Qy(c)||"")+")";case ap:return'[role="'+c.value+'"]';case up:return'"'+c.value+'"';case lp:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function zb(c,h){var y=[];c=[c,0];for(var M=0;M<c.length;){var T=c[M++],P=c[M++],B=h[P];if(T.tag!==5||!Se(T)){for(;B!=null&&Jy(T,B);)P++,B=h[P];if(P===h.length)y.push(T);else for(T=T.child;T!==null;)c.push(T,P),T=T.sibling}}return y}function e_(c,h){if(!D)throw Error(o(363));c=Ky(c),c=zb(c,h),h=[],c=Array.from(c);for(var y=0;y<c.length;){var M=c[y++];if(M.tag===5)Se(M)||h.push(M.stateNode);else for(M=M.child;M!==null;)c.push(M),M=M.sibling}return h}var BO=Math.ceil,cp=a.ReactCurrentDispatcher,t_=a.ReactCurrentOwner,Rn=a.ReactCurrentBatchConfig,Ct=0,kn=null,Fn=null,ri=0,ur=0,Ql=ot(0),jn=0,sh=null,eu=0,hp=0,n_=0,oh=null,ji=null,i_=0,r_=1/0;function tu(){r_=Zn()+500}var fp=!1,s_=null,Vo=null,dp=!1,Ho=null,pp=0,ah=0,o_=null,mp=-1,gp=0;function Di(){return Ct&6?Zn():mp!==-1?mp:mp=Zn()}function Go(c){return c.mode&1?Ct&2&&ri!==0?ri&-ri:SO.transition!==null?(gp===0&&(c=Rd,Rd<<=1,!(Rd&4194240)&&(Rd=64),gp=c),gp):(c=Bt,c!==0?c:be()):1}function Or(c,h,y){if(50<ah)throw ah=0,o_=null,Error(o(185));var M=vp(c,h);return M===null?null:(Wc(M,h,y),(!(Ct&2)||M!==kn)&&(M===kn&&(!(Ct&2)&&(hp|=h),jn===4&&Wo(M,ri)),Xi(M,y),h===1&&Ct===0&&!(c.mode&1)&&(tu(),Nd&&Es())),M)}function vp(c,h){c.lanes|=h;var y=c.alternate;for(y!==null&&(y.lanes|=h),y=c,c=c.return;c!==null;)c.childLanes|=h,y=c.alternate,y!==null&&(y.childLanes|=h),y=c,c=c.return;return y.tag===3?y.stateNode:null}function Xi(c,h){var y=c.callbackNode;dO(c,h);var M=Id(c,c===kn?ri:0);if(M===0)y!==null&&bE(y),c.callbackNode=null,c.callbackPriority=0;else if(h=M&-M,c.callbackPriority!==h){if(y!=null&&bE(y),h===1)c.tag===0?wO(Vb.bind(null,c)):TE(Vb.bind(null,c)),Ke?V(function(){Ct===0&&Es()}):py(my,Es),y=null;else{switch(EE(M)){case 1:y=my;break;case 4:y=vO;break;case 16:y=gy;break;case 536870912:y=yO;break;default:y=gy}y=Zb(y,Bb.bind(null,c))}c.callbackPriority=h,c.callbackNode=y}}function Bb(c,h){if(mp=-1,gp=0,Ct&6)throw Error(o(327));var y=c.callbackNode;if(Ua()&&c.callbackNode!==y)return null;var M=Id(c,c===kn?ri:0);if(M===0)return null;if(M&30||M&c.expiredLanes||h)h=yp(c,M);else{h=M;var T=Ct;Ct|=2;var P=Wb();(kn!==c||ri!==h)&&(tu(),ka(c,h));do try{GO();break}catch($){Gb(c,$)}while(!0);_y(),cp.current=P,Ct=T,Fn!==null?h=0:(kn=null,ri=0,h=jn)}if(h!==0){if(h===2&&(T=hy(c),T!==0&&(M=T,h=a_(c,T))),h===1)throw y=sh,ka(c,0),Wo(c,M),Xi(c,Zn()),y;if(h===6)Wo(c,M);else{if(T=c.current.alternate,!(M&30)&&!VO(T)&&(h=yp(c,M),h===2&&(P=hy(c),P!==0&&(M=P,h=a_(c,P))),h===1))throw y=sh,ka(c,0),Wo(c,M),Xi(c,Zn()),y;switch(c.finishedWork=T,c.finishedLanes=M,h){case 0:case 1:throw Error(o(345));case 2:Fa(c,ji);break;case 3:if(Wo(c,M),(M&130023424)===M&&(h=i_+500-Zn(),10<h)){if(Id(c,0)!==0)break;if(T=c.suspendedLanes,(T&M)!==M){Di(),c.pingedLanes|=c.suspendedLanes&T;break}c.timeoutHandle=de(Fa.bind(null,c,ji),h);break}Fa(c,ji);break;case 4:if(Wo(c,M),(M&4194240)===M)break;for(h=c.eventTimes,T=-1;0<M;){var B=31-Jr(M);P=1<<B,B=h[B],B>T&&(T=B),M&=~P}if(M=T,M=Zn()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*BO(M/1960))-M,10<M){c.timeoutHandle=de(Fa.bind(null,c,ji),M);break}Fa(c,ji);break;case 5:Fa(c,ji);break;default:throw Error(o(329))}}}return Xi(c,Zn()),c.callbackNode===y?Bb.bind(null,c):null}function a_(c,h){var y=oh;return c.current.memoizedState.isDehydrated&&(ka(c,h).flags|=256),c=yp(c,h),c!==2&&(h=ji,ji=y,h!==null&&l_(h)),c}function l_(c){ji===null?ji=c:ji.push.apply(ji,c)}function VO(c){for(var h=c;;){if(h.flags&16384){var y=h.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var M=0;M<y.length;M++){var T=y[M],P=T.getSnapshot;T=T.value;try{if(!Ms(P(),T))return!1}catch{return!1}}}if(y=h.child,h.subtreeFlags&16384&&y!==null)y.return=h,h=y;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Wo(c,h){for(h&=~n_,h&=~hp,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var y=31-Jr(h),M=1<<y;c[y]=-1,h&=~M}}function Vb(c){if(Ct&6)throw Error(o(327));Ua();var h=Id(c,0);if(!(h&1))return Xi(c,Zn()),null;var y=yp(c,h);if(c.tag!==0&&y===2){var M=hy(c);M!==0&&(h=M,y=a_(c,M))}if(y===1)throw y=sh,ka(c,0),Wo(c,h),Xi(c,Zn()),y;if(y===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,Fa(c,ji),Xi(c,Zn()),null}function Hb(c){Ho!==null&&Ho.tag===0&&!(Ct&6)&&Ua();var h=Ct;Ct|=1;var y=Rn.transition,M=Bt;try{if(Rn.transition=null,Bt=1,c)return c()}finally{Bt=M,Rn.transition=y,Ct=h,!(Ct&6)&&Es()}}function u_(){ur=Ql.current,jt(Ql)}function ka(c,h){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;if(y!==lt&&(c.timeoutHandle=lt,Qe(y)),Fn!==null)for(y=Fn.return;y!==null;){var M=y;switch(Ty(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Uo();break;case 3:Kl(),jt(On),jt(Wn),Ny();break;case 5:Iy(M);break;case 4:Kl();break;case 13:jt(pn);break;case 19:jt(pn);break;case 10:xy(M.type._context);break;case 22:case 23:u_()}y=y.return}if(kn=c,Fn=c=jo(c.current,null),ri=ur=h,jn=0,sh=null,n_=hp=eu=0,ji=oh=null,bs!==null){for(h=0;h<bs.length;h++)if(y=bs[h],M=y.interleaved,M!==null){y.interleaved=null;var T=M.next,P=y.pending;if(P!==null){var B=P.next;P.next=T,M.next=B}y.pending=M}bs=null}return c}function Gb(c,h){do{var y=Fn;try{if(_y(),Wd.current=Zd,jd){for(var M=wn.memoizedState;M!==null;){var T=M.queue;T!==null&&(T.pending=null),M=M.next}jd=!1}if(Jl=0,Kn=di=wn=null,Zc=!1,Kc=0,t_.current=null,y===null||y.return===null){jn=1,sh=h,Fn=null;break}e:{var P=c,B=y.return,$=y,fe=h;if(h=ri,$.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Ae=fe,Ge=$,yt=Ge.tag;if(!(Ge.mode&1)&&(yt===0||yt===11||yt===15)){var rt=Ge.alternate;rt?(Ge.updateQueue=rt.updateQueue,Ge.memoizedState=rt.memoizedState,Ge.lanes=rt.lanes):(Ge.updateQueue=null,Ge.memoizedState=null)}var en=cb(B);if(en!==null){en.flags&=-257,hb(en,B,$,P,h),en.mode&1&&ub(P,Ae,h),h=en,fe=Ae;var Je=h.updateQueue;if(Je===null){var gi=new Set;gi.add(fe),h.updateQueue=gi}else Je.add(fe);break e}else{if(!(h&1)){ub(P,Ae,h),c_();break e}fe=Error(o(426))}}else if(un&&$.mode&1){var Fr=cb(B);if(Fr!==null){!(Fr.flags&65536)&&(Fr.flags|=256),hb(Fr,B,$,P,h),Ry(fe);break e}}P=fe,jn!==4&&(jn=2),oh===null?oh=[P]:oh.push(P),fe=By(fe,$),$=B;do{switch($.tag){case 3:$.flags|=65536,h&=-h,$.lanes|=h;var ie=ab($,fe,h);RE($,ie);break e;case 1:P=fe;var Z=$.type,le=$.stateNode;if(!($.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(Vo===null||!Vo.has(le)))){$.flags|=65536,h&=-h,$.lanes|=h;var Ue=lb($,P,h);RE($,Ue);break e}}$=$.return}while($!==null)}Xb(y)}catch(Ze){h=Ze,Fn===y&&y!==null&&(Fn=y=y.return);continue}break}while(!0)}function Wb(){var c=cp.current;return cp.current=Zd,c===null?Zd:c}function c_(){(jn===0||jn===3||jn===2)&&(jn=4),kn===null||!(eu&268435455)&&!(hp&268435455)||Wo(kn,ri)}function yp(c,h){var y=Ct;Ct|=2;var M=Wb();kn===c&&ri===h||ka(c,h);do try{HO();break}catch(T){Gb(c,T)}while(!0);if(_y(),Ct=y,cp.current=M,Fn!==null)throw Error(o(261));return kn=null,ri=0,jn}function HO(){for(;Fn!==null;)jb(Fn)}function GO(){for(;Fn!==null&&!mO();)jb(Fn)}function jb(c){var h=Yb(c.alternate,c,ur);c.memoizedProps=c.pendingProps,h===null?Xb(c):Fn=h,t_.current=null}function Xb(c){var h=c;do{var y=h.alternate;if(c=h.return,h.flags&32768){if(y=OO(y,h),y!==null){y.flags&=32767,Fn=y;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{jn=6,Fn=null;return}}else if(y=LO(y,h,ur),y!==null){Fn=y;return}if(h=h.sibling,h!==null){Fn=h;return}Fn=h=c}while(h!==null);jn===0&&(jn=5)}function Fa(c,h){var y=Bt,M=Rn.transition;try{Rn.transition=null,Bt=1,WO(c,h,y)}finally{Rn.transition=M,Bt=y}return null}function WO(c,h,y){do Ua();while(Ho!==null);if(Ct&6)throw Error(o(327));var M=c.finishedWork,T=c.finishedLanes;if(M===null)return null;if(c.finishedWork=null,c.finishedLanes=0,M===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var P=M.lanes|M.childLanes;if(pO(c,P),c===kn&&(Fn=kn=null,ri=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||dp||(dp=!0,Zb(gy,function(){return Ua(),null})),P=(M.flags&15990)!==0,M.subtreeFlags&15990||P){P=Rn.transition,Rn.transition=null;var B=Bt;Bt=1;var $=Ct;Ct|=4,t_.current=null,FO(c,M),UO(c,M),G(c.containerInfo),c.current=M,zO(M),gO(),Ct=$,Bt=B,Rn.transition=P}else c.current=M;if(dp&&(dp=!1,Ho=c,pp=T),P=c.pendingLanes,P===0&&(Vo=null),_O(M.stateNode),Xi(c,Zn()),h!==null)for(y=c.onRecoverableError,M=0;M<h.length;M++)y(h[M]);if(fp)throw fp=!1,c=s_,s_=null,c;return pp&1&&c.tag!==0&&Ua(),P=c.pendingLanes,P&1?c===o_?ah++:(ah=0,o_=c):ah=0,Es(),null}function Ua(){if(Ho!==null){var c=EE(pp),h=Rn.transition,y=Bt;try{if(Rn.transition=null,Bt=16>c?16:c,Ho===null)var M=!1;else{if(c=Ho,Ho=null,pp=0,Ct&6)throw Error(o(331));var T=Ct;for(Ct|=4,Fe=c.current;Fe!==null;){var P=Fe,B=P.child;if(Fe.flags&16){var $=P.deletions;if($!==null){for(var fe=0;fe<$.length;fe++){var Ae=$[fe];for(Fe=Ae;Fe!==null;){var Ge=Fe;switch(Ge.tag){case 0:case 11:case 15:Oa(8,Ge,P)}var yt=Ge.child;if(yt!==null)yt.return=Ge,Fe=yt;else for(;Fe!==null;){Ge=Fe;var rt=Ge.sibling,en=Ge.return;if(Pb(Ge),Ge===Ae){Fe=null;break}if(rt!==null){rt.return=en,Fe=rt;break}Fe=en}}}var Je=P.alternate;if(Je!==null){var gi=Je.child;if(gi!==null){Je.child=null;do{var Fr=gi.sibling;gi.sibling=null,gi=Fr}while(gi!==null)}}Fe=P}}if(P.subtreeFlags&2064&&B!==null)B.return=P,Fe=B;else e:for(;Fe!==null;){if(P=Fe,P.flags&2048)switch(P.tag){case 0:case 11:case 15:Oa(9,P,P.return)}var ie=P.sibling;if(ie!==null){ie.return=P.return,Fe=ie;break e}Fe=P.return}}var Z=c.current;for(Fe=Z;Fe!==null;){B=Fe;var le=B.child;if(B.subtreeFlags&2064&&le!==null)le.return=B,Fe=le;else e:for(B=Z;Fe!==null;){if($=Fe,$.flags&2048)try{switch($.tag){case 0:case 11:case 15:ih(9,$)}}catch(Ze){$i($,$.return,Ze)}if($===B){Fe=null;break e}var Ue=$.sibling;if(Ue!==null){Ue.return=$.return,Fe=Ue;break e}Fe=$.return}}if(Ct=T,Es(),Ss&&typeof Ss.onPostCommitFiberRoot=="function")try{Ss.onPostCommitFiberRoot(Ld,c)}catch{}M=!0}return M}finally{Bt=y,Rn.transition=h}}return!1}function $b(c,h,y){h=By(y,h),h=ab(c,h,1),Bo(c,h),h=Di(),c=vp(c,1),c!==null&&(Wc(c,1,h),Xi(c,h))}function $i(c,h,y){if(c.tag===3)$b(c,c,y);else for(;h!==null;){if(h.tag===3){$b(h,c,y);break}else if(h.tag===1){var M=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Vo===null||!Vo.has(M))){c=By(y,c),c=lb(h,c,1),Bo(h,c),c=Di(),h=vp(h,1),h!==null&&(Wc(h,1,c),Xi(h,c));break}}h=h.return}}function jO(c,h,y){var M=c.pingCache;M!==null&&M.delete(h),h=Di(),c.pingedLanes|=c.suspendedLanes&y,kn===c&&(ri&y)===y&&(jn===4||jn===3&&(ri&130023424)===ri&&500>Zn()-i_?ka(c,0):n_|=y),Xi(c,h)}function qb(c,h){h===0&&(c.mode&1?(h=Pd,Pd<<=1,!(Pd&130023424)&&(Pd=4194304)):h=1);var y=Di();c=vp(c,h),c!==null&&(Wc(c,h,y),Xi(c,y))}function XO(c){var h=c.memoizedState,y=0;h!==null&&(y=h.retryLane),qb(c,y)}function $O(c,h){var y=0;switch(c.tag){case 13:var M=c.stateNode,T=c.memoizedState;T!==null&&(y=T.retryLane);break;case 19:M=c.stateNode;break;default:throw Error(o(314))}M!==null&&M.delete(h),qb(c,y)}var Yb;Yb=function(c,h,y){if(c!==null)if(c.memoizedProps!==h.pendingProps||On.current)lr=!0;else{if(!(c.lanes&y)&&!(h.flags&128))return lr=!1,DO(c,h,y);lr=!!(c.flags&131072)}else lr=!1,un&&h.flags&1048576&&OE(h,Vd,h.index);switch(h.lanes=0,h.tag){case 2:var M=h.type;c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),c=h.pendingProps;var T=fn(h,Wn.current);jl(h,y),T=Oy(null,h,M,c,T,y);var P=ky();return h.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,dn(M)?(P=!0,Gl(h)):P=!1,h.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Sy(h),T.updater=zd,h.stateNode=T,T._reactInternals=h,Ey(h,M,c,y),h=Gy(null,h,M,!0,P,y)):(h.tag=0,un&&P&&by(h),Ni(null,h,T,y),h=h.child),h;case 16:M=h.elementType;e:{switch(c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),c=h.pendingProps,T=M._init,M=T(M._payload),h.type=M,T=h.tag=YO(M),c=Qr(M,c),T){case 0:h=Hy(null,h,M,c,y);break e;case 1:h=_b(null,h,M,c,y);break e;case 11:h=pb(null,h,M,c,y);break e;case 14:h=mb(null,h,M,Qr(M.type,c),y);break e}throw Error(o(306,M,""))}return h;case 0:return M=h.type,T=h.pendingProps,T=h.elementType===M?T:Qr(M,T),Hy(c,h,M,T,y);case 1:return M=h.type,T=h.pendingProps,T=h.elementType===M?T:Qr(M,T),_b(c,h,M,T,y);case 3:e:{if(xb(h),c===null)throw Error(o(387));M=h.pendingProps,P=h.memoizedState,T=P.element,CE(c,h),Ud(h,M,null,y);var B=h.memoizedState;if(M=B.element,we&&P.isDehydrated)if(P={element:M,isDehydrated:!1,cache:B.cache,transitions:B.transitions},h.updateQueue.baseState=P,h.memoizedState=P,h.flags&256){T=Error(o(423)),h=wb(c,h,M,y,T);break e}else if(M!==T){T=Error(o(424)),h=wb(c,h,M,y,T);break e}else for(we&&(ar=ly(h.stateNode.containerInfo),or=h,un=!0,es=null,jc=!1),y=VE(h,null,M,y),h.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(ql(),M===T){h=no(c,h,y);break e}Ni(c,h,M,y)}h=h.child}return h;case 5:return HE(h),c===null&&Cy(h),M=h.type,T=h.pendingProps,P=c!==null?c.memoizedProps:null,B=T.children,pe(M,T)?B=null:P!==null&&pe(M,P)&&(h.flags|=32),yb(c,h),Ni(c,h,B,y),h.child;case 6:return c===null&&Cy(h),null;case 13:return Sb(c,h,y);case 4:return Py(h,h.stateNode.containerInfo),M=h.pendingProps,c===null?h.child=Yl(h,null,M,y):Ni(c,h,M,y),h.child;case 11:return M=h.type,T=h.pendingProps,T=h.elementType===M?T:Qr(M,T),pb(c,h,M,T,y);case 7:return Ni(c,h,h.pendingProps,y),h.child;case 8:return Ni(c,h,h.pendingProps.children,y),h.child;case 12:return Ni(c,h,h.pendingProps.children,y),h.child;case 10:e:{if(M=h.type._context,T=h.pendingProps,P=h.memoizedProps,B=T.value,AE(h,M,B),P!==null)if(Ms(P.value,B)){if(P.children===T.children&&!On.current){h=no(c,h,y);break e}}else for(P=h.child,P!==null&&(P.return=h);P!==null;){var $=P.dependencies;if($!==null){B=P.child;for(var fe=$.firstContext;fe!==null;){if(fe.context===M){if(P.tag===1){fe=Js(-1,y&-y),fe.tag=2;var Ae=P.updateQueue;if(Ae!==null){Ae=Ae.shared;var Ge=Ae.pending;Ge===null?fe.next=fe:(fe.next=Ge.next,Ge.next=fe),Ae.pending=fe}}P.lanes|=y,fe=P.alternate,fe!==null&&(fe.lanes|=y),wy(P.return,y,h),$.lanes|=y;break}fe=fe.next}}else if(P.tag===10)B=P.type===h.type?null:P.child;else if(P.tag===18){if(B=P.return,B===null)throw Error(o(341));B.lanes|=y,$=B.alternate,$!==null&&($.lanes|=y),wy(B,y,h),B=P.sibling}else B=P.child;if(B!==null)B.return=P;else for(B=P;B!==null;){if(B===h){B=null;break}if(P=B.sibling,P!==null){P.return=B.return,B=P;break}B=B.return}P=B}Ni(c,h,T.children,y),h=h.child}return h;case 9:return T=h.type,M=h.pendingProps.children,jl(h,y),T=Pr(T),M=M(T),h.flags|=1,Ni(c,h,M,y),h.child;case 14:return M=h.type,T=Qr(M,h.pendingProps),T=Qr(M.type,T),mb(c,h,M,T,y);case 15:return gb(c,h,h.type,h.pendingProps,y);case 17:return M=h.type,T=h.pendingProps,T=h.elementType===M?T:Qr(M,T),c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,dn(M)?(c=!0,Gl(h)):c=!1,jl(h,y),NE(h,M,T),Ey(h,M,T,y),Gy(null,h,M,!0,c,y);case 19:return Tb(c,h,y);case 22:return vb(c,h,y)}throw Error(o(156,h.tag))};function Zb(c,h){return py(c,h)}function qO(c,h,y,M){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(c,h,y,M){return new qO(c,h,y,M)}function h_(c){return c=c.prototype,!(!c||!c.isReactComponent)}function YO(c){if(typeof c=="function")return h_(c)?1:0;if(c!=null){if(c=c.$$typeof,c===x)return 11;if(c===w)return 14}return 2}function jo(c,h){var y=c.alternate;return y===null?(y=kr(c.tag,h,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=h,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&14680064,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,h=c.dependencies,y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y}function _p(c,h,y,M,T,P){var B=2;if(M=c,typeof c=="function")h_(c)&&(B=1);else if(typeof c=="string")B=5;else e:switch(c){case f:return za(y.children,T,P,h);case d:B=8,T|=8;break;case p:return c=kr(12,y,h,T|2),c.elementType=p,c.lanes=P,c;case _:return c=kr(13,y,h,T),c.elementType=_,c.lanes=P,c;case m:return c=kr(19,y,h,T),c.elementType=m,c.lanes=P,c;case b:return xp(y,T,P,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case g:B=10;break e;case v:B=9;break e;case x:B=11;break e;case w:B=14;break e;case S:B=16,M=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return h=kr(B,y,h,T),h.elementType=c,h.type=M,h.lanes=P,h}function za(c,h,y,M){return c=kr(7,c,M,h),c.lanes=y,c}function xp(c,h,y,M){return c=kr(22,c,M,h),c.elementType=b,c.lanes=y,c.stateNode={},c}function f_(c,h,y){return c=kr(6,c,null,h),c.lanes=y,c}function d_(c,h,y){return h=kr(4,c.children!==null?c.children:[],c.key,h),h.lanes=y,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function ZO(c,h,y,M,T){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=lt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fy(0),this.expirationTimes=fy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fy(0),this.identifierPrefix=M,this.onRecoverableError=T,we&&(this.mutableSourceEagerHydrationData=null)}function Kb(c,h,y,M,T,P,B,$,fe){return c=new ZO(c,h,y,$,fe),h===1?(h=1,P===!0&&(h|=8)):h=0,P=kr(3,null,null,h),c.current=P,P.stateNode=c,P.memoizedState={element:M,isDehydrated:y,cache:null,transitions:null},Sy(P),c}function Jb(c){if(!c)return fi;c=c._reactInternals;e:{if(I(c)!==c||c.tag!==1)throw Error(o(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(dn(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(c.tag===1){var y=c.type;if(dn(y))return Hl(c,y,h)}return h}function Qb(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=z(h),c===null?null:c.stateNode}function eT(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<h?y:h}}function p_(c,h){eT(c,h),(c=c.alternate)&&eT(c,h)}function KO(c){return c=z(c),c===null?null:c.stateNode}function JO(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var h=Di();Or(c,134217728,h),p_(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var h=Di(),y=Go(c);Or(c,y,h),p_(c,y)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var y=Gc(h.pendingLanes);y!==0&&(dy(h,y|1),Xi(h,Zn()),!(Ct&6)&&(tu(),Es()))}break;case 13:var M=Di();Hb(function(){return Or(c,1,M)}),p_(c,1)}},t.batchedUpdates=function(c,h){var y=Ct;Ct|=1;try{return c(h)}finally{Ct=y,Ct===0&&(tu(),Nd&&Es())}},t.createComponentSelector=function(c){return{$$typeof:sp,value:c}},t.createContainer=function(c,h,y,M,T,P,B){return Kb(c,h,!1,null,y,M,T,P,B)},t.createHasPseudoClassSelector=function(c){return{$$typeof:op,value:c}},t.createHydrationContainer=function(c,h,y,M,T,P,B,$,fe){return c=Kb(y,M,!0,c,T,P,B,$,fe),c.context=Jb(null),y=c.current,M=Di(),T=Go(y),P=Js(M,T),P.callback=h??null,Bo(y,P),c.current.lanes=T,Wc(c,T,M),Xi(c,M),c},t.createPortal=function(c,h,y){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:M==null?null:""+M,children:c,containerInfo:h,implementation:y}},t.createRoleSelector=function(c){return{$$typeof:ap,value:c}},t.createTestNameSelector=function(c){return{$$typeof:lp,value:c}},t.createTextSelector=function(c){return{$$typeof:up,value:c}},t.deferredUpdates=function(c){var h=Bt,y=Rn.transition;try{return Rn.transition=null,Bt=16,c()}finally{Bt=h,Rn.transition=y}},t.discreteUpdates=function(c,h,y,M,T){var P=Bt,B=Rn.transition;try{return Rn.transition=null,Bt=1,c(h,y,M,T)}finally{Bt=P,Rn.transition=B,Ct===0&&tu()}},t.findAllNodes=e_,t.findBoundingRects=function(c,h){if(!D)throw Error(o(363));h=e_(c,h),c=[];for(var y=0;y<h.length;y++)c.push(xe(h[y]));for(h=c.length-1;0<h;h--){y=c[h];for(var M=y.x,T=M+y.width,P=y.y,B=P+y.height,$=h-1;0<=$;$--)if(h!==$){var fe=c[$],Ae=fe.x,Ge=Ae+fe.width,yt=fe.y,rt=yt+fe.height;if(M>=Ae&&P>=yt&&T<=Ge&&B<=rt){c.splice(h,1);break}else if(M!==Ae||y.width!==fe.width||rt<P||yt>B){if(!(P!==yt||y.height!==fe.height||Ge<M||Ae>T)){Ae>M&&(fe.width+=Ae-M,fe.x=M),Ge<T&&(fe.width=T-Ae),c.splice(h,1);break}}else{yt>P&&(fe.height+=yt-P,fe.y=P),rt<B&&(fe.height=B-yt),c.splice(h,1);break}}}return c},t.findHostInstance=Qb,t.findHostInstanceWithNoPortals=function(c){return c=N(c),c=c!==null?q(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return Qb(c)},t.flushControlled=function(c){var h=Ct;Ct|=1;var y=Rn.transition,M=Bt;try{Rn.transition=null,Bt=1,c()}finally{Bt=M,Rn.transition=y,Ct=h,Ct===0&&(tu(),Es())}},t.flushPassiveEffects=Ua,t.flushSync=Hb,t.focusWithin=function(c,h){if(!D)throw Error(o(363));for(c=Ky(c),h=zb(c,h),h=Array.from(h),c=0;c<h.length;){var y=h[c++];if(!Se(y)){if(y.tag===5&&Le(y.stateNode))return!0;for(y=y.child;y!==null;)h.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Bt},t.getFindAllNodesFailureDescription=function(c,h){if(!D)throw Error(o(363));var y=0,M=[];c=[Ky(c),0];for(var T=0;T<c.length;){var P=c[T++],B=c[T++],$=h[B];if((P.tag!==5||!Se(P))&&(Jy(P,$)&&(M.push(Qy($)),B++,B>y&&(y=B)),B<h.length))for(P=P.child;P!==null;)c.push(P,B),P=P.sibling}if(y<h.length){for(c=[];y<h.length;y++)c.push(Qy(h[y]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return Q(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:KO,findFiberByHostInstance:c.findFiberByHostInstance||JO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)c=!0;else{try{Ld=h.inject(c),Ss=h}catch{}c=!!h.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,h,y,M){if(!D)throw Error(o(363));c=e_(c,h);var T=Ie(c,y,M).disconnect;return{disconnect:function(){T()}}},t.registerMutableSourceForHydration=function(c,h){var y=h._getVersion;y=y(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,y]:c.mutableSourceEagerHydrationData.push(h,y)},t.runWithPriority=function(c,h){var y=Bt;try{return Bt=c,h()}finally{Bt=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,h,y,M){var T=h.current,P=Di(),B=Go(T);return y=Jb(y),h.context===null?h.context=y:h.pendingContext=y,h=Js(P,B),h.payload={element:c},M=M===void 0?null:M,M!==null&&(h.callback=M),Bo(T,h),c=Or(T,B,P),c!==null&&Fd(c,T,B),B},t};W3.exports=MG;var EG=W3.exports;const bG=l1(EG),WM={},$3=n=>void Object.assign(WM,n);function TG(n,e){function t(f,{args:d=[],attach:p,...g},v){let x=`${f[0].toUpperCase()}${f.slice(1)}`,_;if(f==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const m=g.object;_=Ru(m,{type:f,root:v,attach:p,primitive:!0})}else{const m=WM[x];if(!m)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");_=Ru(new m(...d),{type:f,root:v,attach:p,memoizedProps:{args:d}})}return _.__r3f.attach===void 0&&(_ instanceof Tt?_.__r3f.attach="geometry":_ instanceof hi&&(_.__r3f.attach="material")),x!=="inject"&&Ix(_,g),_}function i(f,d){let p=!1;if(d){var g,v;(g=d.__r3f)!=null&&g.attach?Px(f,d,d.__r3f.attach):d.isObject3D&&f.isObject3D&&(f.add(d),p=!0),p||(v=f.__r3f)==null||v.objects.push(d),d.__r3f||Ru(d,{}),d.__r3f.parent=f,DS(d),Pu(d)}}function r(f,d,p){let g=!1;if(d){var v,x;if((v=d.__r3f)!=null&&v.attach)Px(f,d,d.__r3f.attach);else if(d.isObject3D&&f.isObject3D){d.parent=f,d.dispatchEvent({type:"added"}),f.dispatchEvent({type:"childadded",child:d});const _=f.children.filter(w=>w!==d),m=_.indexOf(p);f.children=[..._.slice(0,m),d,..._.slice(m)],g=!0}g||(x=f.__r3f)==null||x.objects.push(d),d.__r3f||Ru(d,{}),d.__r3f.parent=f,DS(d),Pu(d)}}function s(f,d,p=!1){f&&[...f].forEach(g=>o(d,g,p))}function o(f,d,p){if(d){var g,v,x;if(d.__r3f&&(d.__r3f.parent=null),(g=f.__r3f)!=null&&g.objects&&(f.__r3f.objects=f.__r3f.objects.filter(b=>b!==d)),(v=d.__r3f)!=null&&v.attach)qC(f,d,d.__r3f.attach);else if(d.isObject3D&&f.isObject3D){var _;f.remove(d),(_=d.__r3f)!=null&&_.root&&DG(pg(d),d)}const w=(x=d.__r3f)==null?void 0:x.primitive,S=!w&&(p===void 0?d.dispose!==null:p);if(!w){var m;s((m=d.__r3f)==null?void 0:m.objects,d,S),s(d.children,d,S)}if(delete d.__r3f,S&&d.dispose&&d.type!=="Scene"){const b=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?LS.unstable_scheduleCallback(LS.unstable_IdlePriority,b):b()}Pu(f)}}function a(f,d,p,g){var v;const x=(v=f.__r3f)==null?void 0:v.parent;if(!x)return;const _=t(d,p,f.__r3f.root);if(f.children){for(const m of f.children)m.__r3f&&i(_,m);f.children=f.children.filter(m=>!m.__r3f)}f.__r3f.objects.forEach(m=>i(_,m)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||o(x,f),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),i(x,_),_.raycast&&_.__r3f.eventCount&&pg(_).getState().internal.interaction.push(_),[g,g.alternate].forEach(m=>{m!==null&&(m.stateNode=_,m.ref&&(typeof m.ref=="function"?m.ref(_):m.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:bG({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,d)=>{if(!d)return;const p=f.getState().scene;p.__r3f&&(p.__r3f.root=f,i(p,d))},removeChildFromContainer:(f,d)=>{d&&o(f.getState().scene,d)},insertInContainerBefore:(f,d,p)=>{if(!d||!p)return;const g=f.getState().scene;g.__r3f&&r(g,d,p)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var d;return!!((d=f==null?void 0:f.__r3f)!=null?d:{}).handlers},prepareUpdate(f,d,p,g){var v;if(((v=f==null?void 0:f.__r3f)!=null?v:{}).primitive&&g.object&&g.object!==f)return[!0];{const{args:_=[],children:m,...w}=g,{args:S=[],children:b,...R}=p;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((C,L)=>C!==S[L]))return[!0];const A=eN(f,w,R,!0);return A.changes.length?[!1,A]:null}},commitUpdate(f,[d,p],g,v,x,_){d?a(f,g,x,_):Ix(f,p)},commitMount(f,d,p,g){var v;const x=(v=f.__r3f)!=null?v:{};f.raycast&&x.handlers&&x.eventCount&&pg(f).getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>Ru(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var d;const{attach:p,parent:g}=(d=f.__r3f)!=null?d:{};p&&g&&qC(g,f,p),f.isObject3D&&(f.visible=!1),Pu(f)},unhideInstance(f,d){var p;const{attach:g,parent:v}=(p=f.__r3f)!=null?p:{};g&&v&&Px(v,f,g),(f.isObject3D&&d.visible==null||d.visible)&&(f.visible=!0),Pu(f)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Qu.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&cn.fun(performance.now)?performance.now:cn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:cn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:cn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Ix}}var WC,jC;const Rx=n=>"colorSpace"in n||"outputColorSpace"in n,q3=()=>{var n;return(n=WM.ColorManagement)!=null?n:null},Y3=n=>n&&n.isOrthographicCamera,AG=n=>n&&n.hasOwnProperty("current"),Sd=typeof window<"u"&&((WC=window.document)!=null&&WC.createElement||((jC=window.navigator)==null?void 0:jC.product)==="ReactNative")?Y.useLayoutEffect:Y.useEffect;function Z3(n){const e=Y.useRef(n);return Sd(()=>void(e.current=n),[n]),e}function CG({set:n}){return Sd(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class K3 extends Y.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}K3.getDerivedStateFromError=()=>({error:!0});const J3="__default",XC=new Map,RG=n=>n&&!!n.memoized&&!!n.changes;function Q3(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Ch=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function pg(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const cn={obj:n=>n===Object(n)&&!cn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(cn.str(n)||cn.num(n))return n===e;const s=cn.obj(n);if(s&&i==="reference")return n===e;const o=cn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!cn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(cn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function PG(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Ru(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function NS(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const $C=/-\d+$/;function Px(n,e,t){if(cn.str(t)){if($C.test(t)){const s=t.replace($C,""),{target:o,key:a}=NS(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=NS(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function qC(n,e,t){var i,r;if(cn.str(t)){const{target:s,key:o}=NS(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function eN(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},u=!1){const f=n.__r3f,d=Object.entries(r),p=[];if(u){const v=Object.keys(l);for(let x=0;x<v.length;x++)r.hasOwnProperty(v[x])||d.unshift([v[x],J3+"remove"])}d.forEach(([v,x])=>{var _;if((_=n.__r3f)!=null&&_.primitive&&v==="object"||cn.equ(x,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return p.push([v,x,!0,[]]);let m=[];v.includes("-")&&(m=v.split("-")),p.push([v,x,!1,m]);for(const w in r){const S=r[w];w.startsWith(`${v}-`)&&p.push([w,S,!1,w.split("-")])}});const g={...r};return f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.args&&(g.args=f.memoizedProps.args),f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.attach&&(g.attach=f.memoizedProps.attach),{memoized:g,changes:p}}const IG=typeof process<"u"&&!1;function Ix(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=RG(e)?e:eN(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let f=0;f<a.length;f++){let[d,p,g,v]=a[f];if(Rx(n)){const w="srgb",S="srgb-linear";d==="encoding"?(d="colorSpace",p=p===3001?w:S):d==="outputEncoding"&&(d="outputColorSpace",p=p===3001?w:S)}let x=n,_=x[d];if(v.length&&(_=v.reduce((m,w)=>m[w],n),!(_&&_.set))){const[m,...w]=v.reverse();x=w.reverse().reduce((S,b)=>S[b],n),d=m}if(p===J3+"remove")if(x.constructor){let m=XC.get(x.constructor);m||(m=new x.constructor,XC.set(x.constructor,m)),p=m[d]}else p=0;if(g&&i)p?i.handlers[d]=p:delete i.handlers[d],i.eventCount=Object.keys(i.handlers).length;else if(_&&_.set&&(_.copy||_ instanceof _l)){if(Array.isArray(p))_.fromArray?_.fromArray(p):_.set(...p);else if(_.copy&&p&&p.constructor&&(IG?_.constructor.name===p.constructor.name:_.constructor===p.constructor))_.copy(p);else if(p!==void 0){const m=_ instanceof ze;!m&&_.setScalar?_.setScalar(p):_ instanceof _l&&p instanceof _l?_.mask=p.mask:_.set(p),!q3()&&s&&!s.linear&&m&&_.convertSRGBToLinear()}}else if(x[d]=p,x[d]instanceof _n&&x[d].format===Ji&&x[d].type===Xs&&s){const m=x[d];Rx(m)&&Rx(s.gl)?m.colorSpace=s.gl.outputColorSpace:m.encoding=s.gl.outputEncoding}Pu(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const f=pg(n).getState().internal,d=f.interaction.indexOf(n);d>-1&&f.interaction.splice(d,1),i.eventCount&&f.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&DS(n),n}function Pu(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function DS(n){n.onUpdate==null||n.onUpdate(n)}function LG(n,e){n.manual||(Y3(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Lm(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function NG(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Qu.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Qu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Qu.ContinuousEventPriority;default:return Qu.DefaultEventPriority}}function tN(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function DG(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{tN(t.capturedMap,e,i,r)})}function OG(n){function e(l){const{internal:u}=n.getState(),f=l.offsetX-u.initialClick[0],d=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(f*f+d*d))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(f=>{var d;return(d=u.__r3f)==null?void 0:d.handlers["onPointer"+f]}))}function i(l,u){const f=n.getState(),d=new Set,p=[],g=u?u(f.internal.interaction):f.internal.interaction;for(let m=0;m<g.length;m++){const w=Ch(g[m]);w&&(w.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(l,f);function v(m){const w=Ch(m);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var S;w.events.compute==null||w.events.compute(l,w,(S=w.previousRoot)==null?void 0:S.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(m,!0):[]}let x=g.flatMap(v).sort((m,w)=>{const S=Ch(m.object),b=Ch(w.object);return!S||!b?m.distance-w.distance:b.events.priority-S.events.priority||m.distance-w.distance}).filter(m=>{const w=Lm(m);return d.has(w)?!1:(d.add(w),!0)});f.events.filter&&(x=f.events.filter(x,f));for(const m of x){let w=m.object;for(;w;){var _;(_=w.__r3f)!=null&&_.eventCount&&p.push({...m,eventObject:w}),w=w.parent}}if("pointerId"in l&&f.internal.capturedMap.has(l.pointerId))for(let m of f.internal.capturedMap.get(l.pointerId).values())d.has(Lm(m.intersection))||p.push(m.intersection);return p}function r(l,u,f,d){const p=n.getState();if(l.length){const g={stopped:!1};for(const v of l){const x=Ch(v.object)||p,{raycaster:_,pointer:m,camera:w,internal:S}=x,b=new U(m.x,m.y,0).unproject(w),R=E=>{var N,z;return(N=(z=S.capturedMap.get(E))==null?void 0:z.has(v.eventObject))!=null?N:!1},A=E=>{const N={intersection:v,target:u.target};S.capturedMap.has(E)?S.capturedMap.get(E).set(v.eventObject,N):S.capturedMap.set(E,new Map([[v.eventObject,N]])),u.target.setPointerCapture(E)},C=E=>{const N=S.capturedMap.get(E);N&&tN(S.capturedMap,v.eventObject,N,E)};let L={};for(let E in u){let N=u[E];typeof N!="function"&&(L[E]=N)}let I={...v,...L,pointer:m,intersections:l,stopped:g.stopped,delta:f,unprojectedPoint:b,ray:_.ray,camera:w,stopPropagation(){const E="pointerId"in u&&S.capturedMap.get(u.pointerId);if((!E||E.has(v.eventObject))&&(I.stopped=g.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(N=>N.eventObject===v.eventObject))){const N=l.slice(0,l.indexOf(v));s([...N,v])}},target:{hasPointerCapture:R,setPointerCapture:A,releasePointerCapture:C},currentTarget:{hasPointerCapture:R,setPointerCapture:A,releasePointerCapture:C},nativeEvent:u};if(d(I),g.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const f of u.hovered.values())if(!l.length||!l.find(d=>d.object===f.object&&d.index===f.index&&d.instanceId===f.instanceId)){const p=f.eventObject.__r3f,g=p==null?void 0:p.handlers;if(u.hovered.delete(Lm(f)),p!=null&&p.eventCount){const v={...f,intersections:l};g.onPointerOut==null||g.onPointerOut(v),g.onPointerLeave==null||g.onPointerLeave(v)}}}function o(l,u){for(let f=0;f<u.length;f++){const d=u[f].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:f}=n.getState();"pointerId"in u&&f.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(u.pointerId)&&(f.capturedMap.delete(u.pointerId),s([]))})}}return function(f){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=f;const g=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=i(f,g?t:void 0),m=v?e(f):0;l==="onPointerDown"&&(p.initialClick=[f.offsetX,f.offsetY],p.initialHits=_.map(S=>S.eventObject)),v&&!_.length&&m<=2&&(o(f,p.interaction),d&&d(f)),g&&s(_);function w(S){const b=S.eventObject,R=b.__r3f,A=R==null?void 0:R.handlers;if(R!=null&&R.eventCount)if(g){if(A.onPointerOver||A.onPointerEnter||A.onPointerOut||A.onPointerLeave){const C=Lm(S),L=p.hovered.get(C);L?L.stopped&&S.stopPropagation():(p.hovered.set(C,S),A.onPointerOver==null||A.onPointerOver(S),A.onPointerEnter==null||A.onPointerEnter(S))}A.onPointerMove==null||A.onPointerMove(S)}else{const C=A[l];C?(!v||p.initialHits.includes(b))&&(o(f,p.interaction.filter(L=>!p.initialHits.includes(L))),C(S)):v&&p.initialHits.includes(b)&&o(f,p.interaction.filter(L=>!p.initialHits.includes(L)))}}r(_,f,m,w)}}return{handlePointer:a}}const nN=n=>!!(n!=null&&n.render),iN=Y.createContext(null),kG=(n,e)=>{const t=SG((a,l)=>{const u=new U,f=new U,d=new U;function p(m=l().camera,w=f,S=l().size){const{width:b,height:R,top:A,left:C}=S,L=b/R;w instanceof U?d.copy(w):d.set(...w);const I=m.getWorldPosition(u).distanceTo(d);if(Y3(m))return{width:b/m.zoom,height:R/m.zoom,top:A,left:C,factor:1,distance:I,aspect:L};{const E=m.fov*Math.PI/180,N=2*Math.tan(E/2)*I,z=N*(b/R);return{width:z,height:N,top:A,left:C,factor:b/z,distance:I,aspect:L}}}let g;const v=m=>a(w=>({performance:{...w.performance,current:m}})),x=new ve;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(m=1)=>n(l(),m),advance:(m,w)=>e(m,w,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new BM,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const m=l();g&&clearTimeout(g),m.performance.current!==m.performance.min&&v(m.performance.min),g=setTimeout(()=>v(l().performance.max),m.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:m=>a(w=>({...w,events:{...w.events,...m}})),setSize:(m,w,S,b,R)=>{const A=l().camera,C={width:m,height:w,top:b||0,left:R||0,updateStyle:S};a(L=>({size:C,viewport:{...L.viewport,...p(A,f,C)}}))},setDpr:m=>a(w=>{const S=Q3(m);return{viewport:{...w.viewport,dpr:S,initialDpr:w.viewport.initialDpr||S}}}),setFrameloop:(m="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,m!=="never"&&(w.start(),w.elapsedTime=0),a(()=>({frameloop:m}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Y.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(m,w,S)=>{const b=l().internal;return b.priority=b.priority+(w>0?1:0),b.subscribers.push({ref:m,priority:w,store:S}),b.subscribers=b.subscribers.sort((R,A)=>R.priority-A.priority),()=>{const R=l().internal;R!=null&&R.subscribers&&(R.priority=R.priority-(w>0?1:0),R.subscribers=R.subscribers.filter(A=>A.ref!==m))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:f,set:d}=t.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==s){var p;r=l,s=u.dpr,LG(a,l),f.setPixelRatio(u.dpr);const g=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(l.width,l.height,g)}a!==o&&(o=a,d(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Nm,FG=new Set,UG=new Set,zG=new Set;function Lx(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Rh(n,e){switch(n){case"before":return Lx(FG,e);case"after":return Lx(UG,e);case"tail":return Lx(zG,e)}}let Nx,Dx;function Ox(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Nx=e.internal.subscribers,Nm=0;Nm<Nx.length;Nm++)Dx=Nx[Nm],Dx.ref.current(Dx.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function BG(n){let e=!1,t=!1,i,r,s;function o(u){r=requestAnimationFrame(o),e=!0,i=0,Rh("before",u),t=!0;for(const d of n.values()){var f;s=d.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((f=s.gl.xr)!=null&&f.isPresenting)&&(i+=Ox(u,s))}if(t=!1,Rh("after",u),i===0)return Rh("tail",u),e=!1,cancelAnimationFrame(r)}function a(u,f=1){var d;if(!u)return n.forEach(p=>a(p.store.getState(),f));(d=u.gl.xr)!=null&&d.isPresenting||!u.internal.active||u.frameloop==="never"||(f>1?u.internal.frames=Math.min(60,u.internal.frames+f):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,f=!0,d,p){if(f&&Rh("before",u),d)Ox(u,d,p);else for(const g of n.values())Ox(u,g.store.getState());f&&Rh("after",u)}return{loop:o,invalidate:a,advance:l}}function rN(){const n=Y.useContext(iN);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function mr(n=t=>t,e){return rN()(n,e)}function jM(n,e=0){const t=rN(),i=t.getState().internal.subscribe,r=Z3(n);return Sd(()=>i(r,e,t),[e,i,t]),null}const bc=new Map,{invalidate:YC,advance:ZC}=BG(bc),{reconciler:hv,applyProps:bu}=TG(bc,NG),Tu={objects:"shallow",strict:!1},VG=(n,e)=>{const t=typeof n=="function"?n(e):n;return nN(t)?t:new qL({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function HG(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function GG(n){const e=bc.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||kG(YC,ZC),o=t||hv.createContainer(s,Qu.ConcurrentRoot,null,!1,null,"",r,null);e||bc.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(f={}){let{gl:d,size:p,scene:g,events:v,onCreated:x,shadows:_=!1,linear:m=!1,flat:w=!1,legacy:S=!1,orthographic:b=!1,frameloop:R="always",dpr:A=[1,2],performance:C,raycaster:L,camera:I,onPointerMissed:E}=f,N=s.getState(),z=N.gl;N.gl||N.set({gl:z=VG(d,n)});let O=N.raycaster;O||N.set({raycaster:O=new V3});const{params:q,...j}=L||{};if(cn.equ(j,O,Tu)||bu(O,{...j}),cn.equ(q,O.params,Tu)||bu(O,{params:{...O.params,...q}}),!N.camera||N.camera===u&&!cn.equ(u,I,Tu)){u=I;const G=I instanceof md,ne=G?I:b?new _o(0,0,0,0,.1,1e3):new Tn(75,0,.1,1e3);G||(ne.position.z=5,I&&(bu(ne,I),("aspect"in I||"left"in I||"right"in I||"bottom"in I||"top"in I)&&(ne.manual=!0,ne.updateProjectionMatrix())),!N.camera&&!(I!=null&&I.rotation)&&ne.lookAt(0,0,0)),N.set({camera:ne}),O.camera=ne}if(!N.scene){let G;g instanceof av?G=g:(G=new av,g&&bu(G,g)),N.set({scene:Ru(G)})}if(!N.xr){var Q;const G=(_e,J)=>{const pe=s.getState();pe.frameloop!=="never"&&ZC(_e,!0,pe,J)},ne=()=>{const _e=s.getState();_e.gl.xr.enabled=_e.gl.xr.isPresenting,_e.gl.xr.setAnimationLoop(_e.gl.xr.isPresenting?G:null),_e.gl.xr.isPresenting||YC(_e)},me={connect(){const _e=s.getState().gl;_e.xr.addEventListener("sessionstart",ne),_e.xr.addEventListener("sessionend",ne)},disconnect(){const _e=s.getState().gl;_e.xr.removeEventListener("sessionstart",ne),_e.xr.removeEventListener("sessionend",ne)}};typeof((Q=z.xr)==null?void 0:Q.addEventListener)=="function"&&me.connect(),N.set({xr:me})}if(z.shadowMap){const G=z.shadowMap.enabled,ne=z.shadowMap.type;if(z.shadowMap.enabled=!!_,cn.boo(_))z.shadowMap.type=of;else if(cn.str(_)){var oe;const me={basic:AI,percentage:f0,soft:of,variance:cs};z.shadowMap.type=(oe=me[_])!=null?oe:of}else cn.obj(_)&&Object.assign(z.shadowMap,_);(G!==z.shadowMap.enabled||ne!==z.shadowMap.type)&&(z.shadowMap.needsUpdate=!0)}const k=q3();k&&("enabled"in k?k.enabled=!S:"legacyMode"in k&&(k.legacyMode=S)),l||bu(z,{outputEncoding:m?3e3:3001,toneMapping:w?Gs:rM}),N.legacy!==S&&N.set(()=>({legacy:S})),N.linear!==m&&N.set(()=>({linear:m})),N.flat!==w&&N.set(()=>({flat:w})),d&&!cn.fun(d)&&!nN(d)&&!cn.equ(d,z,Tu)&&bu(z,d),v&&!N.events.handlers&&N.set({events:v(s)});const W=HG(n,p);return cn.equ(W,N.size,Tu)||N.setSize(W.width,W.height,W.updateStyle,W.top,W.left),A&&N.viewport.dpr!==Q3(A)&&N.setDpr(A),N.frameloop!==R&&N.setFrameloop(R),N.onPointerMissed||N.set({onPointerMissed:E}),C&&!cn.equ(C,N.performance,Tu)&&N.set(G=>({performance:{...G.performance,...C}})),a=x,l=!0,this},render(f){return l||this.configure(),hv.updateContainer(We.jsx(WG,{store:s,children:f,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){sN(n)}}}function WG({store:n,children:e,onCreated:t,rootElement:i}){return Sd(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),We.jsx(iN.Provider,{value:n,children:e})}function sN(n,e){const t=bc.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),hv.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),PG(r),bc.delete(n)}catch{}},500)})}}hv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Y.version});function OS(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var f=Date.now()-o;f<e&&f>=0?i=setTimeout(l,e-f):(i=null,t||(a=n.apply(s,r),s=r=null))}var u=function(){s=this,r=arguments,o=Date.now();var f=t&&!i;return i||(i=setTimeout(l,e)),f&&(a=n.apply(s,r),s=r=null),a};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},u}OS.debounce=OS;var jG=OS;const KC=l1(jG);function XG(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=Y.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=Y.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,f=e?typeof e=="number"?e:e.resize:null,d=Y.useRef(!1);Y.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,g,v]=Y.useMemo(()=>{const w=()=>{if(!l.current.element)return;const{left:S,top:b,width:R,height:A,bottom:C,right:L,x:I,y:E}=l.current.element.getBoundingClientRect(),N={left:S,top:b,width:R,height:A,bottom:C,right:L,x:I,y:E};l.current.element instanceof HTMLElement&&r&&(N.height=l.current.element.offsetHeight,N.width=l.current.element.offsetWidth),Object.freeze(N),d.current&&!ZG(l.current.lastBounds,N)&&a(l.current.lastBounds=N)};return[w,f?KC(w,f):w,u?KC(w,u):w]},[a,r,u,f]);function x(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function _(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(w=>w.addEventListener("scroll",v,{capture:!0,passive:!0})))}const m=w=>{!w||w===l.current.element||(x(),l.current.element=w,l.current.scrollContainers=oN(w),_())};return qG(v,!!t),$G(g),Y.useEffect(()=>{x(),_()},[t,v,g]),Y.useEffect(()=>x,[]),[m,o,p]}function $G(n){Y.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function qG(n,e){Y.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function oN(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...oN(n.parentElement)]}const YG=["x","y","top","bottom","left","right","width","height"],ZG=(n,e)=>YG.every(t=>n[t]===e[t]);var KG=Object.defineProperty,JG=Object.defineProperties,QG=Object.getOwnPropertyDescriptors,JC=Object.getOwnPropertySymbols,eW=Object.prototype.hasOwnProperty,tW=Object.prototype.propertyIsEnumerable,QC=(n,e,t)=>e in n?KG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,eR=(n,e)=>{for(var t in e||(e={}))eW.call(e,t)&&QC(n,t,e[t]);if(JC)for(var t of JC(e))tW.call(e,t)&&QC(n,t,e[t]);return n},nW=(n,e)=>JG(n,QG(e)),tR,nR;typeof window<"u"&&((tR=window.document)!=null&&tR.createElement||((nR=window.navigator)==null?void 0:nR.product)==="ReactNative")?Y.useLayoutEffect:Y.useEffect;function aN(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=aN(i,e,t);if(r)return r;i=i.sibling}}function lN(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const iR=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=iR;return}return iR.apply(this,arguments)};const XM=lN(Y.createContext(null));class uN extends Y.Component{render(){return Y.createElement(XM.Provider,{value:this._reactInternals},this.props.children)}}function iW(){const n=Y.useContext(XM);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Y.useId();return Y.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=aN(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function rW(){const n=iW(),[e]=Y.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==XM&&!e.has(r)&&e.set(r,Y.useContext(lN(r)))}t=t.return}return e}function sW(){const n=rW();return Y.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>Y.createElement(e,null,Y.createElement(t.Provider,nW(eR({},i),{value:n.get(t)}))),e=>Y.createElement(uN,eR({},e))),[n])}const kx={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function oW(n){const{handlePointer:e}=OG(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(kx).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,u]=kx[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=kx[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const aW=Y.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=oW,eventSource:a,eventPrefix:l,shadows:u,linear:f,flat:d,legacy:p,orthographic:g,frameloop:v,dpr:x,performance:_,raycaster:m,camera:w,scene:S,onPointerMissed:b,onCreated:R,...A},C){Y.useMemo(()=>$3(_G),[]);const L=sW(),[I,E]=XG({scroll:!0,debounce:{scroll:50,resize:0},...i}),N=Y.useRef(null),z=Y.useRef(null);Y.useImperativeHandle(C,()=>N.current);const O=Z3(b),[q,j]=Y.useState(!1),[Q,oe]=Y.useState(!1);if(q)throw q;if(Q)throw Q;const k=Y.useRef(null);Sd(()=>{const G=N.current;E.width>0&&E.height>0&&G&&(k.current||(k.current=GG(G)),k.current.configure({gl:s,events:o,shadows:u,linear:f,flat:d,legacy:p,orthographic:g,frameloop:v,dpr:x,performance:_,raycaster:m,camera:w,scene:S,size:E,onPointerMissed:(...ne)=>O.current==null?void 0:O.current(...ne),onCreated:ne=>{ne.events.connect==null||ne.events.connect(a?AG(a)?a.current:a:z.current),l&&ne.setEvents({compute:(me,_e)=>{const J=me[l+"X"],pe=me[l+"Y"];_e.pointer.set(J/_e.size.width*2-1,-(pe/_e.size.height)*2+1),_e.raycaster.setFromCamera(_e.pointer,_e.camera)}}),R==null||R(ne)}}),k.current.render(We.jsx(L,{children:We.jsx(K3,{set:oe,children:We.jsx(Y.Suspense,{fallback:We.jsx(CG,{set:j}),children:e})})})))}),Y.useEffect(()=>{const G=N.current;if(G)return()=>sN(G)},[]);const W=a?"none":"auto";return We.jsx("div",{ref:z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:W,...r},...A,children:We.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:We.jsx("canvas",{ref:N,style:{display:"block"},children:t})})})}),lW=Y.forwardRef(function(e,t){return We.jsx(uN,{children:We.jsx(aW,{...e,ref:t})})});var uW=Object.defineProperty,cW=(n,e,t)=>e in n?uW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,dt=(n,e,t)=>(cW(n,typeof e!="symbol"?e+"":e,t),t);const Dm=new Dl,rR=new Ns,hW=Math.cos(70*(Math.PI/180)),sR=(n,e)=>(n%e+e)%e;let fW=class extends $s{constructor(e,t){super(),dt(this,"object"),dt(this,"domElement"),dt(this,"enabled",!0),dt(this,"target",new U),dt(this,"minDistance",0),dt(this,"maxDistance",1/0),dt(this,"minZoom",0),dt(this,"maxZoom",1/0),dt(this,"minPolarAngle",0),dt(this,"maxPolarAngle",Math.PI),dt(this,"minAzimuthAngle",-1/0),dt(this,"maxAzimuthAngle",1/0),dt(this,"enableDamping",!1),dt(this,"dampingFactor",.05),dt(this,"enableZoom",!0),dt(this,"zoomSpeed",1),dt(this,"enableRotate",!0),dt(this,"rotateSpeed",1),dt(this,"enablePan",!0),dt(this,"panSpeed",1),dt(this,"screenSpacePanning",!0),dt(this,"keyPanSpeed",7),dt(this,"zoomToCursor",!1),dt(this,"autoRotate",!1),dt(this,"autoRotateSpeed",2),dt(this,"reverseOrbit",!1),dt(this,"reverseHorizontalOrbit",!1),dt(this,"reverseVerticalOrbit",!1),dt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),dt(this,"mouseButtons",{LEFT:el.ROTATE,MIDDLE:el.DOLLY,RIGHT:el.PAN}),dt(this,"touches",{ONE:tl.ROTATE,TWO:tl.DOLLY_PAN}),dt(this,"target0"),dt(this,"position0"),dt(this,"zoom0"),dt(this,"_domElementKeyEvents",null),dt(this,"getPolarAngle"),dt(this,"getAzimuthalAngle"),dt(this,"setPolarAngle"),dt(this,"setAzimuthalAngle"),dt(this,"getDistance"),dt(this,"listenToKeyEvents"),dt(this,"stopListenToKeyEvents"),dt(this,"saveState"),dt(this,"reset"),dt(this,"update"),dt(this,"connect"),dt(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=X=>{let ge=sR(X,2*Math.PI),H=f.phi;H<0&&(H+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let ue=Math.abs(ge-H);2*Math.PI-ue<ue&&(ge<H?ge+=2*Math.PI:H+=2*Math.PI),d.phi=ge-H,i.update()},this.setAzimuthalAngle=X=>{let ge=sR(X,2*Math.PI),H=f.theta;H<0&&(H+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let ue=Math.abs(ge-H);2*Math.PI-ue<ue&&(ge<H?ge+=2*Math.PI:H+=2*Math.PI),d.theta=ge-H,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=X=>{X.addEventListener("keydown",ft),this._domElementKeyEvents=X},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ft),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const X=new U,ge=new U(0,1,0),H=new Ci().setFromUnitVectors(e.up,ge),ue=H.clone().invert(),ce=new U,Pe=new Ci,Ne=2*Math.PI;return function(){const Wt=i.object.position;H.setFromUnitVectors(e.up,ge),ue.copy(H).invert(),X.copy(Wt).sub(i.target),X.applyQuaternion(H),f.setFromVector3(X),i.autoRotate&&l===a.NONE&&q(z()),i.enableDamping?(f.theta+=d.theta*i.dampingFactor,f.phi+=d.phi*i.dampingFactor):(f.theta+=d.theta,f.phi+=d.phi);let Ot=i.minAzimuthAngle,Qt=i.maxAzimuthAngle;isFinite(Ot)&&isFinite(Qt)&&(Ot<-Math.PI?Ot+=Ne:Ot>Math.PI&&(Ot-=Ne),Qt<-Math.PI?Qt+=Ne:Qt>Math.PI&&(Qt-=Ne),Ot<=Qt?f.theta=Math.max(Ot,Math.min(Qt,f.theta)):f.theta=f.theta>(Ot+Qt)/2?Math.max(Ot,f.theta):Math.min(Qt,f.theta)),f.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,f.phi)),f.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(g,i.dampingFactor):i.target.add(g),i.zoomToCursor&&I||i.object.isOrthographicCamera?f.radius=me(f.radius):f.radius=me(f.radius*p),X.setFromSpherical(f),X.applyQuaternion(ue),Wt.copy(i.target).add(X),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(d.theta*=1-i.dampingFactor,d.phi*=1-i.dampingFactor,g.multiplyScalar(1-i.dampingFactor)):(d.set(0,0,0),g.set(0,0,0));let Rt=!1;if(i.zoomToCursor&&I){let Gn=null;if(i.object instanceof Tn&&i.object.isPerspectiveCamera){const an=X.length();Gn=me(an*p);const Zs=an-Gn;i.object.position.addScaledVector(C,Zs),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const an=new U(L.x,L.y,0);an.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),Rt=!0;const Zs=new U(L.x,L.y,0);Zs.unproject(i.object),i.object.position.sub(Zs).add(an),i.object.updateMatrixWorld(),Gn=X.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Gn!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Gn).add(i.object.position):(Dm.origin.copy(i.object.position),Dm.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Dm.direction))<hW?e.lookAt(i.target):(rR.setFromNormalAndCoplanarPoint(i.object.up,i.target),Dm.intersectPlane(rR,i.target))))}else i.object instanceof _o&&i.object.isOrthographicCamera&&(Rt=p!==1,Rt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,I=!1,Rt||ce.distanceToSquared(i.object.position)>u||8*(1-Pe.dot(i.object.quaternion))>u?(i.dispatchEvent(r),ce.copy(i.object.position),Pe.copy(i.object.quaternion),Rt=!1,!0):!1}})(),this.connect=X=>{X===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=X,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Mt),i.domElement.addEventListener("pointerdown",te),i.domElement.addEventListener("pointercancel",Se),i.domElement.addEventListener("wheel",Ie)},this.dispose=()=>{var X,ge,H,ue,ce,Pe;i.domElement&&(i.domElement.style.touchAction="auto"),(X=i.domElement)==null||X.removeEventListener("contextmenu",Mt),(ge=i.domElement)==null||ge.removeEventListener("pointerdown",te),(H=i.domElement)==null||H.removeEventListener("pointercancel",Se),(ue=i.domElement)==null||ue.removeEventListener("wheel",Ie),(ce=i.domElement)==null||ce.ownerDocument.removeEventListener("pointermove",xe),(Pe=i.domElement)==null||Pe.ownerDocument.removeEventListener("pointerup",Ee),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ft)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,f=new IS,d=new IS;let p=1;const g=new U,v=new ve,x=new ve,_=new ve,m=new ve,w=new ve,S=new ve,b=new ve,R=new ve,A=new ve,C=new U,L=new ve;let I=!1;const E=[],N={};function z(){return 2*Math.PI/60/60*i.autoRotateSpeed}function O(){return Math.pow(.95,i.zoomSpeed)}function q(X){i.reverseOrbit||i.reverseHorizontalOrbit?d.theta+=X:d.theta-=X}function j(X){i.reverseOrbit||i.reverseVerticalOrbit?d.phi+=X:d.phi-=X}const Q=(()=>{const X=new U;return function(H,ue){X.setFromMatrixColumn(ue,0),X.multiplyScalar(-H),g.add(X)}})(),oe=(()=>{const X=new U;return function(H,ue){i.screenSpacePanning===!0?X.setFromMatrixColumn(ue,1):(X.setFromMatrixColumn(ue,0),X.crossVectors(i.object.up,X)),X.multiplyScalar(H),g.add(X)}})(),k=(()=>{const X=new U;return function(H,ue){const ce=i.domElement;if(ce&&i.object instanceof Tn&&i.object.isPerspectiveCamera){const Pe=i.object.position;X.copy(Pe).sub(i.target);let Ne=X.length();Ne*=Math.tan(i.object.fov/2*Math.PI/180),Q(2*H*Ne/ce.clientHeight,i.object.matrix),oe(2*ue*Ne/ce.clientHeight,i.object.matrix)}else ce&&i.object instanceof _o&&i.object.isOrthographicCamera?(Q(H*(i.object.right-i.object.left)/i.object.zoom/ce.clientWidth,i.object.matrix),oe(ue*(i.object.top-i.object.bottom)/i.object.zoom/ce.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function W(X){i.object instanceof Tn&&i.object.isPerspectiveCamera||i.object instanceof _o&&i.object.isOrthographicCamera?p/=X:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function G(X){i.object instanceof Tn&&i.object.isPerspectiveCamera||i.object instanceof _o&&i.object.isOrthographicCamera?p*=X:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function ne(X){if(!i.zoomToCursor||!i.domElement)return;I=!0;const ge=i.domElement.getBoundingClientRect(),H=X.clientX-ge.left,ue=X.clientY-ge.top,ce=ge.width,Pe=ge.height;L.x=H/ce*2-1,L.y=-(ue/Pe)*2+1,C.set(L.x,L.y,1).unproject(i.object).sub(i.object.position).normalize()}function me(X){return Math.max(i.minDistance,Math.min(i.maxDistance,X))}function _e(X){v.set(X.clientX,X.clientY)}function J(X){ne(X),b.set(X.clientX,X.clientY)}function pe(X){m.set(X.clientX,X.clientY)}function Me(X){x.set(X.clientX,X.clientY),_.subVectors(x,v).multiplyScalar(i.rotateSpeed);const ge=i.domElement;ge&&(q(2*Math.PI*_.x/ge.clientHeight),j(2*Math.PI*_.y/ge.clientHeight)),v.copy(x),i.update()}function de(X){R.set(X.clientX,X.clientY),A.subVectors(R,b),A.y>0?W(O()):A.y<0&&G(O()),b.copy(R),i.update()}function Qe(X){w.set(X.clientX,X.clientY),S.subVectors(w,m).multiplyScalar(i.panSpeed),k(S.x,S.y),m.copy(w),i.update()}function lt(X){ne(X),X.deltaY<0?G(O()):X.deltaY>0&&W(O()),i.update()}function K(X){let ge=!1;switch(X.code){case i.keys.UP:k(0,i.keyPanSpeed),ge=!0;break;case i.keys.BOTTOM:k(0,-i.keyPanSpeed),ge=!0;break;case i.keys.LEFT:k(i.keyPanSpeed,0),ge=!0;break;case i.keys.RIGHT:k(-i.keyPanSpeed,0),ge=!0;break}ge&&(X.preventDefault(),i.update())}function tt(){if(E.length==1)v.set(E[0].pageX,E[0].pageY);else{const X=.5*(E[0].pageX+E[1].pageX),ge=.5*(E[0].pageY+E[1].pageY);v.set(X,ge)}}function he(){if(E.length==1)m.set(E[0].pageX,E[0].pageY);else{const X=.5*(E[0].pageX+E[1].pageX),ge=.5*(E[0].pageY+E[1].pageY);m.set(X,ge)}}function we(){const X=E[0].pageX-E[1].pageX,ge=E[0].pageY-E[1].pageY,H=Math.sqrt(X*X+ge*ge);b.set(0,H)}function ye(){i.enableZoom&&we(),i.enablePan&&he()}function Ce(){i.enableZoom&&we(),i.enableRotate&&tt()}function be(X){if(E.length==1)x.set(X.pageX,X.pageY);else{const H=Et(X),ue=.5*(X.pageX+H.x),ce=.5*(X.pageY+H.y);x.set(ue,ce)}_.subVectors(x,v).multiplyScalar(i.rotateSpeed);const ge=i.domElement;ge&&(q(2*Math.PI*_.x/ge.clientHeight),j(2*Math.PI*_.y/ge.clientHeight)),v.copy(x)}function Be(X){if(E.length==1)w.set(X.pageX,X.pageY);else{const ge=Et(X),H=.5*(X.pageX+ge.x),ue=.5*(X.pageY+ge.y);w.set(H,ue)}S.subVectors(w,m).multiplyScalar(i.panSpeed),k(S.x,S.y),m.copy(w)}function Ke(X){const ge=Et(X),H=X.pageX-ge.x,ue=X.pageY-ge.y,ce=Math.sqrt(H*H+ue*ue);R.set(0,ce),A.set(0,Math.pow(R.y/b.y,i.zoomSpeed)),W(A.y),b.copy(R)}function V(X){i.enableZoom&&Ke(X),i.enablePan&&Be(X)}function D(X){i.enableZoom&&Ke(X),i.enableRotate&&be(X)}function te(X){var ge,H;i.enabled!==!1&&(E.length===0&&((ge=i.domElement)==null||ge.ownerDocument.addEventListener("pointermove",xe),(H=i.domElement)==null||H.ownerDocument.addEventListener("pointerup",Ee)),it(X),X.pointerType==="touch"?Re(X):qe(X))}function xe(X){i.enabled!==!1&&(X.pointerType==="touch"?$e(X):Le(X))}function Ee(X){var ge,H,ue;Ve(X),E.length===0&&((ge=i.domElement)==null||ge.releasePointerCapture(X.pointerId),(H=i.domElement)==null||H.ownerDocument.removeEventListener("pointermove",xe),(ue=i.domElement)==null||ue.ownerDocument.removeEventListener("pointerup",Ee)),i.dispatchEvent(o),l=a.NONE}function Se(X){Ve(X)}function qe(X){let ge;switch(X.button){case 0:ge=i.mouseButtons.LEFT;break;case 1:ge=i.mouseButtons.MIDDLE;break;case 2:ge=i.mouseButtons.RIGHT;break;default:ge=-1}switch(ge){case el.DOLLY:if(i.enableZoom===!1)return;J(X),l=a.DOLLY;break;case el.ROTATE:if(X.ctrlKey||X.metaKey||X.shiftKey){if(i.enablePan===!1)return;pe(X),l=a.PAN}else{if(i.enableRotate===!1)return;_e(X),l=a.ROTATE}break;case el.PAN:if(X.ctrlKey||X.metaKey||X.shiftKey){if(i.enableRotate===!1)return;_e(X),l=a.ROTATE}else{if(i.enablePan===!1)return;pe(X),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Le(X){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;Me(X);break;case a.DOLLY:if(i.enableZoom===!1)return;de(X);break;case a.PAN:if(i.enablePan===!1)return;Qe(X);break}}function Ie(X){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(X.preventDefault(),i.dispatchEvent(s),lt(X),i.dispatchEvent(o))}function ft(X){i.enabled===!1||i.enablePan===!1||K(X)}function Re(X){switch(pt(X),E.length){case 1:switch(i.touches.ONE){case tl.ROTATE:if(i.enableRotate===!1)return;tt(),l=a.TOUCH_ROTATE;break;case tl.PAN:if(i.enablePan===!1)return;he(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case tl.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ye(),l=a.TOUCH_DOLLY_PAN;break;case tl.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ce(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function $e(X){switch(pt(X),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;be(X),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Be(X),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;V(X),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;D(X),i.update();break;default:l=a.NONE}}function Mt(X){i.enabled!==!1&&X.preventDefault()}function it(X){E.push(X)}function Ve(X){delete N[X.pointerId];for(let ge=0;ge<E.length;ge++)if(E[ge].pointerId==X.pointerId){E.splice(ge,1);return}}function pt(X){let ge=N[X.pointerId];ge===void 0&&(ge=new ve,N[X.pointerId]=ge),ge.set(X.pageX,X.pageY)}function Et(X){const ge=X.pointerId===E[0].pointerId?E[1]:E[0];return N[ge.pointerId]}t!==void 0&&this.connect(t),this.update()}};function dW(n,e,t,i){const r=class extends Zr{constructor(o={}){const a=Object.entries(n);super({uniforms:a.reduce((l,[u,f])=>{const d=xM.clone({[u]:{value:f}});return{...l,...d}},{}),vertexShader:e,fragmentShader:t}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:u=>this.uniforms[l].value=u})),Object.assign(this,o)}};return r.key=PL.generateUUID(),r}const pW=()=>parseInt(fd.replace(/\D+/g,"")),mW=pW();function gW(n,e,t){const i=mr(p=>p.size),r=mr(p=>p.viewport),s=typeof n=="number"?n:i.width*r.dpr,o=i.height*r.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:u,...f}=a,d=Y.useMemo(()=>{const p=new Yr(s,o,{minFilter:An,magFilter:An,type:Lc,...f});return u&&(p.depthTexture=new v0(s,o,yr)),p.samples=l,p},[]);return Y.useLayoutEffect(()=>{d.setSize(s,o),l&&(d.samples=l)},[l,d,s,o]),Y.useEffect(()=>()=>d.dispose(),[]),d}const vW=n=>typeof n=="function",yW=Y.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...s},o)=>{const a=mr(({set:_})=>_),l=mr(({camera:_})=>_),u=mr(({size:_})=>_),f=Y.useRef(null);Y.useImperativeHandle(o,()=>f.current,[]);const d=Y.useRef(null),p=gW(e);Y.useLayoutEffect(()=>{s.manual||(f.current.aspect=u.width/u.height)},[u,s]),Y.useLayoutEffect(()=>{f.current.updateProjectionMatrix()});let g=0,v=null;const x=vW(r);return jM(_=>{x&&(t===1/0||g<t)&&(d.current.visible=!1,_.gl.setRenderTarget(p),v=_.scene.background,n&&(_.scene.background=n),_.gl.render(_.scene,f.current),_.scene.background=v,_.gl.setRenderTarget(null),d.current.visible=!0,g++)}),Y.useLayoutEffect(()=>{if(i){const _=l;return a(()=>({camera:f.current})),()=>a(()=>({camera:_}))}},[f,i,a]),Y.createElement(Y.Fragment,null,Y.createElement("perspectiveCamera",xc({ref:f},s),!x&&r),Y.createElement("group",{ref:d},x&&r(p.texture)))}),_W=Y.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},f)=>{const d=mr(A=>A.invalidate),p=mr(A=>A.camera),g=mr(A=>A.gl),v=mr(A=>A.events),x=mr(A=>A.setEvents),_=mr(A=>A.set),m=mr(A=>A.get),w=mr(A=>A.performance),S=e||p,b=i||v.connected||g.domElement,R=Y.useMemo(()=>new fW(S),[S]);return jM(()=>{R.enabled&&R.update()},-1),Y.useEffect(()=>(s&&R.connect(s===!0?b:s),R.connect(b),()=>void R.dispose()),[s,b,t,R,d]),Y.useEffect(()=>{const A=I=>{d(),t&&w.regress(),o&&o(I)},C=I=>{a&&a(I)},L=I=>{l&&l(I)};return R.addEventListener("change",A),R.addEventListener("start",C),R.addEventListener("end",L),()=>{R.removeEventListener("start",C),R.removeEventListener("end",L),R.removeEventListener("change",A)}},[o,a,l,R,d,x]),Y.useEffect(()=>{if(n){const A=m().controls;return _({controls:R}),()=>_({controls:A})}},[n,R]),Y.createElement("primitive",xc({ref:f,object:R,enableDamping:r},u))}),xW=dW({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new ze,sectionColor:new ze,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new U,worldPlanePosition:new U},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${mW>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),wW=Y.forwardRef(({args:n,cellColor:e="#000000",sectionColor:t="#2080ff",cellSize:i=.5,sectionSize:r=1,followCamera:s=!1,infiniteGrid:o=!1,fadeDistance:a=100,fadeStrength:l=1,fadeFrom:u=1,cellThickness:f=.5,sectionThickness:d=1,side:p=Ai,...g},v)=>{$3({GridMaterial:xW});const x=Y.useRef(null);Y.useImperativeHandle(v,()=>x.current,[]);const _=new Ns,m=new U(0,1,0),w=new U(0,0,0);jM(R=>{_.setFromNormalAndCoplanarPoint(m,w).applyMatrix4(x.current.matrixWorld);const A=x.current.material,C=A.uniforms.worldCamProjPosition,L=A.uniforms.worldPlanePosition;_.projectPoint(R.camera.position,C.value),L.value.set(0,0,0).applyMatrix4(x.current.matrixWorld)});const S={cellSize:i,sectionSize:r,cellColor:e,sectionColor:t,cellThickness:f,sectionThickness:d},b={fadeDistance:a,fadeStrength:l,fadeFrom:u,infiniteGrid:o,followCamera:s};return Y.createElement("mesh",xc({ref:x,frustumCulled:!1},g),Y.createElement("gridMaterial",xc({transparent:!0,"extensions-derivatives":!0,side:p},S,b)),Y.createElement("planeGeometry",{args:n}))});function Fx(n){return We.jsxs("mesh",{...n,scale:[1,10,1],children:[We.jsx("cylinderGeometry",{args:[.05,.05,5,32]}),We.jsx("meshBasicMaterial",{color:n.color})]})}function SW(n){const e=Y.useRef(null);return We.jsxs("mesh",{...n,ref:e,children:[We.jsx("sphereGeometry",{args:[1,16,16]}),We.jsx("meshStandardMaterial",{color:n.color})]})}const MW=({concepts:n,onHoverConcept:e,onSelectConcept:t,spherePos:i})=>{function r(s){const o=Y.useRef(null),[a,l]=Y.useState(!1),[u,f]=Y.useState(!1);return We.jsxs("mesh",{...s,ref:o,scale:u?1.5:1,onClick:()=>{f(!u),t(s.index)},onPointerOver:()=>{l(!0),e(s.index)},onPointerOut:()=>{l(!1),e(-1)},children:[We.jsx("boxGeometry",{args:[1,1,1]}),We.jsx("meshStandardMaterial",{color:a?"hotpink":s.color||"orange"})]})}return We.jsxs(lW,{id:"three-canvas",className:"Panel3D",children:[We.jsx(yW,{makeDefault:!0,position:[20,20,20],fov:75,near:.1,far:1e3}),We.jsx("ambientLight",{intensity:Math.PI/2}),We.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1,decay:0,intensity:Math.PI}),We.jsx("pointLight",{position:[-10,-10,-10],decay:0,intensity:Math.PI}),We.jsx(wW,{args:[60,60,30,30],rotation:[0,0,0],position:[0,0,0],cellColor:"green"}),n.map(s=>We.jsx(r,{position:s.position,color:s.color,index:s.index},"box"+s.index)),";",We.jsx(SW,{position:i,color:"black"}),We.jsx(Fx,{position:[0,0,0],rotation:[0,0,-Math.PI/2],color:"red"}),We.jsx(Fx,{position:[0,0,0],rotation:[Math.PI/2,0,0],color:"green"}),We.jsx(Fx,{position:[0,0,0],rotation:[0,0,0],color:"blue"}),We.jsx(_W,{onChange:()=>{t(-1)}})]})},cN=({color:n,title:e,inputId:t,inputValue:i,onChanged:r})=>We.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"3px"},children:[We.jsx("span",{className:"HiddenOnMobile",style:{height:"20px",width:"20px",backgroundColor:n,borderRadius:"10px",marginLeft:"5px"},title:e||""})," ",We.jsx("input",{className:"ConceptInput",style:{width:"180px"},id:t,value:i,name:"test",readOnly:!!i,placeholder:" Type your concept...",onKeyDown:s=>{r&&s.key=="Enter"&&r(s.currentTarget.value)}})]}),oR=["red","blue","green","yellow","gray","orange","pink","lightblue"];function EW(n){return oR[n%oR.length]}function Pl(n){"@babel/helpers - typeof";return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pl(n)}function bW(n,e){if(Pl(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(Pl(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hN(n){var e=bW(n,"string");return Pl(e)=="symbol"?e:e+""}function zh(n,e,t){return(e=hN(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function st(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aR(Object(t),!0).forEach(function(i){zh(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):aR(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function TW(n){if(Array.isArray(n))return n}function AW(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(f){u=!0,r=f}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function kS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function fN(n,e){if(n){if(typeof n=="string")return kS(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?kS(n,e):void 0}}function CW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mo(n,e){return TW(n)||AW(n,e)||fN(n,e)||CW()}function RW(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function Do(n,e){if(n==null)return{};var t,i,r=RW(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}var PW=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function IW(n){var e=n.defaultInputValue,t=e===void 0?"":e,i=n.defaultMenuIsOpen,r=i===void 0?!1:i,s=n.defaultValue,o=s===void 0?null:s,a=n.inputValue,l=n.menuIsOpen,u=n.onChange,f=n.onInputChange,d=n.onMenuClose,p=n.onMenuOpen,g=n.value,v=Do(n,PW),x=Y.useState(a!==void 0?a:t),_=Mo(x,2),m=_[0],w=_[1],S=Y.useState(l!==void 0?l:r),b=Mo(S,2),R=b[0],A=b[1],C=Y.useState(g!==void 0?g:o),L=Mo(C,2),I=L[0],E=L[1],N=Y.useCallback(function(k,W){typeof u=="function"&&u(k,W),E(k)},[u]),z=Y.useCallback(function(k,W){var G;typeof f=="function"&&(G=f(k,W)),w(G!==void 0?G:k)},[f]),O=Y.useCallback(function(){typeof p=="function"&&p(),A(!0)},[p]),q=Y.useCallback(function(){typeof d=="function"&&d(),A(!1)},[d]),j=a!==void 0?a:m,Q=l!==void 0?l:R,oe=g!==void 0?g:I;return st(st({},v),{},{inputValue:j,menuIsOpen:Q,onChange:N,onInputChange:z,onMenuClose:q,onMenuOpen:O,value:oe})}function ct(){return ct=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ct.apply(null,arguments)}function LW(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function lR(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,hN(i.key),i)}}function NW(n,e,t){return e&&lR(n.prototype,e),t&&lR(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function FS(n,e){return FS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},FS(n,e)}function DW(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&FS(n,e)}function fv(n){return fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fv(n)}function dN(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dN=function(){return!!n})()}function OW(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function kW(n,e){if(e&&(Pl(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OW(n)}function FW(n){var e=dN();return function(){var t,i=fv(n);if(e){var r=fv(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return kW(this,t)}}function UW(n){if(Array.isArray(n))return kS(n)}function zW(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function BW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $M(n){return UW(n)||zW(n)||fN(n)||BW()}function VW(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function HW(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var GW=function(){function n(t){var i=this;this._insertTag=function(r){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,s),i.tags.push(r)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(HW(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=VW(r);try{s.insertRule(i,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},n}(),Si="-ms-",dv="-moz-",Xt="-webkit-",pN="comm",qM="rule",YM="decl",WW="@import",mN="@keyframes",jW="@layer",XW=Math.abs,z0=String.fromCharCode,$W=Object.assign;function qW(n,e){return ai(n,0)^45?(((e<<2^ai(n,0))<<2^ai(n,1))<<2^ai(n,2))<<2^ai(n,3):0}function gN(n){return n.trim()}function YW(n,e){return(n=e.exec(n))?n[0]:n}function $t(n,e,t){return n.replace(e,t)}function US(n,e){return n.indexOf(e)}function ai(n,e){return n.charCodeAt(e)|0}function Jf(n,e,t){return n.slice(e,t)}function Ds(n){return n.length}function ZM(n){return n.length}function Om(n,e){return e.push(n),n}function ZW(n,e){return n.map(e).join("")}var B0=1,Tc=1,vN=0,nr=0,zn=0,Uc="";function V0(n,e,t,i,r,s,o){return{value:n,root:e,parent:t,type:i,props:r,children:s,line:B0,column:Tc,length:o,return:""}}function Ph(n,e){return $W(V0("",null,null,"",null,null,0),n,{length:-n.length},e)}function KW(){return zn}function JW(){return zn=nr>0?ai(Uc,--nr):0,Tc--,zn===10&&(Tc=1,B0--),zn}function Sr(){return zn=nr<vN?ai(Uc,nr++):0,Tc++,zn===10&&(Tc=1,B0++),zn}function js(){return ai(Uc,nr)}function mg(){return nr}function Md(n,e){return Jf(Uc,n,e)}function Qf(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function yN(n){return B0=Tc=1,vN=Ds(Uc=n),nr=0,[]}function _N(n){return Uc="",n}function gg(n){return gN(Md(nr-1,zS(n===91?n+2:n===40?n+1:n)))}function QW(n){for(;(zn=js())&&zn<33;)Sr();return Qf(n)>2||Qf(zn)>3?"":" "}function e8(n,e){for(;--e&&Sr()&&!(zn<48||zn>102||zn>57&&zn<65||zn>70&&zn<97););return Md(n,mg()+(e<6&&js()==32&&Sr()==32))}function zS(n){for(;Sr();)switch(zn){case n:return nr;case 34:case 39:n!==34&&n!==39&&zS(zn);break;case 40:n===41&&zS(n);break;case 92:Sr();break}return nr}function t8(n,e){for(;Sr()&&n+zn!==57;)if(n+zn===84&&js()===47)break;return"/*"+Md(e,nr-1)+"*"+z0(n===47?n:Sr())}function n8(n){for(;!Qf(js());)Sr();return Md(n,nr)}function i8(n){return _N(vg("",null,null,null,[""],n=yN(n),0,[0],n))}function vg(n,e,t,i,r,s,o,a,l){for(var u=0,f=0,d=o,p=0,g=0,v=0,x=1,_=1,m=1,w=0,S="",b=r,R=s,A=i,C=S;_;)switch(v=w,w=Sr()){case 40:if(v!=108&&ai(C,d-1)==58){US(C+=$t(gg(w),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:C+=gg(w);break;case 9:case 10:case 13:case 32:C+=QW(v);break;case 92:C+=e8(mg()-1,7);continue;case 47:switch(js()){case 42:case 47:Om(r8(t8(Sr(),mg()),e,t),l);break;default:C+="/"}break;case 123*x:a[u++]=Ds(C)*m;case 125*x:case 59:case 0:switch(w){case 0:case 125:_=0;case 59+f:m==-1&&(C=$t(C,/\f/g,"")),g>0&&Ds(C)-d&&Om(g>32?cR(C+";",i,t,d-1):cR($t(C," ","")+";",i,t,d-2),l);break;case 59:C+=";";default:if(Om(A=uR(C,e,t,u,f,r,a,S,b=[],R=[],d),s),w===123)if(f===0)vg(C,e,A,A,b,s,d,a,R);else switch(p===99&&ai(C,3)===110?100:p){case 100:case 108:case 109:case 115:vg(n,A,A,i&&Om(uR(n,A,A,0,0,r,a,S,r,b=[],d),R),r,R,d,a,i?b:R);break;default:vg(C,A,A,A,[""],R,0,a,R)}}u=f=g=0,x=m=1,S=C="",d=o;break;case 58:d=1+Ds(C),g=v;default:if(x<1){if(w==123)--x;else if(w==125&&x++==0&&JW()==125)continue}switch(C+=z0(w),w*x){case 38:m=f>0?1:(C+="\f",-1);break;case 44:a[u++]=(Ds(C)-1)*m,m=1;break;case 64:js()===45&&(C+=gg(Sr())),p=js(),f=d=Ds(S=C+=n8(mg())),w++;break;case 45:v===45&&Ds(C)==2&&(x=0)}}return s}function uR(n,e,t,i,r,s,o,a,l,u,f){for(var d=r-1,p=r===0?s:[""],g=ZM(p),v=0,x=0,_=0;v<i;++v)for(var m=0,w=Jf(n,d+1,d=XW(x=o[v])),S=n;m<g;++m)(S=gN(x>0?p[m]+" "+w:$t(w,/&\f/g,p[m])))&&(l[_++]=S);return V0(n,e,t,r===0?qM:a,l,u,f)}function r8(n,e,t){return V0(n,e,t,pN,z0(KW()),Jf(n,2,-2),0)}function cR(n,e,t,i){return V0(n,e,t,YM,Jf(n,0,i),Jf(n,i+1,-1),i)}function lc(n,e){for(var t="",i=ZM(n),r=0;r<i;r++)t+=e(n[r],r,n,e)||"";return t}function s8(n,e,t,i){switch(n.type){case jW:if(n.children.length)break;case WW:case YM:return n.return=n.return||n.value;case pN:return"";case mN:return n.return=n.value+"{"+lc(n.children,i)+"}";case qM:n.value=n.props.join(",")}return Ds(t=lc(n.children,i))?n.return=n.value+"{"+t+"}":""}function o8(n){var e=ZM(n);return function(t,i,r,s){for(var o="",a=0;a<e;a++)o+=n[a](t,i,r,s)||"";return o}}function a8(n){return function(e){e.root||(e=e.return)&&n(e)}}function l8(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var u8=function(e,t,i){for(var r=0,s=0;r=s,s=js(),r===38&&s===12&&(t[i]=1),!Qf(s);)Sr();return Md(e,nr)},c8=function(e,t){var i=-1,r=44;do switch(Qf(r)){case 0:r===38&&js()===12&&(t[i]=1),e[i]+=u8(nr-1,t,i);break;case 2:e[i]+=gg(r);break;case 4:if(r===44){e[++i]=js()===58?"&\f":"",t[i]=e[i].length;break}default:e[i]+=z0(r)}while(r=Sr());return e},h8=function(e,t){return _N(c8(yN(e),t))},hR=new WeakMap,f8=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!hR.get(i))&&!r){hR.set(e,!0);for(var s=[],o=h8(t,s),a=i.props,l=0,u=0;l<o.length;l++)for(var f=0;f<a.length;f++,u++)e.props[u]=s[l]?o[l].replace(/&\f/g,a[f]):a[f]+" "+o[l]}}},d8=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function xN(n,e){switch(qW(n,e)){case 5103:return Xt+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Xt+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Xt+n+dv+n+Si+n+n;case 6828:case 4268:return Xt+n+Si+n+n;case 6165:return Xt+n+Si+"flex-"+n+n;case 5187:return Xt+n+$t(n,/(\w+).+(:[^]+)/,Xt+"box-$1$2"+Si+"flex-$1$2")+n;case 5443:return Xt+n+Si+"flex-item-"+$t(n,/flex-|-self/,"")+n;case 4675:return Xt+n+Si+"flex-line-pack"+$t(n,/align-content|flex-|-self/,"")+n;case 5548:return Xt+n+Si+$t(n,"shrink","negative")+n;case 5292:return Xt+n+Si+$t(n,"basis","preferred-size")+n;case 6060:return Xt+"box-"+$t(n,"-grow","")+Xt+n+Si+$t(n,"grow","positive")+n;case 4554:return Xt+$t(n,/([^-])(transform)/g,"$1"+Xt+"$2")+n;case 6187:return $t($t($t(n,/(zoom-|grab)/,Xt+"$1"),/(image-set)/,Xt+"$1"),n,"")+n;case 5495:case 3959:return $t(n,/(image-set\([^]*)/,Xt+"$1$`$1");case 4968:return $t($t(n,/(.+:)(flex-)?(.*)/,Xt+"box-pack:$3"+Si+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Xt+n+n;case 4095:case 3583:case 4068:case 2532:return $t(n,/(.+)-inline(.+)/,Xt+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ds(n)-1-e>6)switch(ai(n,e+1)){case 109:if(ai(n,e+4)!==45)break;case 102:return $t(n,/(.+:)(.+)-([^]+)/,"$1"+Xt+"$2-$3$1"+dv+(ai(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~US(n,"stretch")?xN($t(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(ai(n,e+1)!==115)break;case 6444:switch(ai(n,Ds(n)-3-(~US(n,"!important")&&10))){case 107:return $t(n,":",":"+Xt)+n;case 101:return $t(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Xt+(ai(n,14)===45?"inline-":"")+"box$3$1"+Xt+"$2$3$1"+Si+"$2box$3")+n}break;case 5936:switch(ai(n,e+11)){case 114:return Xt+n+Si+$t(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Xt+n+Si+$t(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Xt+n+Si+$t(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Xt+n+Si+n+n}return n}var p8=function(e,t,i,r){if(e.length>-1&&!e.return)switch(e.type){case YM:e.return=xN(e.value,e.length);break;case mN:return lc([Ph(e,{value:$t(e.value,"@","@"+Xt)})],r);case qM:if(e.length)return ZW(e.props,function(s){switch(YW(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return lc([Ph(e,{props:[$t(s,/:(read-\w+)/,":"+dv+"$1")]})],r);case"::placeholder":return lc([Ph(e,{props:[$t(s,/:(plac\w+)/,":"+Xt+"input-$1")]}),Ph(e,{props:[$t(s,/:(plac\w+)/,":"+dv+"$1")]}),Ph(e,{props:[$t(s,/:(plac\w+)/,Si+"input-$1")]})],r)}return""})}},m8=[p8],g8=function(e){var t=e.key;if(t==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(x){var _=x.getAttribute("data-emotion");_.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var r=e.stylisPlugins||m8,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(x){for(var _=x.getAttribute("data-emotion").split(" "),m=1;m<_.length;m++)s[_[m]]=!0;a.push(x)});var l,u=[f8,d8];{var f,d=[s8,a8(function(x){f.insert(x)})],p=o8(u.concat(r,d)),g=function(_){return lc(i8(_),p)};l=function(_,m,w,S){f=w,g(_?_+"{"+m.styles+"}":m.styles),S&&(v.inserted[m.name]=!0)}}var v={key:t,sheet:new GW({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return v.sheet.hydrate(a),v},wN={exports:{}},Jt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ii=typeof Symbol=="function"&&Symbol.for,KM=ii?Symbol.for("react.element"):60103,JM=ii?Symbol.for("react.portal"):60106,H0=ii?Symbol.for("react.fragment"):60107,G0=ii?Symbol.for("react.strict_mode"):60108,W0=ii?Symbol.for("react.profiler"):60114,j0=ii?Symbol.for("react.provider"):60109,X0=ii?Symbol.for("react.context"):60110,QM=ii?Symbol.for("react.async_mode"):60111,$0=ii?Symbol.for("react.concurrent_mode"):60111,q0=ii?Symbol.for("react.forward_ref"):60112,Y0=ii?Symbol.for("react.suspense"):60113,v8=ii?Symbol.for("react.suspense_list"):60120,Z0=ii?Symbol.for("react.memo"):60115,K0=ii?Symbol.for("react.lazy"):60116,y8=ii?Symbol.for("react.block"):60121,_8=ii?Symbol.for("react.fundamental"):60117,x8=ii?Symbol.for("react.responder"):60118,w8=ii?Symbol.for("react.scope"):60119;function Rr(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case KM:switch(n=n.type,n){case QM:case $0:case H0:case W0:case G0:case Y0:return n;default:switch(n=n&&n.$$typeof,n){case X0:case q0:case K0:case Z0:case j0:return n;default:return e}}case JM:return e}}}function SN(n){return Rr(n)===$0}Jt.AsyncMode=QM;Jt.ConcurrentMode=$0;Jt.ContextConsumer=X0;Jt.ContextProvider=j0;Jt.Element=KM;Jt.ForwardRef=q0;Jt.Fragment=H0;Jt.Lazy=K0;Jt.Memo=Z0;Jt.Portal=JM;Jt.Profiler=W0;Jt.StrictMode=G0;Jt.Suspense=Y0;Jt.isAsyncMode=function(n){return SN(n)||Rr(n)===QM};Jt.isConcurrentMode=SN;Jt.isContextConsumer=function(n){return Rr(n)===X0};Jt.isContextProvider=function(n){return Rr(n)===j0};Jt.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===KM};Jt.isForwardRef=function(n){return Rr(n)===q0};Jt.isFragment=function(n){return Rr(n)===H0};Jt.isLazy=function(n){return Rr(n)===K0};Jt.isMemo=function(n){return Rr(n)===Z0};Jt.isPortal=function(n){return Rr(n)===JM};Jt.isProfiler=function(n){return Rr(n)===W0};Jt.isStrictMode=function(n){return Rr(n)===G0};Jt.isSuspense=function(n){return Rr(n)===Y0};Jt.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===H0||n===$0||n===W0||n===G0||n===Y0||n===v8||typeof n=="object"&&n!==null&&(n.$$typeof===K0||n.$$typeof===Z0||n.$$typeof===j0||n.$$typeof===X0||n.$$typeof===q0||n.$$typeof===_8||n.$$typeof===x8||n.$$typeof===w8||n.$$typeof===y8)};Jt.typeOf=Rr;wN.exports=Jt;var S8=wN.exports,MN=S8,M8={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},E8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},EN={};EN[MN.ForwardRef]=M8;EN[MN.Memo]=E8;var b8=!0;function T8(n,e,t){var i="";return t.split(" ").forEach(function(r){n[r]!==void 0?e.push(n[r]+";"):i+=r+" "}),i}var bN=function(e,t,i){var r=e.key+"-"+t.name;(i===!1||b8===!1)&&e.registered[r]===void 0&&(e.registered[r]=t.styles)},A8=function(e,t,i){bN(e,t,i);var r=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function C8(n){for(var e=0,t,i=0,r=n.length;r>=4;++i,r-=4)t=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(n.charCodeAt(i+2)&255)<<16;case 2:e^=(n.charCodeAt(i+1)&255)<<8;case 1:e^=n.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var R8={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},P8=/[A-Z]|^ms/g,I8=/_EMO_([^_]+?)_([^]*?)_EMO_/g,TN=function(e){return e.charCodeAt(1)===45},fR=function(e){return e!=null&&typeof e!="boolean"},Ux=l8(function(n){return TN(n)?n:n.replace(P8,"-$&").toLowerCase()}),dR=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(I8,function(i,r,s){return Os={name:r,styles:s,next:Os},r})}return R8[e]!==1&&!TN(e)&&typeof t=="number"&&t!==0?t+"px":t};function ed(n,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return Os={name:t.name,styles:t.styles,next:Os},t.name;if(t.styles!==void 0){var i=t.next;if(i!==void 0)for(;i!==void 0;)Os={name:i.name,styles:i.styles,next:Os},i=i.next;var r=t.styles+";";return r}return L8(n,e,t)}case"function":{if(n!==void 0){var s=Os,o=t(n);return Os=s,ed(n,e,o)}break}}return t}function L8(n,e,t){var i="";if(Array.isArray(t))for(var r=0;r<t.length;r++)i+=ed(n,e,t[r])+";";else for(var s in t){var o=t[s];if(typeof o!="object")fR(o)&&(i+=Ux(s)+":"+dR(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var a=0;a<o.length;a++)fR(o[a])&&(i+=Ux(s)+":"+dR(s,o[a])+";");else{var l=ed(n,e,o);switch(s){case"animation":case"animationName":{i+=Ux(s)+":"+l+";";break}default:i+=s+"{"+l+"}"}}}return i}var pR=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Os,AN=function(e,t,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,s="";Os=void 0;var o=e[0];o==null||o.raw===void 0?(r=!1,s+=ed(i,t,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=ed(i,t,e[a]),r&&(s+=o[a]);pR.lastIndex=0;for(var l="",u;(u=pR.exec(s))!==null;)l+="-"+u[1];var f=C8(s)+l;return{name:f,styles:s,next:Os}},N8=function(e){return e()},D8=rT.useInsertionEffect?rT.useInsertionEffect:!1,O8=D8||N8,eE={}.hasOwnProperty,CN=Y.createContext(typeof HTMLElement<"u"?g8({key:"css"}):null);CN.Provider;var k8=function(e){return Y.forwardRef(function(t,i){var r=Y.useContext(CN);return e(t,r,i)})},F8=Y.createContext({}),BS="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",U8=function(e,t){var i={};for(var r in t)eE.call(t,r)&&(i[r]=t[r]);return i[BS]=e,i},z8=function(e){var t=e.cache,i=e.serialized,r=e.isStringTag;return bN(t,i,r),O8(function(){return A8(t,i,r)}),null},B8=k8(function(n,e,t){var i=n.css;typeof i=="string"&&e.registered[i]!==void 0&&(i=e.registered[i]);var r=n[BS],s=[i],o="";typeof n.className=="string"?o=T8(e.registered,s,n.className):n.className!=null&&(o=n.className+" ");var a=AN(s,void 0,Y.useContext(F8));o+=e.key+"-"+a.name;var l={};for(var u in n)eE.call(n,u)&&u!=="css"&&u!==BS&&(l[u]=n[u]);return l.ref=t,l.className=o,Y.createElement(Y.Fragment,null,Y.createElement(z8,{cache:e,serialized:a,isStringTag:typeof r=="string"}),Y.createElement(r,l))}),V8=B8,nt=function(e,t){var i=arguments;if(t==null||!eE.call(t,"css"))return Y.createElement.apply(void 0,i);var r=i.length,s=new Array(r);s[0]=V8,s[1]=U8(e,t);for(var o=2;o<r;o++)s[o]=i[o];return Y.createElement.apply(null,s)};function tE(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return AN(e)}var H8=function(){var e=tE.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function G8(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}const W8=Math.min,j8=Math.max,pv=Math.round,km=Math.floor,mv=n=>({x:n,y:n});function X8(n){const{x:e,y:t,width:i,height:r}=n;return{width:i,height:r,top:t,left:e,right:e+i,bottom:t+r,x:e,y:t}}function RN(n){return IN(n)?(n.nodeName||"").toLowerCase():"#document"}function Io(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function PN(n){var e;return(e=(IN(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function IN(n){return n instanceof Node||n instanceof Io(n).Node}function $8(n){return n instanceof Element||n instanceof Io(n).Element}function nE(n){return n instanceof HTMLElement||n instanceof Io(n).HTMLElement}function mR(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Io(n).ShadowRoot}function LN(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=iE(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(r)}function q8(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Y8(n){return["html","body","#document"].includes(RN(n))}function iE(n){return Io(n).getComputedStyle(n)}function Z8(n){if(RN(n)==="html")return n;const e=n.assignedSlot||n.parentNode||mR(n)&&n.host||PN(n);return mR(e)?e.host:e}function NN(n){const e=Z8(n);return Y8(e)?n.ownerDocument?n.ownerDocument.body:n.body:nE(e)&&LN(e)?e:NN(e)}function gv(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=NN(n),s=r===((i=n.ownerDocument)==null?void 0:i.body),o=Io(r);return s?e.concat(o,o.visualViewport||[],LN(r)?r:[],o.frameElement&&t?gv(o.frameElement):[]):e.concat(r,gv(r,[],t))}function K8(n){const e=iE(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=nE(n),s=r?n.offsetWidth:t,o=r?n.offsetHeight:i,a=pv(t)!==s||pv(i)!==o;return a&&(t=s,i=o),{width:t,height:i,$:a}}function rE(n){return $8(n)?n:n.contextElement}function gR(n){const e=rE(n);if(!nE(e))return mv(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:s}=K8(e);let o=(s?pv(t.width):t.width)/i,a=(s?pv(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const J8=mv(0);function Q8(n){const e=Io(n);return!q8()||!e.visualViewport?J8:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function e9(n,e,t){return!1}function vR(n,e,t,i){e===void 0&&(e=!1);const r=n.getBoundingClientRect(),s=rE(n);let o=mv(1);e&&(o=gR(n));const a=e9()?Q8(s):mv(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,f=r.width/o.x,d=r.height/o.y;if(s){const p=Io(s),g=i;let v=p,x=v.frameElement;for(;x&&i&&g!==v;){const _=gR(x),m=x.getBoundingClientRect(),w=iE(x),S=m.left+(x.clientLeft+parseFloat(w.paddingLeft))*_.x,b=m.top+(x.clientTop+parseFloat(w.paddingTop))*_.y;l*=_.x,u*=_.y,f*=_.x,d*=_.y,l+=S,u+=b,v=Io(x),x=v.frameElement}}return X8({width:f,height:d,x:l,y:u})}function t9(n,e){let t=null,i;const r=PN(n);function s(){var a;clearTimeout(i),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:f,width:d,height:p}=n.getBoundingClientRect();if(a||e(),!d||!p)return;const g=km(f),v=km(r.clientWidth-(u+d)),x=km(r.clientHeight-(f+p)),_=km(u),w={rootMargin:-g+"px "+-v+"px "+-x+"px "+-_+"px",threshold:j8(0,W8(1,l))||1};let S=!0;function b(R){const A=R[0].intersectionRatio;if(A!==l){if(!S)return o();A?o(!1,A):i=setTimeout(()=>{o(!1,1e-7)},1e3)}S=!1}try{t=new IntersectionObserver(b,{...w,root:r.ownerDocument})}catch{t=new IntersectionObserver(b,w)}t.observe(n)}return o(!0),s}function n9(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,u=rE(n),f=r||s?[...u?gv(u):[],...gv(e)]:[];f.forEach(m=>{r&&m.addEventListener("scroll",t,{passive:!0}),s&&m.addEventListener("resize",t)});const d=u&&a?t9(u,t):null;let p=-1,g=null;o&&(g=new ResizeObserver(m=>{let[w]=m;w&&w.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=g)==null||S.observe(e)})),t()}),u&&!l&&g.observe(u),g.observe(e));let v,x=l?vR(n):null;l&&_();function _(){const m=vR(n);x&&(m.x!==x.x||m.y!==x.y||m.width!==x.width||m.height!==x.height)&&t(),x=m,v=requestAnimationFrame(_)}return t(),()=>{var m;f.forEach(w=>{r&&w.removeEventListener("scroll",t),s&&w.removeEventListener("resize",t)}),d==null||d(),(m=g)==null||m.disconnect(),g=null,l&&cancelAnimationFrame(v)}}var VS=Y.useLayoutEffect,i9=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],vv=function(){};function r9(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function s9(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];var s=[].concat(i);if(e&&n)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(r9(n,o)));return s.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var yR=function(e){return p9(e)?e.filter(Boolean):Pl(e)==="object"&&e!==null?[e]:[]},DN=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=Do(e,i9);return st({},t)},Cn=function(e,t,i){var r=e.cx,s=e.getStyles,o=e.getClassNames,a=e.className;return{css:s(t,e),className:r(i??{},o(t,e),a)}};function J0(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function o9(n){return J0(n)?window.innerHeight:n.clientHeight}function ON(n){return J0(n)?window.pageYOffset:n.scrollTop}function yv(n,e){if(J0(n)){window.scrollTo(0,e);return}n.scrollTop=e}function a9(n){var e=getComputedStyle(n),t=e.position==="absolute",i=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var r=n;r=r.parentElement;)if(e=getComputedStyle(r),!(t&&e.position==="static")&&i.test(e.overflow+e.overflowY+e.overflowX))return r;return document.documentElement}function l9(n,e,t,i){return t*((n=n/i-1)*n*n+1)+e}function Fm(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:vv,r=ON(n),s=e-r,o=10,a=0;function l(){a+=o;var u=l9(a,r,s,t);yv(n,u),a<t?window.requestAnimationFrame(l):i(n)}l()}function _R(n,e){var t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=e.offsetHeight/3;i.bottom+r>t.bottom?yv(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+r,n.scrollHeight)):i.top-r<t.top&&yv(n,Math.max(e.offsetTop-r,0))}function u9(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function xR(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function c9(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var kN=!1,h9={get passive(){return kN=!0}},Um=typeof window<"u"?window:{};Um.addEventListener&&Um.removeEventListener&&(Um.addEventListener("p",vv,h9),Um.removeEventListener("p",vv,!1));var f9=kN;function d9(n){return n!=null}function p9(n){return Array.isArray(n)}function zm(n,e,t){return n?e:t}var m9=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];var s=Object.entries(e).filter(function(o){var a=Mo(o,1),l=a[0];return!i.includes(l)});return s.reduce(function(o,a){var l=Mo(a,2),u=l[0],f=l[1];return o[u]=f,o},{})},g9=["children","innerProps"],v9=["children","innerProps"];function y9(n){var e=n.maxHeight,t=n.menuEl,i=n.minHeight,r=n.placement,s=n.shouldScroll,o=n.isFixedPosition,a=n.controlHeight,l=a9(t),u={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return u;var f=l.getBoundingClientRect(),d=f.height,p=t.getBoundingClientRect(),g=p.bottom,v=p.height,x=p.top,_=t.offsetParent.getBoundingClientRect(),m=_.top,w=o?window.innerHeight:o9(l),S=ON(l),b=parseInt(getComputedStyle(t).marginBottom,10),R=parseInt(getComputedStyle(t).marginTop,10),A=m-R,C=w-x,L=A+S,I=d-S-x,E=g-w+S+b,N=S+x-R,z=160;switch(r){case"auto":case"bottom":if(C>=v)return{placement:"bottom",maxHeight:e};if(I>=v&&!o)return s&&Fm(l,E,z),{placement:"bottom",maxHeight:e};if(!o&&I>=i||o&&C>=i){s&&Fm(l,E,z);var O=o?C-b:I-b;return{placement:"bottom",maxHeight:O}}if(r==="auto"||o){var q=e,j=o?A:L;return j>=i&&(q=Math.min(j-b-a,e)),{placement:"top",maxHeight:q}}if(r==="bottom")return s&&yv(l,E),{placement:"bottom",maxHeight:e};break;case"top":if(A>=v)return{placement:"top",maxHeight:e};if(L>=v&&!o)return s&&Fm(l,N,z),{placement:"top",maxHeight:e};if(!o&&L>=i||o&&A>=i){var Q=e;return(!o&&L>=i||o&&A>=i)&&(Q=o?A-R:L-R),s&&Fm(l,N,z),{placement:"top",maxHeight:Q}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(r,'".'))}return u}function _9(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var FN=function(e){return e==="auto"?"bottom":e},x9=function(e,t){var i,r=e.placement,s=e.theme,o=s.borderRadius,a=s.spacing,l=s.colors;return st((i={label:"menu"},zh(i,_9(r),"100%"),zh(i,"position","absolute"),zh(i,"width","100%"),zh(i,"zIndex",1),i),t?{}:{backgroundColor:l.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},UN=Y.createContext(null),w9=function(e){var t=e.children,i=e.minMenuHeight,r=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,a=e.menuShouldScrollIntoView,l=e.theme,u=Y.useContext(UN)||{},f=u.setPortalPlacement,d=Y.useRef(null),p=Y.useState(r),g=Mo(p,2),v=g[0],x=g[1],_=Y.useState(null),m=Mo(_,2),w=m[0],S=m[1],b=l.spacing.controlHeight;return VS(function(){var R=d.current;if(R){var A=o==="fixed",C=a&&!A,L=y9({maxHeight:r,menuEl:R,minHeight:i,placement:s,shouldScroll:C,isFixedPosition:A,controlHeight:b});x(L.maxHeight),S(L.placement),f==null||f(L.placement)}},[r,s,o,a,i,f,b]),t({ref:d,placerProps:st(st({},e),{},{placement:w||FN(s),maxHeight:v})})},S9=function(e){var t=e.children,i=e.innerRef,r=e.innerProps;return nt("div",ct({},Cn(e,"menu",{menu:!0}),{ref:i},r),t)},M9=S9,E9=function(e,t){var i=e.maxHeight,r=e.theme.spacing.baseUnit;return st({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:r,paddingTop:r})},b9=function(e){var t=e.children,i=e.innerProps,r=e.innerRef,s=e.isMulti;return nt("div",ct({},Cn(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:r},i),t)},zN=function(e,t){var i=e.theme,r=i.spacing.baseUnit,s=i.colors;return st({textAlign:"center"},t?{}:{color:s.neutral40,padding:"".concat(r*2,"px ").concat(r*3,"px")})},T9=zN,A9=zN,C9=function(e){var t=e.children,i=t===void 0?"No options":t,r=e.innerProps,s=Do(e,g9);return nt("div",ct({},Cn(st(st({},s),{},{children:i,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),i)},R9=function(e){var t=e.children,i=t===void 0?"Loading...":t,r=e.innerProps,s=Do(e,v9);return nt("div",ct({},Cn(st(st({},s),{},{children:i,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),i)},P9=function(e){var t=e.rect,i=e.offset,r=e.position;return{left:t.left,position:r,top:i,width:t.width,zIndex:1}},I9=function(e){var t=e.appendTo,i=e.children,r=e.controlElement,s=e.innerProps,o=e.menuPlacement,a=e.menuPosition,l=Y.useRef(null),u=Y.useRef(null),f=Y.useState(FN(o)),d=Mo(f,2),p=d[0],g=d[1],v=Y.useMemo(function(){return{setPortalPlacement:g}},[]),x=Y.useState(null),_=Mo(x,2),m=_[0],w=_[1],S=Y.useCallback(function(){if(r){var C=u9(r),L=a==="fixed"?0:window.pageYOffset,I=C[p]+L;(I!==(m==null?void 0:m.offset)||C.left!==(m==null?void 0:m.rect.left)||C.width!==(m==null?void 0:m.rect.width))&&w({offset:I,rect:C})}},[r,a,p,m==null?void 0:m.offset,m==null?void 0:m.rect.left,m==null?void 0:m.rect.width]);VS(function(){S()},[S]);var b=Y.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),r&&l.current&&(u.current=n9(r,l.current,S,{elementResize:"ResizeObserver"in window}))},[r,S]);VS(function(){b()},[b]);var R=Y.useCallback(function(C){l.current=C,b()},[b]);if(!t&&a!=="fixed"||!m)return null;var A=nt("div",ct({ref:R},Cn(st(st({},e),{},{offset:m.offset,position:a,rect:m.rect}),"menuPortal",{"menu-portal":!0}),s),i);return nt(UN.Provider,{value:v},t?EI.createPortal(A,t):A)},L9=function(e){var t=e.isDisabled,i=e.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},N9=function(e){var t=e.children,i=e.innerProps,r=e.isDisabled,s=e.isRtl;return nt("div",ct({},Cn(e,"container",{"--is-disabled":r,"--is-rtl":s}),i),t)},D9=function(e,t){var i=e.theme.spacing,r=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return st({alignItems:"center",display:r&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},O9=function(e){var t=e.children,i=e.innerProps,r=e.isMulti,s=e.hasValue;return nt("div",ct({},Cn(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":s}),i),t)},k9=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},F9=function(e){var t=e.children,i=e.innerProps;return nt("div",ct({},Cn(e,"indicatorsContainer",{indicators:!0}),i),t)},wR,U9=["size"],z9=["innerProps","isRtl","size"],B9={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},BN=function(e){var t=e.size,i=Do(e,U9);return nt("svg",ct({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:B9},i))},sE=function(e){return nt(BN,ct({size:20},e),nt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},VN=function(e){return nt(BN,ct({size:20},e),nt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},HN=function(e,t){var i=e.isFocused,r=e.theme,s=r.spacing.baseUnit,o=r.colors;return st({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:i?o.neutral60:o.neutral20,padding:s*2,":hover":{color:i?o.neutral80:o.neutral40}})},V9=HN,H9=function(e){var t=e.children,i=e.innerProps;return nt("div",ct({},Cn(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),t||nt(VN,null))},G9=HN,W9=function(e){var t=e.children,i=e.innerProps;return nt("div",ct({},Cn(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),t||nt(sE,null))},j9=function(e,t){var i=e.isDisabled,r=e.theme,s=r.spacing.baseUnit,o=r.colors;return st({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:i?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},X9=function(e){var t=e.innerProps;return nt("span",ct({},t,Cn(e,"indicatorSeparator",{"indicator-separator":!0})))},$9=H8(wR||(wR=G8([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),q9=function(e,t){var i=e.isFocused,r=e.size,s=e.theme,o=s.colors,a=s.spacing.baseUnit;return st({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},t?{}:{color:i?o.neutral60:o.neutral20,padding:a*2})},zx=function(e){var t=e.delay,i=e.offset;return nt("span",{css:tE({animation:"".concat($9," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Y9=function(e){var t=e.innerProps,i=e.isRtl,r=e.size,s=r===void 0?4:r,o=Do(e,z9);return nt("div",ct({},Cn(st(st({},o),{},{innerProps:t,isRtl:i,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),nt(zx,{delay:0,offset:i}),nt(zx,{delay:160,offset:!0}),nt(zx,{delay:320,offset:!i}))},Z9=function(e,t){var i=e.isDisabled,r=e.isFocused,s=e.theme,o=s.colors,a=s.borderRadius,l=s.spacing;return st({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:i?o.neutral5:o.neutral0,borderColor:i?o.neutral10:r?o.primary:o.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:r?o.primary:o.neutral30}})},K9=function(e){var t=e.children,i=e.isDisabled,r=e.isFocused,s=e.innerRef,o=e.innerProps,a=e.menuIsOpen;return nt("div",ct({ref:s},Cn(e,"control",{control:!0,"control--is-disabled":i,"control--is-focused":r,"control--menu-is-open":a}),o,{"aria-disabled":i||void 0}),t)},J9=K9,Q9=["data"],ej=function(e,t){var i=e.theme.spacing;return t?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},tj=function(e){var t=e.children,i=e.cx,r=e.getStyles,s=e.getClassNames,o=e.Heading,a=e.headingProps,l=e.innerProps,u=e.label,f=e.theme,d=e.selectProps;return nt("div",ct({},Cn(e,"group",{group:!0}),l),nt(o,ct({},a,{selectProps:d,theme:f,getStyles:r,getClassNames:s,cx:i}),u),nt("div",null,t))},nj=function(e,t){var i=e.theme,r=i.colors,s=i.spacing;return st({label:"group",cursor:"default",display:"block"},t?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},ij=function(e){var t=DN(e);t.data;var i=Do(t,Q9);return nt("div",ct({},Cn(e,"groupHeading",{"group-heading":!0}),i))},rj=tj,sj=["innerRef","isDisabled","isHidden","inputClassName"],oj=function(e,t){var i=e.isDisabled,r=e.value,s=e.theme,o=s.spacing,a=s.colors;return st(st({visibility:i?"hidden":"visible",transform:r?"translateZ(0)":""},aj),t?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:a.neutral80})},GN={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},aj={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":st({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},GN)},lj=function(e){return st({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},GN)},uj=function(e){var t=e.cx,i=e.value,r=DN(e),s=r.innerRef,o=r.isDisabled,a=r.isHidden,l=r.inputClassName,u=Do(r,sj);return nt("div",ct({},Cn(e,"input",{"input-container":!0}),{"data-value":i||""}),nt("input",ct({className:t({input:!0},l),ref:s,style:lj(a),disabled:o},u)))},cj=uj,hj=function(e,t){var i=e.theme,r=i.spacing,s=i.borderRadius,o=i.colors;return st({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:r.baseUnit/2})},fj=function(e,t){var i=e.theme,r=i.borderRadius,s=i.colors,o=e.cropWithEllipsis;return st({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:r/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},dj=function(e,t){var i=e.theme,r=i.spacing,s=i.borderRadius,o=i.colors,a=e.isFocused;return st({alignItems:"center",display:"flex"},t?{}:{borderRadius:s/2,backgroundColor:a?o.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},WN=function(e){var t=e.children,i=e.innerProps;return nt("div",i,t)},pj=WN,mj=WN;function gj(n){var e=n.children,t=n.innerProps;return nt("div",ct({role:"button"},t),e||nt(sE,{size:14}))}var vj=function(e){var t=e.children,i=e.components,r=e.data,s=e.innerProps,o=e.isDisabled,a=e.removeProps,l=e.selectProps,u=i.Container,f=i.Label,d=i.Remove;return nt(u,{data:r,innerProps:st(st({},Cn(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:l},nt(f,{data:r,innerProps:st({},Cn(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),nt(d,{data:r,innerProps:st(st({},Cn(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},a),selectProps:l}))},yj=vj,_j=function(e,t){var i=e.isDisabled,r=e.isFocused,s=e.isSelected,o=e.theme,a=o.spacing,l=o.colors;return st({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:s?l.primary:r?l.primary25:"transparent",color:i?l.neutral20:s?l.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:s?l.primary:l.primary50}})},xj=function(e){var t=e.children,i=e.isDisabled,r=e.isFocused,s=e.isSelected,o=e.innerRef,a=e.innerProps;return nt("div",ct({},Cn(e,"option",{option:!0,"option--is-disabled":i,"option--is-focused":r,"option--is-selected":s}),{ref:o,"aria-disabled":i},a),t)},wj=xj,Sj=function(e,t){var i=e.theme,r=i.spacing,s=i.colors;return st({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:s.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},Mj=function(e){var t=e.children,i=e.innerProps;return nt("div",ct({},Cn(e,"placeholder",{placeholder:!0}),i),t)},Ej=Mj,bj=function(e,t){var i=e.isDisabled,r=e.theme,s=r.spacing,o=r.colors;return st({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:i?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},Tj=function(e){var t=e.children,i=e.isDisabled,r=e.innerProps;return nt("div",ct({},Cn(e,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),r),t)},Aj=Tj,Cj={ClearIndicator:W9,Control:J9,DropdownIndicator:H9,DownChevron:VN,CrossIcon:sE,Group:rj,GroupHeading:ij,IndicatorsContainer:F9,IndicatorSeparator:X9,Input:cj,LoadingIndicator:Y9,Menu:M9,MenuList:b9,MenuPortal:I9,LoadingMessage:R9,NoOptionsMessage:C9,MultiValue:yj,MultiValueContainer:pj,MultiValueLabel:mj,MultiValueRemove:gj,Option:wj,Placeholder:Ej,SelectContainer:N9,SingleValue:Aj,ValueContainer:O9},Rj=function(e){return st(st({},Cj),e.components)},SR=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Pj(n,e){return!!(n===e||SR(n)&&SR(e))}function Ij(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!Pj(n[t],e[t]))return!1;return!0}function Lj(n,e){e===void 0&&(e=Ij);var t=null;function i(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(t&&t.lastThis===this&&e(r,t.lastArgs))return t.lastResult;var o=n.apply(this,r);return t={lastResult:o,lastArgs:r,lastThis:this},o}return i.clear=function(){t=null},i}var Nj={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Dj=function(e){return nt("span",ct({css:Nj},e))},MR=Dj,Oj={guidance:function(e){var t=e.isSearchable,i=e.isMulti,r=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,i=e.label,r=i===void 0?"":i,s=e.labels,o=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(r," is disabled. Select another option."):"option ".concat(r,", selected.");default:return""}},onFocus:function(e){var t=e.context,i=e.focused,r=e.options,s=e.label,o=s===void 0?"":s,a=e.selectValue,l=e.isDisabled,u=e.isSelected,f=e.isAppleDevice,d=function(x,_){return x&&x.length?"".concat(x.indexOf(_)+1," of ").concat(x.length):""};if(t==="value"&&a)return"value ".concat(o," focused, ").concat(d(a,i),".");if(t==="menu"&&f){var p=l?" disabled":"",g="".concat(u?" selected":"").concat(p);return"".concat(o).concat(g,", ").concat(d(r,i),".")}return""},onFilter:function(e){var t=e.inputValue,i=e.resultsMessage;return"".concat(i).concat(t?" for search term "+t:"",".")}},kj=function(e){var t=e.ariaSelection,i=e.focusedOption,r=e.focusedValue,s=e.focusableOptions,o=e.isFocused,a=e.selectValue,l=e.selectProps,u=e.id,f=e.isAppleDevice,d=l.ariaLiveMessages,p=l.getOptionLabel,g=l.inputValue,v=l.isMulti,x=l.isOptionDisabled,_=l.isSearchable,m=l.menuIsOpen,w=l.options,S=l.screenReaderStatus,b=l.tabSelectsValue,R=l.isLoading,A=l["aria-label"],C=l["aria-live"],L=Y.useMemo(function(){return st(st({},Oj),d||{})},[d]),I=Y.useMemo(function(){var j="";if(t&&L.onChange){var Q=t.option,oe=t.options,k=t.removedValue,W=t.removedValues,G=t.value,ne=function(Qe){return Array.isArray(Qe)?null:Qe},me=k||Q||ne(G),_e=me?p(me):"",J=oe||W||void 0,pe=J?J.map(p):[],Me=st({isDisabled:me&&x(me,a),label:_e,labels:pe},t);j=L.onChange(Me)}return j},[t,L,x,a,p]),E=Y.useMemo(function(){var j="",Q=i||r,oe=!!(i&&a&&a.includes(i));if(Q&&L.onFocus){var k={focused:Q,label:p(Q),isDisabled:x(Q,a),isSelected:oe,options:s,context:Q===i?"menu":"value",selectValue:a,isAppleDevice:f};j=L.onFocus(k)}return j},[i,r,p,x,L,s,a,f]),N=Y.useMemo(function(){var j="";if(m&&w.length&&!R&&L.onFilter){var Q=S({count:s.length});j=L.onFilter({inputValue:g,resultsMessage:Q})}return j},[s,g,m,L,w,S,R]),z=(t==null?void 0:t.action)==="initial-input-focus",O=Y.useMemo(function(){var j="";if(L.guidance){var Q=r?"value":m?"menu":"input";j=L.guidance({"aria-label":A,context:Q,isDisabled:i&&x(i,a),isMulti:v,isSearchable:_,tabSelectsValue:b,isInitialFocus:z})}return j},[A,i,r,v,x,_,m,L,a,b,z]),q=nt(Y.Fragment,null,nt("span",{id:"aria-selection"},I),nt("span",{id:"aria-focused"},E),nt("span",{id:"aria-results"},N),nt("span",{id:"aria-guidance"},O));return nt(Y.Fragment,null,nt(MR,{id:u},z&&q),nt(MR,{"aria-live":C,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!z&&q))},Fj=kj,HS=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Uj=new RegExp("["+HS.map(function(n){return n.letters}).join("")+"]","g"),jN={};for(var Bx=0;Bx<HS.length;Bx++)for(var Vx=HS[Bx],Hx=0;Hx<Vx.letters.length;Hx++)jN[Vx.letters[Hx]]=Vx.base;var XN=function(e){return e.replace(Uj,function(t){return jN[t]})},zj=Lj(XN),ER=function(e){return e.replace(/^\s+|\s+$/g,"")},Bj=function(e){return"".concat(e.label," ").concat(e.value)},Vj=function(e){return function(t,i){if(t.data.__isNew__)return!0;var r=st({ignoreCase:!0,ignoreAccents:!0,stringify:Bj,trim:!0,matchFrom:"any"},e),s=r.ignoreCase,o=r.ignoreAccents,a=r.stringify,l=r.trim,u=r.matchFrom,f=l?ER(i):i,d=l?ER(a(t)):a(t);return s&&(f=f.toLowerCase(),d=d.toLowerCase()),o&&(f=zj(f),d=XN(d)),u==="start"?d.substr(0,f.length)===f:d.indexOf(f)>-1}},Hj=["innerRef"];function Gj(n){var e=n.innerRef,t=Do(n,Hj),i=m9(t,"onExited","in","enter","exit","appear");return nt("input",ct({ref:e},i,{css:tE({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Wj=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function jj(n){var e=n.isEnabled,t=n.onBottomArrive,i=n.onBottomLeave,r=n.onTopArrive,s=n.onTopLeave,o=Y.useRef(!1),a=Y.useRef(!1),l=Y.useRef(0),u=Y.useRef(null),f=Y.useCallback(function(_,m){if(u.current!==null){var w=u.current,S=w.scrollTop,b=w.scrollHeight,R=w.clientHeight,A=u.current,C=m>0,L=b-R-S,I=!1;L>m&&o.current&&(i&&i(_),o.current=!1),C&&a.current&&(s&&s(_),a.current=!1),C&&m>L?(t&&!o.current&&t(_),A.scrollTop=b,I=!0,o.current=!0):!C&&-m>S&&(r&&!a.current&&r(_),A.scrollTop=0,I=!0,a.current=!0),I&&Wj(_)}},[t,i,r,s]),d=Y.useCallback(function(_){f(_,_.deltaY)},[f]),p=Y.useCallback(function(_){l.current=_.changedTouches[0].clientY},[]),g=Y.useCallback(function(_){var m=l.current-_.changedTouches[0].clientY;f(_,m)},[f]),v=Y.useCallback(function(_){if(_){var m=f9?{passive:!1}:!1;_.addEventListener("wheel",d,m),_.addEventListener("touchstart",p,m),_.addEventListener("touchmove",g,m)}},[g,p,d]),x=Y.useCallback(function(_){_&&(_.removeEventListener("wheel",d,!1),_.removeEventListener("touchstart",p,!1),_.removeEventListener("touchmove",g,!1))},[g,p,d]);return Y.useEffect(function(){if(e){var _=u.current;return v(_),function(){x(_)}}},[e,v,x]),function(_){u.current=_}}var bR=["boxSizing","height","overflow","paddingRight","position"],TR={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function AR(n){n.preventDefault()}function CR(n){n.stopPropagation()}function RR(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function PR(){return"ontouchstart"in window||navigator.maxTouchPoints}var IR=!!(typeof window<"u"&&window.document&&window.document.createElement),Ih=0,Au={capture:!1,passive:!1};function Xj(n){var e=n.isEnabled,t=n.accountForScrollbars,i=t===void 0?!0:t,r=Y.useRef({}),s=Y.useRef(null),o=Y.useCallback(function(l){if(IR){var u=document.body,f=u&&u.style;if(i&&bR.forEach(function(v){var x=f&&f[v];r.current[v]=x}),i&&Ih<1){var d=parseInt(r.current.paddingRight,10)||0,p=document.body?document.body.clientWidth:0,g=window.innerWidth-p+d||0;Object.keys(TR).forEach(function(v){var x=TR[v];f&&(f[v]=x)}),f&&(f.paddingRight="".concat(g,"px"))}u&&PR()&&(u.addEventListener("touchmove",AR,Au),l&&(l.addEventListener("touchstart",RR,Au),l.addEventListener("touchmove",CR,Au))),Ih+=1}},[i]),a=Y.useCallback(function(l){if(IR){var u=document.body,f=u&&u.style;Ih=Math.max(Ih-1,0),i&&Ih<1&&bR.forEach(function(d){var p=r.current[d];f&&(f[d]=p)}),u&&PR()&&(u.removeEventListener("touchmove",AR,Au),l&&(l.removeEventListener("touchstart",RR,Au),l.removeEventListener("touchmove",CR,Au)))}},[i]);return Y.useEffect(function(){if(e){var l=s.current;return o(l),function(){a(l)}}},[e,o,a]),function(l){s.current=l}}var $j=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},qj={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Yj(n){var e=n.children,t=n.lockEnabled,i=n.captureEnabled,r=i===void 0?!0:i,s=n.onBottomArrive,o=n.onBottomLeave,a=n.onTopArrive,l=n.onTopLeave,u=jj({isEnabled:r,onBottomArrive:s,onBottomLeave:o,onTopArrive:a,onTopLeave:l}),f=Xj({isEnabled:t}),d=function(g){u(g),f(g)};return nt(Y.Fragment,null,t&&nt("div",{onClick:$j,css:qj}),e(d))}var Zj={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Kj=function(e){var t=e.name,i=e.onFocus;return nt("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:Zj,value:"",onChange:function(){}})},Jj=Kj;function oE(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Qj(){return oE(/^iPhone/i)}function $N(){return oE(/^Mac/i)}function e7(){return oE(/^iPad/i)||$N()&&navigator.maxTouchPoints>1}function t7(){return Qj()||e7()}function n7(){return $N()||t7()}var i7=function(e){return e.label},r7=function(e){return e.label},s7=function(e){return e.value},o7=function(e){return!!e.isDisabled},a7={clearIndicator:G9,container:L9,control:Z9,dropdownIndicator:V9,group:ej,groupHeading:nj,indicatorsContainer:k9,indicatorSeparator:j9,input:oj,loadingIndicator:q9,loadingMessage:A9,menu:x9,menuList:E9,menuPortal:P9,multiValue:hj,multiValueLabel:fj,multiValueRemove:dj,noOptionsMessage:T9,option:_j,placeholder:Sj,singleValue:bj,valueContainer:D9},l7={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},u7=4,qN=4,c7=38,h7=qN*2,f7={baseUnit:qN,controlHeight:c7,menuGutter:h7},Gx={borderRadius:u7,colors:l7,spacing:f7},d7={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:xR(),captureMenuScroll:!xR(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Vj(),formatGroupLabel:i7,getOptionLabel:r7,getOptionValue:s7,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:o7,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!c9(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function LR(n,e,t,i){var r=KN(n,e,t),s=JN(n,e,t),o=ZN(n,e),a=_v(n,e);return{type:"option",data:e,isDisabled:r,isSelected:s,label:o,value:a,index:i}}function yg(n,e){return n.options.map(function(t,i){if("options"in t){var r=t.options.map(function(o,a){return LR(n,o,e,a)}).filter(function(o){return DR(n,o)});return r.length>0?{type:"group",data:t,options:r,index:i}:void 0}var s=LR(n,t,e,i);return DR(n,s)?s:void 0}).filter(d9)}function YN(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,$M(t.options.map(function(i){return i.data}))):e.push(t.data),e},[])}function NR(n,e){return n.reduce(function(t,i){return i.type==="group"?t.push.apply(t,$M(i.options.map(function(r){return{data:r.data,id:"".concat(e,"-").concat(i.index,"-").concat(r.index)}}))):t.push({data:i.data,id:"".concat(e,"-").concat(i.index)}),t},[])}function p7(n,e){return YN(yg(n,e))}function DR(n,e){var t=n.inputValue,i=t===void 0?"":t,r=e.data,s=e.isSelected,o=e.label,a=e.value;return(!eD(n)||!s)&&QN(n,{label:o,value:a,data:r},i)}function m7(n,e){var t=n.focusedValue,i=n.selectValue,r=i.indexOf(t);if(r>-1){var s=e.indexOf(t);if(s>-1)return t;if(r<e.length)return e[r]}return null}function g7(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var Wx=function(e,t){var i,r=(i=e.find(function(s){return s.data===t}))===null||i===void 0?void 0:i.id;return r||null},ZN=function(e,t){return e.getOptionLabel(t)},_v=function(e,t){return e.getOptionValue(t)};function KN(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function JN(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var i=_v(n,e);return t.some(function(r){return _v(n,r)===i})}function QN(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var eD=function(e){var t=e.hideSelectedOptions,i=e.isMulti;return t===void 0?i:t},v7=1,tD=function(n){DW(t,n);var e=FW(t);function t(i){var r;if(LW(this,t),r=e.call(this,i),r.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},r.blockOptionHover=!1,r.isComposing=!1,r.commonProps=void 0,r.initialTouchX=0,r.initialTouchY=0,r.openAfterFocus=!1,r.scrollToFocusedOptionOnUpdate=!1,r.userIsDragging=void 0,r.isAppleDevice=n7(),r.controlRef=null,r.getControlRef=function(l){r.controlRef=l},r.focusedOptionRef=null,r.getFocusedOptionRef=function(l){r.focusedOptionRef=l},r.menuListRef=null,r.getMenuListRef=function(l){r.menuListRef=l},r.inputRef=null,r.getInputRef=function(l){r.inputRef=l},r.focus=r.focusInput,r.blur=r.blurInput,r.onChange=function(l,u){var f=r.props,d=f.onChange,p=f.name;u.name=p,r.ariaOnChange(l,u),d(l,u)},r.setValue=function(l,u,f){var d=r.props,p=d.closeMenuOnSelect,g=d.isMulti,v=d.inputValue;r.onInputChange("",{action:"set-value",prevInputValue:v}),p&&(r.setState({inputIsHiddenAfterUpdate:!g}),r.onMenuClose()),r.setState({clearFocusValueOnUpdate:!0}),r.onChange(l,{action:u,option:f})},r.selectOption=function(l){var u=r.props,f=u.blurInputOnSelect,d=u.isMulti,p=u.name,g=r.state.selectValue,v=d&&r.isOptionSelected(l,g),x=r.isOptionDisabled(l,g);if(v){var _=r.getOptionValue(l);r.setValue(g.filter(function(m){return r.getOptionValue(m)!==_}),"deselect-option",l)}else if(!x)d?r.setValue([].concat($M(g),[l]),"select-option",l):r.setValue(l,"select-option");else{r.ariaOnChange(l,{action:"select-option",option:l,name:p});return}f&&r.blurInput()},r.removeValue=function(l){var u=r.props.isMulti,f=r.state.selectValue,d=r.getOptionValue(l),p=f.filter(function(v){return r.getOptionValue(v)!==d}),g=zm(u,p,p[0]||null);r.onChange(g,{action:"remove-value",removedValue:l}),r.focusInput()},r.clearValue=function(){var l=r.state.selectValue;r.onChange(zm(r.props.isMulti,[],null),{action:"clear",removedValues:l})},r.popValue=function(){var l=r.props.isMulti,u=r.state.selectValue,f=u[u.length-1],d=u.slice(0,u.length-1),p=zm(l,d,d[0]||null);r.onChange(p,{action:"pop-value",removedValue:f})},r.getFocusedOptionId=function(l){return Wx(r.state.focusableOptionsWithIds,l)},r.getFocusableOptionsWithIds=function(){return NR(yg(r.props,r.state.selectValue),r.getElementId("option"))},r.getValue=function(){return r.state.selectValue},r.cx=function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];return s9.apply(void 0,[r.props.classNamePrefix].concat(u))},r.getOptionLabel=function(l){return ZN(r.props,l)},r.getOptionValue=function(l){return _v(r.props,l)},r.getStyles=function(l,u){var f=r.props.unstyled,d=a7[l](u,f);d.boxSizing="border-box";var p=r.props.styles[l];return p?p(d,u):d},r.getClassNames=function(l,u){var f,d;return(f=(d=r.props.classNames)[l])===null||f===void 0?void 0:f.call(d,u)},r.getElementId=function(l){return"".concat(r.state.instancePrefix,"-").concat(l)},r.getComponents=function(){return Rj(r.props)},r.buildCategorizedOptions=function(){return yg(r.props,r.state.selectValue)},r.getCategorizedOptions=function(){return r.props.menuIsOpen?r.buildCategorizedOptions():[]},r.buildFocusableOptions=function(){return YN(r.buildCategorizedOptions())},r.getFocusableOptions=function(){return r.props.menuIsOpen?r.buildFocusableOptions():[]},r.ariaOnChange=function(l,u){r.setState({ariaSelection:st({value:l},u)})},r.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),r.focusInput())},r.onMenuMouseMove=function(l){r.blockOptionHover=!1},r.onControlMouseDown=function(l){if(!l.defaultPrevented){var u=r.props.openMenuOnClick;r.state.isFocused?r.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&r.onMenuClose():u&&r.openMenu("first"):(u&&(r.openAfterFocus=!0),r.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},r.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!r.props.isDisabled){var u=r.props,f=u.isMulti,d=u.menuIsOpen;r.focusInput(),d?(r.setState({inputIsHiddenAfterUpdate:!f}),r.onMenuClose()):r.openMenu("first"),l.preventDefault()}},r.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(r.clearValue(),l.preventDefault(),r.openAfterFocus=!1,l.type==="touchend"?r.focusInput():setTimeout(function(){return r.focusInput()}))},r.onScroll=function(l){typeof r.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&J0(l.target)&&r.props.onMenuClose():typeof r.props.closeMenuOnScroll=="function"&&r.props.closeMenuOnScroll(l)&&r.props.onMenuClose()},r.onCompositionStart=function(){r.isComposing=!0},r.onCompositionEnd=function(){r.isComposing=!1},r.onTouchStart=function(l){var u=l.touches,f=u&&u.item(0);f&&(r.initialTouchX=f.clientX,r.initialTouchY=f.clientY,r.userIsDragging=!1)},r.onTouchMove=function(l){var u=l.touches,f=u&&u.item(0);if(f){var d=Math.abs(f.clientX-r.initialTouchX),p=Math.abs(f.clientY-r.initialTouchY),g=5;r.userIsDragging=d>g||p>g}},r.onTouchEnd=function(l){r.userIsDragging||(r.controlRef&&!r.controlRef.contains(l.target)&&r.menuListRef&&!r.menuListRef.contains(l.target)&&r.blurInput(),r.initialTouchX=0,r.initialTouchY=0)},r.onControlTouchEnd=function(l){r.userIsDragging||r.onControlMouseDown(l)},r.onClearIndicatorTouchEnd=function(l){r.userIsDragging||r.onClearIndicatorMouseDown(l)},r.onDropdownIndicatorTouchEnd=function(l){r.userIsDragging||r.onDropdownIndicatorMouseDown(l)},r.handleInputChange=function(l){var u=r.props.inputValue,f=l.currentTarget.value;r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange(f,{action:"input-change",prevInputValue:u}),r.props.menuIsOpen||r.onMenuOpen()},r.onInputFocus=function(l){r.props.onFocus&&r.props.onFocus(l),r.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(r.openAfterFocus||r.props.openMenuOnFocus)&&r.openMenu("first"),r.openAfterFocus=!1},r.onInputBlur=function(l){var u=r.props.inputValue;if(r.menuListRef&&r.menuListRef.contains(document.activeElement)){r.inputRef.focus();return}r.props.onBlur&&r.props.onBlur(l),r.onInputChange("",{action:"input-blur",prevInputValue:u}),r.onMenuClose(),r.setState({focusedValue:null,isFocused:!1})},r.onOptionHover=function(l){if(!(r.blockOptionHover||r.state.focusedOption===l)){var u=r.getFocusableOptions(),f=u.indexOf(l);r.setState({focusedOption:l,focusedOptionId:f>-1?r.getFocusedOptionId(l):null})}},r.shouldHideSelectedOptions=function(){return eD(r.props)},r.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),r.focus()},r.onKeyDown=function(l){var u=r.props,f=u.isMulti,d=u.backspaceRemovesValue,p=u.escapeClearsValue,g=u.inputValue,v=u.isClearable,x=u.isDisabled,_=u.menuIsOpen,m=u.onKeyDown,w=u.tabSelectsValue,S=u.openMenuOnFocus,b=r.state,R=b.focusedOption,A=b.focusedValue,C=b.selectValue;if(!x&&!(typeof m=="function"&&(m(l),l.defaultPrevented))){switch(r.blockOptionHover=!0,l.key){case"ArrowLeft":if(!f||g)return;r.focusValue("previous");break;case"ArrowRight":if(!f||g)return;r.focusValue("next");break;case"Delete":case"Backspace":if(g)return;if(A)r.removeValue(A);else{if(!d)return;f?r.popValue():v&&r.clearValue()}break;case"Tab":if(r.isComposing||l.shiftKey||!_||!w||!R||S&&r.isOptionSelected(R,C))return;r.selectOption(R);break;case"Enter":if(l.keyCode===229)break;if(_){if(!R||r.isComposing)return;r.selectOption(R);break}return;case"Escape":_?(r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange("",{action:"menu-close",prevInputValue:g}),r.onMenuClose()):v&&p&&r.clearValue();break;case" ":if(g)return;if(!_){r.openMenu("first");break}if(!R)return;r.selectOption(R);break;case"ArrowUp":_?r.focusOption("up"):r.openMenu("last");break;case"ArrowDown":_?r.focusOption("down"):r.openMenu("first");break;case"PageUp":if(!_)return;r.focusOption("pageup");break;case"PageDown":if(!_)return;r.focusOption("pagedown");break;case"Home":if(!_)return;r.focusOption("first");break;case"End":if(!_)return;r.focusOption("last");break;default:return}l.preventDefault()}},r.state.instancePrefix="react-select-"+(r.props.instanceId||++v7),r.state.selectValue=yR(i.value),i.menuIsOpen&&r.state.selectValue.length){var s=r.getFocusableOptionsWithIds(),o=r.buildFocusableOptions(),a=o.indexOf(r.state.selectValue[0]);r.state.focusableOptionsWithIds=s,r.state.focusedOption=o[a],r.state.focusedOptionId=Wx(s,o[a])}return r}return NW(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&_R(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(r){var s=this.props,o=s.isDisabled,a=s.menuIsOpen,l=this.state.isFocused;(l&&!o&&r.isDisabled||l&&a&&!r.menuIsOpen)&&this.focusInput(),l&&o&&!r.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!o&&r.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(_R(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(r,s){this.props.onInputChange(r,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(r){var s=this,o=this.state,a=o.selectValue,l=o.isFocused,u=this.buildFocusableOptions(),f=r==="first"?0:u.length-1;if(!this.props.isMulti){var d=u.indexOf(a[0]);d>-1&&(f=d)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[f],focusedOptionId:this.getFocusedOptionId(u[f])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(r){var s=this.state,o=s.selectValue,a=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=o.indexOf(a);a||(l=-1);var u=o.length-1,f=-1;if(o.length){switch(r){case"previous":l===0?f=0:l===-1?f=u:f=l-1;break;case"next":l>-1&&l<u&&(f=l+1);break}this.setState({inputIsHidden:f!==-1,focusedValue:o[f]})}}}},{key:"focusOption",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var l=0,u=a.indexOf(o);o||(u=-1),r==="up"?l=u>0?u-1:a.length-1:r==="down"?l=(u+1)%a.length:r==="pageup"?(l=u-s,l<0&&(l=0)):r==="pagedown"?(l=u+s,l>a.length-1&&(l=a.length-1)):r==="last"&&(l=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(a[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Gx):st(st({},Gx),this.props.theme):Gx}},{key:"getCommonProps",value:function(){var r=this.clearValue,s=this.cx,o=this.getStyles,a=this.getClassNames,l=this.getValue,u=this.selectOption,f=this.setValue,d=this.props,p=d.isMulti,g=d.isRtl,v=d.options,x=this.hasValue();return{clearValue:r,cx:s,getStyles:o,getClassNames:a,getValue:l,hasValue:x,isMulti:p,isRtl:g,options:v,selectOption:u,selectProps:d,setValue:f,theme:this.getTheme()}}},{key:"hasValue",value:function(){var r=this.state.selectValue;return r.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var r=this.props,s=r.isClearable,o=r.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(r,s){return KN(this.props,r,s)}},{key:"isOptionSelected",value:function(r,s){return JN(this.props,r,s)}},{key:"filterOption",value:function(r,s){return QN(this.props,r,s)}},{key:"formatOptionLabel",value:function(r,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(r,{context:s,inputValue:o,selectValue:a})}else return this.getOptionLabel(r)}},{key:"formatGroupLabel",value:function(r){return this.props.formatGroupLabel(r)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var r=this.props,s=r.isDisabled,o=r.isSearchable,a=r.inputId,l=r.inputValue,u=r.tabIndex,f=r.form,d=r.menuIsOpen,p=r.required,g=this.getComponents(),v=g.Input,x=this.state,_=x.inputIsHidden,m=x.ariaSelection,w=this.commonProps,S=a||this.getElementId("input"),b=st(st(st({"aria-autocomplete":"list","aria-expanded":d,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":p,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},d&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(m==null?void 0:m.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?Y.createElement(v,ct({},w,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:S,innerRef:this.getInputRef,isDisabled:s,isHidden:_,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:f,type:"text",value:l},b)):Y.createElement(Gj,ct({id:S,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:vv,onFocus:this.onInputFocus,disabled:s,tabIndex:u,inputMode:"none",form:f,value:""},b))}},{key:"renderPlaceholderOrValue",value:function(){var r=this,s=this.getComponents(),o=s.MultiValue,a=s.MultiValueContainer,l=s.MultiValueLabel,u=s.MultiValueRemove,f=s.SingleValue,d=s.Placeholder,p=this.commonProps,g=this.props,v=g.controlShouldRenderValue,x=g.isDisabled,_=g.isMulti,m=g.inputValue,w=g.placeholder,S=this.state,b=S.selectValue,R=S.focusedValue,A=S.isFocused;if(!this.hasValue()||!v)return m?null:Y.createElement(d,ct({},p,{key:"placeholder",isDisabled:x,isFocused:A,innerProps:{id:this.getElementId("placeholder")}}),w);if(_)return b.map(function(L,I){var E=L===R,N="".concat(r.getOptionLabel(L),"-").concat(r.getOptionValue(L));return Y.createElement(o,ct({},p,{components:{Container:a,Label:l,Remove:u},isFocused:E,isDisabled:x,key:N,index:I,removeProps:{onClick:function(){return r.removeValue(L)},onTouchEnd:function(){return r.removeValue(L)},onMouseDown:function(O){O.preventDefault()}},data:L}),r.formatOptionLabel(L,"value"))});if(m)return null;var C=b[0];return Y.createElement(f,ct({},p,{data:C,isDisabled:x}),this.formatOptionLabel(C,"value"))}},{key:"renderClearIndicator",value:function(){var r=this.getComponents(),s=r.ClearIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,u=a.isLoading,f=this.state.isFocused;if(!this.isClearable()||!s||l||!this.hasValue()||u)return null;var d={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return Y.createElement(s,ct({},o,{innerProps:d,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var r=this.getComponents(),s=r.LoadingIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,u=a.isLoading,f=this.state.isFocused;if(!s||!u)return null;var d={"aria-hidden":"true"};return Y.createElement(s,ct({},o,{innerProps:d,isDisabled:l,isFocused:f}))}},{key:"renderIndicatorSeparator",value:function(){var r=this.getComponents(),s=r.DropdownIndicator,o=r.IndicatorSeparator;if(!s||!o)return null;var a=this.commonProps,l=this.props.isDisabled,u=this.state.isFocused;return Y.createElement(o,ct({},a,{isDisabled:l,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var r=this.getComponents(),s=r.DropdownIndicator;if(!s)return null;var o=this.commonProps,a=this.props.isDisabled,l=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return Y.createElement(s,ct({},o,{innerProps:u,isDisabled:a,isFocused:l}))}},{key:"renderMenu",value:function(){var r=this,s=this.getComponents(),o=s.Group,a=s.GroupHeading,l=s.Menu,u=s.MenuList,f=s.MenuPortal,d=s.LoadingMessage,p=s.NoOptionsMessage,g=s.Option,v=this.commonProps,x=this.state.focusedOption,_=this.props,m=_.captureMenuScroll,w=_.inputValue,S=_.isLoading,b=_.loadingMessage,R=_.minMenuHeight,A=_.maxMenuHeight,C=_.menuIsOpen,L=_.menuPlacement,I=_.menuPosition,E=_.menuPortalTarget,N=_.menuShouldBlockScroll,z=_.menuShouldScrollIntoView,O=_.noOptionsMessage,q=_.onMenuScrollToTop,j=_.onMenuScrollToBottom;if(!C)return null;var Q=function(_e,J){var pe=_e.type,Me=_e.data,de=_e.isDisabled,Qe=_e.isSelected,lt=_e.label,K=_e.value,tt=x===Me,he=de?void 0:function(){return r.onOptionHover(Me)},we=de?void 0:function(){return r.selectOption(Me)},ye="".concat(r.getElementId("option"),"-").concat(J),Ce={id:ye,onClick:we,onMouseMove:he,onMouseOver:he,tabIndex:-1,role:"option","aria-selected":r.isAppleDevice?void 0:Qe};return Y.createElement(g,ct({},v,{innerProps:Ce,data:Me,isDisabled:de,isSelected:Qe,key:ye,label:lt,type:pe,value:K,isFocused:tt,innerRef:tt?r.getFocusedOptionRef:void 0}),r.formatOptionLabel(_e.data,"menu"))},oe;if(this.hasOptions())oe=this.getCategorizedOptions().map(function(me){if(me.type==="group"){var _e=me.data,J=me.options,pe=me.index,Me="".concat(r.getElementId("group"),"-").concat(pe),de="".concat(Me,"-heading");return Y.createElement(o,ct({},v,{key:Me,data:_e,options:J,Heading:a,headingProps:{id:de,data:me.data},label:r.formatGroupLabel(me.data)}),me.options.map(function(Qe){return Q(Qe,"".concat(pe,"-").concat(Qe.index))}))}else if(me.type==="option")return Q(me,"".concat(me.index))});else if(S){var k=b({inputValue:w});if(k===null)return null;oe=Y.createElement(d,v,k)}else{var W=O({inputValue:w});if(W===null)return null;oe=Y.createElement(p,v,W)}var G={minMenuHeight:R,maxMenuHeight:A,menuPlacement:L,menuPosition:I,menuShouldScrollIntoView:z},ne=Y.createElement(w9,ct({},v,G),function(me){var _e=me.ref,J=me.placerProps,pe=J.placement,Me=J.maxHeight;return Y.createElement(l,ct({},v,G,{innerRef:_e,innerProps:{onMouseDown:r.onMenuMouseDown,onMouseMove:r.onMenuMouseMove},isLoading:S,placement:pe}),Y.createElement(Yj,{captureEnabled:m,onTopArrive:q,onBottomArrive:j,lockEnabled:N},function(de){return Y.createElement(u,ct({},v,{innerRef:function(lt){r.getMenuListRef(lt),de(lt)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:r.getElementId("listbox")},isLoading:S,maxHeight:Me,focusedOption:x}),oe)}))});return E||I==="fixed"?Y.createElement(f,ct({},v,{appendTo:E,controlElement:this.controlRef,menuPlacement:L,menuPosition:I}),ne):ne}},{key:"renderFormField",value:function(){var r=this,s=this.props,o=s.delimiter,a=s.isDisabled,l=s.isMulti,u=s.name,f=s.required,d=this.state.selectValue;if(f&&!this.hasValue()&&!a)return Y.createElement(Jj,{name:u,onFocus:this.onValueInputFocus});if(!(!u||a))if(l)if(o){var p=d.map(function(x){return r.getOptionValue(x)}).join(o);return Y.createElement("input",{name:u,type:"hidden",value:p})}else{var g=d.length>0?d.map(function(x,_){return Y.createElement("input",{key:"i-".concat(_),name:u,type:"hidden",value:r.getOptionValue(x)})}):Y.createElement("input",{name:u,type:"hidden",value:""});return Y.createElement("div",null,g)}else{var v=d[0]?this.getOptionValue(d[0]):"";return Y.createElement("input",{name:u,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var r=this.commonProps,s=this.state,o=s.ariaSelection,a=s.focusedOption,l=s.focusedValue,u=s.isFocused,f=s.selectValue,d=this.getFocusableOptions();return Y.createElement(Fj,ct({},r,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:a,focusedValue:l,isFocused:u,selectValue:f,focusableOptions:d,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var r=this.getComponents(),s=r.Control,o=r.IndicatorsContainer,a=r.SelectContainer,l=r.ValueContainer,u=this.props,f=u.className,d=u.id,p=u.isDisabled,g=u.menuIsOpen,v=this.state.isFocused,x=this.commonProps=this.getCommonProps();return Y.createElement(a,ct({},x,{className:f,innerProps:{id:d,onKeyDown:this.onKeyDown},isDisabled:p,isFocused:v}),this.renderLiveRegion(),Y.createElement(s,ct({},x,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:p,isFocused:v,menuIsOpen:g}),Y.createElement(l,ct({},x,{isDisabled:p}),this.renderPlaceholderOrValue(),this.renderInput()),Y.createElement(o,ct({},x,{isDisabled:p}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(r,s){var o=s.prevProps,a=s.clearFocusValueOnUpdate,l=s.inputIsHiddenAfterUpdate,u=s.ariaSelection,f=s.isFocused,d=s.prevWasFocused,p=s.instancePrefix,g=r.options,v=r.value,x=r.menuIsOpen,_=r.inputValue,m=r.isMulti,w=yR(v),S={};if(o&&(v!==o.value||g!==o.options||x!==o.menuIsOpen||_!==o.inputValue)){var b=x?p7(r,w):[],R=x?NR(yg(r,w),"".concat(p,"-option")):[],A=a?m7(s,w):null,C=g7(s,b),L=Wx(R,C);S={selectValue:w,focusedOption:C,focusedOptionId:L,focusableOptionsWithIds:R,focusedValue:A,clearFocusValueOnUpdate:!1}}var I=l!=null&&r!==o?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},E=u,N=f&&d;return f&&!N&&(E={value:zm(m,w,w[0]||null),options:w,action:"initial-input-focus"},N=!d),(u==null?void 0:u.action)==="initial-input-focus"&&(E=null),st(st(st({},S),I),{},{prevProps:r,ariaSelection:E,prevWasFocused:N})}}]),t}(Y.Component);tD.defaultProps=d7;var y7=Y.forwardRef(function(n,e){var t=IW(n);return Y.createElement(tD,ct({ref:e},t))}),_7=y7;const x7=({conceptCategories:n,concepts:e,setConcepts:t})=>{const i=r=>{r in n&&t(n[r].map((s,o)=>({label:s.label,description:s.description,color:EW(o),embeddings:[],position:[0,0,0],index:o})))};return We.jsxs("div",{className:"PanelConceptCategories",children:[We.jsx("h3",{style:{textAlign:"left"},className:"HiddenOnMobile",children:"# Categories"}),We.jsx(_7,{className:"SelectConcept",placeholder:"Select a category...",isSearchable:!1,menuPortalTarget:document.body,options:Object.keys(n).map(r=>({value:r,label:r})),onChange:r=>{i((r==null?void 0:r.value)||"")}}),We.jsx("h2",{style:{height:"300px",overflow:"scroll"},className:"HiddenOnMobile",children:e.map(r=>We.jsx(cN,{color:r.color,inputValue:r.label,inputId:`prompt-${r.index}`,title:r.description},`prompt-${r.index}`))})]})},w7=({onChangeMyConcept:n})=>We.jsxs("div",{className:"PanelMyConcept",children:[We.jsx("h3",{style:{textAlign:"left"},className:"HiddenOnMobile",children:"# Your concept"}),We.jsx("h2",{children:We.jsx(cN,{color:"black",inputId:"prompt-test",onChanged:n})}),We.jsx("div",{style:{textAlign:"center"},className:"HiddenOnMobile",children:We.jsx("button",{onClick:()=>{n(document.getElementById("prompt-test").value)},children:"Represent Concept"})})]}),S7=({text:n})=>We.jsx("pre",{className:"CardHoveredConcept",children:We.jsx("strong",{children:We.jsx("em",{children:n})})}),nD=[{label:"Pure happiness",description:'Joy - "Pure happiness." Joy is a powerful, often euphoric state of happiness that is usually caused by something exceptionally good or satisfying. It often includes feelings of contentment, satisfaction, and well-being.'},{label:"Sorrowful distress",description:'Sadness - "Sorrowful distress." This emotion is typically associated with feelings of disadvantage, loss, and helplessness. When someone is sad, they often feel down and might have a low mood that affects their day-to-day activities.'},{label:"Anxiety anticipation",description:'Fear - "Anxiety anticipation." Fear is a response to an impending threat or danger, characterized by increased alertness and preparation for physical action. It often serves a protective purpose, triggering the "fight-or-flight" response.'},{label:"Fierce irritation",description:'Anger - "Fierce irritation." Anger is an emotional response to perceived wrongs and injustice, often resulting in a desire to assert authority or independence, or a tendency to retaliate against the source of offense.'},{label:"Unexpected astonishment",description:`Surprise - "Unexpected astonishment." This emotion is a response to an unexpected event. It can be either positive or negative, depending on the nature of the surprise. It's characterized by a high level of stimulation and a need to re-evaluate one's understanding of the situation.`},{label:"Revulsion reaction",description:'Disgust - "Revulsion reaction." Disgust is a powerful aversion to something perceived as unpleasant or offensive. This emotion can be triggered by various stimuli including unpleasant tastes, sights, or moral situations.'},{label:"Scornful disdain",description:'Contempt - "Scornful disdain." Contempt is an emotion that puts someone or something considered worthless or beneath consideration. This emotion often involves moral superiority and a lack of respect.'},{label:"Confident reliance",description:'Trust - "Confident reliance." Trust is an emotion reflecting a level of comfort and firm belief in the reliability or truth of someone or something. It involves a complex mix of affective experiences with a significant history of interactions.'}],iD=[{label:"Visionary guidance",description:'Authoritative Leadership - "Visionary guidance." This style is characterized by a leader who sets clear objectives and directions but allows individuals some flexibility in how they achieve these goals. They motivate by appealing to people’s shared goals.'},{label:"Collective input",description:'Democratic Leadership - "Collective input." Leaders using this style solicit input from team members in decision-making processes, fostering collaboration and participation. This approach can boost morale and creativity by making members feel valued and involved.'},{label:"Hands-off management",description:'Laissez-faire Leadership - "Hands-off management." In this style, the leader provides little guidance to team members, who are then allowed to make decisions and solve problems on their own. This can be effective in highly skilled teams but risky in teams needing direction.'},{label:"Performance reward",description:'Transactional Leadership - "Performance reward." Leaders focusing on this style are centered on clear structures wherein specific tasks are rewarded. Performance is closely monitored and feedback is given directly related to achievements. This approach works well in environments where tasks are routine and outcomes are predictable.'},{label:"Inspiring change",description:'Transformational Leadership - "Inspiring change." These leaders focus on initiating change in organizations, staff, and themselves. They are characterized by their ability to inspire and motivate employees to exceed expectations by aligning team goals with a higher vision.'},{label:"Personal development",description:'Coaching Leadership - "Personal development." Coaching leaders focus heavily on the professional and personal development of their team members. They provide one-on-one guidance to help team members meet their individual goals, which in turn enhances their performance at work.'},{label:"Directive control",description:'Autocratic Leadership - "Directive control." This style is defined by individual control over all decisions with little input from group members. It can be effective in crises but might stifle creativity and autonomy in a standard setting.'},{label:"Supportive facilitator",description:'Servant Leadership - "Supportive facilitator." Servant leaders put the needs of their team members first and help people develop and perform as highly as possible. They lead by example and gain authority by earning trust and fostering a service-oriented environment.'}],rD=[{label:"Continuous focus",description:'Sustained Attention - "Continuous focus." This type of attention is required for activities that demand prolonged concentration, such as studying for an exam or driving a long distance. It involves maintaining focus on a task over an extended period without becoming distracted.'},{label:"Targeted filtering",description:'Selective Attention - "Targeted filtering." Selective attention involves focusing on one specific aspect of the environment while ignoring other stimuli. For example, listening to a friend talk in a noisy room requires the ability to filter out the background noise.'},{label:"Switching focus",description:'Alternating Attention - "Switching focus." This type of attention allows an individual to shift focus between tasks that require different cognitive demands. For instance, alternating between writing a report and responding to emails.'},{label:"Multitasking efficiency",description:'Divided Attention - "Multitasking efficiency." Divided attention refers to the ability to process two or more responses or react to multiple tasks at the same time, such as cooking while watching TV.'},{label:"Complex management",description:'Executive Attention - "Complex management." This involves high-level thought, decision-making, and the management of attention resources among several tasks or priorities, such as planning a project while considering multiple variables.'},{label:"Involuntary awareness",description:'Passive Attention - "Involuntary awareness." Passive attention is drawn to stimuli without any conscious effort, often triggered by something surprising or significant, such as the sudden sound of a loud crash.'},{label:"Minimal engagement",description:'Bored Attention - "Minimal engagement." This is a form of attention where the focus is maintained nominally, often under unstimulating conditions. It’s the kind of attention you might use during a dull lecture or a repetitive task.'},{label:"Intense concentration",description:'Hyperfocus - "Intense concentration." This is an extreme form of mental concentration or visualization that focuses consciousness on a subject, topic, or task. In hyperfocus, one can become so absorbed in the task that they become oblivious to everything else around them, often found in highly engaging activities like playing video games or during a creative burst.'}],sD=[{label:"Persistent sadness",description:'Major Depression - "Persistent sadness." This mood disorder is characterized by a persistent feeling of sadness and a lack of interest in external stimuli. Symptoms can also include changes in sleep, appetite, energy level, concentration, daily behavior, or self-esteem.'},{label:"Constant worry",description:'Generalized Anxiety Disorder (GAD) - "Constant worry." GAD involves excessive, uncontrollable worry about everyday issues, such as health, money, or career. This worry is disproportionate to the actual source of concern and can affect physical health.'},{label:"Mood extremes",description:`Bipolar Disorder - "Mood extremes." This condition is marked by dramatic shifts in a person's mood, energy and ability to think clearly. These mood swings can range from highs (mania) to lows (depression), sometimes with periods of normal mood in between.`},{label:"Altered perceptions",description:'Schizophrenia - "Altered perceptions." Schizophrenia is a complex, long-term medical illness, characterized by symptoms like hallucinations, delusions, and extremely disordered thinking and behavior that impairs daily functioning.'},{label:"Compulsive behavior",description:'Obsessive-Compulsive Disorder (OCD) - "Compulsive behavior." OCD is characterized by unreasonable thoughts and fears (obsessions) that lead to compulsive behaviors. This disorder often centers on themes such as fear of germs or the need to arrange objects in a specific manner.'},{label:"Trauma aftermath",description:'Post-Traumatic Stress Disorder (PTSD) - "Trauma aftermath." PTSD can occur after a person has experienced or witnessed a traumatic event such as a natural disaster, a serious accident, a terrorist act, war/combat, rape, or other violent personal assault.'},{label:"Emotional instability",description:'Borderline Personality Disorder (BPD) - "Emotional instability." BPD is characterized by difficulties in regulating emotion. This can lead to severe, unstable mood swings, impulsivity and instability, poor self-image, and tumultuous personal relationships.'},{label:"Focus deficiency",description:'Attention Deficit Hyperactivity Disorder (ADHD) - "Focus deficiency." ADHD is characterized by a continuous pattern of inattention and/or hyperactivity-impulsivity that interferes with functioning or development. It often presents problems with organizing tasks, staying focused on one task, and social interaction.'}],oD=[{label:"Equitable entitlements",description:'Social Rights - "Equitable entitlements." This involves advocating and ensuring that all individuals have equal access to basic rights and liberties, such as education, healthcare, and fair treatment under the law.'},{label:"Eco-conscious actions",description:`Environmental Care - "Eco-conscious actions." Environmental responsibility emphasizes the protection and improvement of the planet's ecosystems. This includes efforts to reduce pollution, conserve resources, and uphold biodiversity.`},{label:"Wealth distribution",description:'Economic Equality - "Wealth distribution." This type of social responsibility focuses on reducing the disparities in economic opportunity and wealth among different groups within society, aiming to achieve a more equitable economic landscape.'},{label:"Ethical management",description:'Corporate Governance - "Ethical management." This pertains to the way in which companies are directed and controlled, ensuring they operate with fairness, transparency, and accountability to their stakeholders.'},{label:"Local engagement",description:'Community Involvement - "Local engagement." This emphasizes the importance of businesses and individuals participating in community development and support, such as local volunteering, support for community projects, and enhancement of local facilities.'},{label:"Diversity acceptance",description:'Cultural Awareness - "Diversity acceptance." Cultural responsibility involves recognizing, respecting, and preserving the various cultures within a community or society, promoting diversity and inclusion.'},{label:"Promoting well-being",description:'Health and Wellness - "Promoting well-being." This focuses on improving health outcomes for all members of society by advocating for better health services, education, and preventive measures to ensure public health and safety.'},{label:"Responsible purchasing",description:'Ethical Consumption - "Responsible purchasing." This involves making purchasing decisions that are conscious of the environmental and social impacts of products and services, supporting fair trade and ethically produced goods.'}],aD=[{label:"Bodily harm",description:'Physical Abuse - "Bodily harm." This form involves any intentional act causing injury or trauma to another person through physical contact. It includes hitting, punching, slapping, and other forms of physical assault.'},{label:"Psychological harm",description:'Emotional Abuse - "Psychological harm." Emotional or psychological abuse involves exposing someone to behavior that may result in psychological trauma, including anxiety, chronic depression, or post-traumatic stress disorder. It typically involves verbal assault, humiliation, intimidation, or infantilization.'},{label:"Violated consent",description:'Sexual Abuse - "Violated consent." This type of abuse involves forcing undesired sexual behavior by one person upon another. It ranges from non-consensual touching and coercive sexual acts to any sexual contact with someone unable to give consent.'},{label:"Economic control",description:`Financial Abuse - "Economic control." Financial or economic abuse involves controlling a person's ability to acquire, use, and maintain financial resources. Victims are often restricted from accessing funds or are stolen from directly, which diminishes their capacity to support themselves and forces dependency.`},{label:"Care deprivation",description:'Neglect - "Care deprivation." Neglect is a form of abuse where the caregiver fails to provide adequate care in terms of food, shelter, health care, and clothing to someone who cannot care for themselves, often resulting in deteriorating health or wellbeing.'},{label:"Destructive words",description:`Verbal Abuse - "Destructive words." This encompasses any use of language that is demeaning, derogatory, or insulting, intended to undermine the self-esteem of the person it's directed towards. It can be loud or subtle, including threats, insults, or excessively critical comments.`},{label:"Faith manipulation",description:'Spiritual Abuse - "Faith manipulation." This involves using a person’s spiritual beliefs to manipulate, control, or dominate them. It can include misusing doctrine, applying undue pressure to conform to specific beliefs, or exploiting spiritual authority for personal gain.'},{label:"Digital harassment",description:'Cyber Abuse - "Digital harassment." Cyber abuse takes place online and includes cyberbullying, stalking, and harassment. It uses digital technology to intimidate, threaten, or upset someone, often anonymously and repetitively.'}],lD=[{label:"Governance systems",description:'Politics - "Governance systems." This area involves the activities associated with the governance of a country or other area, especially the debate among individuals or parties having or hoping to achieve power. It shapes laws, policies, and the distribution of resources.'},{label:"Financial infrastructure",description:'Economy - "Financial infrastructure." The economy encompasses all activities related to production, consumption, and trade of goods and services in an area. It affects employment, income levels, and overall economic growth and stability.'},{label:"Knowledge dissemination",description:'Education - "Knowledge dissemination." This sector involves the systems and processes through which education is delivered, including schools, colleges, and educational content. It plays a crucial role in skill development, critical thinking, and social mobility.'},{label:"Spiritual practices",description:'Religion - "Spiritual practices." Religion pertains to the organized collection of beliefs, cultural systems, and world views that relate humanity to an order of existence. It often influences personal values, cultural norms, and community traditions.'},{label:"Medical services",description:'Healthcare - "Medical services." Healthcare represents the organized provision of medical care to individuals or a community through services offered by medical professionals. It impacts public health, life expectancy, and quality of life.'},{label:"Social expressions",description:'Culture - "Social expressions." Culture includes the arts, customs, practices, languages, values, and items that are passed along and valued by a group of people. It enriches societal interactions and reflects the historical and social context of the community.'},{label:"Ecological context",description:'Environment - "Ecological context." This area deals with the interaction between society and the natural surroundings, including issues of conservation, pollution control, and sustainable management of natural resources.'},{label:"Judicial frameworks",description:'Legal System - "Judicial frameworks." The legal system comprises the laws and regulations, as well as the processes and infrastructure for enforcing them, governing the behavior of the populace. It ensures order, resolves disputes, and maintains social justice.'}],M7={Emotions:nD,"Leadership styles":iD,"Attention types":rD,"Mental illness":sD,"Social rights":oD,"Abuse forms":aD,"Social areas":lD},uD=[];Object.values(M7).forEach(n=>n.forEach(e=>uD.push(e)));const E7={Emotions:nD,"Leadership styles":iD,"Attention types":rD,"Mental illness":sD,"Social rights":oD,"Abuse forms":aD,"Social areas":lD,"All categories":uD},Iu="4.47.1";let OR=!1,hf,cD,hD,GS,fD,dD,pD,mD,gD;function b7(n,e={auto:!1}){if(OR)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(hf)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${hf}'\``);OR=e.auto,hf=n.kind,cD=n.fetch,hD=n.FormData,GS=n.File,fD=n.ReadableStream,dD=n.getMultipartRequestOptions,pD=n.getDefaultAgent,mD=n.fileFromPath,gD=n.isFsReadStream}class T7{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function A7({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,i,r,s;try{t=fetch,i=Request,r=Response,s=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:t,Request:i,Response:r,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,a)=>({...a,body:new T7(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}hf||b7(A7(),{auto:!0});class kt extends Error{}class ci extends kt{constructor(e,t,i,r){super(`${ci.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.request_id=r==null?void 0:r["x-request-id"];const s=t;this.error=s,this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e)return new Q0({cause:jS(t)});const s=t==null?void 0:t.error;return e===400?new vD(e,s,i,r):e===401?new yD(e,s,i,r):e===403?new _D(e,s,i,r):e===404?new xD(e,s,i,r):e===409?new wD(e,s,i,r):e===422?new SD(e,s,i,r):e===429?new MD(e,s,i,r):e>=500?new ED(e,s,i,r):new ci(e,s,i,r)}}class _r extends ci{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class Q0 extends ci{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class aE extends Q0{constructor({message:e}={}){super({message:e??"Request timed out."})}}class vD extends ci{constructor(){super(...arguments),this.status=400}}class yD extends ci{constructor(){super(...arguments),this.status=401}}class _D extends ci{constructor(){super(...arguments),this.status=403}}class xD extends ci{constructor(){super(...arguments),this.status=404}}class wD extends ci{constructor(){super(...arguments),this.status=409}}class SD extends ci{constructor(){super(...arguments),this.status=422}}class MD extends ci{constructor(){super(...arguments),this.status=429}}class ED extends ci{}class Bs{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let i=!1;async function*r(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let s=!1;try{for await(const o of C7(e,t))if(!s){if(o.data.startsWith("[DONE]")){s=!0;continue}if(o.event===null){let a;try{a=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(a&&a.error)throw new ci(void 0,a.error,void 0,void 0);yield a}else{let a;try{a=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(o.event=="error")throw new ci(void 0,a.error,a.message,void 0);yield{event:o.event,data:a}}}s=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{s||t.abort()}}return new Bs(r,t)}static fromReadableStream(e,t){let i=!1;async function*r(){const o=new Il,a=bD(e);for await(const l of a)for(const u of o.decode(l))yield u;for(const l of o.flush())yield l}async function*s(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let o=!1;try{for await(const a of r())o||a&&(yield JSON.parse(a));o=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{o||t.abort()}}return new Bs(s,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=s=>({next:()=>{if(s.length===0){const o=i.next();e.push(o),t.push(o)}return s.shift()}});return[new Bs(()=>r(e),this.controller),new Bs(()=>r(t),this.controller)]}toReadableStream(){const e=this;let t;const i=new TextEncoder;return new fD({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:o}=await t.next();if(o)return r.close();const a=i.encode(JSON.stringify(s)+`
`);r.enqueue(a)}catch(s){r.error(s)}},async cancel(){var r;await((r=t.return)==null?void 0:r.call(t))}})}}async function*C7(n,e){if(!n.body)throw e.abort(),new kt("Attempted to iterate over a response with no body");const t=new I7,i=new Il,r=bD(n.body);for await(const s of R7(r))for(const o of i.decode(s)){const a=t.decode(o);a&&(yield a)}for(const s of i.flush()){const o=t.decode(s);o&&(yield o)}}async function*R7(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const i=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let r=new Uint8Array(e.length+i.length);r.set(e),r.set(i,e.length),e=r;let s;for(;(s=P7(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}function P7(n){for(let i=0;i<n.length-2;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}class I7{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=L7(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}class Il{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const i=Il.NEWLINE_CHARS.has(t[t.length-1]||"");let r=t.split(Il.NEWLINE_REGEXP);return i&&r.pop(),r.length===1&&!i?(this.buffer.push(r[0]),[]):(this.buffer.length>0&&(r=[this.buffer.join("")+r[0],...r.slice(1)],this.buffer=[]),i||(this.buffer=[r.pop()||""]),r)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new kt(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new kt(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new kt("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}Il.NEWLINE_CHARS=new Set([`
`,"\r"]);Il.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function L7(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}function bD(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const TD=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",AD=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&CD(n),CD=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",N7=n=>AD(n)||TD(n)||gD(n);async function RD(n,e,t){var r;if(n=await n,t??(t=AD(n)?{lastModified:n.lastModified,type:n.type}:{}),TD(n)){const s=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new GS([s],e,t)}const i=await D7(n);if(e||(e=k7(n)??"unknown_file"),!t.type){const s=(r=i[0])==null?void 0:r.type;typeof s=="string"&&(t={...t,type:s})}return new GS(i,e,t)}async function D7(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(CD(n))e.push(await n.arrayBuffer());else if(F7(n))for await(const i of n)e.push(i);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(t=n==null?void 0:n.constructor)==null?void 0:t.name}; props: ${O7(n)}`);return e}function O7(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}function k7(n){var e;return jx(n.name)||jx(n.filename)||((e=jx(n.path))==null?void 0:e.split(/[\\/]/).pop())}const jx=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},F7=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",kR=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",td=async n=>{const e=await U7(n.body);return dD(e,n)},U7=async n=>{const e=new hD;return await Promise.all(Object.entries(n||{}).map(([t,i])=>WS(e,t,i))),e},WS=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(N7(t)){const i=await RD(t);n.append(e,i)}else if(Array.isArray(t))await Promise.all(t.map(i=>WS(n,e+"[]",i)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([i,r])=>WS(n,`${e}[${i}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var uc={},z7=function(n,e,t,i,r){if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},B7=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Bm;async function PD(n){const{response:e}=n;if(n.options.stream)return cc("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):Bs.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;const t=e.headers.get("content-type");if((t==null?void 0:t.includes("application/json"))||(t==null?void 0:t.includes("application/vnd.api+json"))){const s=await e.json();return cc("response",e.status,e.url,e.headers,s),s}const r=await e.text();return cc("response",e.status,e.url,e.headers,r),r}class ey extends Promise{constructor(e,t=PD){super(i=>{i(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new ey(this.responsePromise,async t=>e(await this.parseResponse(t)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class V7{constructor({baseURL:e,maxRetries:t=2,timeout:i=6e5,httpAgent:r,fetch:s}){this.baseURL=e,this.maxRetries=Xx("maxRetries",t),this.timeout=Xx("timeout",i),this.httpAgent=r,this.fetch=s??cD}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...$7(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${K7()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>({method:e,path:t,...r})))}getAPIList(e,t,i){return this.requestAPIList(t,{method:"get",path:e,...i})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}return null}buildRequest(e){var v;const{method:t,path:i,query:r,headers:s={}}=e,o=kR(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,a=this.calculateContentLength(o),l=this.buildURL(i,r);"timeout"in e&&Xx("timeout",e.timeout);const u=e.timeout??this.timeout,f=e.httpAgent??this.httpAgent??pD(l),d=u+1e3;typeof((v=f==null?void 0:f.options)==null?void 0:v.timeout)=="number"&&d>(f.options.timeout??0)&&(f.options.timeout=d),this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const p=this.buildHeaders({options:e,headers:s,contentLength:a});return{req:{method:t,...o&&{body:o},headers:p,...f&&{agent:f},signal:e.signal??null},url:l,timeout:u}}buildHeaders({options:e,headers:t,contentLength:i}){const r={};i&&(r["content-length"]=i);const s=this.defaultHeaders(e);return BR(r,s),BR(r,t),kR(e.body)&&hf!=="node"&&delete r["content-type"],this.validateHeaders(r,t),r}async prepareOptions(e){}async prepareRequest(e,{url:t,options:i}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,i,r){return ci.generate(e,t,i,r)}request(e,t=null){return new ey(this.makeRequest(e,t))}async makeRequest(e,t){var f,d;const i=await e;t==null&&(t=i.maxRetries??this.maxRetries),await this.prepareOptions(i);const{req:r,url:s,timeout:o}=this.buildRequest(i);if(await this.prepareRequest(r,{url:s,options:i}),cc("request",s,i,r.headers),(f=i.signal)!=null&&f.aborted)throw new _r;const a=new AbortController,l=await this.fetchWithTimeout(s,r,o,a).catch(jS);if(l instanceof Error){if((d=i.signal)!=null&&d.aborted)throw new _r;if(t)return this.retryRequest(i,t);throw l.name==="AbortError"?new aE:new Q0({cause:l})}const u=G7(l.headers);if(!l.ok){if(t&&this.shouldRetry(l)){const m=`retrying, ${t} attempts remaining`;return cc(`response (error; ${m})`,l.status,s,u),this.retryRequest(i,t,u)}const p=await l.text().catch(m=>jS(m).message),g=q7(p),v=g?void 0:p;throw cc(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,l.status,s,u,v),this.makeStatusError(l.status,g,v,u)}return{response:l,options:i,controller:a}}requestAPIList(e,t){const i=this.makeRequest(t,null);return new H7(this,i,e)}buildURL(e,t){const i=Z7(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return LD(r)||(t={...r,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(i.search=this.stringifyQuery(t)),i.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new kt(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,i,r){const{signal:s,...o}=t||{};s&&s.addEventListener("abort",()=>r.abort());const a=setTimeout(()=>r.abort(),i);return this.getRequestClient().fetch.call(void 0,e,{signal:r.signal,...o}).finally(()=>{clearTimeout(a)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i){let r;const s=i==null?void 0:i["retry-after-ms"];if(s){const a=parseFloat(s);Number.isNaN(a)||(r=a)}const o=i==null?void 0:i["retry-after"];if(o&&!r){const a=parseFloat(o);Number.isNaN(a)?r=Date.parse(o)-Date.now():r=a*1e3}if(!(r&&0<=r&&r<60*1e3)){const a=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,a)}return await Ed(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const s=t-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Iu}`}}class ID{constructor(e,t,i,r){Bm.set(this,void 0),z7(this,Bm,e),this.options=r,this.response=t,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new kt("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const i=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[r,s]of i)e.url.searchParams.set(r,s);t.query=void 0,t.path=e.url.toString()}return await B7(this,Bm,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Bm=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class H7 extends ey{constructor(e,t,i){super(t,async r=>new i(e,r.response,await PD(r),r.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const G7=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const i=t.toString();return e[i.toLowerCase()]||e[i]}}),W7={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0,__streamClass:!0},br=n=>typeof n=="object"&&n!==null&&!LD(n)&&Object.keys(n).every(e=>ND(W7,e)),j7=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Iu,"X-Stainless-OS":UR(Deno.build.os),"X-Stainless-Arch":FR(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Iu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Iu,"X-Stainless-OS":UR(process.platform),"X-Stainless-Arch":FR(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=X7();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Iu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Iu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function X7(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,s=i[2]||0,o=i[3]||0;return{browser:e,version:`${r}.${s}.${o}`}}}return null}const FR=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",UR=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let zR;const $7=()=>zR??(zR=j7()),q7=n=>{try{return JSON.parse(n)}catch{return}},Y7=new RegExp("^(?:[a-z]+:)?//","i"),Z7=n=>Y7.test(n),Ed=n=>new Promise(e=>setTimeout(e,n)),Xx=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new kt(`${n} must be an integer`);if(e<0)throw new kt(`${n} must be a positive integer`);return e},jS=n=>n instanceof Error?n:new Error(n),Vm=n=>{var e,t,i,r;if(typeof process<"u")return((e=uc==null?void 0:uc[n])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(r=(i=(t=Deno.env)==null?void 0:t.get)==null?void 0:i.call(t,n))==null?void 0:r.trim()};function LD(n){if(!n)return!0;for(const e in n)return!1;return!0}function ND(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function BR(n,e){for(const t in e){if(!ND(e,t))continue;const i=t.toLowerCase();if(!i)continue;const r=e[t];r===null?delete n[i]:r!==void 0&&(n[i]=r)}}function cc(n,...e){typeof process<"u"&&(uc==null?void 0:uc.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${n}`,...e)}const K7=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),J7=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function VR(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}class lE extends ID{constructor(e,t,i,r){super(e,t,i,r),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class ws extends ID{constructor(e,t,i,r){super(e,t,i,r),this.data=i.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var i;const e=this.getPaginatedItems();if(!e.length)return null;const t=(i=e[e.length-1])==null?void 0:i.id;return t?{params:{after:t}}:null}}class tn{constructor(e){this._client=e}}let xv=class extends tn{create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}};xv||(xv={});let wv=class extends tn{constructor(){super(...arguments),this.completions=new xv(this._client)}};(function(n){n.Completions=xv})(wv||(wv={}));class Sv extends tn{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}Sv||(Sv={});class Mv extends tn{create(e,t){return this._client.post("/audio/transcriptions",td({body:e,...t}))}}Mv||(Mv={});class Ev extends tn{create(e,t){return this._client.post("/audio/translations",td({body:e,...t}))}}Ev||(Ev={});class bv extends tn{constructor(){super(...arguments),this.transcriptions=new Mv(this._client),this.translations=new Ev(this._client),this.speech=new Sv(this._client)}}(function(n){n.Transcriptions=Mv,n.Translations=Ev,n.Speech=Sv})(bv||(bv={}));class Tv extends tn{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return br(e)?this.list({},e):this._client.getAPIList("/batches",uE,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class uE extends ws{}(function(n){n.BatchesPage=uE})(Tv||(Tv={}));class Av extends tn{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,i){return this._client.post(`/assistants/${e}`,{body:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e={},t){return br(e)?this.list({},e):this._client.getAPIList("/assistants",cE,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class cE extends ws{}(function(n){n.AssistantsPage=cE})(Av||(Av={}));function HR(n){return typeof n.parse=="function"}const hc=n=>(n==null?void 0:n.role)==="assistant",DD=n=>(n==null?void 0:n.role)==="function",OD=n=>(n==null?void 0:n.role)==="tool";var os=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},It=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Mi,_g,xg,Bh,Vh,wg,Hh,uo,Gh,Sg,Mg,Lu,XS,Cv,$S,qS,YS,ZS,kD,KS;const GR=10;class FD{constructor(){Mi.add(this),this.controller=new AbortController,_g.set(this,void 0),xg.set(this,()=>{}),Bh.set(this,()=>{}),Vh.set(this,void 0),wg.set(this,()=>{}),Hh.set(this,()=>{}),uo.set(this,{}),this._chatCompletions=[],this.messages=[],Gh.set(this,!1),Sg.set(this,!1),Mg.set(this,!1),Lu.set(this,!1),ZS.set(this,e=>{if(os(this,Sg,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new _r),e instanceof _r)return os(this,Mg,!0,"f"),this._emit("abort",e);if(e instanceof kt)return this._emit("error",e);if(e instanceof Error){const t=new kt(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new kt(String(e)))}),os(this,_g,new Promise((e,t)=>{os(this,xg,e,"f"),os(this,Bh,t,"f")}),"f"),os(this,Vh,new Promise((e,t)=>{os(this,wg,e,"f"),os(this,Hh,t,"f")}),"f"),It(this,_g,"f").catch(()=>{}),It(this,Vh,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},It(this,ZS,"f"))},0)}_addChatCompletion(e){var i;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(i=e.choices[0])==null?void 0:i.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(DD(e)||OD(e))&&e.content)this._emit("functionCallResult",e.content);else if(hc(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(hc(e)&&e.tool_calls)for(const i of e.tool_calls)i.type==="function"&&this._emit("functionCall",i.function)}}_connected(){this.ended||(It(this,xg,"f").call(this),this._emit("connect"))}get ended(){return It(this,Gh,"f")}get errored(){return It(this,Sg,"f")}get aborted(){return It(this,Mg,"f")}abort(){this.controller.abort()}on(e,t){return(It(this,uo,"f")[e]||(It(this,uo,"f")[e]=[])).push({listener:t}),this}off(e,t){const i=It(this,uo,"f")[e];if(!i)return this;const r=i.findIndex(s=>s.listener===t);return r>=0&&i.splice(r,1),this}once(e,t){return(It(this,uo,"f")[e]||(It(this,uo,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,i)=>{os(this,Lu,!0,"f"),e!=="error"&&this.once("error",i),this.once(e,t)})}async done(){os(this,Lu,!0,"f"),await It(this,Vh,"f")}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new kt("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),It(this,Mi,"m",XS).call(this)}async finalMessage(){return await this.done(),It(this,Mi,"m",Cv).call(this)}async finalFunctionCall(){return await this.done(),It(this,Mi,"m",$S).call(this)}async finalFunctionCallResult(){return await this.done(),It(this,Mi,"m",qS).call(this)}async totalUsage(){return await this.done(),It(this,Mi,"m",YS).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(e,...t){if(It(this,Gh,"f"))return;e==="end"&&(os(this,Gh,!0,"f"),It(this,wg,"f").call(this));const i=It(this,uo,"f")[e];if(i&&(It(this,uo,"f")[e]=i.filter(r=>!r.once),i.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!It(this,Lu,"f")&&!(i!=null&&i.length)&&Promise.reject(r),It(this,Bh,"f").call(this,r),It(this,Hh,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!It(this,Lu,"f")&&!(i!=null&&i.length)&&Promise.reject(r),It(this,Bh,"f").call(this,r),It(this,Hh,"f").call(this,r),this._emit("end")}}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=It(this,Mi,"m",Cv).call(this);t&&this._emit("finalMessage",t);const i=It(this,Mi,"m",XS).call(this);i&&this._emit("finalContent",i);const r=It(this,Mi,"m",$S).call(this);r&&this._emit("finalFunctionCall",r);const s=It(this,Mi,"m",qS).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",It(this,Mi,"m",YS).call(this))}async _createChatCompletion(e,t,i){const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),It(this,Mi,"m",kD).call(this,t);const s=await e.create({...t,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion(s)}async _runChatCompletion(e,t,i){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,i)}async _runFunctions(e,t,i){var p;const r="function",{function_call:s="auto",stream:o,...a}=t,l=typeof s!="string"&&(s==null?void 0:s.name),{maxChatCompletions:u=GR}=i||{},f={};for(const g of t.functions)f[g.name||g.function.name]=g;const d=t.functions.map(g=>({name:g.name||g.function.name,parameters:g.parameters,description:g.description}));for(const g of t.messages)this._addMessage(g,!1);for(let g=0;g<u;++g){const x=(p=(await this._createChatCompletion(e,{...a,function_call:s,functions:d,messages:[...this.messages]},i)).choices[0])==null?void 0:p.message;if(!x)throw new kt("missing message in ChatCompletion response");if(!x.function_call)return;const{name:_,arguments:m}=x.function_call,w=f[_];if(w){if(l&&l!==_){const A=`Invalid function_call: ${JSON.stringify(_)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,name:_,content:A});continue}}else{const A=`Invalid function_call: ${JSON.stringify(_)}. Available options are: ${d.map(C=>JSON.stringify(C.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:_,content:A});continue}let S;try{S=HR(w)?await w.parse(m):m}catch(A){this._addMessage({role:r,name:_,content:A instanceof Error?A.message:String(A)});continue}const b=await w.function(S,this),R=It(this,Mi,"m",KS).call(this,b);if(this._addMessage({role:r,name:_,content:R}),l)return}}async _runTools(e,t,i){var p,g;const r="tool",{tool_choice:s="auto",stream:o,...a}=t,l=typeof s!="string"&&((p=s==null?void 0:s.function)==null?void 0:p.name),{maxChatCompletions:u=GR}=i||{},f={};for(const v of t.tools)v.type==="function"&&(f[v.function.name||v.function.function.name]=v.function);const d="tools"in t?t.tools.map(v=>v.type==="function"?{type:"function",function:{name:v.function.name||v.function.function.name,parameters:v.function.parameters,description:v.function.description}}:v):void 0;for(const v of t.messages)this._addMessage(v,!1);for(let v=0;v<u;++v){const _=(g=(await this._createChatCompletion(e,{...a,tool_choice:s,tools:d,messages:[...this.messages]},i)).choices[0])==null?void 0:g.message;if(!_)throw new kt("missing message in ChatCompletion response");if(!_.tool_calls)return;for(const m of _.tool_calls){if(m.type!=="function")continue;const w=m.id,{name:S,arguments:b}=m.function,R=f[S];if(R){if(l&&l!==S){const I=`Invalid tool_call: ${JSON.stringify(S)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,tool_call_id:w,content:I});continue}}else{const I=`Invalid tool_call: ${JSON.stringify(S)}. Available options are: ${d.map(E=>JSON.stringify(E.function.name)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:w,content:I});continue}let A;try{A=HR(R)?await R.parse(b):b}catch(I){const E=I instanceof Error?I.message:String(I);this._addMessage({role:r,tool_call_id:w,content:E});continue}const C=await R.function(A,this),L=It(this,Mi,"m",KS).call(this,C);if(this._addMessage({role:r,tool_call_id:w,content:L}),l)return}}}}_g=new WeakMap,xg=new WeakMap,Bh=new WeakMap,Vh=new WeakMap,wg=new WeakMap,Hh=new WeakMap,uo=new WeakMap,Gh=new WeakMap,Sg=new WeakMap,Mg=new WeakMap,Lu=new WeakMap,ZS=new WeakMap,Mi=new WeakSet,XS=function(){return It(this,Mi,"m",Cv).call(this).content??null},Cv=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(hc(t))return{...t,content:t.content??null}}throw new kt("stream ended without producing a ChatCompletionMessage with role=assistant")},$S=function(){var e,t;for(let i=this.messages.length-1;i>=0;i--){const r=this.messages[i];if(hc(r)&&(r!=null&&r.function_call))return r.function_call;if(hc(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(t=r.tool_calls.at(-1))==null?void 0:t.function}},qS=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(DD(t)&&t.content!=null||OD(t)&&t.content!=null&&this.messages.some(i=>{var r;return i.role==="assistant"&&((r=i.tool_calls)==null?void 0:r.some(s=>s.type==="function"&&s.id===t.tool_call_id))}))return t.content}},YS=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},kD=function(e){if(e.n!=null&&e.n>1)throw new kt("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},KS=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class nd extends FD{static runFunctions(e,t,i){const r=new nd,s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,s)),r}static runTools(e,t,i){const r=new nd,s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,s)),r}_addMessage(e){super._addMessage(e),hc(e)&&e.content&&this._emit("content",e.content)}}var as=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},$x=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Ps,na,qx,Yx,Hm,WR;class id extends FD{constructor(){super(...arguments),Ps.add(this),na.set(this,void 0)}get currentChatCompletionSnapshot(){return as(this,na,"f")}static fromReadableStream(e){const t=new id;return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,i){const r=new id;return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,i){var o;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),as(this,Ps,"m",qx).call(this);const s=await e.create({...t,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const a of s)as(this,Ps,"m",Yx).call(this,a);if((o=s.controller.signal)!=null&&o.aborted)throw new _r;return this._addChatCompletion(as(this,Ps,"m",Hm).call(this))}async _fromReadableStream(e,t){var o;const i=t==null?void 0:t.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),as(this,Ps,"m",qx).call(this),this._connected();const r=Bs.fromReadableStream(e,this.controller);let s;for await(const a of r)s&&s!==a.id&&this._addChatCompletion(as(this,Ps,"m",Hm).call(this)),as(this,Ps,"m",Yx).call(this,a),s=a.id;if((o=r.controller.signal)!=null&&o.aborted)throw new _r;return this._addChatCompletion(as(this,Ps,"m",Hm).call(this))}[(na=new WeakMap,Ps=new WeakSet,qx=function(){this.ended||$x(this,na,void 0,"f")},Yx=function(t){var o,a,l;if(this.ended)return;const i=as(this,Ps,"m",WR).call(this,t);this._emit("chunk",t,i);const r=(a=(o=t.choices[0])==null?void 0:o.delta)==null?void 0:a.content,s=(l=i.choices[0])==null?void 0:l.message;r!=null&&(s==null?void 0:s.role)==="assistant"&&(s!=null&&s.content)&&this._emit("content",r,s.content)},Hm=function(){if(this.ended)throw new kt("stream has ended, this shouldn't happen");const t=as(this,na,"f");if(!t)throw new kt("request ended without sending any chunks");return $x(this,na,void 0,"f"),Q7(t)},WR=function(t){var i,r,s;let o=as(this,na,"f");const{choices:a,...l}=t;o?Object.assign(o,l):o=$x(this,na,{...l,choices:[]},"f");for(const{delta:u,finish_reason:f,index:d,logprobs:p=null,...g}of t.choices){let v=o.choices[d];if(v||(v=o.choices[d]={finish_reason:f,index:d,message:{},logprobs:p,...g}),p)if(!v.logprobs)v.logprobs=Object.assign({},p);else{const{content:b,...R}=p;Object.assign(v.logprobs,R),b&&((i=v.logprobs).content??(i.content=[]),v.logprobs.content.push(...b))}if(f&&(v.finish_reason=f),Object.assign(v,g),!u)continue;const{content:x,function_call:_,role:m,tool_calls:w,...S}=u;if(Object.assign(v.message,S),x&&(v.message.content=(v.message.content||"")+x),m&&(v.message.role=m),_&&(v.message.function_call?(_.name&&(v.message.function_call.name=_.name),_.arguments&&((r=v.message.function_call).arguments??(r.arguments=""),v.message.function_call.arguments+=_.arguments)):v.message.function_call=_),w){v.message.tool_calls||(v.message.tool_calls=[]);for(const{index:b,id:R,type:A,function:C,...L}of w){const I=(s=v.message.tool_calls)[b]??(s[b]={});Object.assign(I,L),R&&(I.id=R),A&&(I.type=A),C&&(I.function??(I.function={arguments:""})),C!=null&&C.name&&(I.function.name=C.name),C!=null&&C.arguments&&(I.function.arguments+=C.arguments)}}}return o},Symbol.asyncIterator)](){const e=[],t=[];let i=!1;return this.on("chunk",r=>{const s=t.shift();s?s.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(const s of t)s.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(const s of t)s.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((s,o)=>t.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Bs(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Q7(n){const{id:e,choices:t,created:i,model:r,system_fingerprint:s,...o}=n;return{...o,id:e,choices:t.map(({message:a,finish_reason:l,index:u,logprobs:f,...d})=>{if(!l)throw new kt(`missing finish_reason for choice ${u}`);const{content:p=null,function_call:g,tool_calls:v,...x}=a,_=a.role;if(!_)throw new kt(`missing role for choice ${u}`);if(g){const{arguments:m,name:w}=g;if(m==null)throw new kt(`missing function_call.arguments for choice ${u}`);if(!w)throw new kt(`missing function_call.name for choice ${u}`);return{...d,message:{content:p,function_call:{arguments:m,name:w},role:_},finish_reason:l,index:u,logprobs:f}}return v?{...d,index:u,finish_reason:l,logprobs:f,message:{...x,role:_,content:p,tool_calls:v.map((m,w)=>{const{function:S,type:b,id:R,...A}=m,{arguments:C,name:L,...I}=S||{};if(R==null)throw new kt(`missing choices[${u}].tool_calls[${w}].id
${Gm(n)}`);if(b==null)throw new kt(`missing choices[${u}].tool_calls[${w}].type
${Gm(n)}`);if(L==null)throw new kt(`missing choices[${u}].tool_calls[${w}].function.name
${Gm(n)}`);if(C==null)throw new kt(`missing choices[${u}].tool_calls[${w}].function.arguments
${Gm(n)}`);return{...A,id:R,type:b,function:{...I,name:L,arguments:C}}})}}:{...d,message:{...x,content:p,role:_},finish_reason:l,index:u,logprobs:f}}),created:i,model:r,object:"chat.completion",...s?{system_fingerprint:s}:{}}}function Gm(n){return JSON.stringify(n)}class fc extends id{static fromReadableStream(e){const t=new fc;return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,i){const r=new fc,s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,s)),r}static runTools(e,t,i){const r=new fc,s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,s)),r}}let UD=class extends tn{runFunctions(e,t){return e.stream?fc.runFunctions(this._client.chat.completions,e,t):nd.runFunctions(this._client.chat.completions,e,t)}runTools(e,t){return e.stream?fc.runTools(this._client.chat.completions,e,t):nd.runTools(this._client.chat.completions,e,t)}stream(e,t){return id.createChatCompletion(this._client.chat.completions,e,t)}};class Rv extends tn{constructor(){super(...arguments),this.completions=new UD(this._client)}}(function(n){n.Completions=UD})(Rv||(Rv={}));var ls=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},mn=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Eg,bg,Wh,jh,Tg,Xh,co,$h,Ag,Cg,Nu,JS;class eX{constructor(){this.controller=new AbortController,Eg.set(this,void 0),bg.set(this,()=>{}),Wh.set(this,()=>{}),jh.set(this,void 0),Tg.set(this,()=>{}),Xh.set(this,()=>{}),co.set(this,{}),$h.set(this,!1),Ag.set(this,!1),Cg.set(this,!1),Nu.set(this,!1),JS.set(this,e=>{if(ls(this,Ag,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new _r),e instanceof _r)return ls(this,Cg,!0,"f"),this._emit("abort",e);if(e instanceof kt)return this._emit("error",e);if(e instanceof Error){const t=new kt(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new kt(String(e)))}),ls(this,Eg,new Promise((e,t)=>{ls(this,bg,e,"f"),ls(this,Wh,t,"f")}),"f"),ls(this,jh,new Promise((e,t)=>{ls(this,Tg,e,"f"),ls(this,Xh,t,"f")}),"f"),mn(this,Eg,"f").catch(()=>{}),mn(this,jh,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emit("end")},mn(this,JS,"f"))},0)}_addRun(e){return e}_connected(){this.ended||(mn(this,bg,"f").call(this),this._emit("connect"))}get ended(){return mn(this,$h,"f")}get errored(){return mn(this,Ag,"f")}get aborted(){return mn(this,Cg,"f")}abort(){this.controller.abort()}on(e,t){return(mn(this,co,"f")[e]||(mn(this,co,"f")[e]=[])).push({listener:t}),this}off(e,t){const i=mn(this,co,"f")[e];if(!i)return this;const r=i.findIndex(s=>s.listener===t);return r>=0&&i.splice(r,1),this}once(e,t){return(mn(this,co,"f")[e]||(mn(this,co,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,i)=>{ls(this,Nu,!0,"f"),e!=="error"&&this.once("error",i),this.once(e,t)})}async done(){ls(this,Nu,!0,"f"),await mn(this,jh,"f")}_emit(e,...t){if(mn(this,$h,"f"))return;e==="end"&&(ls(this,$h,!0,"f"),mn(this,Tg,"f").call(this));const i=mn(this,co,"f")[e];if(i&&(mn(this,co,"f")[e]=i.filter(r=>!r.once),i.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!mn(this,Nu,"f")&&!(i!=null&&i.length)&&Promise.reject(r),mn(this,Wh,"f").call(this,r),mn(this,Xh,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!mn(this,Nu,"f")&&!(i!=null&&i.length)&&Promise.reject(r),mn(this,Wh,"f").call(this,r),mn(this,Xh,"f").call(this,r),this._emit("end")}}async _threadAssistantStream(e,t,i){return await this._createThreadAssistantStream(t,e,i)}async _runAssistantStream(e,t,i,r){return await this._createAssistantStream(t,e,i,r)}async _runToolAssistantStream(e,t,i,r,s){return await this._createToolAssistantStream(i,e,t,r,s)}async _createThreadAssistantStream(e,t,i){const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const s=await e.createAndRun({...t,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addRun(s)}async _createToolAssistantStream(e,t,i,r,s){const o=s==null?void 0:s.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a=await e.submitToolOutputs(t,i,{...r,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addRun(a)}async _createAssistantStream(e,t,i,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o=await e.create(t,{...i,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addRun(o)}}Eg=new WeakMap,bg=new WeakMap,Wh=new WeakMap,jh=new WeakMap,Tg=new WeakMap,Xh=new WeakMap,co=new WeakMap,$h=new WeakMap,Ag=new WeakMap,Cg=new WeakMap,Nu=new WeakMap,JS=new WeakMap;var et=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},fr=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},oi,QS,Ls,Rg,hs,dl,ec,sl,Pv,dr,Pg,Ig,ff,qh,Yh,jR,XR,$R,qR,YR,ZR,KR;class ms extends eX{constructor(){super(...arguments),oi.add(this),QS.set(this,[]),Ls.set(this,{}),Rg.set(this,{}),hs.set(this,void 0),dl.set(this,void 0),ec.set(this,void 0),sl.set(this,void 0),Pv.set(this,void 0),dr.set(this,void 0),Pg.set(this,void 0),Ig.set(this,void 0),ff.set(this,void 0)}[(QS=new WeakMap,Ls=new WeakMap,Rg=new WeakMap,hs=new WeakMap,dl=new WeakMap,ec=new WeakMap,sl=new WeakMap,Pv=new WeakMap,dr=new WeakMap,Pg=new WeakMap,Ig=new WeakMap,ff=new WeakMap,oi=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let i=!1;return this.on("event",r=>{const s=t.shift();s?s.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(const s of t)s.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(const s of t)s.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((s,o)=>t.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new ms;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var s;const i=t==null?void 0:t.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=Bs.fromReadableStream(e,this.controller);for await(const o of r)et(this,oi,"m",qh).call(this,o);if((s=r.controller.signal)!=null&&s.aborted)throw new _r;return this._addRun(et(this,oi,"m",Yh).call(this))}toReadableStream(){return new Bs(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,i,r,s){const o=new ms;return o._run(()=>o._runToolAssistantStream(e,t,i,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,i,r,s){var u;const o=s==null?void 0:s.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},l=await e.submitToolOutputs(t,i,a,{...s,signal:this.controller.signal});this._connected();for await(const f of l)et(this,oi,"m",qh).call(this,f);if((u=l.controller.signal)!=null&&u.aborted)throw new _r;return this._addRun(et(this,oi,"m",Yh).call(this))}static createThreadAssistantStream(e,t,i){const r=new ms;return r._run(()=>r._threadAssistantStream(e,t,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,i,r){const s=new ms;return s._run(()=>s._runAssistantStream(e,t,i,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return et(this,Pg,"f")}currentRun(){return et(this,Ig,"f")}currentMessageSnapshot(){return et(this,hs,"f")}currentRunStepSnapshot(){return et(this,ff,"f")}async finalRunSteps(){return await this.done(),Object.values(et(this,Ls,"f"))}async finalMessages(){return await this.done(),Object.values(et(this,Rg,"f"))}async finalRun(){if(await this.done(),!et(this,dl,"f"))throw Error("Final run was not received.");return et(this,dl,"f")}async _createThreadAssistantStream(e,t,i){var a;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const s={...t,stream:!0},o=await e.createAndRun(s,{...i,signal:this.controller.signal});this._connected();for await(const l of o)et(this,oi,"m",qh).call(this,l);if((a=o.controller.signal)!=null&&a.aborted)throw new _r;return this._addRun(et(this,oi,"m",Yh).call(this))}async _createAssistantStream(e,t,i,r){var l;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...i,stream:!0},a=await e.create(t,o,{...r,signal:this.controller.signal});this._connected();for await(const u of a)et(this,oi,"m",qh).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new _r;return this._addRun(et(this,oi,"m",Yh).call(this))}static accumulateDelta(e,t){for(const[i,r]of Object.entries(t)){if(!e.hasOwnProperty(i)){e[i]=r;continue}let s=e[i];if(s==null){e[i]=r;continue}if(i==="index"||i==="type"){e[i]=r;continue}if(typeof s=="string"&&typeof r=="string")s+=r;else if(typeof s=="number"&&typeof r=="number")s+=r;else if(VR(s)&&VR(r))s=this.accumulateDelta(s,r);else if(Array.isArray(s)&&Array.isArray(r)){if(s.every(o=>typeof o=="string"||typeof o=="number")){s.push(...r);continue}}else throw Error(`Unhandled record type: ${i}, deltaValue: ${r}, accValue: ${s}`);e[i]=s}return e}}qh=function(e){if(!this.ended)switch(fr(this,Pg,e,"f"),et(this,oi,"m",$R).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":et(this,oi,"m",KR).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":et(this,oi,"m",XR).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":et(this,oi,"m",jR).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Yh=function(){if(this.ended)throw new kt("stream has ended, this shouldn't happen");if(!et(this,dl,"f"))throw Error("Final run has not been received");return et(this,dl,"f")},jR=function(e){const[t,i]=et(this,oi,"m",YR).call(this,e,et(this,hs,"f"));fr(this,hs,t,"f"),et(this,Rg,"f")[t.id]=t;for(const r of i){const s=t.content[r.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let s=r.text,o=t.content[r.index];if(o&&o.type=="text")this._emit("textDelta",s,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=et(this,ec,"f")){if(et(this,sl,"f"))switch(et(this,sl,"f").type){case"text":this._emit("textDone",et(this,sl,"f").text,et(this,hs,"f"));break;case"image_file":this._emit("imageFileDone",et(this,sl,"f").image_file,et(this,hs,"f"));break}fr(this,ec,r.index,"f")}fr(this,sl,t.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(et(this,ec,"f")!==void 0){const r=e.data.content[et(this,ec,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,et(this,hs,"f"));break;case"text":this._emit("textDone",r.text,et(this,hs,"f"));break}}et(this,hs,"f")&&this._emit("messageDone",e.data),fr(this,hs,void 0,"f")}},XR=function(e){const t=et(this,oi,"m",qR).call(this,e);switch(fr(this,ff,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const i=e.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const s of i.step_details.tool_calls)s.index==et(this,Pv,"f")?this._emit("toolCallDelta",s,t.step_details.tool_calls[s.index]):(et(this,dr,"f")&&this._emit("toolCallDone",et(this,dr,"f")),fr(this,Pv,s.index,"f"),fr(this,dr,t.step_details.tool_calls[s.index],"f"),et(this,dr,"f")&&this._emit("toolCallCreated",et(this,dr,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":fr(this,ff,void 0,"f"),e.data.step_details.type=="tool_calls"&&et(this,dr,"f")&&(this._emit("toolCallDone",et(this,dr,"f")),fr(this,dr,void 0,"f")),this._emit("runStepDone",e.data,t);break}},$R=function(e){et(this,QS,"f").push(e),this._emit("event",e)},qR=function(e){switch(e.event){case"thread.run.step.created":return et(this,Ls,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=et(this,Ls,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let i=e.data;if(i.delta){const r=ms.accumulateDelta(t,i.delta);et(this,Ls,"f")[e.data.id]=r}return et(this,Ls,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":et(this,Ls,"f")[e.data.id]=e.data;break}if(et(this,Ls,"f")[e.data.id])return et(this,Ls,"f")[e.data.id];throw new Error("No snapshot available")},YR=function(e,t){let i=[];switch(e.event){case"thread.message.created":return[e.data,i];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const s of r.delta.content)if(s.index in t.content){let o=t.content[s.index];t.content[s.index]=et(this,oi,"m",ZR).call(this,s,o)}else t.content[s.index]=s,i.push(s);return[t,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},ZR=function(e,t){return ms.accumulateDelta(t,e)},KR=function(e){switch(fr(this,Ig,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":fr(this,dl,e.data,"f"),et(this,dr,"f")&&(this._emit("toolCallDone",et(this,dr,"f")),fr(this,dr,void 0,"f"));break}};class Iv extends tn{create(e,t,i){return this._client.post(`/threads/${e}/messages`,{body:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}retrieve(e,t,i){return this._client.get(`/threads/${e}/messages/${t}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}update(e,t,i,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t={},i){return br(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,hE,{query:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}del(e,t,i){return this._client.delete(`/threads/${e}/messages/${t}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class hE extends ws{}(function(n){n.MessagesPage=hE})(Iv||(Iv={}));class Lv extends tn{retrieve(e,t,i,r){return this._client.get(`/threads/${e}/runs/${t}/steps/${i}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t,i={},r){return br(i)?this.list(e,t,{},i):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,fE,{query:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class fE extends ws{}(function(n){n.RunStepsPage=fE})(Lv||(Lv={}));class Nv extends tn{constructor(){super(...arguments),this.steps=new Lv(this._client)}create(e,t,i){return this._client.post(`/threads/${e}/runs`,{body:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:t.stream??!1})}retrieve(e,t,i){return this._client.get(`/threads/${e}/runs/${t}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}update(e,t,i,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t={},i){return br(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,dE,{query:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}cancel(e,t,i){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async createAndPoll(e,t,i){const r=await this.create(e,t,i);return await this.poll(e,r.id,i)}createAndStream(e,t,i){return ms.createAssistantStream(e,this._client.beta.threads.runs,t,i)}async poll(e,t,i){const r={...i==null?void 0:i.headers,"X-Stainless-Poll-Helper":"true"};for(i!=null&&i.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(e,t,{...i,headers:{...i==null?void 0:i.headers,...r}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(i!=null&&i.pollIntervalMs)a=i.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(a=u)}}await Ed(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,t,i){return ms.createAssistantStream(e,this._client.beta.threads.runs,t,i)}submitToolOutputs(e,t,i,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:i.stream??!1})}async submitToolOutputsAndPoll(e,t,i,r){const s=await this.submitToolOutputs(e,t,i,r);return await this.poll(e,s.id,r)}submitToolOutputsStream(e,t,i,r){return ms.createToolAssistantStream(e,t,this._client.beta.threads.runs,i,r)}}class dE extends ws{}(function(n){n.RunsPage=dE,n.Steps=Lv,n.RunStepsPage=fE})(Nv||(Nv={}));class Dv extends tn{constructor(){super(...arguments),this.runs=new Nv(this._client),this.messages=new Iv(this._client)}create(e={},t){return br(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,i){return this._client.post(`/threads/${e}`,{body:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const i=await this.createAndRun(e,t);return await this.runs.poll(i.thread_id,i.id,t)}createAndRunStream(e,t){return ms.createThreadAssistantStream(e,this._client.beta.threads,t)}}(function(n){n.Runs=Nv,n.RunsPage=dE,n.Messages=Iv,n.MessagesPage=hE})(Dv||(Dv={}));const tX=async n=>{const e=await Promise.allSettled(n),t=e.filter(r=>r.status==="rejected");if(t.length){for(const r of t)console.error(r.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const i=[];for(const r of e)r.status==="fulfilled"&&i.push(r.value);return i};let Ov=class extends tn{create(e,t,i){return this._client.post(`/vector_stores/${e}/files`,{body:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}retrieve(e,t,i){return this._client.get(`/vector_stores/${e}/files/${t}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},i){return br(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,ty,{query:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}del(e,t,i){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async createAndPoll(e,t,i){const r=await this.create(e,t,i);return await this.poll(e,r.id,i)}async poll(e,t,i){const r={...i==null?void 0:i.headers,"X-Stainless-Poll-Helper":"true"};for(i!=null&&i.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){const s=await this.retrieve(e,t,{...i,headers:r}).withResponse(),o=s.data;switch(o.status){case"in_progress":let a=5e3;if(i!=null&&i.pollIntervalMs)a=i.pollIntervalMs;else{const l=s.response.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(a=u)}}await Ed(a);break;case"failed":case"completed":return o}}}async upload(e,t,i){const r=await this._client.files.create({file:t,purpose:"assistants"},i);return this.create(e,{file_id:r.id},i)}async uploadAndPoll(e,t,i){const r=await this.upload(e,t,i);return await this.poll(e,r.id,i)}};class ty extends ws{}(function(n){n.VectorStoreFilesPage=ty})(Ov||(Ov={}));class kv extends tn{create(e,t,i){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}retrieve(e,t,i){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}cancel(e,t,i){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async createAndPoll(e,t,i){const r=await this.create(e,t);return await this.poll(e,r.id,i)}listFiles(e,t,i={},r){return br(i)?this.listFiles(e,t,{},i):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,ty,{query:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async poll(e,t,i){const r={...i==null?void 0:i.headers,"X-Stainless-Poll-Helper":"true"};for(i!=null&&i.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(e,t,{...i,headers:r}).withResponse();switch(s.status){case"in_progress":let a=5e3;if(i!=null&&i.pollIntervalMs)a=i.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(a=u)}}await Ed(a);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:t,fileIds:i=[]},r){if(t===null||t.length==0)throw new Error("No files provided to process.");const s=(r==null?void 0:r.maxConcurrency)??5,o=Math.min(s,t.length),a=this._client,l=t.values(),u=[...i];async function f(p){for(let g of p){const v=await a.files.create({file:g,purpose:"assistants"},r);u.push(v.id)}}const d=Array(o).fill(l).map(f);return await tX(d),await this.createAndPoll(e,{file_ids:u})}}kv||(kv={});class Fv extends tn{constructor(){super(...arguments),this.files=new Ov(this._client),this.fileBatches=new kv(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,i){return this._client.post(`/vector_stores/${e}`,{body:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e={},t){return br(e)?this.list({},e):this._client.getAPIList("/vector_stores",pE,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class pE extends ws{}(function(n){n.VectorStoresPage=pE,n.Files=Ov,n.VectorStoreFilesPage=ty,n.FileBatches=kv})(Fv||(Fv={}));class Uv extends tn{constructor(){super(...arguments),this.vectorStores=new Fv(this._client),this.chat=new Rv(this._client),this.assistants=new Av(this._client),this.threads=new Dv(this._client)}}(function(n){n.VectorStores=Fv,n.VectorStoresPage=pE,n.Chat=Rv,n.Assistants=Av,n.AssistantsPage=cE,n.Threads=Dv})(Uv||(Uv={}));class zv extends tn{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}zv||(zv={});class Bv extends tn{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}Bv||(Bv={});class Vv extends tn{create(e,t){return this._client.post("/files",td({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return br(e)?this.list({},e):this._client.getAPIList("/files",mE,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...t==null?void 0:t.headers}})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:i=30*60*1e3}={}){const r=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!r.has(o.status);)if(await Ed(t),o=await this.retrieve(e),Date.now()-s>i)throw new aE({message:`Giving up on waiting for file ${e} to finish processing after ${i} milliseconds.`});return o}}class mE extends lE{}(function(n){n.FileObjectsPage=mE})(Vv||(Vv={}));class Hv extends tn{list(e,t={},i){return br(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,gE,{query:t,...i})}}class gE extends ws{}(function(n){n.FineTuningJobCheckpointsPage=gE})(Hv||(Hv={}));class Gv extends tn{constructor(){super(...arguments),this.checkpoints=new Hv(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return br(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",vE,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},i){return br(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,yE,{query:t,...i})}}class vE extends ws{}class yE extends ws{}(function(n){n.FineTuningJobsPage=vE,n.FineTuningJobEventsPage=yE,n.Checkpoints=Hv,n.FineTuningJobCheckpointsPage=gE})(Gv||(Gv={}));class Wv extends tn{constructor(){super(...arguments),this.jobs=new Gv(this._client)}}(function(n){n.Jobs=Gv,n.FineTuningJobsPage=vE,n.FineTuningJobEventsPage=yE})(Wv||(Wv={}));class jv extends tn{createVariation(e,t){return this._client.post("/images/variations",td({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",td({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}jv||(jv={});class Xv extends tn{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",_E,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class _E extends lE{}(function(n){n.ModelsPage=_E})(Xv||(Xv={}));class $v extends tn{create(e,t){return this._client.post("/moderations",{body:e,...t})}}$v||($v={});var zD;class Hn extends V7{constructor({baseURL:e=Vm("OPENAI_BASE_URL"),apiKey:t=Vm("OPENAI_API_KEY"),organization:i=Vm("OPENAI_ORG_ID")??null,project:r=Vm("OPENAI_PROJECT_ID")??null,...s}={}){if(t===void 0)throw new kt("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:i,project:r,...s,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&J7())throw new kt(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new zv(this),this.chat=new wv(this),this.embeddings=new Bv(this),this.files=new Vv(this),this.images=new jv(this),this.audio=new bv(this),this.moderations=new $v(this),this.models=new Xv(this),this.fineTuning=new Wv(this),this.beta=new Uv(this),this.batches=new Tv(this),this._options=o,this.apiKey=t,this.organization=i,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}zD=Hn;Hn.OpenAI=zD;Hn.OpenAIError=kt;Hn.APIError=ci;Hn.APIConnectionError=Q0;Hn.APIConnectionTimeoutError=aE;Hn.APIUserAbortError=_r;Hn.NotFoundError=xD;Hn.ConflictError=wD;Hn.RateLimitError=MD;Hn.BadRequestError=vD;Hn.AuthenticationError=yD;Hn.InternalServerError=ED;Hn.PermissionDeniedError=_D;Hn.UnprocessableEntityError=SD;Hn.toFile=RD;Hn.fileFromPath=mD;(function(n){n.Page=lE,n.CursorPage=ws,n.Completions=zv,n.Chat=wv,n.Embeddings=Bv,n.Files=Vv,n.FileObjectsPage=mE,n.Images=jv,n.Audio=bv,n.Moderations=$v,n.Models=Xv,n.ModelsPage=_E,n.FineTuning=Wv,n.Beta=Uv,n.Batches=Tv,n.BatchesPage=uE})(Hn||(Hn={}));var BD={},Oo={},Ys={},Nn={},nX=Ft&&Ft.__values||function(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}};Object.defineProperty(Nn,"__esModule",{value:!0});function VD(n,e){return Math.floor(e()*n)}Nn.tauRandInt=VD;function iX(n){return n()}Nn.tauRand=iX;function rX(n){var e,t,i=0;try{for(var r=nX(n),s=r.next();!s.done;s=r.next()){var o=s.value;i+=Math.pow(o,2)}}catch(a){e={error:a}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return Math.sqrt(i)}Nn.norm=rX;function ny(n){for(var e=[],t=0;t<n;t++)e.push(void 0);return e}Nn.empty=ny;function sX(n){return ny(n).map(function(e,t){return t})}Nn.range=sX;function xE(n,e){return ny(n).map(function(){return e})}Nn.filled=xE;function HD(n){return xE(n,0)}Nn.zeros=HD;function oX(n){return xE(n,1)}Nn.ones=oX;function aX(n,e,t){return ny(t).map(function(i,r){return n+r*((e-n)/(t-1))})}Nn.linear=aX;function GD(n){return n.reduce(function(e,t){return e+t})}Nn.sum=GD;function lX(n){return GD(n)/n.length}Nn.mean=lX;function uX(n){for(var e=0,t=0;t<n.length;t++)e=n[t]>e?n[t]:e;return e}Nn.max=uX;function cX(n){for(var e=0,t=0;t<n.length;t++)for(var i=0;i<n[t].length;i++)e=n[t][i]>e?n[t][i]:e;return e}Nn.max2d=cX;function hX(n,e,t){for(var i=HD(n),r=0;r<n;r++)for(var s=!0;s;){for(var o=VD(e,t),a=!1,l=0;l<r;l++)if(o===i[l]){a=!0;break}a||(s=!1),i[r]=o}return i}Nn.rejectionSample=hX;function fX(n,e,t){var i=[],r=0;if(n.length!==e*t)throw new Error("Array dimensions must match input length.");for(var s=0;s<e;s++){for(var o=[],a=0;a<t;a++)o.push(n[r]),r+=1;i.push(o)}return i}Nn.reshape2d=fX;var dX=Ft&&Ft.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e};Object.defineProperty(Ys,"__esModule",{value:!0});var rd=dX(Nn);function WD(n,e){var t=function(r){return rd.empty(n).map(function(){return rd.filled(e,r)})},i=[];return i.push(t(-1)),i.push(t(1/0)),i.push(t(0)),i}Ys.makeHeap=WD;function pX(n,e,t){for(var i=rd.zeros(n),r=0;r<n;r++){for(var s=!0,o=0;s;){o=rd.tauRandInt(e,t);for(var a=!1,l=0;l<r;l++)if(o===i[l]){a=!0;break}a||(s=!1)}i[r]=o}return i}Ys.rejectionSample=pX;function e1(n,e,t,i,r){e=Math.floor(e);var s=n[0][e],o=n[1][e];if(n[2][e],t>=o[0])return 0;for(var a=0;a<s.length;a++)if(i===s[a])return 0;return jD(n,e,t,i,r)}Ys.heapPush=e1;function jD(n,e,t,i,r){var s=n[0][e],o=n[1][e],a=n[2][e];if(t>=o[0])return 0;o[0]=t,s[0]=i,a[0]=r;for(var l=0,u=0;;){var f=2*l+1,d=f+1,p=n[0][0].length;if(f>=p)break;if(d>=p)if(o[f]>t)u=f;else break;else if(o[f]>=o[d])if(t<o[f])u=f;else break;else if(t<o[d])u=d;else break;o[l]=o[u],s[l]=s[u],a[l]=a[u],l=u}return o[l]=t,s[l]=i,a[l]=r,1}Ys.uncheckedHeapPush=jD;function mX(n,e,t,i,r){for(var s=WD(e,i),o=0;o<e;o++)for(var a=0;a<t;a++)if(!(n[0][o][a]<0)){var l=n[0][o][a],u=n[2][o][a],f=rd.tauRand(r);e1(s,o,f,l,u),e1(s,l,f,o,u),n[2][o][a]=0}return s}Ys.buildCandidates=mX;function gX(n){for(var e=n[0],t=n[1],i=0;i<e.length;i++)for(var r=e[i],s=t[i],o=0;o<r.length-1;o++){var a=r.length-o-1,l=s.length-o-1,u=r[0];r[0]=r[a],r[a]=u;var f=s[0];s[0]=s[l],s[l]=f,vX(s,r,l,0)}return{indices:e,weights:t}}Ys.deheapSort=gX;function vX(n,e,t,i){for(;i*2+1<t;){var r=i*2+1,s=r+1,o=i;if(n[o]<n[r]&&(o=r),s<t&&n[o]<n[s]&&(o=s),o===i)break;var a=n[i];n[i]=n[o],n[o]=a;var l=e[i];e[i]=e[o],e[o]=l,i=o}}function yX(n,e){for(var t=n[0][e],i=n[1][e],r=n[2][e],s=1/0,o=-1,a=0;a>t.length;a++)r[a]===1&&i[a]<s&&(s=i[a],o=a);return o>=0?(r[o]=0,Math.floor(t[o])):-1}Ys.smallestFlagged=yX;var rr={},Lg=Ft&&Ft.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return s},_X=Ft&&Ft.__values||function(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}},xX=Ft&&Ft.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e};Object.defineProperty(rr,"__esModule",{value:!0});var Lh,JR=xX(Nn),zc=function(){function n(e,t,i,r){if(this.entries=new Map,this.nRows=0,this.nCols=0,e.length!==t.length||e.length!==i.length)throw new Error("rows, cols and values arrays must all have the same length");this.nRows=r[0],this.nCols=r[1];for(var s=0;s<i.length;s++){var o=e[s],a=t[s];this.checkDims(o,a);var l=this.makeKey(o,a);this.entries.set(l,{value:i[s],row:o,col:a})}}return n.prototype.makeKey=function(e,t){return e+":"+t},n.prototype.checkDims=function(e,t){var i=e<this.nRows&&t<this.nCols;if(!i)throw new Error("row and/or col specified outside of matrix dimensions")},n.prototype.set=function(e,t,i){this.checkDims(e,t);var r=this.makeKey(e,t);this.entries.has(r)?this.entries.get(r).value=i:this.entries.set(r,{value:i,row:e,col:t})},n.prototype.get=function(e,t,i){i===void 0&&(i=0),this.checkDims(e,t);var r=this.makeKey(e,t);return this.entries.has(r)?this.entries.get(r).value:i},n.prototype.getAll=function(e){e===void 0&&(e=!0);var t=[];return this.entries.forEach(function(i){t.push(i)}),e&&t.sort(function(i,r){return i.row===r.row?i.col-r.col:i.row-r.row}),t},n.prototype.getDims=function(){return[this.nRows,this.nCols]},n.prototype.getRows=function(){return Array.from(this.entries,function(e){var t=Lg(e,2);t[0];var i=t[1];return i.row})},n.prototype.getCols=function(){return Array.from(this.entries,function(e){var t=Lg(e,2);t[0];var i=t[1];return i.col})},n.prototype.getValues=function(){return Array.from(this.entries,function(e){var t=Lg(e,2);t[0];var i=t[1];return i.value})},n.prototype.forEach=function(e){this.entries.forEach(function(t){return e(t.value,t.row,t.col)})},n.prototype.map=function(e){var t=[];this.entries.forEach(function(r){t.push(e(r.value,r.row,r.col))});var i=[this.nRows,this.nCols];return new n(this.getRows(),this.getCols(),t,i)},n.prototype.toArray=function(){var e=this,t=JR.empty(this.nRows),i=t.map(function(){return JR.zeros(e.nCols)});return this.entries.forEach(function(r){i[r.row][r.col]=r.value}),i},n}();rr.SparseMatrix=zc;function wX(n){var e=[],t=[],i=[];n.forEach(function(s,o,a){e.push(o),t.push(a),i.push(s)});var r=[n.nCols,n.nRows];return new zc(t,e,i,r)}rr.transpose=wX;function SX(n){for(var e=Lg(n,1),t=e[0],i=new zc([],[],[],n),r=0;r<t;r++)i.set(r,r,1);return i}rr.identity=SX;function MX(n,e){return iy(n,e,function(t,i){return t*i})}rr.pairwiseMultiply=MX;function EX(n,e){return iy(n,e,function(t,i){return t+i})}rr.add=EX;function bX(n,e){return iy(n,e,function(t,i){return t-i})}rr.subtract=bX;function TX(n,e){return iy(n,e,function(t,i){return t>i?t:i})}rr.maximum=TX;function AX(n,e){return n.map(function(t){return t*e})}rr.multiplyScalar=AX;function CX(n){for(var e=new Set,t=n.getValues(),i=n.getRows(),r=n.getCols(),s=0;s<t.length;s++)t[s]===0&&e.add(s);var o=function(f,d){return!e.has(d)},a=t.filter(o),l=i.filter(o),u=r.filter(o);return new zc(l,u,a,n.getDims())}rr.eliminateZeros=CX;function RX(n,e){e===void 0&&(e="l2");var t,i,r=PX[e],s=new Map;n.forEach(function(d,p,g){var v=s.get(p)||[];v.push(g),s.set(p,v)});var o=new zc([],[],[],n.getDims()),a=function(d){for(var p=s.get(d).sort(),g=p.map(function(_){return n.get(d,_)}),v=r(g),x=0;x<v.length;x++)o.set(d,p[x],v[x])};try{for(var l=_X(s.keys()),u=l.next();!u.done;u=l.next()){var f=u.value;a(f)}}catch(d){t={error:d}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(t)throw t.error}}return o}rr.normalize=RX;var PX=(Lh={},Lh.max=function(n){for(var e=-1/0,t=0;t<n.length;t++)e=n[t]>e?n[t]:e;return n.map(function(i){return i/e})},Lh.l1=function(n){for(var e=0,t=0;t<n.length;t++)e+=n[t];return n.map(function(i){return i/e})},Lh.l2=function(n){for(var e=0,t=0;t<n.length;t++)e+=Math.pow(n[t],2);return n.map(function(i){return Math.sqrt(Math.pow(i,2)/e)})},Lh);function iy(n,e,t){for(var i=new Set,r=[],s=[],o=[],a=function(S,b){r.push(S),s.push(b);var R=t(n.get(S,b),e.get(S,b));o.push(R)},l=n.getValues(),u=n.getRows(),f=n.getCols(),d=0;d<l.length;d++){var p=u[d],g=f[d],v=p+":"+g;i.add(v),a(p,g)}for(var x=e.getValues(),_=e.getRows(),m=e.getCols(),d=0;d<x.length;d++){var p=_[d],g=m[d],v=p+":"+g;i.has(v)||a(p,g)}var w=[n.nRows,n.nCols];return new zc(r,s,o,w)}function IX(n){var e=[];n.forEach(function(d,p,g){e.push({value:d,row:p,col:g})}),e.sort(function(d,p){return d.row===p.row?d.col-p.col:d.row-p.row});for(var t=[],i=[],r=[],s=-1,o=0;o<e.length;o++){var a=e[o],l=a.row,u=a.col,f=a.value;l!==s&&(s=l,r.push(o)),t.push(u),i.push(f)}return{indices:t,values:i,indptr:r}}rr.getCSR=IX;var Bc={},zl={},LX=Ft&&Ft.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return s},XD=Ft&&Ft.__spread||function(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(LX(arguments[e]));return n},NX=Ft&&Ft.__values||function(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}},DX=Ft&&Ft.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e};Object.defineProperty(zl,"__esModule",{value:!0});var bi=DX(Nn),$D=function(){function n(e,t,i,r){this.hyperplanes=e,this.offsets=t,this.children=i,this.indices=r}return n}();zl.FlatTree=$D;function OX(n,e,t,i){var r=Math.max(10,e),s=bi.range(t).map(function(a,l){return kX(n,r,l,i)}),o=s.map(function(a){return UX(a,r)});return o}zl.makeForest=OX;function kX(n,e,t,i){e===void 0&&(e=30);var r=bi.range(n.length),s=t1(n,r,e,t,i);return s}function t1(n,e,t,i,r){if(t===void 0&&(t=30),e.length>t){var s=FX(n,e,r),o=s.indicesLeft,a=s.indicesRight,l=s.hyperplane,u=s.offset,f=t1(n,o,t,i+1,r),d=t1(n,a,t,i+1,r),p={leftChild:f,rightChild:d,isLeaf:!1,hyperplane:l,offset:u};return p}else{var p={indices:e,isLeaf:!0};return p}}function FX(n,e,t){var i=n[0].length,r=bi.tauRandInt(e.length,t),s=bi.tauRandInt(e.length,t);s+=r===s?1:0,s=s%e.length;for(var o=e[r],a=e[s],l=0,u=bi.zeros(i),f=0;f<u.length;f++)u[f]=n[o][f]-n[a][f],l-=u[f]*(n[o][f]+n[a][f])/2;for(var d=0,p=0,g=bi.zeros(e.length),f=0;f<e.length;f++){for(var v=l,x=0;x<i;x++)v+=u[x]*n[e[f]][x];v===0?(g[f]=bi.tauRandInt(2,t),g[f]===0?d+=1:p+=1):v>0?(g[f]=0,d+=1):(g[f]=1,p+=1)}var _=bi.zeros(d),m=bi.zeros(p);d=0,p=0;for(var f=0;f<g.length;f++)g[f]===0?(_[d]=e[f],d+=1):(m[p]=e[f],p+=1);return{indicesLeft:_,indicesRight:m,hyperplane:u,offset:l}}function UX(n,e){var t=i1(n),i=r1(n),r=bi.range(t).map(function(){return bi.zeros(n.hyperplane?n.hyperplane.length:0)}),s=bi.zeros(t),o=bi.range(t).map(function(){return[-1,-1]}),a=bi.range(i).map(function(){return bi.range(e).map(function(){return-1})});return n1(n,r,s,o,a,0,0),new $D(r,s,o,a)}function n1(n,e,t,i,r,s,o){var a;if(n.isLeaf)return i[s][0]=-o,(a=r[o]).splice.apply(a,XD([0,n.indices.length],n.indices)),o+=1,{nodeNum:s,leafNum:o};e[s]=n.hyperplane,t[s]=n.offset,i[s][0]=s+1;var l=s,u=n1(n.leftChild,e,t,i,r,s+1,o);return s=u.nodeNum,o=u.leafNum,i[l][1]=s+1,u=n1(n.rightChild,e,t,i,r,s+1,o),{nodeNum:u.nodeNum,leafNum:u.leafNum}}function i1(n){return n.isLeaf?1:1+i1(n.leftChild)+i1(n.rightChild)}function r1(n){return n.isLeaf?1:r1(n.leftChild)+r1(n.rightChild)}function zX(n){var e,t;if(n.length>0){var i=[];try{for(var r=NX(n),s=r.next();!s.done;s=r.next()){var o=s.value;i.push.apply(i,XD(o.indices))}}catch(a){e={error:a}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return i}else return[[-1]]}zl.makeLeafArray=zX;function BX(n,e,t,i){for(var r=e,s=0;s<t.length;s++)r+=n[s]*t[s];if(r===0){var o=bi.tauRandInt(2,i);return o}else return r>0?0:1}function VX(n,e,t){for(var i=0;e.children[i][0]>0;){var r=BX(e.hyperplanes[i],e.offsets[i],n,t);r===0?i=e.children[i][0]:i=e.children[i][1]}var s=-1*e.children[i][0];return e.indices[s]}zl.searchFlatTree=VX;var qD=Ft&&Ft.__values||function(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}},ry=Ft&&Ft.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e};Object.defineProperty(Bc,"__esModule",{value:!0});var Fi=ry(Ys),HX=ry(rr),GX=ry(zl),YD=ry(Nn);function WX(n,e){return function(i,r,s,o,a,l,u,f){o===void 0&&(o=10),a===void 0&&(a=50),l===void 0&&(l=.001),u===void 0&&(u=.5),f===void 0&&(f=!0);for(var d=i.length,p=Fi.makeHeap(i.length,s),g=0;g<i.length;g++)for(var v=Fi.rejectionSample(s,i.length,e),x=0;x<v.length;x++){var _=n(i[g],i[v[x]]);Fi.heapPush(p,g,_,v[x],1),Fi.heapPush(p,v[x],_,g,1)}if(f)for(var m=0;m<r.length;m++)for(var g=0;g<r[m].length&&!(r[m][g]<0);g++)for(var x=g+1;x<r[m].length&&!(r[m][x]<0);x++){var _=n(i[r[m][g]],i[r[m][x]]);Fi.heapPush(p,r[m][g],_,r[m][x],1),Fi.heapPush(p,r[m][x],_,r[m][g],1)}for(var m=0;m<o;m++){for(var w=Fi.buildCandidates(p,d,s,a,e),S=0,g=0;g<d;g++)for(var x=0;x<a;x++){var b=Math.floor(w[0][g][x]);if(!(b<0||YD.tauRand(e)<u))for(var R=0;R<a;R++){var A=Math.floor(w[0][g][R]),C=w[2][g][x],L=w[2][g][R];if(!(A<0||!C&&!L)){var _=n(i[b],i[A]);S+=Fi.heapPush(p,b,_,A,1),S+=Fi.heapPush(p,A,_,b,1)}}}if(S<=l*s*i.length)break}var I=Fi.deheapSort(p);return I}}Bc.makeNNDescent=WX;function jX(n){function e(i,r,s,o,a){for(var l=0;l<s.length;l++)for(var u=YD.rejectionSample(i,r.length,a),f=0;f<u.length;f++)if(!(u[f]<0)){var d=n(r[u[f]],s[l]);Fi.heapPush(o,l,d,u[f],1)}}function t(i,r,s,o,a){for(var l=0;l<s.length;l++)for(var u=GX.searchFlatTree(s[l],i,a),f=0;f<u.length;f++){if(u[f]<0)return;var d=n(r[u[f]],s[l]);Fi.heapPush(o,l,d,u[f],1)}}return{initFromRandom:e,initFromTree:t}}Bc.makeInitializations=jX;function XX(n){return function(t,i,r,s){for(var o,a,l=HX.getCSR(i),u=l.indices,f=l.indptr,d=0;d<s.length;d++)for(var p=new Set(r[0][d]);;){var g=Fi.smallestFlagged(r,d);if(g===-1)break;var v=u.slice(f[g],f[g+1]);try{for(var x=qD(v),_=x.next();!_.done;_=x.next()){var m=_.value;if(!(m===g||m===-1||p.has(m))){var w=n(t[m],s[d]);Fi.uncheckedHeapPush(r,d,w,m,1),p.add(m)}}}catch(S){o={error:S}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(o)throw o.error}}}return r}}Bc.makeInitializedNNSearch=XX;function $X(n,e,t,i,r,s,o){var a,l,u=Fi.makeHeap(t.length,i);if(r(i,e,t,u,o),n)try{for(var f=qD(n),d=f.next();!d.done;d=f.next()){var p=d.value;s(p,e,t,u,o)}}catch(g){a={error:g}}finally{try{d&&!d.done&&(l=f.return)&&l.call(f)}finally{if(a)throw a.error}}return u}Bc.initializeSearch=$X;const qX=Object.prototype.toString;function Zx(n){return qX.call(n).endsWith("Array]")}function QR(n,e,t){let i=0;const r=t(e);for(let s=0;s<n.x.length;s++)i+=Math.abs(n.y[s]-r(n.x[s]));return i}var Nt={};const YX=Object.prototype.toString;function sd(n){const e=YX.call(n);return e.endsWith("Array]")&&!e.includes("Big")}const ZX=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:sd},Symbol.toStringTag,{value:"Module"})),KX=u1(ZX);function JX(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!sd(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,i=t===void 0?0:t,r=e.toIndex,s=r===void 0?n.length:r;if(i<0||i>=n.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=i||s>n.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=n[i],a=i+1;a<s;a++)n[a]>o&&(o=n[a]);return o}function QX(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!sd(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,i=t===void 0?0:t,r=e.toIndex,s=r===void 0?n.length:r;if(i<0||i>=n.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=i||s>n.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=n[i],a=i+1;a<s;a++)n[a]<o&&(o=n[a]);return o}function e$(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(sd(n)){if(n.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var t;if(e.output!==void 0){if(!sd(e.output))throw new TypeError("output option must be an array if specified");t=e.output}else t=new Array(n.length);var i=QX(n),r=JX(n);if(i===r)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var s=e.min,o=s===void 0?e.autoMinMax?i:0:s,a=e.max,l=a===void 0?e.autoMinMax?r:1:a;if(o>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-o)/(r-i),f=0;f<n.length;f++)t[f]=(n[f]-i)*u+o;return t}const t$=Object.freeze(Object.defineProperty({__proto__:null,default:e$},Symbol.toStringTag,{value:"Module"})),n$=u1(t$);Object.defineProperty(Nt,"__esModule",{value:!0});var Zi=KX,eP=n$;const Wm=" ".repeat(2),ZD=" ".repeat(4);function i$(){return KD(this)}function KD(n,e={}){const{maxRows:t=15,maxColumns:i=10,maxNumSize:r=8,padMinus:s="auto"}=e;return`${n.constructor.name} {
${Wm}[
${ZD}${r$(n,t,i,r,s)}
${Wm}]
${Wm}rows: ${n.rows}
${Wm}columns: ${n.columns}
}`}function r$(n,e,t,i,r){const{rows:s,columns:o}=n,a=Math.min(s,e),l=Math.min(o,t),u=[];if(r==="auto"){r=!1;e:for(let f=0;f<a;f++)for(let d=0;d<l;d++)if(n.get(f,d)<0){r=!0;break e}}for(let f=0;f<a;f++){let d=[];for(let p=0;p<l;p++)d.push(s$(n.get(f,p),i,r));u.push(`${d.join(" ")}`)}return l!==o&&(u[u.length-1]+=` ... ${o-t} more columns`),a!==s&&u.push(`... ${s-e} more rows`),u.join(`
${ZD}`)}function s$(n,e,t){return(n>=0&&t?` ${tP(n,e-1)}`:tP(n,e)).padEnd(e)}function tP(n,e){let t=n.toString();if(t.length<=e)return t;let i=n.toFixed(e);if(i.length>e&&(i=n.toFixed(Math.max(0,e-(i.length-e)))),i.length<=e&&!i.startsWith("0.000")&&!i.startsWith("-0.000"))return i;let r=n.toExponential(e);return r.length>e&&(r=n.toExponential(Math.max(0,e-(r.length-e)))),r.slice(0)}function o$(n,e){n.prototype.add=function(i){return typeof i=="number"?this.addS(i):this.addM(i)},n.prototype.addS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)+i);return this},n.prototype.addM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)+i.get(r,s));return this},n.add=function(i,r){return new e(i).add(r)},n.prototype.sub=function(i){return typeof i=="number"?this.subS(i):this.subM(i)},n.prototype.subS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)-i);return this},n.prototype.subM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)-i.get(r,s));return this},n.sub=function(i,r){return new e(i).sub(r)},n.prototype.subtract=n.prototype.sub,n.prototype.subtractS=n.prototype.subS,n.prototype.subtractM=n.prototype.subM,n.subtract=n.sub,n.prototype.mul=function(i){return typeof i=="number"?this.mulS(i):this.mulM(i)},n.prototype.mulS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)*i);return this},n.prototype.mulM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)*i.get(r,s));return this},n.mul=function(i,r){return new e(i).mul(r)},n.prototype.multiply=n.prototype.mul,n.prototype.multiplyS=n.prototype.mulS,n.prototype.multiplyM=n.prototype.mulM,n.multiply=n.mul,n.prototype.div=function(i){return typeof i=="number"?this.divS(i):this.divM(i)},n.prototype.divS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)/i);return this},n.prototype.divM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)/i.get(r,s));return this},n.div=function(i,r){return new e(i).div(r)},n.prototype.divide=n.prototype.div,n.prototype.divideS=n.prototype.divS,n.prototype.divideM=n.prototype.divM,n.divide=n.div,n.prototype.mod=function(i){return typeof i=="number"?this.modS(i):this.modM(i)},n.prototype.modS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)%i);return this},n.prototype.modM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)%i.get(r,s));return this},n.mod=function(i,r){return new e(i).mod(r)},n.prototype.modulus=n.prototype.mod,n.prototype.modulusS=n.prototype.modS,n.prototype.modulusM=n.prototype.modM,n.modulus=n.mod,n.prototype.and=function(i){return typeof i=="number"?this.andS(i):this.andM(i)},n.prototype.andS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)&i);return this},n.prototype.andM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)&i.get(r,s));return this},n.and=function(i,r){return new e(i).and(r)},n.prototype.or=function(i){return typeof i=="number"?this.orS(i):this.orM(i)},n.prototype.orS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)|i);return this},n.prototype.orM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)|i.get(r,s));return this},n.or=function(i,r){return new e(i).or(r)},n.prototype.xor=function(i){return typeof i=="number"?this.xorS(i):this.xorM(i)},n.prototype.xorS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)^i);return this},n.prototype.xorM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)^i.get(r,s));return this},n.xor=function(i,r){return new e(i).xor(r)},n.prototype.leftShift=function(i){return typeof i=="number"?this.leftShiftS(i):this.leftShiftM(i)},n.prototype.leftShiftS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)<<i);return this},n.prototype.leftShiftM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)<<i.get(r,s));return this},n.leftShift=function(i,r){return new e(i).leftShift(r)},n.prototype.signPropagatingRightShift=function(i){return typeof i=="number"?this.signPropagatingRightShiftS(i):this.signPropagatingRightShiftM(i)},n.prototype.signPropagatingRightShiftS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>i);return this},n.prototype.signPropagatingRightShiftM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>i.get(r,s));return this},n.signPropagatingRightShift=function(i,r){return new e(i).signPropagatingRightShift(r)},n.prototype.rightShift=function(i){return typeof i=="number"?this.rightShiftS(i):this.rightShiftM(i)},n.prototype.rightShiftS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>>i);return this},n.prototype.rightShiftM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>>i.get(r,s));return this},n.rightShift=function(i,r){return new e(i).rightShift(r)},n.prototype.zeroFillRightShift=n.prototype.rightShift,n.prototype.zeroFillRightShiftS=n.prototype.rightShiftS,n.prototype.zeroFillRightShiftM=n.prototype.rightShiftM,n.zeroFillRightShift=n.rightShift,n.prototype.not=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,~this.get(i,r));return this},n.not=function(i){return new e(i).not()},n.prototype.abs=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.abs(this.get(i,r)));return this},n.abs=function(i){return new e(i).abs()},n.prototype.acos=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.acos(this.get(i,r)));return this},n.acos=function(i){return new e(i).acos()},n.prototype.acosh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.acosh(this.get(i,r)));return this},n.acosh=function(i){return new e(i).acosh()},n.prototype.asin=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.asin(this.get(i,r)));return this},n.asin=function(i){return new e(i).asin()},n.prototype.asinh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.asinh(this.get(i,r)));return this},n.asinh=function(i){return new e(i).asinh()},n.prototype.atan=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.atan(this.get(i,r)));return this},n.atan=function(i){return new e(i).atan()},n.prototype.atanh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.atanh(this.get(i,r)));return this},n.atanh=function(i){return new e(i).atanh()},n.prototype.cbrt=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.cbrt(this.get(i,r)));return this},n.cbrt=function(i){return new e(i).cbrt()},n.prototype.ceil=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.ceil(this.get(i,r)));return this},n.ceil=function(i){return new e(i).ceil()},n.prototype.clz32=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.clz32(this.get(i,r)));return this},n.clz32=function(i){return new e(i).clz32()},n.prototype.cos=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.cos(this.get(i,r)));return this},n.cos=function(i){return new e(i).cos()},n.prototype.cosh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.cosh(this.get(i,r)));return this},n.cosh=function(i){return new e(i).cosh()},n.prototype.exp=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.exp(this.get(i,r)));return this},n.exp=function(i){return new e(i).exp()},n.prototype.expm1=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.expm1(this.get(i,r)));return this},n.expm1=function(i){return new e(i).expm1()},n.prototype.floor=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.floor(this.get(i,r)));return this},n.floor=function(i){return new e(i).floor()},n.prototype.fround=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.fround(this.get(i,r)));return this},n.fround=function(i){return new e(i).fround()},n.prototype.log=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.log(this.get(i,r)));return this},n.log=function(i){return new e(i).log()},n.prototype.log1p=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.log1p(this.get(i,r)));return this},n.log1p=function(i){return new e(i).log1p()},n.prototype.log10=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.log10(this.get(i,r)));return this},n.log10=function(i){return new e(i).log10()},n.prototype.log2=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.log2(this.get(i,r)));return this},n.log2=function(i){return new e(i).log2()},n.prototype.round=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.round(this.get(i,r)));return this},n.round=function(i){return new e(i).round()},n.prototype.sign=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.sign(this.get(i,r)));return this},n.sign=function(i){return new e(i).sign()},n.prototype.sin=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.sin(this.get(i,r)));return this},n.sin=function(i){return new e(i).sin()},n.prototype.sinh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.sinh(this.get(i,r)));return this},n.sinh=function(i){return new e(i).sinh()},n.prototype.sqrt=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.sqrt(this.get(i,r)));return this},n.sqrt=function(i){return new e(i).sqrt()},n.prototype.tan=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.tan(this.get(i,r)));return this},n.tan=function(i){return new e(i).tan()},n.prototype.tanh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.tanh(this.get(i,r)));return this},n.tanh=function(i){return new e(i).tanh()},n.prototype.trunc=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.trunc(this.get(i,r)));return this},n.trunc=function(i){return new e(i).trunc()},n.pow=function(i,r){return new e(i).pow(r)},n.prototype.pow=function(i){return typeof i=="number"?this.powS(i):this.powM(i)},n.prototype.powS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,Math.pow(this.get(r,s),i));return this},n.prototype.powM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,Math.pow(this.get(r,s),i.get(r,s)));return this}}function zr(n,e,t){let i=t?n.rows:n.rows-1;if(e<0||e>i)throw new RangeError("Row index out of range")}function Br(n,e,t){let i=t?n.columns:n.columns-1;if(e<0||e>i)throw new RangeError("Column index out of range")}function Du(n,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==n.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Ou(n,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==n.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function wE(n,e){if(!Zi.isAnyArray(e))throw new TypeError("row indices must be an array");for(let t=0;t<e.length;t++)if(e[t]<0||e[t]>=n.rows)throw new RangeError("row indices are out of range")}function SE(n,e){if(!Zi.isAnyArray(e))throw new TypeError("column indices must be an array");for(let t=0;t<e.length;t++)if(e[t]<0||e[t]>=n.columns)throw new RangeError("column indices are out of range")}function s1(n,e,t,i,r){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(jm("startRow",e),jm("endRow",t),jm("startColumn",i),jm("endColumn",r),e>t||i>r||e<0||e>=n.rows||t<0||t>=n.rows||i<0||i>=n.columns||r<0||r>=n.columns)throw new RangeError("Submatrix indices are out of range")}function sy(n,e=0){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function jm(n,e){if(typeof e!="number")throw new TypeError(`${n} must be a number`)}function Cu(n){if(n.isEmpty())throw new Error("Empty matrix has no elements to index")}function a$(n){let e=sy(n.rows);for(let t=0;t<n.rows;++t)for(let i=0;i<n.columns;++i)e[t]+=n.get(t,i);return e}function l$(n){let e=sy(n.columns);for(let t=0;t<n.rows;++t)for(let i=0;i<n.columns;++i)e[i]+=n.get(t,i);return e}function u$(n){let e=0;for(let t=0;t<n.rows;t++)for(let i=0;i<n.columns;i++)e+=n.get(t,i);return e}function c$(n){let e=sy(n.rows,1);for(let t=0;t<n.rows;++t)for(let i=0;i<n.columns;++i)e[t]*=n.get(t,i);return e}function h$(n){let e=sy(n.columns,1);for(let t=0;t<n.rows;++t)for(let i=0;i<n.columns;++i)e[i]*=n.get(t,i);return e}function f$(n){let e=1;for(let t=0;t<n.rows;t++)for(let i=0;i<n.columns;i++)e*=n.get(t,i);return e}function d$(n,e,t){const i=n.rows,r=n.columns,s=[];for(let o=0;o<i;o++){let a=0,l=0,u=0;for(let f=0;f<r;f++)u=n.get(o,f)-t[o],a+=u,l+=u*u;e?s.push((l-a*a/r)/(r-1)):s.push((l-a*a/r)/r)}return s}function p$(n,e,t){const i=n.rows,r=n.columns,s=[];for(let o=0;o<r;o++){let a=0,l=0,u=0;for(let f=0;f<i;f++)u=n.get(f,o)-t[o],a+=u,l+=u*u;e?s.push((l-a*a/i)/(i-1)):s.push((l-a*a/i)/i)}return s}function m$(n,e,t){const i=n.rows,r=n.columns,s=i*r;let o=0,a=0,l=0;for(let u=0;u<i;u++)for(let f=0;f<r;f++)l=n.get(u,f)-t,o+=l,a+=l*l;return e?(a-o*o/s)/(s-1):(a-o*o/s)/s}function g$(n,e){for(let t=0;t<n.rows;t++)for(let i=0;i<n.columns;i++)n.set(t,i,n.get(t,i)-e[t])}function v$(n,e){for(let t=0;t<n.rows;t++)for(let i=0;i<n.columns;i++)n.set(t,i,n.get(t,i)-e[i])}function y$(n,e){for(let t=0;t<n.rows;t++)for(let i=0;i<n.columns;i++)n.set(t,i,n.get(t,i)-e)}function _$(n){const e=[];for(let t=0;t<n.rows;t++){let i=0;for(let r=0;r<n.columns;r++)i+=Math.pow(n.get(t,r),2)/(n.columns-1);e.push(Math.sqrt(i))}return e}function x$(n,e){for(let t=0;t<n.rows;t++)for(let i=0;i<n.columns;i++)n.set(t,i,n.get(t,i)/e[t])}function w$(n){const e=[];for(let t=0;t<n.columns;t++){let i=0;for(let r=0;r<n.rows;r++)i+=Math.pow(n.get(r,t),2)/(n.rows-1);e.push(Math.sqrt(i))}return e}function S$(n,e){for(let t=0;t<n.rows;t++)for(let i=0;i<n.columns;i++)n.set(t,i,n.get(t,i)/e[i])}function M$(n){const e=n.size-1;let t=0;for(let i=0;i<n.columns;i++)for(let r=0;r<n.rows;r++)t+=Math.pow(n.get(r,i),2)/e;return Math.sqrt(t)}function E$(n,e){for(let t=0;t<n.rows;t++)for(let i=0;i<n.columns;i++)n.set(t,i,n.get(t,i)/e)}class xt{static from1DArray(e,t,i){if(e*t!==i.length)throw new RangeError("data length does not match given dimensions");let s=new Oe(e,t);for(let o=0;o<e;o++)for(let a=0;a<t;a++)s.set(o,a,i[o*t+a]);return s}static rowVector(e){let t=new Oe(1,e.length);for(let i=0;i<e.length;i++)t.set(0,i,e[i]);return t}static columnVector(e){let t=new Oe(e.length,1);for(let i=0;i<e.length;i++)t.set(i,0,e[i]);return t}static zeros(e,t){return new Oe(e,t)}static ones(e,t){return new Oe(e,t).fill(1)}static rand(e,t,i={}){if(typeof i!="object")throw new TypeError("options must be an object");const{random:r=Math.random}=i;let s=new Oe(e,t);for(let o=0;o<e;o++)for(let a=0;a<t;a++)s.set(o,a,r());return s}static randInt(e,t,i={}){if(typeof i!="object")throw new TypeError("options must be an object");const{min:r=0,max:s=1e3,random:o=Math.random}=i;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(s))throw new TypeError("max must be an integer");if(r>=s)throw new RangeError("min must be smaller than max");let a=s-r,l=new Oe(e,t);for(let u=0;u<e;u++)for(let f=0;f<t;f++){let d=r+Math.round(o()*a);l.set(u,f,d)}return l}static eye(e,t,i){t===void 0&&(t=e),i===void 0&&(i=1);let r=Math.min(e,t),s=this.zeros(e,t);for(let o=0;o<r;o++)s.set(o,o,i);return s}static diag(e,t,i){let r=e.length;t===void 0&&(t=r),i===void 0&&(i=t);let s=Math.min(r,t,i),o=this.zeros(t,i);for(let a=0;a<s;a++)o.set(a,a,e[a]);return o}static min(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let i=e.rows,r=e.columns,s=new Oe(i,r);for(let o=0;o<i;o++)for(let a=0;a<r;a++)s.set(o,a,Math.min(e.get(o,a),t.get(o,a)));return s}static max(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let i=e.rows,r=e.columns,s=new this(i,r);for(let o=0;o<i;o++)for(let a=0;a<r;a++)s.set(o,a,Math.max(e.get(o,a),t.get(o,a)));return s}static checkMatrix(e){return xt.isMatrix(e)?e:new Oe(e)}static isMatrix(e){return e!=null&&e.klass==="Matrix"}get size(){return this.rows*this.columns}apply(e){if(typeof e!="function")throw new TypeError("callback must be a function");for(let t=0;t<this.rows;t++)for(let i=0;i<this.columns;i++)e.call(this,t,i);return this}to1DArray(){let e=[];for(let t=0;t<this.rows;t++)for(let i=0;i<this.columns;i++)e.push(this.get(t,i));return e}to2DArray(){let e=[];for(let t=0;t<this.rows;t++){e.push([]);for(let i=0;i<this.columns;i++)e[t].push(this.get(t,i))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let e=0;e<this.rows;e++)if(this.get(e,e)!==0)return!1;return!0}isEchelonForm(){let e=0,t=0,i=-1,r=!0,s=!1;for(;e<this.rows&&r;){for(t=0,s=!1;t<this.columns&&s===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>i?(s=!0,i=t):(r=!1,s=!0);e++}return r}isReducedEchelonForm(){let e=0,t=0,i=-1,r=!0,s=!1;for(;e<this.rows&&r;){for(t=0,s=!1;t<this.columns&&s===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>i?(s=!0,i=t):(r=!1,s=!0);for(let o=t+1;o<this.rows;o++)this.get(e,o)!==0&&(r=!1);e++}return r}echelonForm(){let e=this.clone(),t=0,i=0;for(;t<e.rows&&i<e.columns;){let r=t;for(let s=t;s<e.rows;s++)e.get(s,i)>e.get(r,i)&&(r=s);if(e.get(r,i)===0)i++;else{e.swapRows(t,r);let s=e.get(t,i);for(let o=i;o<e.columns;o++)e.set(t,o,e.get(t,o)/s);for(let o=t+1;o<e.rows;o++){let a=e.get(o,i)/e.get(t,i);e.set(o,i,0);for(let l=i+1;l<e.columns;l++)e.set(o,l,e.get(o,l)-e.get(t,l)*a)}t++,i++}}return e}reducedEchelonForm(){let e=this.echelonForm(),t=e.columns,i=e.rows,r=i-1;for(;r>=0;)if(e.maxRow(r)===0)r--;else{let s=0,o=!1;for(;s<i&&o===!1;)e.get(r,s)===1?o=!0:s++;for(let a=0;a<r;a++){let l=e.get(a,s);for(let u=s;u<t;u++){let f=e.get(a,u)-l*e.get(r,u);e.set(a,u,f)}}r--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{rows:t=1,columns:i=1}=e;if(!Number.isInteger(t)||t<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(i)||i<=0)throw new TypeError("columns must be a positive integer");let r=new Oe(this.rows*t,this.columns*i);for(let s=0;s<t;s++)for(let o=0;o<i;o++)r.setSubMatrix(this,this.rows*s,this.columns*o);return r}fill(e){for(let t=0;t<this.rows;t++)for(let i=0;i<this.columns;i++)this.set(t,i,e);return this}neg(){return this.mulS(-1)}getRow(e){zr(this,e);let t=[];for(let i=0;i<this.columns;i++)t.push(this.get(e,i));return t}getRowVector(e){return Oe.rowVector(this.getRow(e))}setRow(e,t){zr(this,e),t=Du(this,t);for(let i=0;i<this.columns;i++)this.set(e,i,t[i]);return this}swapRows(e,t){zr(this,e),zr(this,t);for(let i=0;i<this.columns;i++){let r=this.get(e,i);this.set(e,i,this.get(t,i)),this.set(t,i,r)}return this}getColumn(e){Br(this,e);let t=[];for(let i=0;i<this.rows;i++)t.push(this.get(i,e));return t}getColumnVector(e){return Oe.columnVector(this.getColumn(e))}setColumn(e,t){Br(this,e),t=Ou(this,t);for(let i=0;i<this.rows;i++)this.set(i,e,t[i]);return this}swapColumns(e,t){Br(this,e),Br(this,t);for(let i=0;i<this.rows;i++){let r=this.get(i,e);this.set(i,e,this.get(i,t)),this.set(i,t,r)}return this}addRowVector(e){e=Du(this,e);for(let t=0;t<this.rows;t++)for(let i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)+e[i]);return this}subRowVector(e){e=Du(this,e);for(let t=0;t<this.rows;t++)for(let i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)-e[i]);return this}mulRowVector(e){e=Du(this,e);for(let t=0;t<this.rows;t++)for(let i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)*e[i]);return this}divRowVector(e){e=Du(this,e);for(let t=0;t<this.rows;t++)for(let i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)/e[i]);return this}addColumnVector(e){e=Ou(this,e);for(let t=0;t<this.rows;t++)for(let i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)+e[t]);return this}subColumnVector(e){e=Ou(this,e);for(let t=0;t<this.rows;t++)for(let i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)-e[t]);return this}mulColumnVector(e){e=Ou(this,e);for(let t=0;t<this.rows;t++)for(let i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)*e[t]);return this}divColumnVector(e){e=Ou(this,e);for(let t=0;t<this.rows;t++)for(let i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)/e[t]);return this}mulRow(e,t){zr(this,e);for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)*t);return this}mulColumn(e,t){Br(this,e);for(let i=0;i<this.rows;i++)this.set(i,e,this.get(i,e)*t);return this}max(e){if(this.isEmpty())return NaN;switch(e){case"row":{const t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)>t[i]&&(t[i]=this.get(i,r));return t}case"column":{const t=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)>t[r]&&(t[r]=this.get(i,r));return t}case void 0:{let t=this.get(0,0);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)>t&&(t=this.get(i,r));return t}default:throw new Error(`invalid option: ${e}`)}}maxIndex(){Cu(this);let e=this.get(0,0),t=[0,0];for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)>e&&(e=this.get(i,r),t[0]=i,t[1]=r);return t}min(e){if(this.isEmpty())return NaN;switch(e){case"row":{const t=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)<t[i]&&(t[i]=this.get(i,r));return t}case"column":{const t=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)<t[r]&&(t[r]=this.get(i,r));return t}case void 0:{let t=this.get(0,0);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)<t&&(t=this.get(i,r));return t}default:throw new Error(`invalid option: ${e}`)}}minIndex(){Cu(this);let e=this.get(0,0),t=[0,0];for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)<e&&(e=this.get(i,r),t[0]=i,t[1]=r);return t}maxRow(e){if(zr(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let i=1;i<this.columns;i++)this.get(e,i)>t&&(t=this.get(e,i));return t}maxRowIndex(e){zr(this,e),Cu(this);let t=this.get(e,0),i=[e,0];for(let r=1;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r),i[1]=r);return i}minRow(e){if(zr(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let i=1;i<this.columns;i++)this.get(e,i)<t&&(t=this.get(e,i));return t}minRowIndex(e){zr(this,e),Cu(this);let t=this.get(e,0),i=[e,0];for(let r=1;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r),i[1]=r);return i}maxColumn(e){if(Br(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let i=1;i<this.rows;i++)this.get(i,e)>t&&(t=this.get(i,e));return t}maxColumnIndex(e){Br(this,e),Cu(this);let t=this.get(0,e),i=[0,e];for(let r=1;r<this.rows;r++)this.get(r,e)>t&&(t=this.get(r,e),i[0]=r);return i}minColumn(e){if(Br(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let i=1;i<this.rows;i++)this.get(i,e)<t&&(t=this.get(i,e));return t}minColumnIndex(e){Br(this,e),Cu(this);let t=this.get(0,e),i=[0,e];for(let r=1;r<this.rows;r++)this.get(r,e)<t&&(t=this.get(r,e),i[0]=r);return i}diag(){let e=Math.min(this.rows,this.columns),t=[];for(let i=0;i<e;i++)t.push(this.get(i,i));return t}norm(e="frobenius"){switch(e){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${e}`)}}cumulativeSum(){let e=0;for(let t=0;t<this.rows;t++)for(let i=0;i<this.columns;i++)e+=this.get(t,i),this.set(t,i,e);return this}dot(e){xt.isMatrix(e)&&(e=e.to1DArray());let t=this.to1DArray();if(t.length!==e.length)throw new RangeError("vectors do not have the same size");let i=0;for(let r=0;r<t.length;r++)i+=t[r]*e[r];return i}mmul(e){e=Oe.checkMatrix(e);let t=this.rows,i=this.columns,r=e.columns,s=new Oe(t,r),o=new Float64Array(i);for(let a=0;a<r;a++){for(let l=0;l<i;l++)o[l]=e.get(l,a);for(let l=0;l<t;l++){let u=0;for(let f=0;f<i;f++)u+=this.get(l,f)*o[f];s.set(l,a,u)}}return s}strassen2x2(e){e=Oe.checkMatrix(e);let t=new Oe(2,2);const i=this.get(0,0),r=e.get(0,0),s=this.get(0,1),o=e.get(0,1),a=this.get(1,0),l=e.get(1,0),u=this.get(1,1),f=e.get(1,1),d=(i+u)*(r+f),p=(a+u)*r,g=i*(o-f),v=u*(l-r),x=(i+s)*f,_=(a-i)*(r+o),m=(s-u)*(l+f),w=d+v-x+m,S=g+x,b=p+v,R=d-p+g+_;return t.set(0,0,w),t.set(0,1,S),t.set(1,0,b),t.set(1,1,R),t}strassen3x3(e){e=Oe.checkMatrix(e);let t=new Oe(3,3);const i=this.get(0,0),r=this.get(0,1),s=this.get(0,2),o=this.get(1,0),a=this.get(1,1),l=this.get(1,2),u=this.get(2,0),f=this.get(2,1),d=this.get(2,2),p=e.get(0,0),g=e.get(0,1),v=e.get(0,2),x=e.get(1,0),_=e.get(1,1),m=e.get(1,2),w=e.get(2,0),S=e.get(2,1),b=e.get(2,2),R=(i+r+s-o-a-f-d)*_,A=(i-o)*(-g+_),C=a*(-p+g+x-_-m-w+b),L=(-i+o+a)*(p-g+_),I=(o+a)*(-p+g),E=i*p,N=(-i+u+f)*(p-v+m),z=(-i+u)*(v-m),O=(u+f)*(-p+v),q=(i+r+s-a-l-u-f)*m,j=f*(-p+v+x-_-m-w+S),Q=(-s+f+d)*(_+w-S),oe=(s-d)*(_-S),k=s*w,W=(f+d)*(-w+S),G=(-s+a+l)*(m+w-b),ne=(s-l)*(m-b),me=(a+l)*(-w+b),_e=r*x,J=l*S,pe=o*v,Me=u*g,de=d*b,Qe=E+k+_e,lt=R+L+I+E+Q+k+W,K=E+N+O+q+k+G+me,tt=A+C+L+E+k+G+ne,he=A+L+I+E+J,we=k+G+ne+me+pe,ye=E+N+z+j+Q+oe+k,Ce=Q+oe+k+W+Me,be=E+N+z+O+de;return t.set(0,0,Qe),t.set(0,1,lt),t.set(0,2,K),t.set(1,0,tt),t.set(1,1,he),t.set(1,2,we),t.set(2,0,ye),t.set(2,1,Ce),t.set(2,2,be),t}mmulStrassen(e){e=Oe.checkMatrix(e);let t=this.clone(),i=t.rows,r=t.columns,s=e.rows,o=e.columns;r!==s&&console.warn(`Multiplying ${i} x ${r} and ${s} x ${o} matrix: dimensions do not match.`);function a(d,p,g){let v=d.rows,x=d.columns;if(v===p&&x===g)return d;{let _=xt.zeros(p,g);return _=_.setSubMatrix(d,0,0),_}}let l=Math.max(i,s),u=Math.max(r,o);t=a(t,l,u),e=a(e,l,u);function f(d,p,g,v){if(g<=512||v<=512)return d.mmul(p);g%2===1&&v%2===1?(d=a(d,g+1,v+1),p=a(p,g+1,v+1)):g%2===1?(d=a(d,g+1,v),p=a(p,g+1,v)):v%2===1&&(d=a(d,g,v+1),p=a(p,g,v+1));let x=parseInt(d.rows/2,10),_=parseInt(d.columns/2,10),m=d.subMatrix(0,x-1,0,_-1),w=p.subMatrix(0,x-1,0,_-1),S=d.subMatrix(0,x-1,_,d.columns-1),b=p.subMatrix(0,x-1,_,p.columns-1),R=d.subMatrix(x,d.rows-1,0,_-1),A=p.subMatrix(x,p.rows-1,0,_-1),C=d.subMatrix(x,d.rows-1,_,d.columns-1),L=p.subMatrix(x,p.rows-1,_,p.columns-1),I=f(xt.add(m,C),xt.add(w,L),x,_),E=f(xt.add(R,C),w,x,_),N=f(m,xt.sub(b,L),x,_),z=f(C,xt.sub(A,w),x,_),O=f(xt.add(m,S),L,x,_),q=f(xt.sub(R,m),xt.add(w,b),x,_),j=f(xt.sub(S,C),xt.add(A,L),x,_),Q=xt.add(I,z);Q.sub(O),Q.add(j);let oe=xt.add(N,O),k=xt.add(E,z),W=xt.sub(I,E);W.add(N),W.add(q);let G=xt.zeros(2*Q.rows,2*Q.columns);return G=G.setSubMatrix(Q,0,0),G=G.setSubMatrix(oe,Q.rows,0),G=G.setSubMatrix(k,0,Q.columns),G=G.setSubMatrix(W,Q.rows,Q.columns),G.subMatrix(0,g-1,0,v-1)}return f(t,e,l,u)}scaleRows(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:t=0,max:i=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(t>=i)throw new RangeError("min must be smaller than max");let r=new Oe(this.rows,this.columns);for(let s=0;s<this.rows;s++){const o=this.getRow(s);o.length>0&&eP(o,{min:t,max:i,output:o}),r.setRow(s,o)}return r}scaleColumns(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:t=0,max:i=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(t>=i)throw new RangeError("min must be smaller than max");let r=new Oe(this.rows,this.columns);for(let s=0;s<this.columns;s++){const o=this.getColumn(s);o.length&&eP(o,{min:t,max:i,output:o}),r.setColumn(s,o)}return r}flipRows(){const e=Math.ceil(this.columns/2);for(let t=0;t<this.rows;t++)for(let i=0;i<e;i++){let r=this.get(t,i),s=this.get(t,this.columns-1-i);this.set(t,i,s),this.set(t,this.columns-1-i,r)}return this}flipColumns(){const e=Math.ceil(this.rows/2);for(let t=0;t<this.columns;t++)for(let i=0;i<e;i++){let r=this.get(i,t),s=this.get(this.rows-1-i,t);this.set(i,t,s),this.set(this.rows-1-i,t,r)}return this}kroneckerProduct(e){e=Oe.checkMatrix(e);let t=this.rows,i=this.columns,r=e.rows,s=e.columns,o=new Oe(t*r,i*s);for(let a=0;a<t;a++)for(let l=0;l<i;l++)for(let u=0;u<r;u++)for(let f=0;f<s;f++)o.set(r*a+u,s*l+f,this.get(a,l)*e.get(u,f));return o}kroneckerSum(e){if(e=Oe.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let t=this.rows,i=e.rows,r=this.kroneckerProduct(Oe.eye(i,i)),s=Oe.eye(t,t).kroneckerProduct(e);return r.add(s)}transpose(){let e=new Oe(this.columns,this.rows);for(let t=0;t<this.rows;t++)for(let i=0;i<this.columns;i++)e.set(i,t,this.get(t,i));return e}sortRows(e=nP){for(let t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}sortColumns(e=nP){for(let t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}subMatrix(e,t,i,r){s1(this,e,t,i,r);let s=new Oe(t-e+1,r-i+1);for(let o=e;o<=t;o++)for(let a=i;a<=r;a++)s.set(o-e,a-i,this.get(o,a));return s}subMatrixRow(e,t,i){if(t===void 0&&(t=0),i===void 0&&(i=this.columns-1),t>i||t<0||t>=this.columns||i<0||i>=this.columns)throw new RangeError("Argument out of range");let r=new Oe(e.length,i-t+1);for(let s=0;s<e.length;s++)for(let o=t;o<=i;o++){if(e[s]<0||e[s]>=this.rows)throw new RangeError(`Row index out of range: ${e[s]}`);r.set(s,o-t,this.get(e[s],o))}return r}subMatrixColumn(e,t,i){if(t===void 0&&(t=0),i===void 0&&(i=this.rows-1),t>i||t<0||t>=this.rows||i<0||i>=this.rows)throw new RangeError("Argument out of range");let r=new Oe(i-t+1,e.length);for(let s=0;s<e.length;s++)for(let o=t;o<=i;o++){if(e[s]<0||e[s]>=this.columns)throw new RangeError(`Column index out of range: ${e[s]}`);r.set(o-t,s,this.get(o,e[s]))}return r}setSubMatrix(e,t,i){if(e=Oe.checkMatrix(e),e.isEmpty())return this;let r=t+e.rows-1,s=i+e.columns-1;s1(this,t,r,i,s);for(let o=0;o<e.rows;o++)for(let a=0;a<e.columns;a++)this.set(t+o,i+a,e.get(o,a));return this}selection(e,t){wE(this,e),SE(this,t);let i=new Oe(e.length,t.length);for(let r=0;r<e.length;r++){let s=e[r];for(let o=0;o<t.length;o++){let a=t[o];i.set(r,o,this.get(s,a))}}return i}trace(){let e=Math.min(this.rows,this.columns),t=0;for(let i=0;i<e;i++)t+=this.get(i,i);return t}clone(){return this.constructor.copy(this,new Oe(this.rows,this.columns))}static copy(e,t){for(const[i,r,s]of e.entries())t.set(i,r,s);return t}sum(e){switch(e){case"row":return a$(this);case"column":return l$(this);case void 0:return u$(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return c$(this);case"column":return h$(this);case void 0:return f$(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){const t=this.sum(e);switch(e){case"row":{for(let i=0;i<this.rows;i++)t[i]/=this.columns;return t}case"column":{for(let i=0;i<this.columns;i++)t[i]/=this.rows;return t}case void 0:return t/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");const{unbiased:i=!0,mean:r=this.mean(e)}=t;if(typeof i!="boolean")throw new TypeError("unbiased must be a boolean");switch(e){case"row":{if(!Zi.isAnyArray(r))throw new TypeError("mean must be an array");return d$(this,i,r)}case"column":{if(!Zi.isAnyArray(r))throw new TypeError("mean must be an array");return p$(this,i,r)}case void 0:{if(typeof r!="number")throw new TypeError("mean must be a number");return m$(this,i,r)}default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,t){typeof e=="object"&&(t=e,e=void 0);const i=this.variance(e,t);if(e===void 0)return Math.sqrt(i);for(let r=0;r<i.length;r++)i[r]=Math.sqrt(i[r]);return i}center(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");const{center:i=this.mean(e)}=t;switch(e){case"row":{if(!Zi.isAnyArray(i))throw new TypeError("center must be an array");return g$(this,i),this}case"column":{if(!Zi.isAnyArray(i))throw new TypeError("center must be an array");return v$(this,i),this}case void 0:{if(typeof i!="number")throw new TypeError("center must be a number");return y$(this,i),this}default:throw new Error(`invalid option: ${e}`)}}scale(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");let i=t.scale;switch(e){case"row":{if(i===void 0)i=_$(this);else if(!Zi.isAnyArray(i))throw new TypeError("scale must be an array");return x$(this,i),this}case"column":{if(i===void 0)i=w$(this);else if(!Zi.isAnyArray(i))throw new TypeError("scale must be an array");return S$(this,i),this}case void 0:{if(i===void 0)i=M$(this);else if(typeof i!="number")throw new TypeError("scale must be a number");return E$(this,i),this}default:throw new Error(`invalid option: ${e}`)}}toString(e){return KD(this,e)}[Symbol.iterator](){return this.entries()}*entries(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)yield[e,t,this.get(e,t)]}*values(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)yield this.get(e,t)}}xt.prototype.klass="Matrix";typeof Symbol<"u"&&(xt.prototype[Symbol.for("nodejs.util.inspect.custom")]=i$);function nP(n,e){return n-e}function b$(n){return n.every(e=>typeof e=="number")}xt.random=xt.rand;xt.randomInt=xt.randInt;xt.diagonal=xt.diag;xt.prototype.diagonal=xt.prototype.diag;xt.identity=xt.eye;xt.prototype.negate=xt.prototype.neg;xt.prototype.tensorProduct=xt.prototype.kroneckerProduct;var od,o1,Ac;let Oe=(Ac=class extends xt{constructor(t,i){super();g_(this,od);wp(this,"data");if(Ac.isMatrix(t))v_(this,od,o1).call(this,t.rows,t.columns),Ac.copy(t,this);else if(Number.isInteger(t)&&t>=0)v_(this,od,o1).call(this,t,i);else if(Zi.isAnyArray(t)){const r=t;if(t=r.length,i=t?r[0].length:0,typeof i!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let s=0;s<t;s++){if(r[s].length!==i)throw new RangeError("Inconsistent array dimensions");if(!b$(r[s]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(r[s]))}this.rows=t,this.columns=i}else throw new TypeError("First argument must be a positive number or an array")}set(t,i,r){return this.data[t][i]=r,this}get(t,i){return this.data[t][i]}removeRow(t){return zr(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,i){return i===void 0&&(i=t,t=this.rows),zr(this,t,!0),i=Float64Array.from(Du(this,i)),this.data.splice(t,0,i),this.rows+=1,this}removeColumn(t){Br(this,t);for(let i=0;i<this.rows;i++){const r=new Float64Array(this.columns-1);for(let s=0;s<t;s++)r[s]=this.data[i][s];for(let s=t+1;s<this.columns;s++)r[s-1]=this.data[i][s];this.data[i]=r}return this.columns-=1,this}addColumn(t,i){typeof i>"u"&&(i=t,t=this.columns),Br(this,t,!0),i=Ou(this,i);for(let r=0;r<this.rows;r++){const s=new Float64Array(this.columns+1);let o=0;for(;o<t;o++)s[o]=this.data[r][o];for(s[o++]=i[r];o<this.columns+1;o++)s[o]=this.data[r][o-1];this.data[r]=s}return this.columns+=1,this}},od=new WeakSet,o1=function(t,i){if(this.data=[],Number.isInteger(i)&&i>=0)for(let r=0;r<t;r++)this.data.push(new Float64Array(i));else throw new TypeError("nColumns must be a positive integer");this.rows=t,this.columns=i},Ac);o$(xt,Oe);var Ei;const Yv=class Yv extends xt{constructor(t){super();g_(this,Ei,void 0);if(Oe.isMatrix(t)){if(!t.isSymmetric())throw new TypeError("not symmetric data");Sp(this,Ei,Oe.copy(t,new Oe(t.rows,t.rows)))}else if(Number.isInteger(t)&&t>=0)Sp(this,Ei,new Oe(t,t));else if(Sp(this,Ei,new Oe(t)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return ts(this,Ei).size}get rows(){return ts(this,Ei).rows}get columns(){return ts(this,Ei).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(t){return Oe.isMatrix(t)&&t.klassType==="SymmetricMatrix"}static zeros(t){return new this(t)}static ones(t){return new this(t).fill(1)}clone(){const t=new Yv(this.diagonalSize);for(const[i,r,s]of this.upperRightEntries())t.set(i,r,s);return t}toMatrix(){return new Oe(this)}get(t,i){return ts(this,Ei).get(t,i)}set(t,i,r){return ts(this,Ei).set(t,i,r),ts(this,Ei).set(i,t,r),this}removeCross(t){return ts(this,Ei).removeRow(t),ts(this,Ei).removeColumn(t),this}addCross(t,i){i===void 0&&(i=t,t=this.diagonalSize);const r=i.slice();return r.splice(t,1),ts(this,Ei).addRow(t,r),ts(this,Ei).addColumn(t,i),this}applyMask(t){if(t.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const i=[];for(const[r,s]of t.entries())s||i.push(r);i.reverse();for(const r of i)this.removeCross(r);return this}toCompact(){const{diagonalSize:t}=this,i=new Array(t*(t+1)/2);for(let r=0,s=0,o=0;o<i.length;o++)i[o]=this.get(s,r),++r>=t&&(r=++s);return i}static fromCompact(t){const i=t.length,r=(Math.sqrt(8*i+1)-1)/2;if(!Number.isInteger(r))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(t)}`);const s=new Yv(r);for(let o=0,a=0,l=0;l<i;l++)s.set(o,a,t[l]),++o>=r&&(o=++a);return s}*upperRightEntries(){for(let t=0,i=0;t<this.diagonalSize;void 0){const r=this.get(t,i);yield[t,i,r],++i>=this.diagonalSize&&(i=++t)}}*upperRightValues(){for(let t=0,i=0;t<this.diagonalSize;void 0)yield this.get(t,i),++i>=this.diagonalSize&&(i=++t)}};Ei=new WeakMap;let wl=Yv;wl.prototype.klassType="SymmetricMatrix";class oy extends wl{static isDistanceMatrix(e){return wl.isSymmetricMatrix(e)&&e.klassSubType==="DistanceMatrix"}constructor(e){if(super(e),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(e,t,i){return e===t&&(i=0),super.set(e,t,i)}addCross(e,t){return t===void 0&&(t=e,e=this.diagonalSize),t=t.slice(),t[e]=0,super.addCross(e,t)}toSymmetricMatrix(){return new wl(this)}clone(){const e=new oy(this.diagonalSize);for(const[t,i,r]of this.upperRightEntries())t!==i&&e.set(t,i,r);return e}toCompact(){const{diagonalSize:e}=this,t=(e-1)*e/2,i=new Array(t);for(let r=1,s=0,o=0;o<i.length;o++)i[o]=this.get(s,r),++r>=e&&(r=++s+1);return i}static fromCompact(e){const t=e.length,i=(Math.sqrt(8*t+1)+1)/2;if(!Number.isInteger(i))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(e)}`);const r=new this(i);for(let s=1,o=0,a=0;a<t;a++)r.set(s,o,e[a]),++s>=i&&(s=++o+1);return r}}oy.prototype.klassSubType="DistanceMatrix";class ko extends xt{constructor(e,t,i){super(),this.matrix=e,this.rows=t,this.columns=i}}class T$ extends ko{constructor(e,t){Br(e,t),super(e,e.rows,1),this.column=t}set(e,t,i){return this.matrix.set(e,this.column,i),this}get(e){return this.matrix.get(e,this.column)}}class A$ extends ko{constructor(e,t){SE(e,t),super(e,e.rows,t.length),this.columnIndices=t}set(e,t,i){return this.matrix.set(e,this.columnIndices[t],i),this}get(e,t){return this.matrix.get(e,this.columnIndices[t])}}class C$ extends ko{constructor(e){super(e,e.rows,e.columns)}set(e,t,i){return this.matrix.set(e,this.columns-t-1,i),this}get(e,t){return this.matrix.get(e,this.columns-t-1)}}class R$ extends ko{constructor(e){super(e,e.rows,e.columns)}set(e,t,i){return this.matrix.set(this.rows-e-1,t,i),this}get(e,t){return this.matrix.get(this.rows-e-1,t)}}class P$ extends ko{constructor(e,t){zr(e,t),super(e,1,e.columns),this.row=t}set(e,t,i){return this.matrix.set(this.row,t,i),this}get(e,t){return this.matrix.get(this.row,t)}}class I$ extends ko{constructor(e,t){wE(e,t),super(e,t.length,e.columns),this.rowIndices=t}set(e,t,i){return this.matrix.set(this.rowIndices[e],t,i),this}get(e,t){return this.matrix.get(this.rowIndices[e],t)}}class Ng extends ko{constructor(e,t,i){wE(e,t),SE(e,i),super(e,t.length,i.length),this.rowIndices=t,this.columnIndices=i}set(e,t,i){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],i),this}get(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}}class L$ extends ko{constructor(e,t,i,r,s){s1(e,t,i,r,s),super(e,i-t+1,s-r+1),this.startRow=t,this.startColumn=r}set(e,t,i){return this.matrix.set(this.startRow+e,this.startColumn+t,i),this}get(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}}class N$ extends ko{constructor(e){super(e,e.columns,e.rows)}set(e,t,i){return this.matrix.set(t,e,i),this}get(e,t){return this.matrix.get(t,e)}}class JD extends xt{constructor(e,t={}){const{rows:i=1}=t;if(e.length%i!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=i,this.columns=e.length/i,this.data=e}set(e,t,i){let r=this._calculateIndex(e,t);return this.data[r]=i,this}get(e,t){let i=this._calculateIndex(e,t);return this.data[i]}_calculateIndex(e,t){return e*this.columns+t}}class Tr extends xt{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,t,i){return this.data[e][t]=i,this}get(e,t){return this.data[e][t]}}function D$(n,e){if(Zi.isAnyArray(n))return n[0]&&Zi.isAnyArray(n[0])?new Tr(n):new JD(n,e);throw new Error("the argument is not an array")}class ay{constructor(e){e=Tr.checkMatrix(e);let t=e.clone(),i=t.rows,r=t.columns,s=new Float64Array(i),o=1,a,l,u,f,d,p,g,v,x;for(a=0;a<i;a++)s[a]=a;for(v=new Float64Array(i),l=0;l<r;l++){for(a=0;a<i;a++)v[a]=t.get(a,l);for(a=0;a<i;a++){for(x=Math.min(a,l),d=0,u=0;u<x;u++)d+=t.get(a,u)*v[u];v[a]-=d,t.set(a,l,v[a])}for(f=l,a=l+1;a<i;a++)Math.abs(v[a])>Math.abs(v[f])&&(f=a);if(f!==l){for(u=0;u<r;u++)p=t.get(f,u),t.set(f,u,t.get(l,u)),t.set(l,u,p);g=s[f],s[f]=s[l],s[l]=g,o=-o}if(l<i&&t.get(l,l)!==0)for(a=l+1;a<i;a++)t.set(a,l,t.get(a,l)/t.get(l,l))}this.LU=t,this.pivotVector=s,this.pivotSign=o}isSingular(){let e=this.LU,t=e.columns;for(let i=0;i<t;i++)if(e.get(i,i)===0)return!0;return!1}solve(e){e=Oe.checkMatrix(e);let t=this.LU;if(t.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let r=e.columns,s=e.subMatrixRow(this.pivotVector,0,r-1),o=t.columns,a,l,u;for(u=0;u<o;u++)for(a=u+1;a<o;a++)for(l=0;l<r;l++)s.set(a,l,s.get(a,l)-s.get(u,l)*t.get(a,u));for(u=o-1;u>=0;u--){for(l=0;l<r;l++)s.set(u,l,s.get(u,l)/t.get(u,u));for(a=0;a<u;a++)for(l=0;l<r;l++)s.set(a,l,s.get(a,l)-s.get(u,l)*t.get(a,u))}return s}get determinant(){let e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");let t=this.pivotSign,i=e.columns;for(let r=0;r<i;r++)t*=e.get(r,r);return t}get lowerTriangularMatrix(){let e=this.LU,t=e.rows,i=e.columns,r=new Oe(t,i);for(let s=0;s<t;s++)for(let o=0;o<i;o++)s>o?r.set(s,o,e.get(s,o)):s===o?r.set(s,o,1):r.set(s,o,0);return r}get upperTriangularMatrix(){let e=this.LU,t=e.rows,i=e.columns,r=new Oe(t,i);for(let s=0;s<t;s++)for(let o=0;o<i;o++)s<=o?r.set(s,o,e.get(s,o)):r.set(s,o,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function po(n,e){let t=0;return Math.abs(n)>Math.abs(e)?(t=e/n,Math.abs(n)*Math.sqrt(1+t*t)):e!==0?(t=n/e,Math.abs(e)*Math.sqrt(1+t*t)):0}class ME{constructor(e){e=Tr.checkMatrix(e);let t=e.clone(),i=e.rows,r=e.columns,s=new Float64Array(r),o,a,l,u;for(l=0;l<r;l++){let f=0;for(o=l;o<i;o++)f=po(f,t.get(o,l));if(f!==0){for(t.get(l,l)<0&&(f=-f),o=l;o<i;o++)t.set(o,l,t.get(o,l)/f);for(t.set(l,l,t.get(l,l)+1),a=l+1;a<r;a++){for(u=0,o=l;o<i;o++)u+=t.get(o,l)*t.get(o,a);for(u=-u/t.get(l,l),o=l;o<i;o++)t.set(o,a,t.get(o,a)+u*t.get(o,l))}}s[l]=-f}this.QR=t,this.Rdiag=s}solve(e){e=Oe.checkMatrix(e);let t=this.QR,i=t.rows;if(e.rows!==i)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let r=e.columns,s=e.clone(),o=t.columns,a,l,u,f;for(u=0;u<o;u++)for(l=0;l<r;l++){for(f=0,a=u;a<i;a++)f+=t.get(a,u)*s.get(a,l);for(f=-f/t.get(u,u),a=u;a<i;a++)s.set(a,l,s.get(a,l)+f*t.get(a,u))}for(u=o-1;u>=0;u--){for(l=0;l<r;l++)s.set(u,l,s.get(u,l)/this.Rdiag[u]);for(a=0;a<u;a++)for(l=0;l<r;l++)s.set(a,l,s.get(a,l)-s.get(u,l)*t.get(a,u))}return s.subMatrix(0,o-1,0,r-1)}isFullRank(){let e=this.QR.columns;for(let t=0;t<e;t++)if(this.Rdiag[t]===0)return!1;return!0}get upperTriangularMatrix(){let e=this.QR,t=e.columns,i=new Oe(t,t),r,s;for(r=0;r<t;r++)for(s=0;s<t;s++)r<s?i.set(r,s,e.get(r,s)):r===s?i.set(r,s,this.Rdiag[r]):i.set(r,s,0);return i}get orthogonalMatrix(){let e=this.QR,t=e.rows,i=e.columns,r=new Oe(t,i),s,o,a,l;for(a=i-1;a>=0;a--){for(s=0;s<t;s++)r.set(s,a,0);for(r.set(a,a,1),o=a;o<i;o++)if(e.get(a,a)!==0){for(l=0,s=a;s<t;s++)l+=e.get(s,a)*r.get(s,o);for(l=-l/e.get(a,a),s=a;s<t;s++)r.set(s,o,r.get(s,o)+l*e.get(s,a))}}return r}}class Vc{constructor(e,t={}){if(e=Tr.checkMatrix(e),e.isEmpty())throw new Error("Matrix must be non-empty");let i=e.rows,r=e.columns;const{computeLeftSingularVectors:s=!0,computeRightSingularVectors:o=!0,autoTranspose:a=!1}=t;let l=!!s,u=!!o,f=!1,d;if(i<r)if(!a)d=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{d=e.transpose(),i=d.rows,r=d.columns,f=!0;let E=l;l=u,u=E}else d=e.clone();let p=Math.min(i,r),g=Math.min(i+1,r),v=new Float64Array(g),x=new Oe(i,p),_=new Oe(r,r),m=new Float64Array(r),w=new Float64Array(i),S=new Float64Array(g);for(let E=0;E<g;E++)S[E]=E;let b=Math.min(i-1,r),R=Math.max(0,Math.min(r-2,i)),A=Math.max(b,R);for(let E=0;E<A;E++){if(E<b){v[E]=0;for(let N=E;N<i;N++)v[E]=po(v[E],d.get(N,E));if(v[E]!==0){d.get(E,E)<0&&(v[E]=-v[E]);for(let N=E;N<i;N++)d.set(N,E,d.get(N,E)/v[E]);d.set(E,E,d.get(E,E)+1)}v[E]=-v[E]}for(let N=E+1;N<r;N++){if(E<b&&v[E]!==0){let z=0;for(let O=E;O<i;O++)z+=d.get(O,E)*d.get(O,N);z=-z/d.get(E,E);for(let O=E;O<i;O++)d.set(O,N,d.get(O,N)+z*d.get(O,E))}m[N]=d.get(E,N)}if(l&&E<b)for(let N=E;N<i;N++)x.set(N,E,d.get(N,E));if(E<R){m[E]=0;for(let N=E+1;N<r;N++)m[E]=po(m[E],m[N]);if(m[E]!==0){m[E+1]<0&&(m[E]=0-m[E]);for(let N=E+1;N<r;N++)m[N]/=m[E];m[E+1]+=1}if(m[E]=-m[E],E+1<i&&m[E]!==0){for(let N=E+1;N<i;N++)w[N]=0;for(let N=E+1;N<i;N++)for(let z=E+1;z<r;z++)w[N]+=m[z]*d.get(N,z);for(let N=E+1;N<r;N++){let z=-m[N]/m[E+1];for(let O=E+1;O<i;O++)d.set(O,N,d.get(O,N)+z*w[O])}}if(u)for(let N=E+1;N<r;N++)_.set(N,E,m[N])}}let C=Math.min(r,i+1);if(b<r&&(v[b]=d.get(b,b)),i<C&&(v[C-1]=0),R+1<C&&(m[R]=d.get(R,C-1)),m[C-1]=0,l){for(let E=b;E<p;E++){for(let N=0;N<i;N++)x.set(N,E,0);x.set(E,E,1)}for(let E=b-1;E>=0;E--)if(v[E]!==0){for(let N=E+1;N<p;N++){let z=0;for(let O=E;O<i;O++)z+=x.get(O,E)*x.get(O,N);z=-z/x.get(E,E);for(let O=E;O<i;O++)x.set(O,N,x.get(O,N)+z*x.get(O,E))}for(let N=E;N<i;N++)x.set(N,E,-x.get(N,E));x.set(E,E,1+x.get(E,E));for(let N=0;N<E-1;N++)x.set(N,E,0)}else{for(let N=0;N<i;N++)x.set(N,E,0);x.set(E,E,1)}}if(u)for(let E=r-1;E>=0;E--){if(E<R&&m[E]!==0)for(let N=E+1;N<r;N++){let z=0;for(let O=E+1;O<r;O++)z+=_.get(O,E)*_.get(O,N);z=-z/_.get(E+1,E);for(let O=E+1;O<r;O++)_.set(O,N,_.get(O,N)+z*_.get(O,E))}for(let N=0;N<r;N++)_.set(N,E,0);_.set(E,E,1)}let L=C-1,I=Number.EPSILON;for(;C>0;){let E,N;for(E=C-2;E>=-1&&E!==-1;E--){const z=Number.MIN_VALUE+I*Math.abs(v[E]+Math.abs(v[E+1]));if(Math.abs(m[E])<=z||Number.isNaN(m[E])){m[E]=0;break}}if(E===C-2)N=4;else{let z;for(z=C-1;z>=E&&z!==E;z--){let O=(z!==C?Math.abs(m[z]):0)+(z!==E+1?Math.abs(m[z-1]):0);if(Math.abs(v[z])<=I*O){v[z]=0;break}}z===E?N=3:z===C-1?N=1:(N=2,E=z)}switch(E++,N){case 1:{let z=m[C-2];m[C-2]=0;for(let O=C-2;O>=E;O--){let q=po(v[O],z),j=v[O]/q,Q=z/q;if(v[O]=q,O!==E&&(z=-Q*m[O-1],m[O-1]=j*m[O-1]),u)for(let oe=0;oe<r;oe++)q=j*_.get(oe,O)+Q*_.get(oe,C-1),_.set(oe,C-1,-Q*_.get(oe,O)+j*_.get(oe,C-1)),_.set(oe,O,q)}break}case 2:{let z=m[E-1];m[E-1]=0;for(let O=E;O<C;O++){let q=po(v[O],z),j=v[O]/q,Q=z/q;if(v[O]=q,z=-Q*m[O],m[O]=j*m[O],l)for(let oe=0;oe<i;oe++)q=j*x.get(oe,O)+Q*x.get(oe,E-1),x.set(oe,E-1,-Q*x.get(oe,O)+j*x.get(oe,E-1)),x.set(oe,O,q)}break}case 3:{const z=Math.max(Math.abs(v[C-1]),Math.abs(v[C-2]),Math.abs(m[C-2]),Math.abs(v[E]),Math.abs(m[E])),O=v[C-1]/z,q=v[C-2]/z,j=m[C-2]/z,Q=v[E]/z,oe=m[E]/z,k=((q+O)*(q-O)+j*j)/2,W=O*j*(O*j);let G=0;(k!==0||W!==0)&&(k<0?G=0-Math.sqrt(k*k+W):G=Math.sqrt(k*k+W),G=W/(k+G));let ne=(Q+O)*(Q-O)+G,me=Q*oe;for(let _e=E;_e<C-1;_e++){let J=po(ne,me);J===0&&(J=Number.MIN_VALUE);let pe=ne/J,Me=me/J;if(_e!==E&&(m[_e-1]=J),ne=pe*v[_e]+Me*m[_e],m[_e]=pe*m[_e]-Me*v[_e],me=Me*v[_e+1],v[_e+1]=pe*v[_e+1],u)for(let de=0;de<r;de++)J=pe*_.get(de,_e)+Me*_.get(de,_e+1),_.set(de,_e+1,-Me*_.get(de,_e)+pe*_.get(de,_e+1)),_.set(de,_e,J);if(J=po(ne,me),J===0&&(J=Number.MIN_VALUE),pe=ne/J,Me=me/J,v[_e]=J,ne=pe*m[_e]+Me*v[_e+1],v[_e+1]=-Me*m[_e]+pe*v[_e+1],me=Me*m[_e+1],m[_e+1]=pe*m[_e+1],l&&_e<i-1)for(let de=0;de<i;de++)J=pe*x.get(de,_e)+Me*x.get(de,_e+1),x.set(de,_e+1,-Me*x.get(de,_e)+pe*x.get(de,_e+1)),x.set(de,_e,J)}m[C-2]=ne;break}case 4:{if(v[E]<=0&&(v[E]=v[E]<0?-v[E]:0,u))for(let z=0;z<=L;z++)_.set(z,E,-_.get(z,E));for(;E<L&&!(v[E]>=v[E+1]);){let z=v[E];if(v[E]=v[E+1],v[E+1]=z,u&&E<r-1)for(let O=0;O<r;O++)z=_.get(O,E+1),_.set(O,E+1,_.get(O,E)),_.set(O,E,z);if(l&&E<i-1)for(let O=0;O<i;O++)z=x.get(O,E+1),x.set(O,E+1,x.get(O,E)),x.set(O,E,z);E++}C--;break}}}if(f){let E=_;_=x,x=E}this.m=i,this.n=r,this.s=v,this.U=x,this.V=_}solve(e){let t=e,i=this.threshold,r=this.s.length,s=Oe.zeros(r,r);for(let p=0;p<r;p++)Math.abs(this.s[p])<=i?s.set(p,p,0):s.set(p,p,1/this.s[p]);let o=this.U,a=this.rightSingularVectors,l=a.mmul(s),u=a.rows,f=o.rows,d=Oe.zeros(u,f);for(let p=0;p<u;p++)for(let g=0;g<f;g++){let v=0;for(let x=0;x<r;x++)v+=l.get(p,x)*o.get(g,x);d.set(p,g,v)}return d.mmul(t)}solveForDiagonal(e){return this.solve(Oe.diag(e))}inverse(){let e=this.V,t=this.threshold,i=e.rows,r=e.columns,s=new Oe(i,this.s.length);for(let f=0;f<i;f++)for(let d=0;d<r;d++)Math.abs(this.s[d])>t&&s.set(f,d,e.get(f,d)/this.s[d]);let o=this.U,a=o.rows,l=o.columns,u=new Oe(i,a);for(let f=0;f<i;f++)for(let d=0;d<a;d++){let p=0;for(let g=0;g<l;g++)p+=s.get(f,g)*o.get(d,g);u.set(f,d,p)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,i=this.s;for(let r=0,s=i.length;r<s;r++)i[r]>e&&t++;return t}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Oe.diag(this.s)}}function O$(n,e=!1){return n=Tr.checkMatrix(n),e?new Vc(n).inverse():QD(n,Oe.eye(n.rows))}function QD(n,e,t=!1){return n=Tr.checkMatrix(n),e=Tr.checkMatrix(e),t?new Vc(n).solve(e):n.isSquare()?new ay(n).solve(e):new ME(n).solve(e)}function Dg(n){if(n=Oe.checkMatrix(n),n.isSquare()){if(n.columns===0)return 1;let e,t,i,r;if(n.columns===2)return e=n.get(0,0),t=n.get(0,1),i=n.get(1,0),r=n.get(1,1),e*r-t*i;if(n.columns===3){let s,o,a;return s=new Ng(n,[1,2],[1,2]),o=new Ng(n,[1,2],[0,2]),a=new Ng(n,[1,2],[0,1]),e=n.get(0,0),t=n.get(0,1),i=n.get(0,2),e*Dg(s)-t*Dg(o)+i*Dg(a)}else return new ay(n).determinant}else throw Error("determinant can only be calculated for a square matrix")}function k$(n,e){let t=[];for(let i=0;i<n;i++)i!==e&&t.push(i);return t}function F$(n,e,t,i=1e-9,r=1e-9){if(n>r)return new Array(e.rows+1).fill(0);{let s=e.addRow(t,[0]);for(let o=0;o<s.rows;o++)Math.abs(s.get(o,0))<i&&s.set(o,0,0);return s.to1DArray()}}function U$(n,e={}){const{thresholdValue:t=1e-9,thresholdError:i=1e-9}=e;n=Oe.checkMatrix(n);let r=n.rows,s=new Oe(r,r);for(let o=0;o<r;o++){let a=Oe.columnVector(n.getRow(o)),l=n.subMatrixRow(k$(r,o)).transpose(),f=new Vc(l).solve(a),d=Oe.sub(a,l.mmul(f)).abs().max();s.setRow(o,F$(d,f,o,t,i))}return s}function z$(n,e=Number.EPSILON){if(n=Oe.checkMatrix(n),n.isEmpty())return n.transpose();let t=new Vc(n,{autoTranspose:!0}),i=t.leftSingularVectors,r=t.rightSingularVectors,s=t.diagonal;for(let o=0;o<s.length;o++)Math.abs(s[o])>e?s[o]=1/s[o]:s[o]=0;return r.mmul(Oe.diag(s).mmul(i.transpose()))}function B$(n,e=n,t={}){n=new Oe(n);let i=!1;if(typeof e=="object"&&!Oe.isMatrix(e)&&!Zi.isAnyArray(e)?(t=e,e=n,i=!0):e=new Oe(e),n.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:r=!0}=t;r&&(n=n.center("column"),i||(e=e.center("column")));const s=n.transpose().mmul(e);for(let o=0;o<s.rows;o++)for(let a=0;a<s.columns;a++)s.set(o,a,s.get(o,a)*(1/(n.rows-1)));return s}function V$(n,e=n,t={}){n=new Oe(n);let i=!1;if(typeof e=="object"&&!Oe.isMatrix(e)&&!Zi.isAnyArray(e)?(t=e,e=n,i=!0):e=new Oe(e),n.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:r=!0,scale:s=!0}=t;r&&(n.center("column"),i||e.center("column")),s&&(n.scale("column"),i||e.scale("column"));const o=n.standardDeviation("column",{unbiased:!0}),a=i?o:e.standardDeviation("column",{unbiased:!0}),l=n.transpose().mmul(e);for(let u=0;u<l.rows;u++)for(let f=0;f<l.columns;f++)l.set(u,f,l.get(u,f)*(1/(o[u]*a[f]))*(1/(n.rows-1)));return l}class eO{constructor(e,t={}){const{assumeSymmetric:i=!1}=t;if(e=Tr.checkMatrix(e),!e.isSquare())throw new Error("Matrix is not a square matrix");if(e.isEmpty())throw new Error("Matrix must be non-empty");let r=e.columns,s=new Oe(r,r),o=new Float64Array(r),a=new Float64Array(r),l=e,u,f,d=!1;if(i?d=!0:d=e.isSymmetric(),d){for(u=0;u<r;u++)for(f=0;f<r;f++)s.set(u,f,l.get(u,f));H$(r,a,o,s),G$(r,a,o,s)}else{let p=new Oe(r,r),g=new Float64Array(r);for(f=0;f<r;f++)for(u=0;u<r;u++)p.set(u,f,l.get(u,f));W$(r,p,g,s),j$(r,a,o,s,p)}this.n=r,this.e=a,this.d=o,this.V=s}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e=this.n,t=this.e,i=this.d,r=new Oe(e,e),s,o;for(s=0;s<e;s++){for(o=0;o<e;o++)r.set(s,o,0);r.set(s,s,i[s]),t[s]>0?r.set(s,s+1,t[s]):t[s]<0&&r.set(s,s-1,t[s])}return r}}function H$(n,e,t,i){let r,s,o,a,l,u,f,d;for(l=0;l<n;l++)t[l]=i.get(n-1,l);for(a=n-1;a>0;a--){for(d=0,o=0,u=0;u<a;u++)d=d+Math.abs(t[u]);if(d===0)for(e[a]=t[a-1],l=0;l<a;l++)t[l]=i.get(a-1,l),i.set(a,l,0),i.set(l,a,0);else{for(u=0;u<a;u++)t[u]/=d,o+=t[u]*t[u];for(r=t[a-1],s=Math.sqrt(o),r>0&&(s=-s),e[a]=d*s,o=o-r*s,t[a-1]=r-s,l=0;l<a;l++)e[l]=0;for(l=0;l<a;l++){for(r=t[l],i.set(l,a,r),s=e[l]+i.get(l,l)*r,u=l+1;u<=a-1;u++)s+=i.get(u,l)*t[u],e[u]+=i.get(u,l)*r;e[l]=s}for(r=0,l=0;l<a;l++)e[l]/=o,r+=e[l]*t[l];for(f=r/(o+o),l=0;l<a;l++)e[l]-=f*t[l];for(l=0;l<a;l++){for(r=t[l],s=e[l],u=l;u<=a-1;u++)i.set(u,l,i.get(u,l)-(r*e[u]+s*t[u]));t[l]=i.get(a-1,l),i.set(a,l,0)}}t[a]=o}for(a=0;a<n-1;a++){if(i.set(n-1,a,i.get(a,a)),i.set(a,a,1),o=t[a+1],o!==0){for(u=0;u<=a;u++)t[u]=i.get(u,a+1)/o;for(l=0;l<=a;l++){for(s=0,u=0;u<=a;u++)s+=i.get(u,a+1)*i.get(u,l);for(u=0;u<=a;u++)i.set(u,l,i.get(u,l)-s*t[u])}}for(u=0;u<=a;u++)i.set(u,a+1,0)}for(l=0;l<n;l++)t[l]=i.get(n-1,l),i.set(n-1,l,0);i.set(n-1,n-1,1),e[0]=0}function G$(n,e,t,i){let r,s,o,a,l,u,f,d,p,g,v,x,_,m,w,S;for(o=1;o<n;o++)e[o-1]=e[o];e[n-1]=0;let b=0,R=0,A=Number.EPSILON;for(u=0;u<n;u++){for(R=Math.max(R,Math.abs(t[u])+Math.abs(e[u])),f=u;f<n&&!(Math.abs(e[f])<=A*R);)f++;if(f>u)do{for(r=t[u],d=(t[u+1]-r)/(2*e[u]),p=po(d,1),d<0&&(p=-p),t[u]=e[u]/(d+p),t[u+1]=e[u]*(d+p),g=t[u+1],s=r-t[u],o=u+2;o<n;o++)t[o]-=s;for(b=b+s,d=t[f],v=1,x=v,_=v,m=e[u+1],w=0,S=0,o=f-1;o>=u;o--)for(_=x,x=v,S=w,r=v*e[o],s=v*d,p=po(d,e[o]),e[o+1]=w*p,w=e[o]/p,v=d/p,d=v*t[o]-w*r,t[o+1]=s+w*(v*r+w*t[o]),l=0;l<n;l++)s=i.get(l,o+1),i.set(l,o+1,w*i.get(l,o)+v*s),i.set(l,o,v*i.get(l,o)-w*s);d=-w*S*_*m*e[u]/g,e[u]=w*d,t[u]=v*d}while(Math.abs(e[u])>A*R);t[u]=t[u]+b,e[u]=0}for(o=0;o<n-1;o++){for(l=o,d=t[o],a=o+1;a<n;a++)t[a]<d&&(l=a,d=t[a]);if(l!==o)for(t[l]=t[o],t[o]=d,a=0;a<n;a++)d=i.get(a,o),i.set(a,o,i.get(a,l)),i.set(a,l,d)}}function W$(n,e,t,i){let r=0,s=n-1,o,a,l,u,f,d,p;for(d=r+1;d<=s-1;d++){for(p=0,u=d;u<=s;u++)p=p+Math.abs(e.get(u,d-1));if(p!==0){for(l=0,u=s;u>=d;u--)t[u]=e.get(u,d-1)/p,l+=t[u]*t[u];for(a=Math.sqrt(l),t[d]>0&&(a=-a),l=l-t[d]*a,t[d]=t[d]-a,f=d;f<n;f++){for(o=0,u=s;u>=d;u--)o+=t[u]*e.get(u,f);for(o=o/l,u=d;u<=s;u++)e.set(u,f,e.get(u,f)-o*t[u])}for(u=0;u<=s;u++){for(o=0,f=s;f>=d;f--)o+=t[f]*e.get(u,f);for(o=o/l,f=d;f<=s;f++)e.set(u,f,e.get(u,f)-o*t[f])}t[d]=p*t[d],e.set(d,d-1,p*a)}}for(u=0;u<n;u++)for(f=0;f<n;f++)i.set(u,f,u===f?1:0);for(d=s-1;d>=r+1;d--)if(e.get(d,d-1)!==0){for(u=d+1;u<=s;u++)t[u]=e.get(u,d-1);for(f=d;f<=s;f++){for(a=0,u=d;u<=s;u++)a+=t[u]*i.get(u,f);for(a=a/t[d]/e.get(d,d-1),u=d;u<=s;u++)i.set(u,f,i.get(u,f)+a*t[u])}}}function j$(n,e,t,i,r){let s=n-1,o=0,a=n-1,l=Number.EPSILON,u=0,f=0,d=0,p=0,g=0,v=0,x=0,_=0,m,w,S,b,R,A,C,L,I,E,N,z,O,q,j;for(m=0;m<n;m++)for((m<o||m>a)&&(t[m]=r.get(m,m),e[m]=0),w=Math.max(m-1,0);w<n;w++)f=f+Math.abs(r.get(m,w));for(;s>=o;){for(b=s;b>o&&(v=Math.abs(r.get(b-1,b-1))+Math.abs(r.get(b,b)),v===0&&(v=f),!(Math.abs(r.get(b,b-1))<l*v));)b--;if(b===s)r.set(s,s,r.get(s,s)+u),t[s]=r.get(s,s),e[s]=0,s--,_=0;else if(b===s-1){if(C=r.get(s,s-1)*r.get(s-1,s),d=(r.get(s-1,s-1)-r.get(s,s))/2,p=d*d+C,x=Math.sqrt(Math.abs(p)),r.set(s,s,r.get(s,s)+u),r.set(s-1,s-1,r.get(s-1,s-1)+u),L=r.get(s,s),p>=0){for(x=d>=0?d+x:d-x,t[s-1]=L+x,t[s]=t[s-1],x!==0&&(t[s]=L-C/x),e[s-1]=0,e[s]=0,L=r.get(s,s-1),v=Math.abs(L)+Math.abs(x),d=L/v,p=x/v,g=Math.sqrt(d*d+p*p),d=d/g,p=p/g,w=s-1;w<n;w++)x=r.get(s-1,w),r.set(s-1,w,p*x+d*r.get(s,w)),r.set(s,w,p*r.get(s,w)-d*x);for(m=0;m<=s;m++)x=r.get(m,s-1),r.set(m,s-1,p*x+d*r.get(m,s)),r.set(m,s,p*r.get(m,s)-d*x);for(m=o;m<=a;m++)x=i.get(m,s-1),i.set(m,s-1,p*x+d*i.get(m,s)),i.set(m,s,p*i.get(m,s)-d*x)}else t[s-1]=L+d,t[s]=L+d,e[s-1]=x,e[s]=-x;s=s-2,_=0}else{if(L=r.get(s,s),I=0,C=0,b<s&&(I=r.get(s-1,s-1),C=r.get(s,s-1)*r.get(s-1,s)),_===10){for(u+=L,m=o;m<=s;m++)r.set(m,m,r.get(m,m)-L);v=Math.abs(r.get(s,s-1))+Math.abs(r.get(s-1,s-2)),L=I=.75*v,C=-.4375*v*v}if(_===30&&(v=(I-L)/2,v=v*v+C,v>0)){for(v=Math.sqrt(v),I<L&&(v=-v),v=L-C/((I-L)/2+v),m=o;m<=s;m++)r.set(m,m,r.get(m,m)-v);u+=v,L=I=C=.964}for(_=_+1,R=s-2;R>=b&&(x=r.get(R,R),g=L-x,v=I-x,d=(g*v-C)/r.get(R+1,R)+r.get(R,R+1),p=r.get(R+1,R+1)-x-g-v,g=r.get(R+2,R+1),v=Math.abs(d)+Math.abs(p)+Math.abs(g),d=d/v,p=p/v,g=g/v,!(R===b||Math.abs(r.get(R,R-1))*(Math.abs(p)+Math.abs(g))<l*(Math.abs(d)*(Math.abs(r.get(R-1,R-1))+Math.abs(x)+Math.abs(r.get(R+1,R+1))))));)R--;for(m=R+2;m<=s;m++)r.set(m,m-2,0),m>R+2&&r.set(m,m-3,0);for(S=R;S<=s-1&&(q=S!==s-1,S!==R&&(d=r.get(S,S-1),p=r.get(S+1,S-1),g=q?r.get(S+2,S-1):0,L=Math.abs(d)+Math.abs(p)+Math.abs(g),L!==0&&(d=d/L,p=p/L,g=g/L)),L!==0);S++)if(v=Math.sqrt(d*d+p*p+g*g),d<0&&(v=-v),v!==0){for(S!==R?r.set(S,S-1,-v*L):b!==R&&r.set(S,S-1,-r.get(S,S-1)),d=d+v,L=d/v,I=p/v,x=g/v,p=p/d,g=g/d,w=S;w<n;w++)d=r.get(S,w)+p*r.get(S+1,w),q&&(d=d+g*r.get(S+2,w),r.set(S+2,w,r.get(S+2,w)-d*x)),r.set(S,w,r.get(S,w)-d*L),r.set(S+1,w,r.get(S+1,w)-d*I);for(m=0;m<=Math.min(s,S+3);m++)d=L*r.get(m,S)+I*r.get(m,S+1),q&&(d=d+x*r.get(m,S+2),r.set(m,S+2,r.get(m,S+2)-d*g)),r.set(m,S,r.get(m,S)-d),r.set(m,S+1,r.get(m,S+1)-d*p);for(m=o;m<=a;m++)d=L*i.get(m,S)+I*i.get(m,S+1),q&&(d=d+x*i.get(m,S+2),i.set(m,S+2,i.get(m,S+2)-d*g)),i.set(m,S,i.get(m,S)-d),i.set(m,S+1,i.get(m,S+1)-d*p)}}}if(f!==0){for(s=n-1;s>=0;s--)if(d=t[s],p=e[s],p===0)for(b=s,r.set(s,s,1),m=s-1;m>=0;m--){for(C=r.get(m,m)-d,g=0,w=b;w<=s;w++)g=g+r.get(m,w)*r.get(w,s);if(e[m]<0)x=C,v=g;else if(b=m,e[m]===0?r.set(m,s,C!==0?-g/C:-g/(l*f)):(L=r.get(m,m+1),I=r.get(m+1,m),p=(t[m]-d)*(t[m]-d)+e[m]*e[m],A=(L*v-x*g)/p,r.set(m,s,A),r.set(m+1,s,Math.abs(L)>Math.abs(x)?(-g-C*A)/L:(-v-I*A)/x)),A=Math.abs(r.get(m,s)),l*A*A>1)for(w=m;w<=s;w++)r.set(w,s,r.get(w,s)/A)}else if(p<0)for(b=s-1,Math.abs(r.get(s,s-1))>Math.abs(r.get(s-1,s))?(r.set(s-1,s-1,p/r.get(s,s-1)),r.set(s-1,s,-(r.get(s,s)-d)/r.get(s,s-1))):(j=Xm(0,-r.get(s-1,s),r.get(s-1,s-1)-d,p),r.set(s-1,s-1,j[0]),r.set(s-1,s,j[1])),r.set(s,s-1,0),r.set(s,s,1),m=s-2;m>=0;m--){for(E=0,N=0,w=b;w<=s;w++)E=E+r.get(m,w)*r.get(w,s-1),N=N+r.get(m,w)*r.get(w,s);if(C=r.get(m,m)-d,e[m]<0)x=C,g=E,v=N;else if(b=m,e[m]===0?(j=Xm(-E,-N,C,p),r.set(m,s-1,j[0]),r.set(m,s,j[1])):(L=r.get(m,m+1),I=r.get(m+1,m),z=(t[m]-d)*(t[m]-d)+e[m]*e[m]-p*p,O=(t[m]-d)*2*p,z===0&&O===0&&(z=l*f*(Math.abs(C)+Math.abs(p)+Math.abs(L)+Math.abs(I)+Math.abs(x))),j=Xm(L*g-x*E+p*N,L*v-x*N-p*E,z,O),r.set(m,s-1,j[0]),r.set(m,s,j[1]),Math.abs(L)>Math.abs(x)+Math.abs(p)?(r.set(m+1,s-1,(-E-C*r.get(m,s-1)+p*r.get(m,s))/L),r.set(m+1,s,(-N-C*r.get(m,s)-p*r.get(m,s-1))/L)):(j=Xm(-g-I*r.get(m,s-1),-v-I*r.get(m,s),x,p),r.set(m+1,s-1,j[0]),r.set(m+1,s,j[1]))),A=Math.max(Math.abs(r.get(m,s-1)),Math.abs(r.get(m,s))),l*A*A>1)for(w=m;w<=s;w++)r.set(w,s-1,r.get(w,s-1)/A),r.set(w,s,r.get(w,s)/A)}for(m=0;m<n;m++)if(m<o||m>a)for(w=m;w<n;w++)i.set(m,w,r.get(m,w));for(w=n-1;w>=o;w--)for(m=o;m<=a;m++){for(x=0,S=o;S<=Math.min(w,a);S++)x=x+i.get(m,S)*r.get(S,w);i.set(m,w,x)}}}function Xm(n,e,t,i){let r,s;return Math.abs(t)>Math.abs(i)?(r=i/t,s=t+r*i,[(n+r*e)/s,(e-r*n)/s]):(r=t/i,s=i+r*t,[(r*n+e)/s,(r*e-n)/s])}class tO{constructor(e){if(e=Tr.checkMatrix(e),!e.isSymmetric())throw new Error("Matrix is not symmetric");let t=e,i=t.rows,r=new Oe(i,i),s=!0,o,a,l;for(a=0;a<i;a++){let u=0;for(l=0;l<a;l++){let f=0;for(o=0;o<l;o++)f+=r.get(l,o)*r.get(a,o);f=(t.get(a,l)-f)/r.get(l,l),r.set(a,l,f),u=u+f*f}for(u=t.get(a,a)-u,s&=u>0,r.set(a,a,Math.sqrt(Math.max(u,0))),l=a+1;l<i;l++)r.set(a,l,0)}this.L=r,this.positiveDefinite=!!s}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=Tr.checkMatrix(e);let t=this.L,i=t.rows;if(e.rows!==i)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let r=e.columns,s=e.clone(),o,a,l;for(l=0;l<i;l++)for(a=0;a<r;a++){for(o=0;o<l;o++)s.set(l,a,s.get(l,a)-s.get(o,a)*t.get(l,o));s.set(l,a,s.get(l,a)/t.get(l,l))}for(l=i-1;l>=0;l--)for(a=0;a<r;a++){for(o=l+1;o<i;o++)s.set(l,a,s.get(l,a)-s.get(o,a)*t.get(o,l));s.set(l,a,s.get(l,a)/t.get(l,l))}return s}get lowerTriangularMatrix(){return this.L}}class nO{constructor(e,t={}){e=Tr.checkMatrix(e);let{Y:i}=t;const{scaleScores:r=!1,maxIterations:s=1e3,terminationCriteria:o=1e-10}=t;let a;if(i){if(Zi.isAnyArray(i)&&typeof i[0]=="number"?i=Oe.columnVector(i):i=Tr.checkMatrix(i),i.rows!==e.rows)throw new Error("Y should have the same number of rows as X");a=i.getColumnVector(0)}else a=e.getColumnVector(0);let l=1,u,f,d,p;for(let g=0;g<s&&l>o;g++)d=e.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0)),d=d.div(d.norm()),u=e.mmul(d).div(d.transpose().mmul(d).get(0,0)),g>0&&(l=u.clone().sub(p).pow(2).sum()),p=u.clone(),i?(f=i.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),f=f.div(f.norm()),a=i.mmul(f).div(f.transpose().mmul(f).get(0,0))):a=u;if(i){let g=e.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0));g=g.div(g.norm());let v=e.clone().sub(u.clone().mmul(g.transpose())),x=a.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),_=i.clone().sub(u.clone().mulS(x.get(0,0)).mmul(f.transpose()));this.t=u,this.p=g.transpose(),this.w=d.transpose(),this.q=f,this.u=a,this.s=u.transpose().mmul(u),this.xResidual=v,this.yResidual=_,this.betas=x}else this.w=d.transpose(),this.s=u.transpose().mmul(u).sqrt(),r?this.t=u.clone().div(this.s.get(0,0)):this.t=u,this.xResidual=e.sub(u.mmul(d.transpose()))}}Nt.AbstractMatrix=xt;Nt.CHO=tO;Nt.CholeskyDecomposition=tO;Nt.DistanceMatrix=oy;Nt.EVD=eO;Nt.EigenvalueDecomposition=eO;Nt.LU=ay;Nt.LuDecomposition=ay;var iO=Nt.Matrix=Oe;Nt.MatrixColumnSelectionView=A$;Nt.MatrixColumnView=T$;Nt.MatrixFlipColumnView=C$;Nt.MatrixFlipRowView=R$;Nt.MatrixRowSelectionView=I$;Nt.MatrixRowView=P$;Nt.MatrixSelectionView=Ng;Nt.MatrixSubView=L$;Nt.MatrixTransposeView=N$;Nt.NIPALS=nO;Nt.Nipals=nO;Nt.QR=ME;Nt.QrDecomposition=ME;Nt.SVD=Vc;Nt.SingularValueDecomposition=Vc;Nt.SymmetricMatrix=wl;Nt.WrapperMatrix1D=JD;Nt.WrapperMatrix2D=Tr;Nt.correlation=V$;Nt.covariance=B$;var iP=Nt.default=Oe;Nt.determinant=Dg;var X$=Nt.inverse=O$;Nt.linearDependencies=U$;Nt.pseudoInverse=z$;Nt.solve=QD;Nt.wrap=D$;const qv=iO;iP.Matrix&&iP.Matrix;const $$=X$;function q$(n,e,t,i,r){const s=t.length,o=n.x.length;let a=new Array(s);for(let l=0;l<s;l++){a[l]=new Array(o);let u=t.slice();u[l]+=i;let f=r(u);for(let d=0;d<o;d++)a[l][d]=e[d]-f(n.x[d])}return new qv(a)}function Y$(n,e){const t=n.x.length;let i=new Array(t);for(let r=0;r<t;r++)i[r]=[n.y[r]-e[r]];return new qv(i)}function Z$(n,e,t,i,r){let s=t*i*i,o=qv.eye(e.length,e.length,s);const a=r(e);let l=new Float64Array(n.x.length);for(let p=0;p<n.x.length;p++)l[p]=a(n.x[p]);let u=q$(n,l,e,i,r),f=Y$(n,l),d=$$(o.add(u.mmul(u.transpose())));return e=new qv([e]),e=e.sub(d.mmul(u).mmul(f).mul(i).transpose()),e.to1DArray()}function K$(n,e,t={}){let{maxIterations:i=100,gradientDifference:r=.1,damping:s=0,errorTolerance:o=.01,minValues:a,maxValues:l,initialValues:u}=t;if(s<=0)throw new Error("The damping option must be a positive number");if(!n.x||!n.y)throw new Error("The data parameter must have x and y elements");if(!Zx(n.x)||n.x.length<2||!Zx(n.y)||n.y.length<2)throw new Error("The data parameter elements must be an array with more than 2 points");if(n.x.length!==n.y.length)throw new Error("The data parameter elements must have the same size");let f=u||new Array(e.length).fill(1),d=f.length;if(l=l||new Array(d).fill(Number.MAX_SAFE_INTEGER),a=a||new Array(d).fill(Number.MIN_SAFE_INTEGER),l.length!==a.length)throw new Error("minValues and maxValues must be the same size");if(!Zx(f))throw new Error("initialValues must be an array");let p=QR(n,f,e),g=p<=o,v;for(v=0;v<i&&!g;v++){f=Z$(n,f,s,r,e);for(let x=0;x<d;x++)f[x]=Math.min(Math.max(a[x],f[x]),l[x]);if(p=QR(n,f,e),isNaN(p))break;g=p<=o}return{parameterValues:f,parameterError:p,iterations:v}}const J$=Object.freeze(Object.defineProperty({__proto__:null,default:K$},Symbol.toStringTag,{value:"Module"})),Q$=u1(J$);var rP=Ft&&Ft.__awaiter||function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(u){try{l(i.next(u))}catch(f){s(f)}}function a(u){try{l(i.throw(u))}catch(f){s(f)}}function l(u){u.done?r(u.value):new t(function(f){f(u.value)}).then(o,a)}l((i=i.apply(n,e||[])).next())})},sP=Ft&&Ft.__generator||function(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(f){return l([u,f])}}function l(u){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,r&&(s=u[0]&2?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,r=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(f){u=[6,f],r=0}finally{i=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},a1=Ft&&Ft.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return s},oP=Ft&&Ft.__spread||function(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(a1(arguments[e]));return n},bd=Ft&&Ft.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e},eq=Ft&&Ft.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Oo,"__esModule",{value:!0});var tq=bd(Ys),Mn=bd(rr),$m=bd(Bc),aP=bd(zl),In=bd(Nn),nq=eq(Q$),lP=1e-5,qm=.001,iq=function(){function n(e){e===void 0&&(e={});var t=this;this.learningRate=1,this.localConnectivity=1,this.minDist=.1,this.nComponents=2,this.nEpochs=0,this.nNeighbors=15,this.negativeSampleRate=5,this.random=Math.random,this.repulsionStrength=1,this.setOpMixRatio=1,this.spread=1,this.transformQueueSize=4,this.targetMetric="categorical",this.targetWeight=.5,this.targetNNeighbors=this.nNeighbors,this.distanceFn=rO,this.isInitialized=!1,this.rpForest=[],this.embedding=[],this.optimizationState=new sq;var i=function(r){e[r]!==void 0&&(t[r]=e[r])};i("distanceFn"),i("learningRate"),i("localConnectivity"),i("minDist"),i("nComponents"),i("nEpochs"),i("nNeighbors"),i("negativeSampleRate"),i("random"),i("repulsionStrength"),i("setOpMixRatio"),i("spread"),i("transformQueueSize")}return n.prototype.fit=function(e){return this.initializeFit(e),this.optimizeLayout(),this.embedding},n.prototype.fitAsync=function(e,t){return t===void 0&&(t=function(){return!0}),rP(this,void 0,void 0,function(){return sP(this,function(i){switch(i.label){case 0:return this.initializeFit(e),[4,this.optimizeLayoutAsync(t)];case 1:return i.sent(),[2,this.embedding]}})})},n.prototype.setSupervisedProjection=function(e,t){t===void 0&&(t={}),this.Y=e,this.targetMetric=t.targetMetric||this.targetMetric,this.targetWeight=t.targetWeight||this.targetWeight,this.targetNNeighbors=t.targetNNeighbors||this.targetNNeighbors},n.prototype.setPrecomputedKNN=function(e,t){this.knnIndices=e,this.knnDistances=t},n.prototype.initializeFit=function(e){if(e.length<=this.nNeighbors)throw new Error("Not enough data points ("+e.length+") to create nNeighbors: "+this.nNeighbors+".  Add more data points or adjust the configuration.");if(this.X===e&&this.isInitialized)return this.getNEpochs();if(this.X=e,!this.knnIndices&&!this.knnDistances){var t=this.nearestNeighbors(e);this.knnIndices=t.knnIndices,this.knnDistances=t.knnDistances}this.graph=this.fuzzySimplicialSet(e,this.nNeighbors,this.setOpMixRatio),this.makeSearchFns(),this.searchGraph=this.makeSearchGraph(e),this.processGraphForSupervisedProjection();var i=this.initializeSimplicialSetEmbedding(),r=i.head,s=i.tail,o=i.epochsPerSample;return this.optimizationState.head=r,this.optimizationState.tail=s,this.optimizationState.epochsPerSample=o,this.initializeOptimization(),this.prepareForOptimizationLoop(),this.isInitialized=!0,this.getNEpochs()},n.prototype.makeSearchFns=function(){var e=$m.makeInitializations(this.distanceFn),t=e.initFromTree,i=e.initFromRandom;this.initFromTree=t,this.initFromRandom=i,this.search=$m.makeInitializedNNSearch(this.distanceFn)},n.prototype.makeSearchGraph=function(e){for(var t=this.knnIndices,i=this.knnDistances,r=[e.length,e.length],s=new Mn.SparseMatrix([],[],[],r),o=0;o<t.length;o++)for(var a=t[o],l=i[o],u=0;u<a.length;u++){var f=a[u],d=l[u];d>0&&s.set(o,f,d)}var p=Mn.transpose(s);return Mn.maximum(s,p)},n.prototype.transform=function(e){var t=this,i=this.X;if(i===void 0||i.length===0)throw new Error("No data has been fit.");var r=Math.floor(this.nNeighbors*this.transformQueueSize);r=Math.min(i.length,r);var s=$m.initializeSearch(this.rpForest,i,e,r,this.initFromRandom,this.initFromTree,this.random),o=this.search(i,this.searchGraph,s,e),a=tq.deheapSort(o),l=a.indices,u=a.weights;l=l.map(function(j){return j.slice(0,t.nNeighbors)}),u=u.map(function(j){return j.slice(0,t.nNeighbors)});var f=Math.max(0,this.localConnectivity-1),d=this.smoothKNNDistance(u,this.nNeighbors,f),p=d.sigmas,g=d.rhos,v=this.computeMembershipStrengths(l,u,p,g),x=v.rows,_=v.cols,m=v.vals,w=[e.length,i.length],S=new Mn.SparseMatrix(x,_,m,w),b=Mn.normalize(S,"l1"),R=Mn.getCSR(b),A=e.length,C=In.reshape2d(R.indices,A,this.nNeighbors),L=In.reshape2d(R.values,A,this.nNeighbors),I=lO(C,L,this.embedding),E=this.nEpochs?this.nEpochs/3:S.nRows<=1e4?100:30,N=S.getValues().reduce(function(j,Q){return Q>j?Q:j},0);S=S.map(function(j){return j<N/E?0:j}),S=Mn.eliminateZeros(S);var z=this.makeEpochsPerSample(S.getValues(),E),O=S.getRows(),q=S.getCols();return this.assignOptimizationStateParameters({headEmbedding:I,tailEmbedding:this.embedding,head:O,tail:q,currentEpoch:0,nEpochs:E,nVertices:S.getDims()[1],epochsPerSample:z}),this.prepareForOptimizationLoop(),this.optimizeLayout()},n.prototype.processGraphForSupervisedProjection=function(){var e=this,t=e.Y,i=e.X;if(t){if(t.length!==i.length)throw new Error("Length of X and y must be equal");if(this.targetMetric==="categorical"){var r=this.targetWeight<1,s=r?2.5*(1/(1-this.targetWeight)):1e12;this.graph=this.categoricalSimplicialSetIntersection(this.graph,t,s)}}},n.prototype.step=function(){var e=this.optimizationState.currentEpoch;return e<this.getNEpochs()&&this.optimizeLayoutStep(e),this.optimizationState.currentEpoch},n.prototype.getEmbedding=function(){return this.embedding},n.prototype.nearestNeighbors=function(e){var t=this,i=t.distanceFn,r=t.nNeighbors,s=function(v){return Math.log(v)/Math.log(2)},o=$m.makeNNDescent(i,this.random),a=function(v){return v===.5?0:Math.round(v)},l=5+Math.floor(a(Math.pow(e.length,.5)/20)),u=Math.max(5,Math.floor(Math.round(s(e.length))));this.rpForest=aP.makeForest(e,r,l,this.random);var f=aP.makeLeafArray(this.rpForest),d=o(e,f,r,u),p=d.indices,g=d.weights;return{knnIndices:p,knnDistances:g}},n.prototype.fuzzySimplicialSet=function(e,t,i){i===void 0&&(i=1);var r=this,s=r.knnIndices,o=s===void 0?[]:s,a=r.knnDistances,l=a===void 0?[]:a,u=r.localConnectivity,f=this.smoothKNNDistance(l,t,u),d=f.sigmas,p=f.rhos,g=this.computeMembershipStrengths(o,l,d,p),v=g.rows,x=g.cols,_=g.vals,m=[e.length,e.length],w=new Mn.SparseMatrix(v,x,_,m),S=Mn.transpose(w),b=Mn.pairwiseMultiply(w,S),R=Mn.subtract(Mn.add(w,S),b),A=Mn.multiplyScalar(R,i),C=Mn.multiplyScalar(b,1-i),L=Mn.add(A,C);return L},n.prototype.categoricalSimplicialSetIntersection=function(e,t,i,r){r===void 0&&(r=1);var s=oO(e,t,r,i);return s=Mn.eliminateZeros(s),aO(s)},n.prototype.smoothKNNDistance=function(e,t,i,r,s){i===void 0&&(i=1),r===void 0&&(r=64),s===void 0&&(s=1);for(var o=Math.log(t)/Math.log(2)*s,a=In.zeros(e.length),l=In.zeros(e.length),u=0;u<e.length;u++){var f=0,d=1/0,p=1,g=e[u],v=g.filter(function(C){return C>0});if(v.length>=i){var x=Math.floor(i),_=i-x;x>0?(a[u]=v[x-1],_>lP&&(a[u]+=_*(v[x]-v[x-1]))):a[u]=_*v[0]}else v.length>0&&(a[u]=In.max(v));for(var m=0;m<r;m++){for(var w=0,S=1;S<e[u].length;S++){var b=e[u][S]-a[u];b>0?w+=Math.exp(-(b/p)):w+=1}if(Math.abs(w-o)<lP)break;w>o?(d=p,p=(f+d)/2):(f=p,d===1/0?p*=2:p=(f+d)/2)}if(l[u]=p,a[u]>0){var R=In.mean(g);l[u]<qm*R&&(l[u]=qm*R)}else{var A=In.mean(e.map(In.mean));l[u]<qm*A&&(l[u]=qm*A)}}return{sigmas:l,rhos:a}},n.prototype.computeMembershipStrengths=function(e,t,i,r){for(var s=e.length,o=e[0].length,a=In.zeros(s*o),l=In.zeros(s*o),u=In.zeros(s*o),f=0;f<s;f++)for(var d=0;d<o;d++){var p=0;e[f][d]!==-1&&(e[f][d]===f?p=0:t[f][d]-r[f]<=0?p=1:p=Math.exp(-((t[f][d]-r[f])/i[f])),a[f*o+d]=f,l[f*o+d]=e[f][d],u[f*o+d]=p)}return{rows:a,cols:l,vals:u}},n.prototype.initializeSimplicialSetEmbedding=function(){for(var e=this,t=this.getNEpochs(),i=this.nComponents,r=this.graph.getValues(),s=0,o=0;o<r.length;o++){var a=r[o];s<r[o]&&(s=a)}var l=this.graph.map(function(x){return x<s/t?0:x});this.embedding=In.zeros(l.nRows).map(function(){return In.zeros(i).map(function(){return In.tauRand(e.random)*20+-10})});for(var u=[],f=[],d=[],p=l.getAll(),o=0;o<p.length;o++){var g=p[o];g.value&&(u.push(g.value),d.push(g.row),f.push(g.col))}var v=this.makeEpochsPerSample(u,t);return{head:f,tail:d,epochsPerSample:v}},n.prototype.makeEpochsPerSample=function(e,t){var i=In.filled(e.length,-1),r=In.max(e),s=e.map(function(o){return o/r*t});return s.forEach(function(o,a){o>0&&(i[a]=t/s[a])}),i},n.prototype.assignOptimizationStateParameters=function(e){Object.assign(this.optimizationState,e)},n.prototype.prepareForOptimizationLoop=function(){var e=this,t=e.repulsionStrength,i=e.learningRate,r=e.negativeSampleRate,s=this.optimizationState,o=s.epochsPerSample,a=s.headEmbedding,l=s.tailEmbedding,u=a[0].length,f=a.length===l.length,d=o.map(function(v){return v/r}),p=oP(d),g=oP(o);this.assignOptimizationStateParameters({epochOfNextSample:g,epochOfNextNegativeSample:p,epochsPerNegativeSample:d,moveOther:f,initialAlpha:i,alpha:i,gamma:t,dim:u})},n.prototype.initializeOptimization=function(){var e=this.embedding,t=this.embedding,i=this.optimizationState,r=i.head,s=i.tail,o=i.epochsPerSample,a=this.getNEpochs(),l=this.graph.nCols,u=sO(this.spread,this.minDist),f=u.a,d=u.b;this.assignOptimizationStateParameters({headEmbedding:e,tailEmbedding:t,head:r,tail:s,epochsPerSample:o,a:f,b:d,nEpochs:a,nVertices:l})},n.prototype.optimizeLayoutStep=function(e){for(var t=this.optimizationState,i=t.head,r=t.tail,s=t.headEmbedding,o=t.tailEmbedding,a=t.epochsPerSample,l=t.epochOfNextSample,u=t.epochOfNextNegativeSample,f=t.epochsPerNegativeSample,d=t.moveOther,p=t.initialAlpha,g=t.alpha,v=t.gamma,x=t.a,_=t.b,m=t.dim,w=t.nEpochs,S=t.nVertices,b=4,R=0;R<a.length;R++)if(!(l[R]>e)){var A=i[R],C=r[R],L=s[A],I=o[C],E=cP(L,I),N=0;E>0&&(N=-2*x*_*Math.pow(E,_-1),N/=x*Math.pow(E,_)+1);for(var z=0;z<m;z++){var O=uP(N*(L[z]-I[z]),b);L[z]+=O*g,d&&(I[z]+=-O*g)}l[R]+=a[R];for(var q=Math.floor((e-u[R])/f[R]),j=0;j<q;j++){var Q=In.tauRandInt(S,this.random),oe=o[Q],k=cP(L,oe),W=0;if(k>0)W=2*v*_,W/=(.001+k)*(x*Math.pow(k,_)+1);else if(A===Q)continue;for(var z=0;z<m;z++){var O=4;W>0&&(O=uP(W*(L[z]-oe[z]),b)),L[z]+=O*g}}u[R]+=q*f[R]}return t.alpha=p*(1-e/w),t.currentEpoch+=1,s},n.prototype.optimizeLayoutAsync=function(e){var t=this;return e===void 0&&(e=function(){return!0}),new Promise(function(i,r){var s=function(){return rP(t,void 0,void 0,function(){var o,a,l,u,f,d;return sP(this,function(p){try{if(o=this.optimizationState,a=o.nEpochs,l=o.currentEpoch,this.embedding=this.optimizeLayoutStep(l),u=this.optimizationState.currentEpoch,f=e(u)===!1,d=u===a,!f&&!d)setTimeout(function(){return s()},0);else return[2,i(d)]}catch(g){r(g)}return[2]})})};setTimeout(function(){return s()},0)})},n.prototype.optimizeLayout=function(e){e===void 0&&(e=function(){return!0});for(var t=!1,i=[];!t;){var r=this.optimizationState,s=r.nEpochs,o=r.currentEpoch;i=this.optimizeLayoutStep(o);var a=this.optimizationState.currentEpoch,l=e(a)===!1;t=a===s||l}return i},n.prototype.getNEpochs=function(){var e=this.graph;if(this.nEpochs>0)return this.nEpochs;var t=e.nRows;return t<=2500?500:t<=5e3?400:t<=7500?300:200},n}();Oo.UMAP=iq;function rO(n,e){for(var t=0,i=0;i<n.length;i++)t+=Math.pow(n[i]-e[i],2);return Math.sqrt(t)}Oo.euclidean=rO;function rq(n,e){for(var t=0,i=0,r=0,s=0;s<n.length;s++)t+=n[s]*e[s],i+=Math.pow(n[s],2),r+=Math.pow(e[s],2);return i===0&&r===0?0:i===0||r===0?1:1-t/Math.sqrt(i*r)}Oo.cosine=rq;var sq=function(){function n(){this.currentEpoch=0,this.headEmbedding=[],this.tailEmbedding=[],this.head=[],this.tail=[],this.epochsPerSample=[],this.epochOfNextSample=[],this.epochOfNextNegativeSample=[],this.epochsPerNegativeSample=[],this.moveOther=!0,this.initialAlpha=1,this.alpha=1,this.gamma=1,this.a=1.5769434603113077,this.b=.8950608779109733,this.dim=2,this.nEpochs=500,this.nVertices=0}return n}();function uP(n,e){return n>e?e:n<-e?-e:n}function cP(n,e){for(var t=0,i=0;i<n.length;i++)t+=Math.pow(n[i]-e[i],2);return t}function sO(n,e){var t=function(p){var g=a1(p,2),v=g[0],x=g[1];return function(_){return 1/(1+v*Math.pow(_,2*x))}},i=In.linear(0,n*3,300).map(function(p){return p<e?1:p}),r=In.zeros(i.length).map(function(p,g){var v=i[g]>=e;return v?Math.exp(-(i[g]-e)/n):p}),s=[.5,.5],o={x:i,y:r},a={damping:1.5,initialValues:s,gradientDifference:.1,maxIterations:100,errorTolerance:.01},l=nq.default(o,t,a).parameterValues,u=a1(l,2),f=u[0],d=u[1];return{a:f,b:d}}Oo.findABParams=sO;function oO(n,e,t,i){return t===void 0&&(t=1),i===void 0&&(i=5),n.map(function(r,s,o){return e[s]===-1||e[o]===-1?r*Math.exp(-t):e[s]!==e[o]?r*Math.exp(-i):r})}Oo.fastIntersection=oO;function aO(n){n=Mn.normalize(n,"max");var e=Mn.transpose(n),t=Mn.pairwiseMultiply(e,n);return n=Mn.add(n,Mn.subtract(e,t)),Mn.eliminateZeros(n)}Oo.resetLocalConnectivity=aO;function lO(n,e,t){for(var i=In.zeros(n.length).map(function(l){return In.zeros(t[0].length)}),r=0;r<n.length;r++)for(var s=0;s<n[0].length;s++)for(var o=0;o<t[0].length;o++){var a=n[r][s];i[r][o]+=e[r][s]*t[a][o]}return i}Oo.initTransform=lO;Object.defineProperty(BD,"__esModule",{value:!0});var oq=Oo,aq=BD.UMAP=oq.UMAP;class lq{constructor(){wp(this,"openai");wp(this,"theUMAP")}initOpenAi(){const e=document.getElementById("llm-key").value;if(e=="")throw alert("You need to provide an OpenAI API key"),"You need to provide an OpenAI API key";this.openai||(this.openai=new Hn({apiKey:e,dangerouslyAllowBrowser:!0}))}async calculateEmbedding(e){return this.openai?(await this.openai.embeddings.create({model:"text-embedding-3-large",input:e})).data[0].embedding:[]}async initializeProjection(e){this.initOpenAi();const t=await Promise.all(e.map(i=>this.calculateEmbedding(i)));return this.theUMAP=new aq({nNeighbors:1,nComponents:3,minDist:.5}),this.theUMAP.fit(t)}async calculateProjection(e){if(this.initOpenAi(),!this.theUMAP)return[0,0,0];const t=await this.calculateEmbedding(e);return this.theUMAP.transform([t])[0]}}const uq=()=>We.jsxs("div",{className:"ItemOpenAiKey",children:["OpenAI API key    ",We.jsx("input",{id:"llm-key",style:{width:"auto"},type:"password"})]});function cq(n,e){return Math.hypot(n[0]-e[0],n[1]-e[1],n[2]-e[2])}function hq(){let[n]=Y.useState(new lq);const[e,t]=Y.useState(-1),[i,r]=Y.useState([-1,-1,-1]),[s,o]=Y.useState([]),[a,l]=Y.useState([0,0,0]),u=async p=>{const g=await n.calculateProjection(p);l(g);let v=[];s.forEach(x=>{v.push({index:x.index,distance:cq(g,x.position)})}),v.sort((x,_)=>x.distance-_.distance),r(v.map(x=>x.index).slice(0,3))},f=p=>{d(p)},d=async p=>{r([-1,-1,-1]);const g=await n.initializeProjection(p.map(v=>v.label));p.map(v=>{v.position=g[v.index]}),o(p.slice())};return We.jsxs(We.Fragment,{children:[We.jsx(uq,{}),We.jsxs("div",{id:"main-div",children:[We.jsxs("div",{id:"left-pane",children:[We.jsx(x7,{conceptCategories:E7,concepts:s,setConcepts:f}),We.jsx(w7,{onChangeMyConcept:u})]}),We.jsx("div",{id:"right-pane",children:We.jsx(MW,{concepts:s,spherePos:a,onHoverConcept:t,onSelectConcept:t})})]}),!1,i[0]!=-1&&We.jsx(S7,{text:`1. ${s[i[0]].label}
2. ${s[i[1]].label}
3. ${s[i[2]].label}`})]})}Kx.createRoot(document.getElementById("root")).render(We.jsx(wP.StrictMode,{children:We.jsx(hq,{})}));
